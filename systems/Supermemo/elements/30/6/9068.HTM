<H5 class=subsubsection style="WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); TEXT-INDENT: 0px; LINE-HEIGHT: normal; FONT-STYLE: normal; FONT-FAMILY: Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; FONT-VARIANT: normal; orphans: auto; widows: auto; -webkit-text-stroke-width: 0px">3.3.2.8 Writing relocations</H5>
<P style="WORD-SPACING: 0px; FONT: medium Simsun; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); TEXT-INDENT: 0px; WHITE-SPACE: normal; LETTER-SPACING: normal; orphans: auto; widows: auto; -webkit-text-stroke-width: 0px">To write relocations, the back end steps though the canonical relocation table and create an<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>internal_reloc</CODE>. The symbol index to use is removed from the<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>offset</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>field in the symbol table supplied. The address comes directly from the sum of the section base address and the relocation offset; the type is dug directly from the howto field. Then the<CODE>internal_reloc</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>is swapped into the shape of an<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>external_reloc</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>and written out to disk.