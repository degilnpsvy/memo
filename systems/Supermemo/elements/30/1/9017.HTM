<H3 class=section style="WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); TEXT-INDENT: 0px; LINE-HEIGHT: normal; FONT-STYLE: normal; FONT-FAMILY: Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; FONT-VARIANT: normal; orphans: auto; widows: auto; -webkit-text-stroke-width: 0px">2.16 File caching</H3>
<P style="WORD-SPACING: 0px; FONT: medium Simsun; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); TEXT-INDENT: 0px; WHITE-SPACE: normal; LETTER-SPACING: normal; orphans: auto; widows: auto; -webkit-text-stroke-width: 0px">The file caching mechanism is embedded within BFD and allows the application to open as many BFDs as it wants without regard to the underlying operating system's file descriptor limit (often as low as 20 open files). The module in<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>cache.c</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>maintains a least recently used list of<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>BFD_CACHE_MAX_OPEN</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>files, and exports the name<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>bfd_cache_lookup</CODE>, which runs around and makes sure that the required BFD is open. If not, then it chooses a file to close, closes it and opens the one wanted, returning its file handle.