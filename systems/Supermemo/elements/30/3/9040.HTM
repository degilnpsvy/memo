<H4 class=subsection style="FONT-SIZE: medium; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); TEXT-INDENT: 0px; LINE-HEIGHT: normal; FONT-STYLE: normal; FONT-FAMILY: Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; FONT-VARIANT: normal; orphans: auto; widows: auto; -webkit-text-stroke-width: 0px">2.18.2 Looking up or entering a string</H4>
<P style="WORD-SPACING: 0px; FONT: medium Simsun; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); TEXT-INDENT: 0px; WHITE-SPACE: normal; LETTER-SPACING: normal; orphans: auto; widows: auto; -webkit-text-stroke-width: 0px"><A name=index-bfd_005fhash_005flookup-1932></A>The function<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>bfd_hash_lookup</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>is used both to look up a string in the hash table and to create a new entry.</P>
<P style="WORD-SPACING: 0px; FONT: medium Simsun; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); TEXT-INDENT: 0px; WHITE-SPACE: normal; LETTER-SPACING: normal; orphans: auto; widows: auto; -webkit-text-stroke-width: 0px">If the<SPAN class=Apple-converted-space>&nbsp;</SPAN><VAR>create</VAR><SPAN class=Apple-converted-space>&nbsp;</SPAN>argument is<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>FALSE</CODE>,<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>bfd_hash_lookup</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>will look up a string. If the string is found, it will returns a pointer to a<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>struct bfd_hash_entry</CODE>. If the string is not found in the table<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>bfd_hash_lookup</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>will return<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>NULL</CODE>. You should not modify any of the fields in the returns<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>struct bfd_hash_entry</CODE>.</P>
<P style="WORD-SPACING: 0px; FONT: medium Simsun; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); TEXT-INDENT: 0px; WHITE-SPACE: normal; LETTER-SPACING: normal; orphans: auto; widows: auto; -webkit-text-stroke-width: 0px">If the<SPAN class=Apple-converted-space>&nbsp;</SPAN><VAR>create</VAR><SPAN class=Apple-converted-space>&nbsp;</SPAN>argument is<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>TRUE</CODE>, the string will be entered into the hash table if it is not already there. Either way a pointer to a<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>struct bfd_hash_entry</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>will be returned, either to the existing structure or to a newly created one. In this case, a<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>NULL</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>return means that an error occurred.</P>
<P style="WORD-SPACING: 0px; FONT: medium Simsun; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); TEXT-INDENT: 0px; WHITE-SPACE: normal; LETTER-SPACING: normal; orphans: auto; widows: auto; -webkit-text-stroke-width: 0px">If the<SPAN class=Apple-converted-space>&nbsp;</SPAN><VAR>create</VAR><SPAN class=Apple-converted-space>&nbsp;</SPAN>argument is<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>TRUE</CODE>, and a new entry is created, the<SPAN class=Apple-converted-space>&nbsp;</SPAN><VAR>copy</VAR><SPAN class=Apple-converted-space>&nbsp;</SPAN>argument is used to decide whether to copy the string onto the hash table objalloc or not. If<SPAN class=Apple-converted-space>&nbsp;</SPAN><VAR>copy</VAR><SPAN class=Apple-converted-space>&nbsp;</SPAN>is passed as<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>FALSE</CODE>, you must be careful not to deallocate or modify the string as long as the hash table exists.