<H3 class=section style="WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); TEXT-INDENT: 0px; LINE-HEIGHT: normal; FONT-STYLE: normal; FONT-FAMILY: Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; FONT-VARIANT: normal; orphans: auto; widows: auto; -webkit-text-stroke-width: 0px">4.17<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>fopen</CODE>&#8212;open a file</H3>
<P style="WORD-SPACING: 0px; FONT: medium Simsun; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); TEXT-INDENT: 0px; WHITE-SPACE: normal; LETTER-SPACING: normal; orphans: auto; widows: auto; -webkit-text-stroke-width: 0px"><A name=index-fopen-178></A><A name=index-g_t_005ffopen_005fr-179></A><STRONG>Synopsis</STRONG></P><PRE class=example style="FONT-WEIGHT: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); TEXT-INDENT: 0px; LINE-HEIGHT: normal; FONT-STYLE: normal; LETTER-SPACING: normal; FONT-VARIANT: normal; orphans: auto; widows: auto; -webkit-text-stroke-width: 0px">     #include &lt;stdio.h&gt;
     FILE *fopen(const char *<VAR>file</VAR>, const char *<VAR>mode</VAR>);
     
     FILE *_fopen_r(struct _reent *<VAR>reent</VAR>,
         const char *<VAR>file</VAR>, const char *<VAR>mode</VAR>);
     
</PRE>
<P style="WORD-SPACING: 0px; FONT: medium Simsun; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); TEXT-INDENT: 0px; WHITE-SPACE: normal; LETTER-SPACING: normal; orphans: auto; widows: auto; -webkit-text-stroke-width: 0px"><STRONG>Description</STRONG><BR><CODE>fopen</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>initializes the data structures needed to read or write a file. Specify the file's name as the string at<SPAN class=Apple-converted-space>&nbsp;</SPAN><VAR>file</VAR>, and the kind of access you need to the file with the string at<SPAN class=Apple-converted-space>&nbsp;</SPAN><VAR>mode</VAR>.</P>
<P style="WORD-SPACING: 0px; FONT: medium Simsun; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); TEXT-INDENT: 0px; WHITE-SPACE: normal; LETTER-SPACING: normal; orphans: auto; widows: auto; -webkit-text-stroke-width: 0px">The alternate function<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>_fopen_r</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>is a reentrant version. The extra argument<SPAN class=Apple-converted-space>&nbsp;</SPAN><VAR>reent</VAR><SPAN class=Apple-converted-space>&nbsp;</SPAN>is a pointer to a reentrancy structure.</P>
<P style="WORD-SPACING: 0px; FONT: medium Simsun; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); TEXT-INDENT: 0px; WHITE-SPACE: normal; LETTER-SPACING: normal; orphans: auto; widows: auto; -webkit-text-stroke-width: 0px">Three fundamental kinds of access are available: read, write, and append.<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>*</CODE><VAR>mode</VAR><SPAN class=Apple-converted-space>&nbsp;</SPAN>must begin with one of the three characters `<CODE>r</CODE>', `<CODE>w</CODE>', or `<CODE>a</CODE>', to select one of these:</P>
<DL style="WORD-SPACING: 0px; FONT: medium Simsun; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); TEXT-INDENT: 0px; WHITE-SPACE: normal; LETTER-SPACING: normal; orphans: auto; widows: auto; -webkit-text-stroke-width: 0px">
<DT><CODE>r</CODE> 
<DD>Open the file for reading; the operation will fail if the file does not exist, or if the host system does not permit you to read it.<SPAN class=Apple-converted-space>&nbsp;</SPAN><BR>
<DT><CODE>w</CODE> 
<DD>Open the file for writing<SPAN class=Apple-converted-space>&nbsp;</SPAN><EM>from the beginning</EM><SPAN class=Apple-converted-space>&nbsp;</SPAN>of the file: effectively, this always creates a new file. If the file whose name you specified already existed, its old contents are discarded.<SPAN class=Apple-converted-space>&nbsp;</SPAN><BR>
<DT><CODE>a</CODE> 
<DD>Open the file for appending data, that is writing from the end of file. When you open a file this way, all data always goes to the current end of file; you cannot change this using<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>fseek</CODE>.</DD></DL>
<P style="WORD-SPACING: 0px; FONT: medium Simsun; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); TEXT-INDENT: 0px; WHITE-SPACE: normal; LETTER-SPACING: normal; orphans: auto; widows: auto; -webkit-text-stroke-width: 0px">Some host systems distinguish between &#8220;binary&#8221; and &#8220;text&#8221; files. Such systems may perform data transformations on data written to, or read from, files opened as &#8220;text&#8221;. If your system is one of these, then you can append a `<CODE>b</CODE>' to any of the three modes above, to specify that you are opening the file as a binary file (the default is to open the file as a text file).</P>
<P style="WORD-SPACING: 0px; FONT: medium Simsun; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); TEXT-INDENT: 0px; WHITE-SPACE: normal; LETTER-SPACING: normal; orphans: auto; widows: auto; -webkit-text-stroke-width: 0px">`<CODE>rb</CODE>', then, means &#8220;read binary&#8221;; `<CODE>wb</CODE>', &#8220;write binary&#8221;; and `<CODE>ab</CODE>', &#8220;append binary&#8221;.</P>
<P style="WORD-SPACING: 0px; FONT: medium Simsun; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); TEXT-INDENT: 0px; WHITE-SPACE: normal; LETTER-SPACING: normal; orphans: auto; widows: auto; -webkit-text-stroke-width: 0px">To make C programs more portable, the `<CODE>b</CODE>' is accepted on all systems, whether or not it makes a difference.</P>
<P style="WORD-SPACING: 0px; FONT: medium Simsun; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); TEXT-INDENT: 0px; WHITE-SPACE: normal; LETTER-SPACING: normal; orphans: auto; widows: auto; -webkit-text-stroke-width: 0px">Finally, you might need to both read and write from the same file. You can also append a `<CODE>+</CODE>' to any of the three modes, to permit this. (If you want to append both `<CODE>b</CODE>' and `<CODE>+</CODE>', you can do it in either order: for example,<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>"rb+"</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>means the same thing as<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>"r+b"</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>when used as a mode string.)</P>
<P style="WORD-SPACING: 0px; FONT: medium Simsun; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); TEXT-INDENT: 0px; WHITE-SPACE: normal; LETTER-SPACING: normal; orphans: auto; widows: auto; -webkit-text-stroke-width: 0px">Use<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>"r+"</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>(or<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>"rb+"</CODE>) to permit reading and writing anywhere in an existing file, without discarding any data;<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>"w+"</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>(or<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>"wb+"</CODE>) to create a new file (or begin by discarding all data from an old one) that permits reading and writing anywhere in it; and<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>"a+"</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>(or<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>"ab+"</CODE>) to permit reading anywhere in an existing file, but writing only at the end.</P>
<P style="WORD-SPACING: 0px; FONT: medium Simsun; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); TEXT-INDENT: 0px; WHITE-SPACE: normal; LETTER-SPACING: normal; orphans: auto; widows: auto; -webkit-text-stroke-width: 0px"><BR><STRONG>Returns</STRONG><BR><CODE>fopen</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>returns a file pointer which you can use for other file operations, unless the file you requested could not be opened; in that situation, the result is<CODE>NULL</CODE>. If the reason for failure was an invalid string at<SPAN class=Apple-converted-space>&nbsp;</SPAN><VAR>mode</VAR>,<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>errno</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>is set to<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>EINVAL</CODE>.</P>
<P style="WORD-SPACING: 0px; FONT: medium Simsun; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); TEXT-INDENT: 0px; WHITE-SPACE: normal; LETTER-SPACING: normal; orphans: auto; widows: auto; -webkit-text-stroke-width: 0px"><BR><STRONG>Portability</STRONG><BR><CODE>fopen</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>is required by ANSI C.</P>
<P style="WORD-SPACING: 0px; FONT: medium Simsun; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); TEXT-INDENT: 0px; WHITE-SPACE: normal; LETTER-SPACING: normal; orphans: auto; widows: auto; -webkit-text-stroke-width: 0px">Supporting OS subroutines required:<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>close</CODE>,<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>fstat</CODE>,<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>isatty</CODE>,<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>lseek</CODE>,<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>open</CODE>,<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>read</CODE>,<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>sbrk</CODE>,<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>write</CODE>.