<H3 class=section style="WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); TEXT-INDENT: 0px; LINE-HEIGHT: normal; FONT-STYLE: normal; FONT-FAMILY: Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; FONT-VARIANT: normal; -webkit-text-stroke-width: 0px">4.41<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>mktemp</CODE>,<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>mkstemp</CODE>,<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>mkostemp</CODE>,<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>mkstemps</CODE>,</H3>
<P style="WORD-SPACING: 0px; FONT: medium Simsun; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); TEXT-INDENT: 0px; WHITE-SPACE: normal; LETTER-SPACING: normal; -webkit-text-stroke-width: 0px"><A name=index-mktemp-230></A><A name=index-mkdtemp-231></A><A name=index-mkstemp-232></A><A name=index-mkstemps-233></A><A name=index-mkostemp-234></A><A name=index-mkostemps-235></A><A name=index-g_t_005fmktemp_005fr-236></A><A name=index-g_t_005fmkdtemp_005fr-237></A><A name=index-g_t_005fmkstemp_005fr-238></A><A name=index-g_t_005fmkstemps_005fr-239></A><A name=index-g_t_005fmkostemp_005fr-240></A><A name=index-g_t_005fmkostemps_005fr-241></A><STRONG>Synopsis</STRONG></P><PRE class=example style="FONT-WEIGHT: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); TEXT-INDENT: 0px; LINE-HEIGHT: normal; FONT-STYLE: normal; LETTER-SPACING: normal; FONT-VARIANT: normal; -webkit-text-stroke-width: 0px">     #include &lt;stdlib.h&gt;
     char *mktemp(char *<VAR>path</VAR>);
     char *mkdtemp(char *<VAR>path</VAR>);
     int mkstemp(char *<VAR>path</VAR>);
     int mkstemps(char *<VAR>path</VAR>, int <VAR>suffixlen</VAR>);
     int mkostemp(char *<VAR>path</VAR>, int <VAR>flags</VAR>);
     int mkostemps(char *<VAR>path</VAR>, int <VAR>suffixlen</VAR>, int <VAR>flags</VAR>);
     
     char *_mktemp_r(struct _reent *<VAR>reent</VAR>, char *<VAR>path</VAR>);
     char *_mkdtemp_r(struct _reent *<VAR>reent</VAR>, char *<VAR>path</VAR>);
     int *_mkstemp_r(struct _reent *<VAR>reent</VAR>, char *<VAR>path</VAR>);
     int *_mkstemps_r(struct _reent *<VAR>reent</VAR>, char *<VAR>path</VAR>, int <VAR>len</VAR>);
     int *_mkostemp_r(struct _reent *<VAR>reent</VAR>, char *<VAR>path</VAR>,
         int <VAR>flags</VAR>);
     int *_mkostemps_r(struct _reent *<VAR>reent</VAR>, char *<VAR>path</VAR>, int <VAR>len</VAR>,
         int <VAR>flags</VAR>);
     
</PRE>
<P style="WORD-SPACING: 0px; FONT: medium Simsun; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); TEXT-INDENT: 0px; WHITE-SPACE: normal; LETTER-SPACING: normal; -webkit-text-stroke-width: 0px"><STRONG>Description</STRONG><BR><FONT class=extract><CODE>mktemp</CODE>,<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>mkstemp</CODE>, and<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>mkstemps</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>attempt to generate a file name that is not yet in use for any existing file</FONT>.<SPAN class=Apple-converted-space>&nbsp;</SPAN><FONT class=extract><CODE>mkstemp</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>and<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>mkstemps</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>create the file and open it for reading and writing</FONT>;<SPAN class=Apple-converted-space>&nbsp;</SPAN><FONT class=extract><CODE>mktemp</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>simply generates the file name</FONT> (making<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>mktemp</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>a security risk).<SPAN class=Apple-converted-space>&nbsp;</SPAN><FONT class=extract><CODE>mkostemp</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>and<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>mkostemps</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>allow the addition of other<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>open</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>flags, such as<CODE>O_CLOEXEC</CODE>,<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>O_APPEND</CODE>, or<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>O_SYNC</CODE>.</FONT> <FONT class=extract>On platforms with a separate text mode,<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>mkstemp</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>forces<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>O_BINARY</CODE>, while<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>mkostemp</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>allows the choice between<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>O_BINARY</CODE>,<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>O_TEXT</CODE>, or 0 for default.</FONT><SPAN class=Apple-converted-space>&nbsp;</SPAN><FONT class=extract><CODE>mkdtemp</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>attempts to create a directory instead of a file, with a permissions mask of 0700.</FONT></P>
<P style="WORD-SPACING: 0px; FONT: medium Simsun; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); TEXT-INDENT: 0px; WHITE-SPACE: normal; LETTER-SPACING: normal; -webkit-text-stroke-width: 0px"><FONT class=extract>You supply a simple pattern for the generated file name, as the string at<SPAN class=Apple-converted-space>&nbsp;</SPAN><VAR>path</VAR>. The pattern should be a valid filename (including path information if you wish) ending with at least six `<CODE>X</CODE>' characters. The generated filename will match the leading part of the name you supply, with the trailing `<CODE>X</CODE>' characters replaced by some combination of digits and letters. With<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>mkstemps</CODE>, the `<CODE>X</CODE>' characters end<SPAN class=Apple-converted-space>&nbsp;</SPAN><VAR>suffixlen</VAR><SPAN class=Apple-converted-space>&nbsp;</SPAN>bytes before the end of the string.</FONT></P>
<P style="WORD-SPACING: 0px; FONT: medium Simsun; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); TEXT-INDENT: 0px; WHITE-SPACE: normal; LETTER-SPACING: normal; -webkit-text-stroke-width: 0px">The alternate functions<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>_mktemp_r</CODE>,<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>_mkdtemp_r</CODE>,<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>_mkstemp_r</CODE>,<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>_mkostemp_r</CODE>,<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>_mkostemps_r</CODE>, and<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>_mkstemps_r</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>are reentrant versions. The extra argument<SPAN class=Apple-converted-space>&nbsp;</SPAN><VAR>reent</VAR><SPAN class=Apple-converted-space>&nbsp;</SPAN>is a pointer to a reentrancy structure.</P>
<P style="WORD-SPACING: 0px; FONT: medium Simsun; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); TEXT-INDENT: 0px; WHITE-SPACE: normal; LETTER-SPACING: normal; -webkit-text-stroke-width: 0px"><BR><STRONG>Returns</STRONG><BR><FONT class=extract><CODE>mktemp</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>returns the pointer<SPAN class=Apple-converted-space>&nbsp;</SPAN><VAR>path</VAR><SPAN class=Apple-converted-space>&nbsp;</SPAN>to the modified string representing an unused filename, unless it could not generate one, or the pattern you provided is not suitable for a filename; in that case, it returns<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>NULL</CODE>. Be aware that there is an inherent race between generating the name and attempting to create a file by that name; you are advised to use<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>O_EXCL|O_CREAT</CODE>.</FONT></P>
<P style="WORD-SPACING: 0px; FONT: medium Simsun; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); TEXT-INDENT: 0px; WHITE-SPACE: normal; LETTER-SPACING: normal; -webkit-text-stroke-width: 0px"><FONT class=extract><CODE>mkdtemp</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>returns the pointer<SPAN class=Apple-converted-space>&nbsp;</SPAN><VAR>path</VAR><SPAN class=Apple-converted-space>&nbsp;</SPAN>to the modified string if the directory was created, otherwise it returns<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>NULL</CODE>.</FONT></P>
<P style="WORD-SPACING: 0px; FONT: medium Simsun; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); TEXT-INDENT: 0px; WHITE-SPACE: normal; LETTER-SPACING: normal; -webkit-text-stroke-width: 0px"><FONT class=extract><CODE>mkstemp</CODE>,<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>mkstemps</CODE>,<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>mkostemp</CODE>, and<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>mkostemps</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>return a file descriptor to the newly created file, unless it could not generate an unused filename, or the pattern you provided is not suitable for a filename; in that case, it returns<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>-1</CODE>.</FONT></P>
<P style="WORD-SPACING: 0px; FONT: medium Simsun; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); TEXT-INDENT: 0px; WHITE-SPACE: normal; LETTER-SPACING: normal; -webkit-text-stroke-width: 0px"><BR><STRONG>Portability</STRONG><BR>ANSI C does not require either<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>mktemp</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>or<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>mkstemp</CODE>; the System V Interface Definition requires<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>mktemp</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>as of Issue 2. POSIX 2001 requires<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>mkstemp</CODE>, and POSIX 2008 requires<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>mkdtemp</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>while deprecating<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>mktemp</CODE>.<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>mkstemps</CODE>,<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>mkostemp</CODE>, and<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>mkostemps</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>are not standardized.</P>
<P style="WORD-SPACING: 0px; FONT: medium Simsun; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); TEXT-INDENT: 0px; WHITE-SPACE: normal; LETTER-SPACING: normal; -webkit-text-stroke-width: 0px">Supporting OS subroutines required:<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>getpid</CODE>,<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>mkdir</CODE>,<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>open</CODE>,<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>stat</CODE>.