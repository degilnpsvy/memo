<SPAN lang=EN-US style="FONT-SIZE: 15pt; FONT-FAMILY: MyriadPro-SemiboldCond; mso-bidi-font-family: MyriadPro-SemiboldCond; mso-font-kerning: 0pt">filter-branch Pitfalls</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">It is important to understand a brutal consequence of the name of this Git command:</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">it is filter-</SPAN><I><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka-Italic; mso-bidi-font-family: Birka-Italic; mso-font-kerning: 0pt">branch</SPAN></I><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">. At its core, the </SPAN><SPAN lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">git filter-branch </SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">command is designed to operate</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">on just one branch or ref. However, it </SPAN><I><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka-Italic; mso-bidi-font-family: Birka-Italic; mso-font-kerning: 0pt">can </SPAN></I><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">operate on many branches or refs.</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">In many cases, you want to have it operate on </SPAN><I><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka-Italic; mso-bidi-font-family: Birka-Italic; mso-font-kerning: 0pt">all </SPAN></I><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">branches so as to obtain a repositorywide</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">coverage. In these cases, you will need the </SPAN><SPAN lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">-- --all </SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">tacked onto the end of the</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">command.</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 8pt; COLOR: black; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">$ </SPAN><B><SPAN lang=EN-US style="FONT-SIZE: 8pt; COLOR: black; FONT-FAMILY: TheSansMonoCd-W7Bold; mso-bidi-font-family: TheSansMonoCd-W7Bold; mso-font-kerning: 0pt">git filter-branch --index-filter \</SPAN></B></P>
<p><B><SPAN lang=EN-US style="FONT-SIZE: 8pt; COLOR: black; FONT-FAMILY: TheSansMonoCd-W7Bold; mso-bidi-font-family: TheSansMonoCd-W7Bold; mso-font-kerning: 0pt">"git rm --cached -f --ignore-unmatch '*.jpeg'" \</SPAN></B></P>
<p><B><SPAN lang=EN-US style="FONT-SIZE: 8pt; COLOR: black; FONT-FAMILY: TheSansMonoCd-W7Bold; mso-bidi-font-family: TheSansMonoCd-W7Bold; mso-font-kerning: 0pt">-- --all</SPAN></B></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">Similarly, you almost certainly want to translate any tag refs from a prefiltered state</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">into the new postfiltered repository. That means adding </SPAN><SPAN lang=EN-US style="FONT-SIZE: 9pt; COLOR: black; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">--tag-name-filter cat </SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">is also</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">quite common:</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 8pt; COLOR: black; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">$ </SPAN><B><SPAN lang=EN-US style="FONT-SIZE: 8pt; COLOR: black; FONT-FAMILY: TheSansMonoCd-W7Bold; mso-bidi-font-family: TheSansMonoCd-W7Bold; mso-font-kerning: 0pt">git filter-branch --index-filter \</SPAN></B></P>
<p><B><SPAN lang=EN-US style="FONT-SIZE: 8pt; COLOR: black; FONT-FAMILY: TheSansMonoCd-W7Bold; mso-bidi-font-family: TheSansMonoCd-W7Bold; mso-font-kerning: 0pt">"git rm --cached -f --ignore-unmatch '*.jpeg'" \</SPAN></B></P>
<p><B><SPAN lang=EN-US style="FONT-SIZE: 8pt; COLOR: black; FONT-FAMILY: TheSansMonoCd-W7Bold; mso-bidi-font-family: TheSansMonoCd-W7Bold; mso-font-kerning: 0pt">--tag-name-filter cat \</SPAN></B></P>
<p><B><SPAN lang=EN-US style="FONT-SIZE: 8pt; COLOR: black; FONT-FAMILY: TheSansMonoCd-W7Bold; mso-bidi-font-family: TheSansMonoCd-W7Bold; mso-font-kerning: 0pt">-- --all</SPAN></B></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 9pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">How about this one? You used </SPAN><SPAN lang=EN-US style="FONT-SIZE: 8pt; COLOR: black; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">--tree-filter </SPAN><SPAN lang=EN-US style="FONT-SIZE: 9pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">or </SPAN><SPAN lang=EN-US style="FONT-SIZE: 8pt; COLOR: black; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">--index-filter </SPAN><SPAN lang=EN-US style="FONT-SIZE: 9pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">to</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 9pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">remove a file from a repository, but did that file get moved or have its</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 9pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">name changed at some point in its history? You can use a command like</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 9pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">this to find out:</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 7pt; COLOR: black; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">$ </SPAN><B><SPAN lang=EN-US style="FONT-SIZE: 7pt; COLOR: black; FONT-FAMILY: TheSansMonoCd-W7Bold; mso-bidi-font-family: TheSansMonoCd-W7Bold; mso-font-kerning: 0pt">git log --name-only --follow --all -- </SPAN></B><B><I><SPAN lang=EN-US style="FONT-SIZE: 7pt; COLOR: black; FONT-FAMILY: TheSansMonoCd-W7BoldItalic; mso-bidi-font-family: TheSansMonoCd-W7BoldItalic; mso-font-kerning: 0pt; mso-fareast-font-family: TheSansMonoCd-W5Regular">file</SPAN></I></B></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 9pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">If other names for that file exist, you might want to delete those versions</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 9pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">as well.</SPAN>