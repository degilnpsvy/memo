<SPAN lang=EN-US style="FONT-SIZE: 20pt; COLOR: black; FONT-FAMILY: MyriadPro-SemiboldCond; mso-bidi-font-size: 15.0pt; mso-bidi-font-family: MyriadPro-SemiboldCond; mso-font-kerning: 0pt">Reconstructing the git-svn Cache</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 12pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">The </SPAN><SPAN lang=EN-US style="FONT-SIZE: 11pt; COLOR: black; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-size: 9.0pt; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">git svn </SPAN><SPAN lang=EN-US style="FONT-SIZE: 12pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">command stores extra housekeeping information in the </SPAN><I><SPAN lang=EN-US style="FONT-SIZE: 12pt; COLOR: black; FONT-FAMILY: Birka-Italic; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka-Italic; mso-font-kerning: 0pt">.git/svn </SPAN></I><SPAN lang=EN-US style="FONT-SIZE: 12pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">directory.</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 12pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">This information is used, for example, to quickly detect whether a particular SVN</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 12pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">revision has already been downloaded and so doesn</SPAN><SPAN lang=EN-US style="FONT-SIZE: 12pt; COLOR: black; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt; mso-fareast-font-family: Birka; mso-ascii-font-family: Birka">&#8217;</SPAN><SPAN lang=EN-US style="FONT-SIZE: 12pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">t need to be downloaded again. It</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">also contains all the same </SPAN><SPAN lang=EN-US style="FONT-SIZE: 11pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-size: 9.0pt; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">git-svn-id </SPAN><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">information that shows up in imported commit</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">messages.</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">If that</SPAN><SPAN lang=EN-US style="FONT-SIZE: 12pt; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt; mso-fareast-font-family: Birka; mso-ascii-font-family: Birka">&#8217;</SPAN><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">s the case, then why do the </SPAN><SPAN lang=EN-US style="FONT-SIZE: 11pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-size: 9.0pt; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">git-svn-id </SPAN><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">lines exist at all? The reason is that,</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">because the lines are added to the commit object and the content of a commit object</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">determines its ID, it follows that the commit ID changes after sending it through</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 11pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-size: 9.0pt; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">git svn dcommit</SPAN><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">, and changing the commit IDs can make future Git merging painful</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">unless you follow the careful steps listed earlier. But if Git just omitted the </SPAN><SPAN lang=EN-US style="FONT-SIZE: 11pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-size: 9.0pt; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">git-svnid</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">lines, then the commit IDs wouldn</SPAN><SPAN lang=EN-US style="FONT-SIZE: 12pt; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt; mso-fareast-font-family: Birka; mso-ascii-font-family: Birka">&#8217;</SPAN><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">t have to change and </SPAN><SPAN lang=EN-US style="FONT-SIZE: 11pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-size: 9.0pt; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">git svn </SPAN><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">would still work</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">fine. Right?</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">Yes, except for one important detail. The </SPAN><I><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: Birka-Italic; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka-Italic; mso-font-kerning: 0pt">.git/svn </SPAN></I><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">directory isn</SPAN><SPAN lang=EN-US style="FONT-SIZE: 12pt; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt; mso-fareast-font-family: Birka; mso-ascii-font-family: Birka">&#8217;</SPAN><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">t cloned with your Git</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">repository. An important part of Git</SPAN><SPAN lang=EN-US style="FONT-SIZE: 12pt; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt; mso-fareast-font-family: Birka; mso-ascii-font-family: Birka">&#8217;</SPAN><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">s security design is that only blob, tree, and commit</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">objects are ever shared. Hence, the </SPAN><SPAN lang=EN-US style="FONT-SIZE: 11pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-size: 9.0pt; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">git-svn-id </SPAN><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">lines need to be part of a commit object,</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">and anyone with a clone of your repository will get all the information they need to</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">reconstruct the </SPAN><I><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: Birka-Italic; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka-Italic; mso-font-kerning: 0pt">.git/svn </SPAN></I><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">directory. This has two advantages:</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">1. If you accidentally lose your gatekeeper repository or break something, or if you</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">disappear and there</SPAN><SPAN lang=EN-US style="FONT-SIZE: 12pt; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt; mso-fareast-font-family: Birka; mso-ascii-font-family: Birka">&#8217;</SPAN><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">s nobody to maintain your repository, then anyone with a</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">clone of your repository can set up a new one.</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">2. If </SPAN><SPAN lang=EN-US style="FONT-SIZE: 11pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-size: 9.0pt; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">git-svn </SPAN><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">has a bug and corrupts its </SPAN><I><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: Birka-Italic; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka-Italic; mso-font-kerning: 0pt">.git/svn </SPAN></I><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">directory, you can regenerate it whenever</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">you want.</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">You can try out regenerating the cache information whenever you want by moving</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">the </SPAN><I><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: Birka-Italic; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka-Italic; mso-font-kerning: 0pt">.git/svn </SPAN></I><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">directory out of the way. Try this:</SPAN></P>
<p><FONT size=3><SPAN lang=EN-US style="FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-size: 8.0pt; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">$ </SPAN><B><SPAN lang=EN-US style="FONT-FAMILY: TheSansMonoCd-W7Bold; mso-bidi-font-size: 8.0pt; mso-bidi-font-family: TheSansMonoCd-W7Bold; mso-font-kerning: 0pt">cd svn-all.git</SPAN></B></FONT></P>
<p><FONT size=3><SPAN lang=EN-US style="FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-size: 8.0pt; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">$ </SPAN><B><SPAN lang=EN-US style="FONT-FAMILY: TheSansMonoCd-W7Bold; mso-bidi-font-size: 8.0pt; mso-bidi-font-family: TheSansMonoCd-W7Bold; mso-font-kerning: 0pt">mv .git/svn /tmp/git-svn-backup</SPAN></B></FONT></P>
<p><FONT size=3><SPAN lang=EN-US style="FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-size: 8.0pt; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">$ </SPAN><B><SPAN lang=EN-US style="FONT-FAMILY: TheSansMonoCd-W7Bold; mso-bidi-font-size: 8.0pt; mso-bidi-font-family: TheSansMonoCd-W7Bold; mso-font-kerning: 0pt">git svn fetch -r33005:33142</SPAN></B></FONT></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">Here, </SPAN><SPAN lang=EN-US style="FONT-SIZE: 11pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-size: 9.0pt; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">git svn </SPAN><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">regenerates its cache and fetches the requested objects. (As before, you</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">would normally leave off the </SPAN><SPAN lang=EN-US style="FONT-SIZE: 11pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-size: 9.0pt; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">-r </SPAN><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">option to avoid downloading thousands of commits,</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">but this is just an example.)</SPAN>