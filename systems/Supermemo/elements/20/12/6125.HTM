<SPAN lang=EN-US style="FONT-SIZE: 11pt; FONT-FAMILY: MyriadPro-SemiboldCond; mso-bidi-font-family: MyriadPro-SemiboldCond; mso-font-kerning: 0pt">Publishing a repository using Smart HTTP</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">Publishing a repository via the newer, so-called Smart HTTP mechanism is pretty</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">simple in principle, but you may want to consult the full online documentation for the</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">process as found in the manual page of the </SPAN><SPAN lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">git-http-backend </SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">command. What follows</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">here is a simplified extraction of some of that material that should get you started.</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">First, this setup is really geared for use with Apache. Thus, the examples that follow</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">show how to modify Apache configuration files. On a Ubuntu system, these are found</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">in </SPAN><I><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka-Italic; mso-bidi-font-family: Birka-Italic; mso-font-kerning: 0pt">/etc/apache2</SPAN></I><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">. Second, some mapping from your advertised repository names to the</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">repository layout on the disk as made available to Apache needs to be defined. As with</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">the </SPAN><SPAN lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">git-http-backend </SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">documentation, the mapping here makes </SPAN><SPAN lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">http://$hostname/git/</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">foo/bar.git </SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">correspond to </SPAN><I><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka-Italic; mso-bidi-font-family: Birka-Italic; mso-font-kerning: 0pt">/var/www/git/foo/bar.git </SPAN></I><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">under Apache</SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt; mso-fareast-font-family: Birka; mso-ascii-font-family: Birka">&#8217;</SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">s file view. Third,</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">several Apache modules are required and must be enabled: </SPAN><SPAN lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">mod_cgi</SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">, </SPAN><SPAN lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">mod_alias</SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">, and</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">mod_env</SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">.</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">Define some variables and a script alias that points to the </SPAN><SPAN lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">git-http-backend </SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">command</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">like this:</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 8pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">SetEnv GIT_PROJECT_ROOT /var/www/git</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 8pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">SetEnv GIT_HTTP_EXPORT_ALL</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 8pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">ScriptAlias /git/ /usr/libexec/git-core/git-http-backend/</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">The location of your </SPAN><SPAN lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">git-http-backend </SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">may be different. For example, Ubuntu places</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">it in </SPAN><I><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka-Italic; mso-bidi-font-family: Birka-Italic; mso-font-kerning: 0pt">/usr/lib/git-core/git-http-backend</SPAN></I><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">.</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">Now you have a choice: you can allow anonymous read access but require authenticated</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">write access to your repository, or you can require authentication for read and</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">write.</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">For anonymous read access, set up a </SPAN><SPAN lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">LocationMatch </SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">directive:</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 8pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">&lt;LocationMatch "^/git/.*/git-receive-pack$"&gt;</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 8pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">AuthType Basic</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 8pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">AuthName "Git Access"</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 8pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">Require group committers</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 8pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">...</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 8pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">&lt;/LocationMatch&gt;</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">For authenticated read access, set up a </SPAN><SPAN lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">Location </SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">directive for the repository or a parent</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">directory of the repository:</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 8pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">&lt;Location /git/private&gt;</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 8pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">AuthType Basic</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 8pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">AuthName "Private Git Access"</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 8pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">Require group committers</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 8pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">...</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 8pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">&lt;/Location&gt;</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">Further recipes exist within the manual page to set up coordinated </SPAN><SPAN lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">gitweb </SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">access, and</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">show how to serve multiple repositories namespaces and configure accelerated access</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">to static pages.</SPAN>