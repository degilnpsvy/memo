<SPAN lang=EN-US style="FONT-SIZE: 16pt; FONT-FAMILY: MyriadPro-SemiboldCond; mso-bidi-font-family: MyriadPro-SemiboldCond; mso-font-kerning: 0pt">CHAPTER 15</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 24pt; FONT-FAMILY: MyriadPro-SemiboldCond; mso-bidi-font-family: MyriadPro-SemiboldCond; mso-font-kerning: 0pt">Hooks</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">You can use a Git </SPAN><I><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka-Italic; mso-bidi-font-family: Birka-Italic; mso-font-kerning: 0pt">hook </SPAN></I><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">to run one or more arbitrary scripts whenever a particular event,</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">such as a commit or a patch, occurs in your repository. Typically, an event is broken</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">into several prescribed steps, and you can tie a custom script to each step. When the</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">Git event occurs, the appropriate script is called at the outset of each step.</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">Hooks belong to and affect a specific repository and are not copied during a clone</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">operation. In other words, hooks you set up in your private repository are not</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">propagated to and do not alter the behavior of the new clone. If for some reason your</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">development process mandates hooks in each coder</SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt; mso-fareast-font-family: Birka; mso-ascii-font-family: Birka">&#8217;</SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">s personal development</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">repository, arrange to copy the directory </SPAN><I><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka-Italic; mso-bidi-font-family: Birka-Italic; mso-font-kerning: 0pt">.git/hooks </SPAN></I><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">through some other (nonclone)</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">method.</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">A hook runs either in the context of your current, local repository or in the context of</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">the remote repository. For example, fetching data into your repository from a remote</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">repository and making a local commit can cause local hooks to run; pushing changes</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">to a remote repository may cause hooks in the remote repository to run.</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">Most Git hooks fall into one of two categories:</SPAN></P>
<p><SPAN style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">&#8226;<SPAN lang=EN-US> A </SPAN></SPAN><I><SPAN style="FONT-SIZE: 10pt; FONT-FAMILY: Birka-Italic; mso-bidi-font-family: Birka-Italic; mso-font-kerning: 0pt">&#8220;<SPAN lang=EN-US>pre</SPAN>&#8221;<SPAN lang=EN-US> hook </SPAN></SPAN></I><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">runs before an action completes. You can use this kind of hook to</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">approve, reject, or adjust a change before it</SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt; mso-fareast-font-family: Birka; mso-ascii-font-family: Birka">&#8217;</SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">s applied.</SPAN></P>
<p><SPAN style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">&#8226;<SPAN lang=EN-US> A </SPAN></SPAN><I><SPAN style="FONT-SIZE: 10pt; FONT-FAMILY: Birka-Italic; mso-bidi-font-family: Birka-Italic; mso-font-kerning: 0pt">&#8220;<SPAN lang=EN-US>post</SPAN>&#8221;<SPAN lang=EN-US> hook </SPAN></SPAN></I><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">runs after an action completes and can be used to trigger notifications</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">(such as email) or to launch additional processing, such as running a build or</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">closing a bug.</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">As a general rule, if a </SPAN><I><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka-Italic; mso-bidi-font-family: Birka-Italic; mso-font-kerning: 0pt">pre-</SPAN></I><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">action hook exits with a nonzero status (the convention to</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">indicate failure), the Git action is aborted. In contrast, the exit status of a </SPAN><I><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka-Italic; mso-bidi-font-family: Birka-Italic; mso-font-kerning: 0pt">post-</SPAN></I><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">action</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">hook is generally ignored because the hook can no longer affect the outcome or</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">completion of the action.</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">In general, the Git developers advocate using hooks with caution. A hook, they say,</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">should be a method of last resort, to be used only when you can</SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt; mso-fareast-font-family: Birka; mso-ascii-font-family: Birka">&#8217;</SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">t accomplish the same</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">result in some other way. For example, if you want to specify a particular option each</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">time you make a commit, check out a file, or create a branch, a hook is unnecessary.</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">You can accomplish the same task with a Git alias (see </SPAN><SPAN style="FONT-SIZE: 10pt; COLOR: blue; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">&#8220;<SPAN lang=EN-US>Configuring an</SPAN></SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; COLOR: blue; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">Alias</SPAN><SPAN style="FONT-SIZE: 10pt; COLOR: blue; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">&#8221;<SPAN lang=EN-US> on page 30 </SPAN></SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">in </SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; COLOR: blue; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">Chapter 3</SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">) or with shell scripts to augment </SPAN><SPAN lang=EN-US style="FONT-SIZE: 9pt; COLOR: black; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">git commit</SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">,</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 9pt; COLOR: black; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">git checkout</SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">, and </SPAN><SPAN lang=EN-US style="FONT-SIZE: 9pt; COLOR: black; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">git branch</SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">, respectively.</SPAN><SPAN lang=EN-US style="FONT-SIZE: 7.5pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">(</SPAN><SPAN lang=EN-US style="FONT-SIZE: 8pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt"> 1. As it happens, running a hook at commit time is such a common requirement that a precommit hook</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 8pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">exists for that, even though it isn</SPAN><SPAN lang=EN-US style="FONT-SIZE: 8pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt; mso-fareast-font-family: Birka; mso-ascii-font-family: Birka">&#8217;</SPAN><SPAN lang=EN-US style="FONT-SIZE: 8pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">t strictly necessary.)</SPAN><SPAN lang=EN-US style="FONT-SIZE: 7.5pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt"></SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">At first blush, a hook may seem an appealing and straightforward solution. However,</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">there are several implications of its use.</SPAN></P>
<p><SPAN style="FONT-SIZE: 10pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">&#8226;<SPAN lang=EN-US> A hook changes the behavior of Git. If a hook performs an unusual operation, other</SPAN></SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">developers familiar with Git may run into surprises when using your repository.</SPAN></P>
<p><SPAN style="FONT-SIZE: 10pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">&#8226;<SPAN lang=EN-US> A hook can slow operations that are otherwise fast. For example, developers are</SPAN></SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">often enticed to hook Git to run unit tests before anyone makes a commit, but this</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">makes committing slow. In Git, a commit is supposed to be a fast operation, thus</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">encouraging frequent commits to prevent the loss of data. Making a commit run</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">slowly makes Git less enjoyable.</SPAN></P>
<p><SPAN style="FONT-SIZE: 10pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">&#8226;<SPAN lang=EN-US> A hook script that is buggy can interfere with your work and productivity. The</SPAN></SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">only way to work around a hook is to disable it. In contrast, if you use an alias or</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">shell script instead of a hook, then you can always fall back on the normal Git</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">command wherever that makes sense.</SPAN></P>
<p><SPAN style="FONT-SIZE: 10pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">&#8226;<SPAN lang=EN-US> A repository</SPAN></SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; COLOR: black; mso-bidi-font-family: Birka; mso-font-kerning: 0pt; mso-fareast-font-family: Birka; mso-ascii-font-family: Birka">&#8217;</SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">s collection of hooks is not automatically replicated. Hence, if you</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">install a commit hook in your repository, it won</SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; COLOR: black; mso-bidi-font-family: Birka; mso-font-kerning: 0pt; mso-fareast-font-family: Birka; mso-ascii-font-family: Birka">&#8217;</SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">t reliably affect another developer</SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; COLOR: black; mso-bidi-font-family: Birka; mso-font-kerning: 0pt; mso-fareast-font-family: Birka; mso-ascii-font-family: Birka">&#8217;</SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">s</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">commits. This is partly for security reasons</SPAN><SPAN style="FONT-SIZE: 10pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">&#8212;<SPAN lang=EN-US>a malicious script could easily be</SPAN></SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">smuggled into an otherwise innocuous-looking repository</SPAN><SPAN style="FONT-SIZE: 10pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">&#8212;<SPAN lang=EN-US>and partly because Git</SPAN></SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">simply has no mechanism to replicate anything other than blobs, trees, and</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">commits.</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">With those </SPAN><SPAN style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">&#8220;<SPAN lang=EN-US>warnings</SPAN>&#8221;<SPAN lang=EN-US> behind us, we can state that hooks exist for very good reasons</SPAN></SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">and that their use can be incredibly advantageous.</SPAN>