<SPAN lang=EN-US style="FONT-SIZE: 15pt; FONT-FAMILY: MyriadPro-SemiboldCond; mso-bidi-font-family: MyriadPro-SemiboldCond; mso-font-kerning: 0pt">Creating Your First Hook</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">To explore how a hook works, let</SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt; mso-fareast-font-family: Birka; mso-ascii-font-family: Birka">&#8217;</SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">s create a new repository and install a simple hook.</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">First, we create the repository and populate it with a few files:</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 8pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">$ </SPAN><B><SPAN lang=EN-US style="FONT-SIZE: 8pt; FONT-FAMILY: TheSansMonoCd-W7Bold; mso-bidi-font-family: TheSansMonoCd-W7Bold; mso-font-kerning: 0pt">mkdir hooktest</SPAN></B></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 8pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">$ </SPAN><B><SPAN lang=EN-US style="FONT-SIZE: 8pt; FONT-FAMILY: TheSansMonoCd-W7Bold; mso-bidi-font-family: TheSansMonoCd-W7Bold; mso-font-kerning: 0pt">cd hooktest</SPAN></B></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 8pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">$ </SPAN><B><SPAN lang=EN-US style="FONT-SIZE: 8pt; FONT-FAMILY: TheSansMonoCd-W7Bold; mso-bidi-font-family: TheSansMonoCd-W7Bold; mso-font-kerning: 0pt">git init</SPAN></B></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 8pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">Initialized empty Git repository in .git/</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 8pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">$ </SPAN><B><SPAN lang=EN-US style="FONT-SIZE: 8pt; FONT-FAMILY: TheSansMonoCd-W7Bold; mso-bidi-font-family: TheSansMonoCd-W7Bold; mso-font-kerning: 0pt">touch a b c</SPAN></B></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 8pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">$ </SPAN><B><SPAN lang=EN-US style="FONT-SIZE: 8pt; FONT-FAMILY: TheSansMonoCd-W7Bold; mso-bidi-font-family: TheSansMonoCd-W7Bold; mso-font-kerning: 0pt">git add a b c</SPAN></B></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 8pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">$ </SPAN><B><SPAN lang=EN-US style="FONT-SIZE: 8pt; FONT-FAMILY: TheSansMonoCd-W7Bold; mso-bidi-font-family: TheSansMonoCd-W7Bold; mso-font-kerning: 0pt">git commit -m 'added a, b, and c'</SPAN></B></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 8pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">Created initial commit 97e9cf8: added a, b, and c</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 8pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">0 files changed, 0 insertions(+), 0 deletions(-)</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 8pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">create mode 100644 a</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 8pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">create mode 100644 b</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 8pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">create mode 100644 c</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">Next, let</SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt; mso-fareast-font-family: Birka; mso-ascii-font-family: Birka">&#8217;</SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">s create a </SPAN><SPAN lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">pre-commit </SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">hook to prevent checking in changes that contain the</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">word </SPAN><SPAN style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">&#8220;<SPAN lang=EN-US>broken.</SPAN>&#8221;<SPAN lang=EN-US> Using your favorite text editor, put the following in a file called </SPAN></SPAN><I><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka-Italic; mso-bidi-font-family: Birka-Italic; mso-font-kerning: 0pt">.git/</SPAN></I></P>
<p><I><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka-Italic; mso-bidi-font-family: Birka-Italic; mso-font-kerning: 0pt">hooks/pre-commit</SPAN></I><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">:</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 8pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">#!/bin/bash</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 8pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">echo "Hello, I'm a pre-commit script!" &gt;&amp;2</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 8pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">if git diff --cached | grep '^\+' | grep -q 'broken'; then</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 8pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">echo "ERROR: Can't commit the word 'broken'" &gt;&amp;2</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 8pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">exit 1 # reject</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 8pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">fi</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 8pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">exit 0 # accept</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">The script generates a list of all differences about to be checked in, extracts the lines to</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">be </SPAN><I><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka-Italic; mso-bidi-font-family: Birka-Italic; mso-font-kerning: 0pt">added </SPAN></I><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">(that is, those lines that begin with a </SPAN><SPAN lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">+ </SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">character), and scans those lines for</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">the word </SPAN><SPAN style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">&#8220;<SPAN lang=EN-US>broken.</SPAN>&#8221;<SPAN lang=EN-US></SPAN></SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">There are many ways to test for the word </SPAN><SPAN style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">&#8220;<SPAN lang=EN-US>broken,</SPAN>&#8221;<SPAN lang=EN-US> but most of the obvious ones result</SPAN></SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">in subtle problems. I</SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt; mso-fareast-font-family: Birka; mso-ascii-font-family: Birka">&#8217;</SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">m not talking about how to </SPAN><SPAN style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">&#8220;<SPAN lang=EN-US>test for the word </SPAN>&#8216;<SPAN lang=EN-US>broken</SPAN></SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt; mso-fareast-font-family: Birka; mso-ascii-font-family: Birka">&#8217;</SPAN><SPAN style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">&#8221;<SPAN lang=EN-US> but rather</SPAN></SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">about how to find the text to be scanned for the word </SPAN><SPAN style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">&#8220;<SPAN lang=EN-US>broken.</SPAN>&#8221;<SPAN lang=EN-US></SPAN></SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">For example, you might have tried the test:</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 8pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">if git ls-files | xargs grep -q 'broken'; then</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">or, in other words, search for the word </SPAN><SPAN style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">&#8220;<SPAN lang=EN-US>broken,</SPAN>&#8221;<SPAN lang=EN-US> in all files in the repository. But this</SPAN></SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">approach has two problems. If someone else had already committed a file containing</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">the word </SPAN><SPAN style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">&#8220;<SPAN lang=EN-US>broken,</SPAN>&#8221;<SPAN lang=EN-US> then this script would prevent all future commits (until you fix it),</SPAN></SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">even if those commits are totally unrelated. Moreover, the Unix </SPAN><SPAN lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">grep </SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">command has no</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">way of knowing which files will actually be committed; if you add </SPAN><SPAN style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">&#8220;<SPAN lang=EN-US>broken</SPAN>&#8221;<SPAN lang=EN-US> to file </SPAN></SPAN><SPAN lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">b</SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">,</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">make an unrelated change to </SPAN><SPAN lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">a</SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">, and then run </SPAN><SPAN lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">git commit a</SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">, there</SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt; mso-fareast-font-family: Birka; mso-ascii-font-family: Birka">&#8217;</SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">s nothing wrong with</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">your commit because you</SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt; mso-fareast-font-family: Birka; mso-ascii-font-family: Birka">&#8217;</SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">re not trying to commit </SPAN><SPAN lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">b</SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">. However, a script with this test</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">would reject it anyway.</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">If you write a </SPAN><SPAN lang=EN-US style="FONT-SIZE: 8pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">pre-commit </SPAN><SPAN lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">script that restricts what you</SPAN><SPAN lang=EN-US style="FONT-SIZE: 9pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt; mso-fareast-font-family: Birka; mso-ascii-font-family: Birka">&#8217;</SPAN><SPAN lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">re allowed to</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">check in, it</SPAN><SPAN lang=EN-US style="FONT-SIZE: 9pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt; mso-fareast-font-family: Birka; mso-ascii-font-family: Birka">&#8217;</SPAN><SPAN lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">s almost certain that you</SPAN><SPAN lang=EN-US style="FONT-SIZE: 9pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt; mso-fareast-font-family: Birka; mso-ascii-font-family: Birka">&#8217;</SPAN><SPAN lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">ll need to bypass it someday. You</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">can bypass the </SPAN><SPAN lang=EN-US style="FONT-SIZE: 8pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">pre-commit </SPAN><SPAN lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">hook either by using the </SPAN><SPAN lang=EN-US style="FONT-SIZE: 8pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">--no-verify </SPAN><SPAN lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">option</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">to </SPAN><SPAN lang=EN-US style="FONT-SIZE: 8pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">git commit </SPAN><SPAN lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">or by temporarily disabling your hook.</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">Now that you</SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt; mso-fareast-font-family: Birka; mso-ascii-font-family: Birka">&#8217;</SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">ve created the </SPAN><SPAN lang=EN-US style="FONT-SIZE: 9pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">pre-commit </SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">hook, make sure it</SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt; mso-fareast-font-family: Birka; mso-ascii-font-family: Birka">&#8217;</SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">s executable:</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 8pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">$ </SPAN><B><SPAN lang=EN-US style="FONT-SIZE: 8pt; FONT-FAMILY: TheSansMonoCd-W7Bold; mso-bidi-font-family: TheSansMonoCd-W7Bold; mso-font-kerning: 0pt">chmod a+x .git/hooks/pre-commit</SPAN></B></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">And now you can test that it works as expected:</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 8pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">$ </SPAN><B><SPAN lang=EN-US style="FONT-SIZE: 8pt; FONT-FAMILY: TheSansMonoCd-W7Bold; mso-bidi-font-family: TheSansMonoCd-W7Bold; mso-font-kerning: 0pt">echo "perfectly fine" &gt;a</SPAN></B></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 8pt; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">$ </SPAN><B><SPAN lang=EN-US style="FONT-SIZE: 8pt; FONT-FAMILY: TheSansMonoCd-W7Bold; mso-bidi-font-family: TheSansMonoCd-W7Bold; mso-font-kerning: 0pt">echo "broken" &gt;b</SPAN></B></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 8pt; COLOR: black; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt"># Try to commit all files, even a 'broken' one.</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 8pt; COLOR: black; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">$ </SPAN><B><SPAN lang=EN-US style="FONT-SIZE: 8pt; COLOR: black; FONT-FAMILY: TheSansMonoCd-W7Bold; mso-bidi-font-family: TheSansMonoCd-W7Bold; mso-font-kerning: 0pt">git commit -m "test commit -a" -a</SPAN></B></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 8pt; COLOR: black; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">Hello, I'm a pre-commit script!</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 8pt; COLOR: black; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">ERROR: Can't commit the word 'broken'</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 8pt; COLOR: black; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt"># Selectively committing un-broken files works.</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 8pt; COLOR: black; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">$ </SPAN><B><SPAN lang=EN-US style="FONT-SIZE: 8pt; COLOR: black; FONT-FAMILY: TheSansMonoCd-W7Bold; mso-bidi-font-family: TheSansMonoCd-W7Bold; mso-font-kerning: 0pt">git commit -m "test only file a" a</SPAN></B></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 8pt; COLOR: black; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">Hello, I'm a pre-commit script!</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 8pt; COLOR: black; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">Created commit 4542056: test</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 8pt; COLOR: black; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">1 files changed, 1 insertions(+), 0 deletions(-)</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 8pt; COLOR: black; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt"># And committing 'broken' files won't work.</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 8pt; COLOR: black; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">$ </SPAN><B><SPAN lang=EN-US style="FONT-SIZE: 8pt; COLOR: black; FONT-FAMILY: TheSansMonoCd-W7Bold; mso-bidi-font-family: TheSansMonoCd-W7Bold; mso-font-kerning: 0pt">git commit -m "test only file b" b</SPAN></B></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 8pt; COLOR: black; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">Hello, I'm a pre-commit script!</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 8pt; COLOR: black; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">ERROR: Can't commit the word 'broken'</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">Observe that even when a commit works, the </SPAN><SPAN lang=EN-US style="FONT-SIZE: 9pt; COLOR: black; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">pre-commit </SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">script still emits </SPAN><SPAN style="FONT-SIZE: 10pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">&#8220;<SPAN lang=EN-US>Hello.</SPAN>&#8221;<SPAN lang=EN-US> This</SPAN></SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">would be annoying in a real script, so you should use such messages only while</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">debugging the script. Notice also that, when the commit is rejected, </SPAN><SPAN lang=EN-US style="FONT-SIZE: 9pt; COLOR: black; FONT-FAMILY: TheSansMonoCd-W5Regular; mso-bidi-font-family: TheSansMonoCd-W5Regular; mso-font-kerning: 0pt">git commit </SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">doesn</SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; COLOR: black; mso-bidi-font-family: Birka; mso-font-kerning: 0pt; mso-fareast-font-family: Birka; mso-ascii-font-family: Birka">&#8217;</SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">t</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">print an error message; the only message is the one produced by the script. To avoid</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">confusing the user, be careful always to print an error message from a </SPAN><SPAN style="FONT-SIZE: 10pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">&#8220;<SPAN lang=EN-US>pre</SPAN>&#8221;<SPAN lang=EN-US> script if</SPAN></SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">it</SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; COLOR: black; mso-bidi-font-family: Birka; mso-font-kerning: 0pt; mso-fareast-font-family: Birka; mso-ascii-font-family: Birka">&#8217;</SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">s going to return a nonzero (</SPAN><SPAN style="FONT-SIZE: 10pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">&#8220;<SPAN lang=EN-US>reject</SPAN>&#8221;<SPAN lang=EN-US>) exit code.</SPAN></SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 10pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">Given those basics, let</SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; COLOR: black; mso-bidi-font-family: Birka; mso-font-kerning: 0pt; mso-fareast-font-family: Birka; mso-ascii-font-family: Birka">&#8217;</SPAN><SPAN lang=EN-US style="FONT-SIZE: 10pt; COLOR: black; FONT-FAMILY: Birka; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">s talk about the different hooks you can create.</SPAN>