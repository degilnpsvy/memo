bus_probe_device&#21644;driver_attach 
<P></P>
<P>&#21516;&#26679;&#65292;&#36825;&#20004;&#20010;&#25509;&#21475;&#37117;&#26159;&#22312;drivers/base/base.h&#20013;&#22768;&#26126;.</P>
<P><FONT size=3>In drivers/base/bus.c:</FONT></P><PRE style="BORDER-TOP: 0px; BORDER-RIGHT: 0px; FONT-VARIANT: normal; WORD-SPACING: 0px; BORDER-BOTTOM: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); FONT-STYLE: normal; MARGIN: 0px; BORDER-LEFT: 0px; LETTER-SPACING: normal; LINE-HEIGHT: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/bus.c#542" name=542><FONT size=4>542</FONT></A><SPAN class=c style="COLOR: rgb(102,102,102)"><FONT size=4>/**
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/bus.c#543" name=543><FONT size=4>543</FONT></A><FONT size=4> * bus_probe_device - probe drivers for a new device
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/bus.c#544" name=544><FONT size=4>544</FONT></A><FONT size=4> * @dev: device to probe
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/bus.c#545" name=545><FONT size=4>545</FONT></A><FONT size=4> *
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/bus.c#546" name=546><FONT size=4>546</FONT></A><FONT size=4> * - Automatically probe for a driver if the bus allows it.
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/bus.c#547" name=547><FONT size=4>547</FONT></A><FONT size=4> */</FONT></SPAN>
<A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; BACKGROUND: orange; COLOR: yellow; TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/bus.c#548" name=548><FONT size=4>548</FONT></A><FONT size=4><B>void</B> </FONT><A class=xf style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,0,255)" name=bus_probe_device></A><A class=xf style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,0,255)" href="http://172.21.12.145:8080/source/s?refs=bus_probe_device&amp;project=linux-4.1"><FONT size=4>bus_probe_device</FONT></A><FONT size=4>(<B>struct</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=device&amp;project=linux-4.1"><FONT size=4>device</FONT></A><FONT size=4> *</FONT><A class=xa style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(102,0,204)" name=dev></A><A class=xa style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(102,0,204)" href="http://172.21.12.145:8080/source/s?refs=dev&amp;project=linux-4.1"><FONT size=4>dev</FONT></A><FONT size=4>)
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/bus.c#549" name=549><FONT size=4>549</FONT></A><FONT size=4>{
</FONT><A class=hl style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(0,0,0); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/bus.c#550" name=550><FONT size=4>550</FONT></A><FONT size=4>	<B>struct</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=bus_type&amp;project=linux-4.1"><FONT size=4>bus_type</FONT></A><FONT size=4> *</FONT><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" name=bus></A><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" href="http://172.21.12.145:8080/source/s?refs=bus&amp;project=linux-4.1"><FONT size=4>bus</FONT></A><FONT size=4> = </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.1"><FONT size=4>dev</FONT></A><FONT size=4>-&gt;</FONT><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" name=bus></A><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" href="http://172.21.12.145:8080/source/s?refs=bus&amp;project=linux-4.1"><FONT size=4>bus</FONT></A><FONT size=4>;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/bus.c#551" name=551><FONT size=4>551</FONT></A><FONT size=4>	<B>struct</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=subsys_interface&amp;project=linux-4.1"><FONT size=4>subsys_interface</FONT></A><FONT size=4> *</FONT><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" name=sif></A><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" href="http://172.21.12.145:8080/source/s?refs=sif&amp;project=linux-4.1"><FONT size=4>sif</FONT></A><FONT size=4>;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/bus.c#552" name=552><FONT size=4>552</FONT></A><FONT size=4>	<B>int</B> </FONT><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" name=ret></A><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" href="http://172.21.12.145:8080/source/s?refs=ret&amp;project=linux-4.1"><FONT size=4>ret</FONT></A><FONT size=4>;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/bus.c#553" name=553><FONT size=4>553</FONT></A>
<A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/bus.c#554" name=554><FONT size=4>554</FONT></A><FONT size=4>	<B>if</B> (!</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=bus&amp;project=linux-4.1"><FONT size=4>bus</FONT></A><FONT size=4>)
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/bus.c#555" name=555><FONT size=4>555</FONT></A><FONT size=4>		<B>return</B>;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/bus.c#556" name=556><FONT size=4>556</FONT></A>
<A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/bus.c#557" name=557><FONT size=4>557</FONT></A><FONT size=4>	<B>if</B> (</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=bus&amp;project=linux-4.1"><FONT size=4>bus</FONT></A><FONT size=4>-&gt;p-&gt;</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=drivers_autoprobe&amp;project=linux-4.1"><FONT size=4>drivers_autoprobe</FONT></A><FONT size=4>) {
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/bus.c#558" name=558><FONT size=4>558</FONT></A><FONT size=4>		</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=ret&amp;project=linux-4.1"><FONT size=4>ret</FONT></A><FONT size=4> = </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=device_attach&amp;project=linux-4.1"><FONT size=4>device_attach</FONT></A><FONT size=4>(</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.1"><FONT size=4>dev</FONT></A><FONT size=4>);
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/bus.c#559" name=559><FONT size=4>559</FONT></A><FONT size=4>		</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=WARN_ON&amp;project=linux-4.1"><FONT size=4>WARN_ON</FONT></A><FONT size=4>(</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=ret&amp;project=linux-4.1"><FONT size=4>ret</FONT></A><FONT size=4> &lt; 0);
</FONT><A class=hl style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(0,0,0); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/bus.c#560" name=560><FONT size=4>560</FONT></A><FONT size=4>	}
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/bus.c#561" name=561><FONT size=4>561</FONT></A>
<A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/bus.c#562" name=562><FONT size=4>562</FONT></A><FONT size=4>	</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=mutex_lock&amp;project=linux-4.1"><FONT size=4>mutex_lock</FONT></A><FONT size=4>(&amp;</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=bus&amp;project=linux-4.1"><FONT size=4>bus</FONT></A><FONT size=4>-&gt;p-&gt;</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=mutex&amp;project=linux-4.1"><FONT size=4>mutex</FONT></A><FONT size=4>);
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/bus.c#563" name=563><FONT size=4>563</FONT></A><FONT size=4>	</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=list_for_each_entry&amp;project=linux-4.1"><FONT size=4>list_for_each_entry</FONT></A><FONT size=4>(</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=sif&amp;project=linux-4.1"><FONT size=4>sif</FONT></A><FONT size=4>, &amp;</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=bus&amp;project=linux-4.1"><FONT size=4>bus</FONT></A><FONT size=4>-&gt;p-&gt;</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=interfaces&amp;project=linux-4.1"><FONT size=4>interfaces</FONT></A><FONT size=4>, </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=node&amp;project=linux-4.1"><FONT size=4>node</FONT></A><FONT size=4>)
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/bus.c#564" name=564><FONT size=4>564</FONT></A><FONT size=4>		<B>if</B> (</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=sif&amp;project=linux-4.1"><FONT size=4>sif</FONT></A><FONT size=4>-&gt;</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=add_dev&amp;project=linux-4.1"><FONT size=4>add_dev</FONT></A><FONT size=4>)
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/bus.c#565" name=565><FONT size=4>565</FONT></A><FONT size=4>			</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=sif&amp;project=linux-4.1"><FONT size=4>sif</FONT></A><FONT size=4>-&gt;</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=add_dev&amp;project=linux-4.1"><FONT size=4>add_dev</FONT></A><FONT size=4>(</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.1"><FONT size=4>dev</FONT></A><FONT size=4>, </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=sif&amp;project=linux-4.1"><FONT size=4>sif</FONT></A><FONT size=4>);
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/bus.c#566" name=566><FONT size=4>566</FONT></A><FONT size=4>	</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=mutex_unlock&amp;project=linux-4.1"><FONT size=4>mutex_unlock</FONT></A><FONT size=4>(&amp;</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=bus&amp;project=linux-4.1"><FONT size=4>bus</FONT></A><FONT size=4>-&gt;p-&gt;</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=mutex&amp;project=linux-4.1"><FONT size=4>mutex</FONT></A><FONT size=4>);
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/bus.c#567" name=567><FONT size=4>567</FONT></A><FONT size=4>}</FONT></PRE>
<P><FONT size=4>In drivers/base/dd.c</FONT><PRE style="BORDER-TOP: 0px; BORDER-RIGHT: 0px; FONT-VARIANT: normal; WORD-SPACING: 0px; BORDER-BOTTOM: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); FONT-STYLE: normal; MARGIN: 0px; BORDER-LEFT: 0px; LETTER-SPACING: normal; LINE-HEIGHT: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><A class=hl style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(0,0,0); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/dd.c#500" name=500><FONT size=4>500</FONT></A><SPAN class=c style="COLOR: rgb(102,102,102)"><FONT size=4>/**
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/dd.c#501" name=501><FONT size=4>501</FONT></A><FONT size=4> * driver_attach - try to bind driver to devices.
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/dd.c#502" name=502><FONT size=4>502</FONT></A><FONT size=4> * @drv: driver.
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/dd.c#503" name=503><FONT size=4>503</FONT></A><FONT size=4> *
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/dd.c#504" name=504><FONT size=4>504</FONT></A><FONT size=4> * Walk the list of devices that the bus has on it and try to
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/dd.c#505" name=505><FONT size=4>505</FONT></A><FONT size=4> * match the driver with each one.  If driver_probe_device()
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/dd.c#506" name=506><FONT size=4>506</FONT></A><FONT size=4> * returns 0 and the @dev-&gt;driver is set, we've found a
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/dd.c#507" name=507><FONT size=4>507</FONT></A><FONT size=4> * compatible pair.
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/dd.c#508" name=508><FONT size=4>508</FONT></A><FONT size=4> */</FONT></SPAN>
<A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; BACKGROUND: orange; COLOR: yellow; TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/dd.c#509" name=509><FONT size=4>509</FONT></A><FONT size=4><B>int</B> </FONT><A class=xf style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,0,255)" name=driver_attach></A><A class=xf style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,0,255)" href="http://172.21.12.145:8080/source/s?refs=driver_attach&amp;project=linux-4.1"><FONT size=4>driver_attach</FONT></A><FONT size=4>(<B>struct</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=device_driver&amp;project=linux-4.1"><FONT size=4>device_driver</FONT></A><FONT size=4> *</FONT><A class=xa style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(102,0,204)" name=drv></A><A class=xa style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(102,0,204)" href="http://172.21.12.145:8080/source/s?refs=drv&amp;project=linux-4.1"><FONT size=4>drv</FONT></A><FONT size=4>)
</FONT><A class=hl style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(0,0,0); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/dd.c#510" name=510><FONT size=4>510</FONT></A><FONT size=4>{
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/dd.c#511" name=511><FONT size=4>511</FONT></A><FONT size=4>	<B>return</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=bus_for_each_dev&amp;project=linux-4.1"><FONT size=4>bus_for_each_dev</FONT></A><FONT size=4>(</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=drv&amp;project=linux-4.1"><FONT size=4>drv</FONT></A><FONT size=4>-&gt;</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=bus&amp;project=linux-4.1"><FONT size=4>bus</FONT></A><FONT size=4>, </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=NULL&amp;project=linux-4.1"><FONT size=4>NULL</FONT></A><FONT size=4>, </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=drv&amp;project=linux-4.1"><FONT size=4>drv</FONT></A><FONT size=4>, </FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/dd.c#__driver_attach"><FONT size=4>__driver_attach</FONT></A><FONT size=4>);
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/dd.c#512" name=512><FONT size=4>512</FONT></A><FONT size=4>}
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/dd.c#513" name=513><FONT size=4>513</FONT></A><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=EXPORT_SYMBOL_GPL&amp;project=linux-4.1"><FONT size=4>EXPORT_SYMBOL_GPL</FONT></A><FONT size=4>(</FONT><A class=xv style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(204,51,0)" name=driver_attach></A><A class=xv style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(204,51,0)" href="http://172.21.12.145:8080/source/s?refs=driver_attach&amp;project=linux-4.1"><FONT size=4>driver_attach</FONT></A><FONT size=4>);</FONT></PRE>
<P>&#36825;&#20004;&#20010;&#32467;&#26500;&#30340;&#34892;&#20026;&#31867;&#20284;&#65292;&#36923;&#36753;&#20063;&#24456;&#31616;&#21333;&#65292;&#26082;&#65306;&#25628;&#32034;&#25152;&#22312;&#30340;bus&#65292;&#27604;&#23545;&#26159;&#21542;&#26377;&#21516;&#21517;&#30340;device_driver&#65288;&#25110;device&#65289;&#65292;&#22914;&#26524;&#26377;<SPAN style="COLOR: rgb(229,51,51)">&#24182;&#19988;&#35813;&#35774;&#22791;&#27809;&#26377;&#32465;&#23450;Driver&#65288;&#27880;&#65306;&#36825;&#19968;&#28857;&#24456;&#37325;&#35201;&#65292;&#36890;&#36807;&#23427;&#65292;&#21487;&#20197;&#20351;&#21516;&#19968;&#20010;Driver&#65292;&#39537;&#21160;&#30456;&#21516;&#21517;&#31216;&#30340;&#22810;&#20010;&#35774;&#22791;&#65292;&#21518;&#32493;&#22312;Platform&#35774;&#22791;&#30340;&#25551;&#36848;&#20013;&#20250;&#25552;&#21450;&#65289;</SPAN>&#21017;&#35843;&#29992;device_driver&#30340;probe&#25509;&#21475;&#12290;
<P><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#666" name=666>666</A><SPAN class=c>/**
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#667" name=667>667</A> * device_attach - try to attach device to a driver.<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#668" name=668>668</A> * @dev: device.<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#669" name=669>669</A> *<BR><A class=hl href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#670" name=670>670</A> * Walk the list of drivers that the bus has and call
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#671" name=671>671</A> * driver_probe_device() for each pair. If a compatible<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#672" name=672>672</A> * pair is found, break out and return.<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#673" name=673>673</A> *<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#674" name=674>674</A> * Returns 1 if the device was bound to a driver;<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#675" name=675>675</A> * 0 if no matching driver was found;<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#676" name=676>676</A> * -ENODEV if the device is not registered.<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#677" name=677>677</A> *<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#678" name=678>678</A> * When called for a USB interface, @dev-&gt;parent lock must be held.<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#679" name=679>679</A> */</SPAN><BR><A class=hl href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#680" name=680>680</A><B>int</B> <A class=xf name=device_attach></A><A class=xf href="http://172.21.12.145:8080/source/s?refs=device_attach&amp;project=linux-4.5">device_attach</A>(<B>struct</B> <A href="http://172.21.12.145:8080/source/s?defs=device&amp;project=linux-4.5">device</A> *<A class=xa name=dev></A><A class=xa href="http://172.21.12.145:8080/source/s?refs=dev&amp;project=linux-4.5">dev</A>)<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#681" name=681>681</A>{<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#682" name=682>682</A>	<B>return</B> <A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#__device_attach">__device_attach</A>(<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>, <B>false</B>);<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#683" name=683>683</A>}<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#684" name=684>684</A><A href="http://172.21.12.145:8080/source/s?defs=EXPORT_SYMBOL_GPL&amp;project=linux-4.5">EXPORT_SYMBOL_GPL</A>(<A class=xv name=device_attach></A><A class=xv href="http://172.21.12.145:8080/source/s?refs=device_attach&amp;project=linux-4.5">device_attach</A>);
<P><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#614" name=614>614</A><B>static</B> <B>int</B> <A class=xf name=__device_attach></A><A class=xf href="http://172.21.12.145:8080/source/s?refs=__device_attach&amp;project=linux-4.5">__device_attach</A>(<B>struct</B> <A href="http://172.21.12.145:8080/source/s?defs=device&amp;project=linux-4.5">device</A> *<A class=xa name=dev></A><A class=xa href="http://172.21.12.145:8080/source/s?refs=dev&amp;project=linux-4.5">dev</A>, <B>bool</B> <A class=xa name=allow_async></A><A class=xa href="http://172.21.12.145:8080/source/s?refs=allow_async&amp;project=linux-4.5">allow_async</A>)<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#615" name=615>615</A>{<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#616" name=616>616</A>	<B>int</B> <A class=xl name=ret></A><A class=xl href="http://172.21.12.145:8080/source/s?refs=ret&amp;project=linux-4.5">ret</A> = 0;<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#617" name=617>617</A><BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#618" name=618>618</A>	<A href="http://172.21.12.145:8080/source/s?defs=device_lock&amp;project=linux-4.5">device_lock</A>(<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>);<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#619" name=619>619</A>	<B>if</B> (<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=driver&amp;project=linux-4.5">driver</A>) {<BR><A class=hl href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#620" name=620>620</A>		<B>if</B> (<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#device_is_bound">device_is_bound</A>(<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>)) {<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#621" name=621>621</A>			<A href="http://172.21.12.145:8080/source/s?defs=ret&amp;project=linux-4.5">ret</A> = <SPAN class=n>1</SPAN>;<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#622" name=622>622</A>			<B>goto</B> <A href="http://172.21.12.145:8080/source/s?defs=out_unlock&amp;project=linux-4.5">out_unlock</A>;<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#623" name=623>623</A>		}<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#624" name=624>624</A>		<A href="http://172.21.12.145:8080/source/s?defs=ret&amp;project=linux-4.5">ret</A> = <A href="http://172.21.12.145:8080/source/s?defs=device_bind_driver&amp;project=linux-4.5">device_bind_driver</A>(<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>);<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#625" name=625>625</A>		<B>if</B> (<A href="http://172.21.12.145:8080/source/s?defs=ret&amp;project=linux-4.5">ret</A> == 0)<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#626" name=626>626</A>			<A href="http://172.21.12.145:8080/source/s?defs=ret&amp;project=linux-4.5">ret</A> = <SPAN class=n>1</SPAN>;<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#627" name=627>627</A>		<B>else</B> {<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#628" name=628>628</A>			<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=driver&amp;project=linux-4.5">driver</A> = <A href="http://172.21.12.145:8080/source/s?defs=NULL&amp;project=linux-4.5">NULL</A>;<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#629" name=629>629</A>			<A href="http://172.21.12.145:8080/source/s?defs=ret&amp;project=linux-4.5">ret</A> = 0;<BR><A class=hl href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#630" name=630>630</A>		}<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#631" name=631>631</A>	} <B>else</B> {<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#632" name=632>632</A>		<B>struct</B> <A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#device_attach_data">device_attach_data</A> <A class=xl name=data></A><A class=xl href="http://172.21.12.145:8080/source/s?refs=data&amp;project=linux-4.5">data</A> = {<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#633" name=633>633</A>			.<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A> = <A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>,<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#634" name=634>634</A>			.<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#check_async">check_async</A> = <A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#allow_async">allow_async</A>,<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#635" name=635>635</A>			.<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#want_async">want_async</A> = <B>false</B>,<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#636" name=636>636</A>		};<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#637" name=637>637</A><BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#638" name=638>638</A>		<B>if</B> (<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=parent&amp;project=linux-4.5">parent</A>)<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#639" name=639>639</A>			<A href="http://172.21.12.145:8080/source/s?defs=pm_runtime_get_sync&amp;project=linux-4.5">pm_runtime_get_sync</A>(<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=parent&amp;project=linux-4.5">parent</A>);<BR><A class=hl href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#640" name=640>640</A><BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#641" name=641>641</A>		<A href="http://172.21.12.145:8080/source/s?defs=ret&amp;project=linux-4.5">ret</A> = <A href="http://172.21.12.145:8080/source/s?defs=bus_for_each_drv&amp;project=linux-4.5">bus_for_each_drv</A>(<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=bus&amp;project=linux-4.5">bus</A>, <A href="http://172.21.12.145:8080/source/s?defs=NULL&amp;project=linux-4.5">NULL</A>, &amp;<A href="http://172.21.12.145:8080/source/s?defs=data&amp;project=linux-4.5">data</A>,<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#642" name=642>642</A>					<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#__device_attach_driver">__device_attach_driver</A>);<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#643" name=643>643</A>		<B>if</B> (!<A href="http://172.21.12.145:8080/source/s?defs=ret&amp;project=linux-4.5">ret</A> &amp;&amp; <A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#allow_async">allow_async</A> &amp;&amp; <A href="http://172.21.12.145:8080/source/s?defs=data&amp;project=linux-4.5">data</A>.<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#have_async">have_async</A>) {<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#644" name=644>644</A>			<SPAN class=c>/*<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#645" name=645>645</A>			 * If we could not find appropriate driver<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#646" name=646>646</A>			 * synchronously and we are allowed to do<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#647" name=647>647</A>			 * async probes and there are drivers that<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#648" name=648>648</A>			 * want to probe asynchronously, we'll<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#649" name=649>649</A>			 * try them.<BR><A class=hl href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#650" name=650>650</A>			 */</SPAN><BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#651" name=651>651</A>			<A href="http://172.21.12.145:8080/source/s?defs=dev_dbg&amp;project=linux-4.5">dev_dbg</A>(<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>, <SPAN class=s>"scheduling asynchronous probe\n"</SPAN>);<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#652" name=652>652</A>			<A href="http://172.21.12.145:8080/source/s?defs=get_device&amp;project=linux-4.5">get_device</A>(<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>);<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#653" name=653>653</A>			<A href="http://172.21.12.145:8080/source/s?defs=async_schedule&amp;project=linux-4.5">async_schedule</A>(<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#__device_attach_async_helper">__device_attach_async_helper</A>, <A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>);<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#654" name=654>654</A>		} <B>else</B> {<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#655" name=655>655</A>			<A href="http://172.21.12.145:8080/source/s?defs=pm_request_idle&amp;project=linux-4.5">pm_request_idle</A>(<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>);<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#656" name=656>656</A>		}<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#657" name=657>657</A><BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#658" name=658>658</A>		<B>if</B> (<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=parent&amp;project=linux-4.5">parent</A>)<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#659" name=659>659</A>			<A href="http://172.21.12.145:8080/source/s?defs=pm_runtime_put&amp;project=linux-4.5">pm_runtime_put</A>(<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=parent&amp;project=linux-4.5">parent</A>);<BR><A class=hl href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#660" name=660>660</A>	}<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#661" name=661>661</A><A href="http://172.21.12.145:8080/source/s?defs=out_unlock&amp;project=linux-4.5">out_unlock</A>:<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#662" name=662>662</A>	<A href="http://172.21.12.145:8080/source/s?defs=device_unlock&amp;project=linux-4.5">device_unlock</A>(<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>);<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#663" name=663>663</A>	<B>return</B> <A href="http://172.21.12.145:8080/source/s?defs=ret&amp;project=linux-4.5">ret</A>;<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#664" name=664>664</A>}</P>
<P><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#558" name=558>558</A><B>static</B> <B>int</B> <A class=xf name=__device_attach_driver></A><A class=xf href="http://172.21.12.145:8080/source/s?refs=__device_attach_driver&amp;project=linux-4.5">__device_attach_driver</A>(<B>struct</B> <A href="http://172.21.12.145:8080/source/s?defs=device_driver&amp;project=linux-4.5">device_driver</A> *<A class=xa name=drv></A><A class=xa href="http://172.21.12.145:8080/source/s?refs=drv&amp;project=linux-4.5">drv</A>, <B>void</B> *<A class=xa name=_data></A><A class=xa href="http://172.21.12.145:8080/source/s?refs=_data&amp;project=linux-4.5">_data</A>)<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#559" name=559>559</A>{<BR><A class=hl href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#560" name=560>560</A>	<B>struct</B> <A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#device_attach_data">device_attach_data</A> *<A class=xl name=data></A><A class=xl href="http://172.21.12.145:8080/source/s?refs=data&amp;project=linux-4.5">data</A> = <A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#_data">_data</A>;<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#561" name=561>561</A>	<B>struct</B> <A href="http://172.21.12.145:8080/source/s?defs=device&amp;project=linux-4.5">device</A> *<A class=xl name=dev></A><A class=xl href="http://172.21.12.145:8080/source/s?refs=dev&amp;project=linux-4.5">dev</A> = <A href="http://172.21.12.145:8080/source/s?defs=data&amp;project=linux-4.5">data</A>-&gt;<A class=xl name=dev></A><A class=xl href="http://172.21.12.145:8080/source/s?refs=dev&amp;project=linux-4.5">dev</A>;<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#562" name=562>562</A>	<B>bool</B> <A class=xl name=async_allowed></A><A class=xl href="http://172.21.12.145:8080/source/s?refs=async_allowed&amp;project=linux-4.5">async_allowed</A>;<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#563" name=563>563</A><BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#564" name=564>564</A>	<SPAN class=c>/*<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#565" name=565>565</A>	 * Check if device has already been claimed. This may<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#566" name=566>566</A>	 * happen with driver loading, device <A href="http://172.21.12.145:8080/source/s?path=discovery/">discovery</A>/<A href="http://172.21.12.145:8080/source/s?path=discovery/registration">registration</A>,<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#567" name=567>567</A>	 * and deferred probe processing happens all at once with<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#568" name=568>568</A>	 * multiple threads.<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#569" name=569>569</A>	 */</SPAN><BR><A class=hl href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#570" name=570>570</A>	<B>if</B> (<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=driver&amp;project=linux-4.5">driver</A>)<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#571" name=571>571</A>		<B>return</B> -<A href="http://172.21.12.145:8080/source/s?defs=EBUSY&amp;project=linux-4.5">EBUSY</A>;<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#572" name=572>572</A><BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#573" name=573>573</A>	<B>if</B> (!<A href="http://172.21.12.145:8080/source/s?defs=driver_match_device&amp;project=linux-4.5">driver_match_device</A>(<A href="http://172.21.12.145:8080/source/s?defs=drv&amp;project=linux-4.5">drv</A>, <A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>))<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#574" name=574>574</A>		<B>return</B> 0;<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#575" name=575>575</A><BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#576" name=576>576</A>	<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#async_allowed">async_allowed</A> = <A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#driver_allows_async_probing">driver_allows_async_probing</A>(<A href="http://172.21.12.145:8080/source/s?defs=drv&amp;project=linux-4.5">drv</A>);<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#577" name=577>577</A><BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#578" name=578>578</A>	<B>if</B> (<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#async_allowed">async_allowed</A>)<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#579" name=579>579</A>		<A href="http://172.21.12.145:8080/source/s?defs=data&amp;project=linux-4.5">data</A>-&gt;<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#have_async">have_async</A> = <B>true</B>;<BR><A class=hl href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#580" name=580>580</A><BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#581" name=581>581</A>	<B>if</B> (<A href="http://172.21.12.145:8080/source/s?defs=data&amp;project=linux-4.5">data</A>-&gt;<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#check_async">check_async</A> &amp;&amp; <A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#async_allowed">async_allowed</A> != <A href="http://172.21.12.145:8080/source/s?defs=data&amp;project=linux-4.5">data</A>-&gt;<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#want_async">want_async</A>)<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#582" name=582>582</A>		<B>return</B> 0;<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#583" name=583>583</A><BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#584" name=584>584</A>	<B>return</B> <A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#driver_probe_device">driver_probe_device</A>(<A href="http://172.21.12.145:8080/source/s?defs=drv&amp;project=linux-4.5">drv</A>, <A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>);<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#585" name=585>585</A>}</P>
<P><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/base.h#114" name=114>114</A><B>static</B> <B>inline</B> <B>int</B> <A class=xf name=driver_match_device></A><A class=xf href="http://172.21.12.145:8080/source/s?refs=driver_match_device&amp;project=linux-4.5">driver_match_device</A>(<B>struct</B> <A href="http://172.21.12.145:8080/source/s?defs=device_driver&amp;project=linux-4.5">device_driver</A> *<A class=xa name=drv></A><A class=xa href="http://172.21.12.145:8080/source/s?refs=drv&amp;project=linux-4.5">drv</A>,<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/base.h#115" name=115>115</A>				&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>struct</B> <A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/base.h#device">device</A> *<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/base.h#dev">dev</A>)<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/base.h#116" name=116>116</A>{<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/base.h#117" name=117>117</A>	<B>return</B> <A href="http://172.21.12.145:8080/source/s?defs=drv&amp;project=linux-4.5">drv</A>-&gt;<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/base.h#bus">bus</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=match&amp;project=linux-4.5">match</A> ? <A href="http://172.21.12.145:8080/source/s?defs=drv&amp;project=linux-4.5">drv</A>-&gt;<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/base.h#bus">bus</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=match&amp;project=linux-4.5">match</A>(<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/base.h#dev">dev</A>, <A href="http://172.21.12.145:8080/source/s?defs=drv&amp;project=linux-4.5">drv</A>) : <SPAN class=n>1</SPAN>;<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/base.h#118" name=118>118</A>}</P>
<P><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#472" name=472>472</A><SPAN class=c>/**<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#473" name=473>473</A> * driver_probe_device - attempt to bind device &amp; driver together<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#474" name=474>474</A> * @drv: driver to bind a device to<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#475" name=475>475</A> * @dev: device to try to bind to the driver<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#476" name=476>476</A> *<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#477" name=477>477</A> * This function returns -ENODEV if the device is not registered,<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#478" name=478>478</A> * 1 if the device is bound successfully and 0 otherwise.<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#479" name=479>479</A> *<BR><A class=hl href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#480" name=480>480</A> * This function must be called with @dev lock held.&nbsp; When called for a<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#481" name=481>481</A> * USB interface, @dev-&gt;parent lock must be held as well.<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#482" name=482>482</A> *<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#483" name=483>483</A> * If the device has a parent, runtime-resume the parent before driver probing.<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#484" name=484>484</A> */</SPAN><BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#485" name=485>485</A><B>int</B> <A class=xf name=driver_probe_device></A><A class=xf href="http://172.21.12.145:8080/source/s?refs=driver_probe_device&amp;project=linux-4.5">driver_probe_device</A>(<B>struct</B> <A href="http://172.21.12.145:8080/source/s?defs=device_driver&amp;project=linux-4.5">device_driver</A> *<A class=xa name=drv></A><A class=xa href="http://172.21.12.145:8080/source/s?refs=drv&amp;project=linux-4.5">drv</A>, <B>struct</B> <A href="http://172.21.12.145:8080/source/s?defs=device&amp;project=linux-4.5">device</A> *<A class=xa name=dev></A><A class=xa href="http://172.21.12.145:8080/source/s?refs=dev&amp;project=linux-4.5">dev</A>)<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#486" name=486>486</A>{<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#487" name=487>487</A>	<B>int</B> <A class=xl name=ret></A><A class=xl href="http://172.21.12.145:8080/source/s?refs=ret&amp;project=linux-4.5">ret</A> = 0;<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#488" name=488>488</A><BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#489" name=489>489</A>	<B>if</B> (!<A href="http://172.21.12.145:8080/source/s?defs=device_is_registered&amp;project=linux-4.5">device_is_registered</A>(<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>))<BR><A class=hl href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#490" name=490>490</A>		<B>return</B> -<A href="http://172.21.12.145:8080/source/s?defs=ENODEV&amp;project=linux-4.5">ENODEV</A>;<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#491" name=491>491</A><BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#492" name=492>492</A>	<A href="http://172.21.12.145:8080/source/s?defs=pr_debug&amp;project=linux-4.5">pr_debug</A>(<SPAN class=s>"bus: '%s': %s: matched device %s with driver %s\n"</SPAN>,<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#493" name=493>493</A>		 <A href="http://172.21.12.145:8080/source/s?defs=drv&amp;project=linux-4.5">drv</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=bus&amp;project=linux-4.5">bus</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=name&amp;project=linux-4.5">name</A>, <A href="http://172.21.12.145:8080/source/s?defs=__func__&amp;project=linux-4.5">__func__</A>, <A href="http://172.21.12.145:8080/source/s?defs=dev_name&amp;project=linux-4.5">dev_name</A>(<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>), <A href="http://172.21.12.145:8080/source/s?defs=drv&amp;project=linux-4.5">drv</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=name&amp;project=linux-4.5">name</A>);<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#494" name=494>494</A><BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#495" name=495>495</A>	<B>if</B> (<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=parent&amp;project=linux-4.5">parent</A>)<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#496" name=496>496</A>		<A href="http://172.21.12.145:8080/source/s?defs=pm_runtime_get_sync&amp;project=linux-4.5">pm_runtime_get_sync</A>(<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=parent&amp;project=linux-4.5">parent</A>);<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#497" name=497>497</A><BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#498" name=498>498</A>	<A href="http://172.21.12.145:8080/source/s?defs=pm_runtime_barrier&amp;project=linux-4.5">pm_runtime_barrier</A>(<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>);<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#499" name=499>499</A>	<A href="http://172.21.12.145:8080/source/s?defs=ret&amp;project=linux-4.5">ret</A> = <A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#really_probe">really_probe</A>(<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>, <A href="http://172.21.12.145:8080/source/s?defs=drv&amp;project=linux-4.5">drv</A>);<BR><A class=hl href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#500" name=500>500</A>	<A href="http://172.21.12.145:8080/source/s?defs=pm_request_idle&amp;project=linux-4.5">pm_request_idle</A>(<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>);<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#501" name=501>501</A><BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#502" name=502>502</A>	<B>if</B> (<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=parent&amp;project=linux-4.5">parent</A>)<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#503" name=503>503</A>		<A href="http://172.21.12.145:8080/source/s?defs=pm_runtime_put&amp;project=linux-4.5">pm_runtime_put</A>(<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=parent&amp;project=linux-4.5">parent</A>);<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#504" name=504>504</A><BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#505" name=505>505</A>	<B>return</B> <A href="http://172.21.12.145:8080/source/s?defs=ret&amp;project=linux-4.5">ret</A>;<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#506" name=506>506</A>}</P>
<P><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/include/linux/device.h#922" name=922>922</A><B>static</B> <B>inline</B> <B>int</B> <A class=xf name=device_is_registered></A><A class=xf href="http://172.21.12.145:8080/source/s?refs=device_is_registered&amp;project=linux-4.5">device_is_registered</A>(<B>struct</B> <A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/include/linux/device.h#device">device</A> *<A class=xa name=dev></A><A class=xa href="http://172.21.12.145:8080/source/s?refs=dev&amp;project=linux-4.5">dev</A>)<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/include/linux/device.h#923" name=923>923</A>{<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/include/linux/device.h#924" name=924>924</A>	<B>return</B> <A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=kobj&amp;project=linux-4.5">kobj</A>.<A href="http://172.21.12.145:8080/source/s?defs=state_in_sysfs&amp;project=linux-4.5">state_in_sysfs</A>;<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/include/linux/device.h#925" name=925>925</A>}</P>
<P><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#328" name=328>328</A><B>static</B> <B>int</B> <A class=xf name=really_probe></A><A class=xf href="http://172.21.12.145:8080/source/s?refs=really_probe&amp;project=linux-4.5">really_probe</A>(<B>struct</B> <A href="http://172.21.12.145:8080/source/s?defs=device&amp;project=linux-4.5">device</A> *<A class=xa name=dev></A><A class=xa href="http://172.21.12.145:8080/source/s?refs=dev&amp;project=linux-4.5">dev</A>, <B>struct</B> <A href="http://172.21.12.145:8080/source/s?defs=device_driver&amp;project=linux-4.5">device_driver</A> *<A class=xa name=drv></A><A class=xa href="http://172.21.12.145:8080/source/s?refs=drv&amp;project=linux-4.5">drv</A>)<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#329" name=329>329</A>{<BR><A class=hl href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#330" name=330>330</A>	<B>int</B> <A class=xl name=ret></A><A class=xl href="http://172.21.12.145:8080/source/s?refs=ret&amp;project=linux-4.5">ret</A> = -<A href="http://172.21.12.145:8080/source/s?defs=EPROBE_DEFER&amp;project=linux-4.5">EPROBE_DEFER</A>;<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#331" name=331>331</A>	<B>int</B> <A class=xl name=local_trigger_count></A><A class=xl href="http://172.21.12.145:8080/source/s?refs=local_trigger_count&amp;project=linux-4.5">local_trigger_count</A> = <A href="http://172.21.12.145:8080/source/s?defs=atomic_read&amp;project=linux-4.5">atomic_read</A>(&amp;<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#deferred_trigger_count">deferred_trigger_count</A>);<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#332" name=332>332</A><BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#333" name=333>333</A>	<B>if</B> (<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#defer_all_probes">defer_all_probes</A>) {<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#334" name=334>334</A>		<SPAN class=c>/*<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#335" name=335>335</A>		 * Value of defer_all_probes can be set only by<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#336" name=336>336</A>		 * device_defer_all_probes_enable() which, in turn, will call<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#337" name=337>337</A>		 * wait_for_device_probe() right after that to avoid any races.<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#338" name=338>338</A>		 */</SPAN><BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#339" name=339>339</A>		<A href="http://172.21.12.145:8080/source/s?defs=dev_dbg&amp;project=linux-4.5">dev_dbg</A>(<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>, <SPAN class=s>"Driver %s force probe deferral\n"</SPAN>, <A href="http://172.21.12.145:8080/source/s?defs=drv&amp;project=linux-4.5">drv</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=name&amp;project=linux-4.5">name</A>);<BR><A class=hl href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#340" name=340>340</A>		<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#driver_deferred_probe_add">driver_deferred_probe_add</A>(<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>);<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#341" name=341>341</A>		<B>return</B> <A href="http://172.21.12.145:8080/source/s?defs=ret&amp;project=linux-4.5">ret</A>;<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#342" name=342>342</A>	}<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#343" name=343>343</A><BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#344" name=344>344</A>	<A href="http://172.21.12.145:8080/source/s?defs=atomic_inc&amp;project=linux-4.5">atomic_inc</A>(&amp;<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#probe_count">probe_count</A>);<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#345" name=345>345</A>	<A href="http://172.21.12.145:8080/source/s?defs=pr_debug&amp;project=linux-4.5">pr_debug</A>(<SPAN class=s>"bus: '%s': %s: probing driver %s with device %s\n"</SPAN>,<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#346" name=346>346</A>		 <A href="http://172.21.12.145:8080/source/s?defs=drv&amp;project=linux-4.5">drv</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=bus&amp;project=linux-4.5">bus</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=name&amp;project=linux-4.5">name</A>, <A href="http://172.21.12.145:8080/source/s?defs=__func__&amp;project=linux-4.5">__func__</A>, <A href="http://172.21.12.145:8080/source/s?defs=drv&amp;project=linux-4.5">drv</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=name&amp;project=linux-4.5">name</A>, <A href="http://172.21.12.145:8080/source/s?defs=dev_name&amp;project=linux-4.5">dev_name</A>(<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>));<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#347" name=347>347</A>	<A href="http://172.21.12.145:8080/source/s?defs=WARN_ON&amp;project=linux-4.5">WARN_ON</A>(!<A href="http://172.21.12.145:8080/source/s?defs=list_empty&amp;project=linux-4.5">list_empty</A>(&amp;<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=devres_head&amp;project=linux-4.5">devres_head</A>));<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#348" name=348>348</A><BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#349" name=349>349</A>	<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=driver&amp;project=linux-4.5">driver</A> = <A href="http://172.21.12.145:8080/source/s?defs=drv&amp;project=linux-4.5">drv</A>;<BR><A class=hl href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#350" name=350>350</A><BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#351" name=351>351</A>	<SPAN class=c>/* If using pinctrl, bind pins now before probing */</SPAN><BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#352" name=352>352</A>	<A href="http://172.21.12.145:8080/source/s?defs=ret&amp;project=linux-4.5">ret</A> = <A href="http://172.21.12.145:8080/source/s?defs=pinctrl_bind_pins&amp;project=linux-4.5">pinctrl_bind_pins</A>(<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>);<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#353" name=353>353</A>	<B>if</B> (<A href="http://172.21.12.145:8080/source/s?defs=ret&amp;project=linux-4.5">ret</A>)<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#354" name=354>354</A>		<B>goto</B> <A href="http://172.21.12.145:8080/source/s?defs=pinctrl_bind_failed&amp;project=linux-4.5">pinctrl_bind_failed</A>;<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#355" name=355>355</A><BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#356" name=356>356</A>	<B>if</B> (<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#driver_sysfs_add">driver_sysfs_add</A>(<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>)) {<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#357" name=357>357</A>		<A href="http://172.21.12.145:8080/source/s?defs=printk&amp;project=linux-4.5">printk</A>(<A href="http://172.21.12.145:8080/source/s?defs=KERN_ERR&amp;project=linux-4.5">KERN_ERR</A> <SPAN class=s>"%s: driver_sysfs_add(%s) failed\n"</SPAN>,<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#358" name=358>358</A>			<A href="http://172.21.12.145:8080/source/s?defs=__func__&amp;project=linux-4.5">__func__</A>, <A href="http://172.21.12.145:8080/source/s?defs=dev_name&amp;project=linux-4.5">dev_name</A>(<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>));<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#359" name=359>359</A>		<B>goto</B> <A href="http://172.21.12.145:8080/source/s?defs=probe_failed&amp;project=linux-4.5">probe_failed</A>;<BR><A class=hl href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#360" name=360>360</A>	}<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#361" name=361>361</A><BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#362" name=362>362</A>	<B>if</B> (<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=pm_domain&amp;project=linux-4.5">pm_domain</A> &amp;&amp; <A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=pm_domain&amp;project=linux-4.5">pm_domain</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=activate&amp;project=linux-4.5">activate</A>) {<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#363" name=363>363</A>		<A href="http://172.21.12.145:8080/source/s?defs=ret&amp;project=linux-4.5">ret</A> = <A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=pm_domain&amp;project=linux-4.5">pm_domain</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=activate&amp;project=linux-4.5">activate</A>(<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>);<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#364" name=364>364</A>		<B>if</B> (<A href="http://172.21.12.145:8080/source/s?defs=ret&amp;project=linux-4.5">ret</A>)<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#365" name=365>365</A>			<B>goto</B> <A href="http://172.21.12.145:8080/source/s?defs=probe_failed&amp;project=linux-4.5">probe_failed</A>;<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#366" name=366>366</A>	}<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#367" name=367>367</A><BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#368" name=368>368</A>	<SPAN class=c>/*<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#369" name=369>369</A>	 * Ensure devices are listed in devices_kset in correct order<BR><A class=hl href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#370" name=370>370</A>	 * It's important to move Dev to the end of devices_kset before<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#371" name=371>371</A>	 * calling .probe, because it could be recursive and parent Dev<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#372" name=372>372</A>	 * should always go first<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#373" name=373>373</A>	 */</SPAN><BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#374" name=374>374</A>	<A href="http://172.21.12.145:8080/source/s?defs=devices_kset_move_last&amp;project=linux-4.5">devices_kset_move_last</A>(<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>);<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#375" name=375>375</A><BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#376" name=376>376</A>	<B>if</B> (<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=bus&amp;project=linux-4.5">bus</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=probe&amp;project=linux-4.5">probe</A>) {<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#377" name=377>377</A>		<A href="http://172.21.12.145:8080/source/s?defs=ret&amp;project=linux-4.5">ret</A> = <A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=bus&amp;project=linux-4.5">bus</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=probe&amp;project=linux-4.5">probe</A>(<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>);<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#378" name=378>378</A>		<B>if</B> (<A href="http://172.21.12.145:8080/source/s?defs=ret&amp;project=linux-4.5">ret</A>)<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#379" name=379>379</A>			<B>goto</B> <A href="http://172.21.12.145:8080/source/s?defs=probe_failed&amp;project=linux-4.5">probe_failed</A>;<BR><A class=hl href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#380" name=380>380</A>	} <B>else</B> <B>if</B> (<A href="http://172.21.12.145:8080/source/s?defs=drv&amp;project=linux-4.5">drv</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=probe&amp;project=linux-4.5">probe</A>) {<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#381" name=381>381</A>		<A href="http://172.21.12.145:8080/source/s?defs=ret&amp;project=linux-4.5">ret</A> = <A href="http://172.21.12.145:8080/source/s?defs=drv&amp;project=linux-4.5">drv</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=probe&amp;project=linux-4.5">probe</A>(<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>);<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#382" name=382>382</A>		<B>if</B> (<A href="http://172.21.12.145:8080/source/s?defs=ret&amp;project=linux-4.5">ret</A>)<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#383" name=383>383</A>			<B>goto</B> <A href="http://172.21.12.145:8080/source/s?defs=probe_failed&amp;project=linux-4.5">probe_failed</A>;<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#384" name=384>384</A>	}<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#385" name=385>385</A><BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#386" name=386>386</A>	<A href="http://172.21.12.145:8080/source/s?defs=pinctrl_init_done&amp;project=linux-4.5">pinctrl_init_done</A>(<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>);<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#387" name=387>387</A><BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#388" name=388>388</A>	<B>if</B> (<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=pm_domain&amp;project=linux-4.5">pm_domain</A> &amp;&amp; <A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=pm_domain&amp;project=linux-4.5">pm_domain</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=sync&amp;project=linux-4.5">sync</A>)<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#389" name=389>389</A>		<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=pm_domain&amp;project=linux-4.5">pm_domain</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=sync&amp;project=linux-4.5">sync</A>(<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>);<BR><A class=hl href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#390" name=390>390</A><BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#391" name=391>391</A>	<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#driver_bound">driver_bound</A>(<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>);<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#392" name=392>392</A>	<A href="http://172.21.12.145:8080/source/s?defs=ret&amp;project=linux-4.5">ret</A> = <SPAN class=n>1</SPAN>;<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#393" name=393>393</A>	<A href="http://172.21.12.145:8080/source/s?defs=pr_debug&amp;project=linux-4.5">pr_debug</A>(<SPAN class=s>"bus: '%s': %s: bound device %s to driver %s\n"</SPAN>,<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#394" name=394>394</A>		 <A href="http://172.21.12.145:8080/source/s?defs=drv&amp;project=linux-4.5">drv</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=bus&amp;project=linux-4.5">bus</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=name&amp;project=linux-4.5">name</A>, <A href="http://172.21.12.145:8080/source/s?defs=__func__&amp;project=linux-4.5">__func__</A>, <A href="http://172.21.12.145:8080/source/s?defs=dev_name&amp;project=linux-4.5">dev_name</A>(<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>), <A href="http://172.21.12.145:8080/source/s?defs=drv&amp;project=linux-4.5">drv</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=name&amp;project=linux-4.5">name</A>);<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#395" name=395>395</A>	<B>goto</B> <A href="http://172.21.12.145:8080/source/s?defs=done&amp;project=linux-4.5">done</A>;<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#396" name=396>396</A><BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#397" name=397>397</A><A href="http://172.21.12.145:8080/source/s?defs=probe_failed&amp;project=linux-4.5">probe_failed</A>:<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#398" name=398>398</A>	<B>if</B> (<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=bus&amp;project=linux-4.5">bus</A>)<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#399" name=399>399</A>		<A href="http://172.21.12.145:8080/source/s?defs=blocking_notifier_call_chain&amp;project=linux-4.5">blocking_notifier_call_chain</A>(&amp;<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=bus&amp;project=linux-4.5">bus</A>-&gt;p-&gt;<A href="http://172.21.12.145:8080/source/s?defs=bus_notifier&amp;project=linux-4.5">bus_notifier</A>,<BR><A class=hl href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#400" name=400>400</A>					&nbsp;&nbsp;&nbsp;&nbsp; <A href="http://172.21.12.145:8080/source/s?defs=BUS_NOTIFY_DRIVER_NOT_BOUND&amp;project=linux-4.5">BUS_NOTIFY_DRIVER_NOT_BOUND</A>, <A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>);<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#401" name=401>401</A><A href="http://172.21.12.145:8080/source/s?defs=pinctrl_bind_failed&amp;project=linux-4.5">pinctrl_bind_failed</A>:<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#402" name=402>402</A>	<A href="http://172.21.12.145:8080/source/s?defs=devres_release_all&amp;project=linux-4.5">devres_release_all</A>(<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>);<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#403" name=403>403</A>	<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#driver_sysfs_remove">driver_sysfs_remove</A>(<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>);<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#404" name=404>404</A>	<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=driver&amp;project=linux-4.5">driver</A> = <A href="http://172.21.12.145:8080/source/s?defs=NULL&amp;project=linux-4.5">NULL</A>;<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#405" name=405>405</A>	<A href="http://172.21.12.145:8080/source/s?defs=dev_set_drvdata&amp;project=linux-4.5">dev_set_drvdata</A>(<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>, <A href="http://172.21.12.145:8080/source/s?defs=NULL&amp;project=linux-4.5">NULL</A>);<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#406" name=406>406</A>	<B>if</B> (<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=pm_domain&amp;project=linux-4.5">pm_domain</A> &amp;&amp; <A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=pm_domain&amp;project=linux-4.5">pm_domain</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=dismiss&amp;project=linux-4.5">dismiss</A>)<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#407" name=407>407</A>		<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=pm_domain&amp;project=linux-4.5">pm_domain</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=dismiss&amp;project=linux-4.5">dismiss</A>(<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>);<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#408" name=408>408</A>	<A href="http://172.21.12.145:8080/source/s?defs=pm_runtime_reinit&amp;project=linux-4.5">pm_runtime_reinit</A>(<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>);<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#409" name=409>409</A><BR><A class=hl href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#410" name=410>410</A>	<B>switch</B> (<A href="http://172.21.12.145:8080/source/s?defs=ret&amp;project=linux-4.5">ret</A>) {<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#411" name=411>411</A>	<B>case</B> -<A href="http://172.21.12.145:8080/source/s?defs=EPROBE_DEFER&amp;project=linux-4.5">EPROBE_DEFER</A>:<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#412" name=412>412</A>		<SPAN class=c>/* Driver requested deferred probing */</SPAN><BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#413" name=413>413</A>		<A href="http://172.21.12.145:8080/source/s?defs=dev_dbg&amp;project=linux-4.5">dev_dbg</A>(<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>, <SPAN class=s>"Driver %s requests probe deferral\n"</SPAN>, <A href="http://172.21.12.145:8080/source/s?defs=drv&amp;project=linux-4.5">drv</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=name&amp;project=linux-4.5">name</A>);<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#414" name=414>414</A>		<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#driver_deferred_probe_add">driver_deferred_probe_add</A>(<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>);<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#415" name=415>415</A>		<SPAN class=c>/* Did a trigger occur while probing? Need to re-trigger if yes */</SPAN><BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#416" name=416>416</A>		<B>if</B> (<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#local_trigger_count">local_trigger_count</A> != <A href="http://172.21.12.145:8080/source/s?defs=atomic_read&amp;project=linux-4.5">atomic_read</A>(&amp;<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#deferred_trigger_count">deferred_trigger_count</A>))<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#417" name=417>417</A>			<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#driver_deferred_probe_trigger">driver_deferred_probe_trigger</A>();<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#418" name=418>418</A>		<B>break</B>;<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#419" name=419>419</A>	<B>case</B> -<A href="http://172.21.12.145:8080/source/s?defs=ENODEV&amp;project=linux-4.5">ENODEV</A>:<BR><A class=hl href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#420" name=420>420</A>	<B>case</B> -<A href="http://172.21.12.145:8080/source/s?defs=ENXIO&amp;project=linux-4.5">ENXIO</A>:<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#421" name=421>421</A>		<A href="http://172.21.12.145:8080/source/s?defs=pr_debug&amp;project=linux-4.5">pr_debug</A>(<SPAN class=s>"%s: probe of %s rejects match %d\n"</SPAN>,<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#422" name=422>422</A>			 <A href="http://172.21.12.145:8080/source/s?defs=drv&amp;project=linux-4.5">drv</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=name&amp;project=linux-4.5">name</A>, <A href="http://172.21.12.145:8080/source/s?defs=dev_name&amp;project=linux-4.5">dev_name</A>(<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>), <A href="http://172.21.12.145:8080/source/s?defs=ret&amp;project=linux-4.5">ret</A>);<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#423" name=423>423</A>		<B>break</B>;<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#424" name=424>424</A>	<B>default</B>:<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#425" name=425>425</A>		<SPAN class=c>/* driver matched but the probe failed */</SPAN><BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#426" name=426>426</A>		<A href="http://172.21.12.145:8080/source/s?defs=printk&amp;project=linux-4.5">printk</A>(<A href="http://172.21.12.145:8080/source/s?defs=KERN_WARNING&amp;project=linux-4.5">KERN_WARNING</A><BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#427" name=427>427</A>		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <SPAN class=s>"%s: probe of %s failed with error %d\n"</SPAN>,<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#428" name=428>428</A>		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <A href="http://172.21.12.145:8080/source/s?defs=drv&amp;project=linux-4.5">drv</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=name&amp;project=linux-4.5">name</A>, <A href="http://172.21.12.145:8080/source/s?defs=dev_name&amp;project=linux-4.5">dev_name</A>(<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>), <A href="http://172.21.12.145:8080/source/s?defs=ret&amp;project=linux-4.5">ret</A>);<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#429" name=429>429</A>	}<BR><A class=hl href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#430" name=430>430</A>	<SPAN class=c>/*<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#431" name=431>431</A>	 * Ignore errors returned by -&gt;probe so that the next driver can try<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#432" name=432>432</A>	 * its luck.<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#433" name=433>433</A>	 */</SPAN><BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#434" name=434>434</A>	<A href="http://172.21.12.145:8080/source/s?defs=ret&amp;project=linux-4.5">ret</A> = 0;<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#435" name=435>435</A><A href="http://172.21.12.145:8080/source/s?defs=done&amp;project=linux-4.5">done</A>:<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#436" name=436>436</A>	<A href="http://172.21.12.145:8080/source/s?defs=atomic_dec&amp;project=linux-4.5">atomic_dec</A>(&amp;<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#probe_count">probe_count</A>);<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#437" name=437>437</A>	<A href="http://172.21.12.145:8080/source/s?defs=wake_up&amp;project=linux-4.5">wake_up</A>(&amp;<A href="http://172.21.12.145:8080/source/s?defs=probe_waitqueue&amp;project=linux-4.5">probe_waitqueue</A>);<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#438" name=438>438</A>	<B>return</B> <A href="http://172.21.12.145:8080/source/s?defs=ret&amp;project=linux-4.5">ret</A>;<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#439" name=439>439</A>}</P>
<P><A class=hl href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#720" name=720>720</A><SPAN class=c>/**<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#721" name=721>721</A> * driver_attach - try to bind driver to devices.<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#722" name=722>722</A> * @drv: driver.<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#723" name=723>723</A> *<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#724" name=724>724</A> * Walk the list of devices that the bus has on it and try to<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#725" name=725>725</A> * match the driver with each one.&nbsp; If driver_probe_device()<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#726" name=726>726</A> * returns 0 and the @dev-&gt;driver is set, we've found a<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#727" name=727>727</A> * compatible pair.<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#728" name=728>728</A> */</SPAN><BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#729" name=729>729</A><B>int</B> <A class=xf name=driver_attach></A><A class=xf href="http://172.21.12.145:8080/source/s?refs=driver_attach&amp;project=linux-4.5">driver_attach</A>(<B>struct</B> <A href="http://172.21.12.145:8080/source/s?defs=device_driver&amp;project=linux-4.5">device_driver</A> *<A class=xa name=drv></A><A class=xa href="http://172.21.12.145:8080/source/s?refs=drv&amp;project=linux-4.5">drv</A>)<BR><A class=hl href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#730" name=730>730</A>{<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#731" name=731>731</A>	<B>return</B> <A href="http://172.21.12.145:8080/source/s?defs=bus_for_each_dev&amp;project=linux-4.5">bus_for_each_dev</A>(<A href="http://172.21.12.145:8080/source/s?defs=drv&amp;project=linux-4.5">drv</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=bus&amp;project=linux-4.5">bus</A>, <A href="http://172.21.12.145:8080/source/s?defs=NULL&amp;project=linux-4.5">NULL</A>, <A href="http://172.21.12.145:8080/source/s?defs=drv&amp;project=linux-4.5">drv</A>, <A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#__driver_attach">__driver_attach</A>);<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#732" name=732>732</A>}<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#733" name=733>733</A><A href="http://172.21.12.145:8080/source/s?defs=EXPORT_SYMBOL_GPL&amp;project=linux-4.5">EXPORT_SYMBOL_GPL</A>(<A class=xv name=driver_attach></A><A class=xv href="http://172.21.12.145:8080/source/s?refs=driver_attach&amp;project=linux-4.5">driver_attach</A>);</P>
<P><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#691" name=691>691</A><B>static</B> <B>int</B> <A class=xf name=__driver_attach></A><A class=xf href="http://172.21.12.145:8080/source/s?refs=__driver_attach&amp;project=linux-4.5">__driver_attach</A>(<B>struct</B> <A href="http://172.21.12.145:8080/source/s?defs=device&amp;project=linux-4.5">device</A> *<A class=xa name=dev></A><A class=xa href="http://172.21.12.145:8080/source/s?refs=dev&amp;project=linux-4.5">dev</A>, <B>void</B> *<A class=xa name=data></A><A class=xa href="http://172.21.12.145:8080/source/s?refs=data&amp;project=linux-4.5">data</A>)<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#692" name=692>692</A>{<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#693" name=693>693</A>	<B>struct</B> <A href="http://172.21.12.145:8080/source/s?defs=device_driver&amp;project=linux-4.5">device_driver</A> *<A class=xl name=drv></A><A class=xl href="http://172.21.12.145:8080/source/s?refs=drv&amp;project=linux-4.5">drv</A> = <A href="http://172.21.12.145:8080/source/s?defs=data&amp;project=linux-4.5">data</A>;<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#694" name=694>694</A><BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#695" name=695>695</A>	<SPAN class=c>/*<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#696" name=696>696</A>	 * Lock device and try to bind to it. We drop the error<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#697" name=697>697</A>	 * here and always return 0, because we need to keep trying<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#698" name=698>698</A>	 * to bind to devices and some drivers will return an error<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#699" name=699>699</A>	 * simply if it didn't support the device.<BR><A class=hl href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#700" name=700>700</A>	 *<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#701" name=701>701</A>	 * driver_probe_device() will spit a warning if there<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#702" name=702>702</A>	 * is an error.<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#703" name=703>703</A>	 */</SPAN><BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#704" name=704>704</A><BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#705" name=705>705</A>	<B>if</B> (!<A href="http://172.21.12.145:8080/source/s?defs=driver_match_device&amp;project=linux-4.5">driver_match_device</A>(<A href="http://172.21.12.145:8080/source/s?defs=drv&amp;project=linux-4.5">drv</A>, <A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>))<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#706" name=706>706</A>		<B>return</B> 0;<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#707" name=707>707</A><BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#708" name=708>708</A>	<B>if</B> (<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=parent&amp;project=linux-4.5">parent</A>)	<SPAN class=c>/* Needed for USB */</SPAN><BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#709" name=709>709</A>		<A href="http://172.21.12.145:8080/source/s?defs=device_lock&amp;project=linux-4.5">device_lock</A>(<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=parent&amp;project=linux-4.5">parent</A>);<BR><A class=hl href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#710" name=710>710</A>	<A href="http://172.21.12.145:8080/source/s?defs=device_lock&amp;project=linux-4.5">device_lock</A>(<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>);<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#711" name=711>711</A>	<B>if</B> (!<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=driver&amp;project=linux-4.5">driver</A>)<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#712" name=712>712</A>		<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#driver_probe_device">driver_probe_device</A>(<A href="http://172.21.12.145:8080/source/s?defs=drv&amp;project=linux-4.5">drv</A>, <A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>);<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#713" name=713>713</A>	<A href="http://172.21.12.145:8080/source/s?defs=device_unlock&amp;project=linux-4.5">device_unlock</A>(<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>);<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#714" name=714>714</A>	<B>if</B> (<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=parent&amp;project=linux-4.5">parent</A>)<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#715" name=715>715</A>		<A href="http://172.21.12.145:8080/source/s?defs=device_unlock&amp;project=linux-4.5">device_unlock</A>(<A href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.5">dev</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=parent&amp;project=linux-4.5">parent</A>);<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#716" name=716>716</A><BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#717" name=717>717</A>	<B>return</B> 0;<BR><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/drivers/base/dd.c#718" name=718>718</A>}