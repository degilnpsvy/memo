# Documentation/SubmittingDrivers&nbsp;
<P></P>
<P>Submitting Drivers For The Linux Kernel<BR>---------------------------------------</P>
<P></P>
<P>This document is intended to explain how to submit device drivers to the<BR>various kernel trees. Note that if you are interested in video card drivers<BR>you should probably talk to XFree86 (<A href="http://www.xfree86.org/">http://www.xfree86.org/</A>) and/or X.Org<BR>(<A href="http://x.org/">http://x.org/</A>) instead.</P>
<P>Also read the Documentation/SubmittingPatches document.</P>
<P><BR>Allocating Device Numbers<BR>-------------------------</P>
<P>Major and minor numbers for block and character devices are allocated<BR>by the Linux assigned name and number authority (currently this is<BR>Torben Mathiasen). The site is <A href="http://www.lanana.org/">http://www.lanana.org/</A>. This<BR>also deals with allocating numbers for devices that are not going to<BR>be submitted to the mainstream kernel.<BR>See Documentation/devices.txt for more information on this.</P>
<P>If you don't use assigned numbers then when your device is submitted it will<BR>be given an assigned number even if that is different from values you may<BR>have shipped to customers before.</P>
<P>Who To Submit Drivers To<BR>------------------------</P>
<P>Linux 2.0:<BR>&nbsp;No new drivers are accepted for this kernel tree.</P>
<P>Linux 2.2:<BR>&nbsp;No new drivers are accepted for this kernel tree.</P>
<P>Linux 2.4:<BR>&nbsp;If the code area has a general maintainer then please submit it to<BR>&nbsp;the maintainer listed in MAINTAINERS in the kernel file. If the<BR>&nbsp;maintainer does not respond or you cannot find the appropriate<BR>&nbsp;maintainer then please contact Willy Tarreau &lt;<A href="mailto:w@1wt.eu">w@1wt.eu</A>&gt;.</P>
<P>Linux 2.6:<BR>&nbsp;The same rules apply as 2.4 except that you should follow linux-kernel<BR>&nbsp;to track changes in API's. The final contact point for Linux 2.6<BR>&nbsp;submissions is Andrew Morton.</P>
<P>What Criteria Determine Acceptance<BR>----------------------------------</P>
<P>Licensing:&nbsp;The code must be released to us under the<BR>&nbsp;&nbsp;GNU General Public License. We don't insist on any kind<BR>&nbsp;&nbsp;of exclusive GPL licensing, and if you wish the driver<BR>&nbsp;&nbsp;to be useful to other communities such as BSD you may well<BR>&nbsp;&nbsp;wish to release under multiple licenses.<BR>&nbsp;&nbsp;See accepted licenses at include/linux/module.h</P>
<P>Copyright:&nbsp;The copyright owner must agree to use of GPL.<BR>&nbsp;&nbsp;It's best if the submitter and copyright owner<BR>&nbsp;&nbsp;are the same person/entity. If not, the name of<BR>&nbsp;&nbsp;the person/entity authorizing use of GPL should be<BR>&nbsp;&nbsp;listed in case it's necessary to verify the will of<BR>&nbsp;&nbsp;the copyright owner.</P>
<P>Interfaces:&nbsp;If your driver uses existing interfaces and behaves like<BR>&nbsp;&nbsp;other drivers in the same class it will be much more likely<BR>&nbsp;&nbsp;to be accepted than if it invents gratuitous new ones.<BR>&nbsp;&nbsp;If you need to implement a common API over Linux and NT<BR>&nbsp;&nbsp;drivers do it in userspace.</P>
<P>Code:&nbsp;&nbsp;Please use the Linux style of code formatting as documented<BR>&nbsp;&nbsp;in Documentation/CodingStyle. If you have sections of code<BR>&nbsp;&nbsp;that need to be in other formats, for example because they<BR>&nbsp;&nbsp;are shared with a windows driver kit and you want to<BR>&nbsp;&nbsp;maintain them just once separate them out nicely and note<BR>&nbsp;&nbsp;this fact.</P>
<P>Portability:&nbsp;Pointers are not always 32bits, not all computers are little<BR>&nbsp;&nbsp;endian, people do not all have floating point and you<BR>&nbsp;&nbsp;shouldn't use inline x86 assembler in your driver without<BR>&nbsp;&nbsp;careful thought. Pure x86 drivers generally are not popular.<BR>&nbsp;&nbsp;If you only have x86 hardware it is hard to test portability<BR>&nbsp;&nbsp;but it is easy to make sure the code can easily be made<BR>&nbsp;&nbsp;portable.</P>
<P>Clarity:&nbsp;It helps if anyone can see how to fix the driver. It helps<BR>&nbsp;&nbsp;you because you get patches not bug reports. If you submit a<BR>&nbsp;&nbsp;driver that intentionally obfuscates how the hardware works<BR>&nbsp;&nbsp;it will go in the bitbucket.</P>
<P>PM support:&nbsp;Since Linux is used on many portable and desktop systems, your<BR>&nbsp;&nbsp;driver is likely to be used on such a system and therefore it<BR>&nbsp;&nbsp;should support basic power management by implementing, if<BR>&nbsp;&nbsp;necessary, the .suspend and .resume methods used during the<BR>&nbsp;&nbsp;system-wide suspend and resume transitions.&nbsp; You should verify<BR>&nbsp;&nbsp;that your driver correctly handles the suspend and resume, but<BR>&nbsp;&nbsp;if you are unable to ensure that, please at least define the<BR>&nbsp;&nbsp;.suspend method returning the -ENOSYS ("Function not<BR>&nbsp;&nbsp;implemented") error.&nbsp; You should also try to make sure that your<BR>&nbsp;&nbsp;driver uses as little power as possible when it's not doing<BR>&nbsp;&nbsp;anything.&nbsp; For the driver testing instructions see<BR>&nbsp;&nbsp;Documentation/power/drivers-testing.txt and for a relatively<BR>&nbsp;&nbsp;complete overview of the power management issues related to<BR>&nbsp;&nbsp;drivers see Documentation/power/devices.txt .</P>
<P>Control:&nbsp;In general if there is active maintenance of a driver by<BR>&nbsp;&nbsp;the author then patches will be redirected to them unless<BR>&nbsp;&nbsp;they are totally obvious and without need of checking.<BR>&nbsp;&nbsp;If you want to be the contact and update point for the<BR>&nbsp;&nbsp;driver it is a good idea to state this in the comments,<BR>&nbsp;&nbsp;and include an entry in MAINTAINERS for your driver.</P>
<P>What Criteria Do Not Determine Acceptance<BR>-----------------------------------------</P>
<P>Vendor:&nbsp;&nbsp;Being the hardware vendor and maintaining the driver is<BR>&nbsp;&nbsp;often a good thing. If there is a stable working driver from<BR>&nbsp;&nbsp;other people already in the tree don't expect 'we are the<BR>&nbsp;&nbsp;vendor' to get your driver chosen. Ideally work with the<BR>&nbsp;&nbsp;existing driver author to build a single perfect driver.</P>
<P>Author:&nbsp;&nbsp;It doesn't matter if a large Linux company wrote the driver,<BR>&nbsp;&nbsp;or you did. Nobody has any special access to the kernel<BR>&nbsp;&nbsp;tree. Anyone who tells you otherwise isn't telling the<BR>&nbsp;&nbsp;whole story.</P>
<P><BR>Resources<BR>---------</P>
<P>Linux kernel master tree:<BR>&nbsp;<A href="ftp://ftp.??.kernel.org:/pub/linux/kernel/">ftp.??.kernel.org:/pub/linux/kernel/</A>...<BR>&nbsp;?? == your country code, such as "us", "uk", "fr", etc.</P>
<P>&nbsp;<A href="http://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git">http://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git</A></P>
<P>Linux kernel mailing list:<BR>&nbsp;<A href="mailto:linux-kernel@vger.kernel.org">linux-kernel@vger.kernel.org</A><BR>&nbsp;[mail <A href="mailto:majordomo@vger.kernel.org">majordomo@vger.kernel.org</A> to subscribe]</P>
<P>Linux Device Drivers, Third Edition (covers 2.6.10):<BR>&nbsp;<A href="http://lwn.net/Kernel/LDD3/">http://lwn.net/Kernel/LDD3/</A>&nbsp; (free version)</P>
<P>LWN.net:<BR>&nbsp;Weekly summary of kernel development activity - <A href="http://lwn.net/">http://lwn.net/</A><BR>&nbsp;2.6 API changes:<BR>&nbsp;&nbsp;<A href="http://lwn.net/Articles/2.6-kernel-api/">http://lwn.net/Articles/2.6-kernel-api/</A><BR>&nbsp;Porting drivers from prior kernels to 2.6:<BR>&nbsp;&nbsp;<A href="http://lwn.net/Articles/driver-porting/">http://lwn.net/Articles/driver-porting/</A></P>
<P>KernelNewbies:<BR>&nbsp;Documentation and assistance for new kernel programmers<BR>&nbsp;<A href="http://kernelnewbies.org/">http://kernelnewbies.org/</A></P>
<P>Linux USB project:<BR>&nbsp;<A href="http://www.linux-usb.org/">http://www.linux-usb.org/</A></P>
<P>How to NOT write kernel driver by Arjan van de Ven:<BR>&nbsp;<A href="http://www.fenrus.org/how-to-not-write-a-device-driver-paper.pdf">http://www.fenrus.org/how-to-not-write-a-device-driver-paper.pdf</A></P>
<P>Kernel Janitor:<BR>&nbsp;<A href="http://kernelnewbies.org/KernelJanitors">http://kernelnewbies.org/KernelJanitors</A></P>
<P>GIT, Fast Version Control System:<BR>&nbsp;<A href="http://git-scm.com/">http://git-scm.com/</A>