/*<BR>&nbsp;* Internal function that tells the architecture code whether a<BR>&nbsp;* particular irq has been exclusively allocated or is available<BR>&nbsp;* for driver use.<BR>&nbsp;*/<BR>int can_request_irq(unsigned int irq, unsigned long irqflags)<BR>{<BR>&nbsp;unsigned long flags;<BR>&nbsp;struct irq_desc *desc = irq_get_desc_lock(irq, &amp;flags, 0);<BR>&nbsp;int canrequest = 0; 
<P></P>
<P>&nbsp;if (!desc)<BR>&nbsp;&nbsp;return 0;</P>
<P>&nbsp;if (irq_settings_can_request(desc)) {<BR>&nbsp;&nbsp;if (!desc-&gt;action ||<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; irqflags &amp; desc-&gt;action-&gt;flags &amp; IRQF_SHARED)<BR>&nbsp;&nbsp;&nbsp;canrequest = 1;<BR>&nbsp;}<BR>&nbsp;irq_put_desc_unlock(desc, flags);<BR>&nbsp;return canrequest;<BR>}