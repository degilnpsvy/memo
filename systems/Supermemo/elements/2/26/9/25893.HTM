<H2>Linux&#35774;&#22791;&#27169;&#22411;(4)_sysfs</H2>
<P class=date>&#20316;&#32773;&#65306;<A href="http://www.wowotech.net/author/2">&#34583;&#34583;</A> &#21457;&#24067;&#20110;&#65306;2014-3-14 18:31 &#20998;&#31867;&#65306;<A href="http://www.wowotech.net/sort/device_model">&#32479;&#19968;&#35774;&#22791;&#27169;&#22411;</A> </P>
<H4>1. &#21069;&#35328; </H4>
<P>sysfs&#26159;&#19968;&#20010;&#22522;&#20110;RAM&#30340;&#25991;&#20214;&#31995;&#32479;&#65292;&#23427;&#21644;Kobject&#19968;&#36215;&#65292;&#21487;&#20197;&#23558;Kernel&#30340;&#25968;&#25454;&#32467;&#26500;&#23548;&#20986;&#21040;&#29992;&#25143;&#31354;&#38388;&#65292;&#20197;&#25991;&#20214;&#30446;&#24405;&#32467;&#26500;&#30340;&#24418;&#24335;&#65292;&#25552;&#20379;&#23545;&#36825;&#20123;&#25968;&#25454;&#32467;&#26500;&#65288;&#20197;&#21450;&#25968;&#25454;&#32467;&#26500;&#30340;&#23646;&#24615;&#65289;&#30340;&#35775;&#38382;&#25903;&#25345;&#12290; </P>
<P>sysfs&#20855;&#22791;&#25991;&#20214;&#31995;&#32479;&#30340;&#25152;&#26377;&#23646;&#24615;&#65292;&#32780;&#26412;&#25991;&#20027;&#35201;&#20391;&#37325;&#20854;&#35774;&#22791;&#27169;&#22411;&#30340;&#29305;&#24615;,&#22240;&#27492;&#19981;&#20250;&#28041;&#21450;&#36807;&#22810;&#30340;&#25991;&#20214;&#31995;&#32479;&#23454;&#29616;&#32454;&#33410;&#65292;&#32780;&#21482;&#20171;&#32461;sysfs&#22312;Linux&#35774;&#22791;&#27169;&#22411;&#20013;&#30340;&#20316;&#29992;&#21644;&#20351;&#29992;&#26041;&#27861;&#12290;&#20855;&#20307;&#21253;&#25324;&#65306; </P>
<UL>
<LI>sysfs&#21644;Kobject&#30340;&#20851;&#31995; 
<LI>attribute&#30340;&#27010;&#24565; 
<LI>sysfs&#30340;&#25991;&#20214;&#31995;&#32479;&#25805;&#20316;&#25509;&#21475; </LI></UL>
<H4>2. sysfs&#21644;Kobject&#30340;&#20851;&#31995; </H4>
<P>&#22312;"<A href="http://www.wowotech.net/linux_kenrel/kobject.html">Linux&#35774;&#22791;&#27169;&#22411;_Kobject</A>&#8221;&#25991;&#31456;&#20013;&#65292;&#26377;&#25552;&#21040;&#36807;&#65292;&#27599;&#19968;&#20010;Kobject&#65292;&#37117;&#20250;&#23545;&#24212;sysfs&#20013;&#30340;&#19968;&#20010;&#30446;&#24405;&#12290;&#22240;&#27492;&#22312;&#23558;Kobject&#28155;&#21152;&#21040;Kernel&#26102;&#65292;create_dir&#25509;&#21475;&#20250;&#35843;&#29992;sysfs&#25991;&#20214;&#31995;&#32479;&#30340;&#21019;&#24314;&#30446;&#24405;&#25509;&#21475;&#65292;&#21019;&#24314;&#21644;Kobject&#23545;&#24212;&#30340;&#30446;&#24405;&#65292;&#30456;&#20851;&#30340;&#20195;&#30721;&#22914;&#19979;&#65306; </P><PRE style="BORDER-TOP: 0px; BORDER-RIGHT: 0px; FONT-VARIANT: normal; WORD-SPACING: 0px; BORDER-BOTTOM: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); FONT-STYLE: normal; MARGIN: 0px; BORDER-LEFT: 0px; LETTER-SPACING: normal; LINE-HEIGHT: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; BACKGROUND: orange; COLOR: yellow; TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/lib/kobject.c#66" name=66><FONT size=4>66</FONT></A><FONT size=4><B>static</B> <B>int</B> </FONT><A class=xf style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,0,255)" name=create_dir></A><A class=xf style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,0,255)" href="http://172.21.12.145:8080/source/s?refs=create_dir&amp;project=linux-4.1"><FONT size=4>create_dir</FONT></A><FONT size=4>(<B>struct</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=kobject&amp;project=linux-4.1"><FONT size=4>kobject</FONT></A><FONT size=4> *</FONT><A class=xa style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(102,0,204)" name=kobj></A><A class=xa style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(102,0,204)" href="http://172.21.12.145:8080/source/s?refs=kobj&amp;project=linux-4.1"><FONT size=4>kobj</FONT></A><FONT size=4>)
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/lib/kobject.c#67" name=67><FONT size=4>67</FONT></A><FONT size=4>{
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/lib/kobject.c#68" name=68><FONT size=4>68</FONT></A><FONT size=4>	<B>const</B> <B>struct</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=kobj_ns_type_operations&amp;project=linux-4.1"><FONT size=4>kobj_ns_type_operations</FONT></A><FONT size=4> *</FONT><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" name=ops></A><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" href="http://172.21.12.145:8080/source/s?refs=ops&amp;project=linux-4.1"><FONT size=4>ops</FONT></A><FONT size=4>;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/lib/kobject.c#69" name=69><FONT size=4>69</FONT></A><FONT size=4>	<B>int</B> </FONT><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" name=error></A><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" href="http://172.21.12.145:8080/source/s?refs=error&amp;project=linux-4.1"><FONT size=4>error</FONT></A><FONT size=4>;
</FONT><A class=hl style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(0,0,0); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/lib/kobject.c#70" name=70><FONT size=4>70</FONT></A>
<A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/lib/kobject.c#71" name=71><FONT size=4>71</FONT></A><FONT size=4>	</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=error&amp;project=linux-4.1"><FONT size=4>error</FONT></A><FONT size=4> = </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=sysfs_create_dir_ns&amp;project=linux-4.1"><FONT size=4>sysfs_create_dir_ns</FONT></A><FONT size=4>(</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=kobj&amp;project=linux-4.1"><FONT size=4>kobj</FONT></A><FONT size=4>, </FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-4.1/lib/kobject.c#kobject_namespace"><FONT size=4>kobject_namespace</FONT></A><FONT size=4>(</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=kobj&amp;project=linux-4.1"><FONT size=4>kobj</FONT></A><FONT size=4>));
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/lib/kobject.c#72" name=72><FONT size=4>72</FONT></A><FONT size=4>	<B>if</B> (</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=error&amp;project=linux-4.1"><FONT size=4>error</FONT></A><FONT size=4>)
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/lib/kobject.c#73" name=73><FONT size=4>73</FONT></A><FONT size=4>		<B>return</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=error&amp;project=linux-4.1"><FONT size=4>error</FONT></A><FONT size=4>;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/lib/kobject.c#74" name=74><FONT size=4>74</FONT></A>
<A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/lib/kobject.c#75" name=75><FONT size=4>75</FONT></A><FONT size=4>	</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=error&amp;project=linux-4.1"><FONT size=4>error</FONT></A><FONT size=4> = </FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-4.1/lib/kobject.c#populate_dir"><FONT size=4>populate_dir</FONT></A><FONT size=4>(</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=kobj&amp;project=linux-4.1"><FONT size=4>kobj</FONT></A><FONT size=4>);
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/lib/kobject.c#76" name=76><FONT size=4>76</FONT></A><FONT size=4>	<B>if</B> (</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=error&amp;project=linux-4.1"><FONT size=4>error</FONT></A><FONT size=4>) {
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/lib/kobject.c#77" name=77><FONT size=4>77</FONT></A><FONT size=4>		</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=sysfs_remove_dir&amp;project=linux-4.1"><FONT size=4>sysfs_remove_dir</FONT></A><FONT size=4>(</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=kobj&amp;project=linux-4.1"><FONT size=4>kobj</FONT></A><FONT size=4>);
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/lib/kobject.c#78" name=78><FONT size=4>78</FONT></A><FONT size=4>		<B>return</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=error&amp;project=linux-4.1"><FONT size=4>error</FONT></A><FONT size=4>;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/lib/kobject.c#79" name=79><FONT size=4>79</FONT></A><FONT size=4>	}
</FONT><A class=hl style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(0,0,0); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/lib/kobject.c#80" name=80><FONT size=4>80</FONT></A>
<A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/lib/kobject.c#81" name=81><FONT size=4>81</FONT></A><FONT size=4>	</FONT><SPAN class=c style="COLOR: rgb(102,102,102)"><FONT size=4>/*
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/lib/kobject.c#82" name=82><FONT size=4>82</FONT></A><FONT size=4>	 * @kobj-&gt;sd may be deleted by an ancestor going away.  Hold an
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/lib/kobject.c#83" name=83><FONT size=4>83</FONT></A><FONT size=4>	 * extra reference so that it stays until @kobj is gone.
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/lib/kobject.c#84" name=84><FONT size=4>84</FONT></A><FONT size=4>	 */</FONT></SPAN>
<A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/lib/kobject.c#85" name=85><FONT size=4>85</FONT></A><FONT size=4>	</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=sysfs_get&amp;project=linux-4.1"><FONT size=4>sysfs_get</FONT></A><FONT size=4>(</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=kobj&amp;project=linux-4.1"><FONT size=4>kobj</FONT></A><FONT size=4>-&gt;</FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-4.1/lib/kobject.c#sd"><FONT size=4>sd</FONT></A><FONT size=4>);
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/lib/kobject.c#86" name=86><FONT size=4>86</FONT></A>
<A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/lib/kobject.c#87" name=87><FONT size=4>87</FONT></A><FONT size=4>	</FONT><SPAN class=c style="COLOR: rgb(102,102,102)"><FONT size=4>/*
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/lib/kobject.c#88" name=88><FONT size=4>88</FONT></A><FONT size=4>	 * If @kobj has ns_ops, its children need to be filtered based on
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/lib/kobject.c#89" name=89><FONT size=4>89</FONT></A><FONT size=4>	 * their namespace tags.  Enable namespace support on @kobj-&gt;sd.
</FONT><A class=hl style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(0,0,0); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/lib/kobject.c#90" name=90><FONT size=4>90</FONT></A><FONT size=4>	 */</FONT></SPAN>
<A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/lib/kobject.c#91" name=91><FONT size=4>91</FONT></A><FONT size=4>	</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=ops&amp;project=linux-4.1"><FONT size=4>ops</FONT></A><FONT size=4> = </FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-4.1/lib/kobject.c#kobj_child_ns_ops"><FONT size=4>kobj_child_ns_ops</FONT></A><FONT size=4>(</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=kobj&amp;project=linux-4.1"><FONT size=4>kobj</FONT></A><FONT size=4>);
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/lib/kobject.c#92" name=92><FONT size=4>92</FONT></A><FONT size=4>	<B>if</B> (</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=ops&amp;project=linux-4.1"><FONT size=4>ops</FONT></A><FONT size=4>) {
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/lib/kobject.c#93" name=93><FONT size=4>93</FONT></A><FONT size=4>		</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=BUG_ON&amp;project=linux-4.1"><FONT size=4>BUG_ON</FONT></A><FONT size=4>(</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=ops&amp;project=linux-4.1"><FONT size=4>ops</FONT></A><FONT size=4>-&gt;</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=type&amp;project=linux-4.1"><FONT size=4>type</FONT></A><FONT size=4> &lt;= </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=KOBJ_NS_TYPE_NONE&amp;project=linux-4.1"><FONT size=4>KOBJ_NS_TYPE_NONE</FONT></A><FONT size=4>);
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/lib/kobject.c#94" name=94><FONT size=4>94</FONT></A><FONT size=4>		</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=BUG_ON&amp;project=linux-4.1"><FONT size=4>BUG_ON</FONT></A><FONT size=4>(</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=ops&amp;project=linux-4.1"><FONT size=4>ops</FONT></A><FONT size=4>-&gt;</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=type&amp;project=linux-4.1"><FONT size=4>type</FONT></A><FONT size=4> &gt;= </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=KOBJ_NS_TYPES&amp;project=linux-4.1"><FONT size=4>KOBJ_NS_TYPES</FONT></A><FONT size=4>);
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/lib/kobject.c#95" name=95><FONT size=4>95</FONT></A><FONT size=4>		</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=BUG_ON&amp;project=linux-4.1"><FONT size=4>BUG_ON</FONT></A><FONT size=4>(!</FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-4.1/lib/kobject.c#kobj_ns_type_registered"><FONT size=4>kobj_ns_type_registered</FONT></A><FONT size=4>(</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=ops&amp;project=linux-4.1"><FONT size=4>ops</FONT></A><FONT size=4>-&gt;</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=type&amp;project=linux-4.1"><FONT size=4>type</FONT></A><FONT size=4>));
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/lib/kobject.c#96" name=96><FONT size=4>96</FONT></A>
<A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/lib/kobject.c#97" name=97><FONT size=4>97</FONT></A><FONT size=4>		</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=sysfs_enable_ns&amp;project=linux-4.1"><FONT size=4>sysfs_enable_ns</FONT></A><FONT size=4>(</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=kobj&amp;project=linux-4.1"><FONT size=4>kobj</FONT></A><FONT size=4>-&gt;</FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-4.1/lib/kobject.c#sd"><FONT size=4>sd</FONT></A><FONT size=4>);
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/lib/kobject.c#98" name=98><FONT size=4>98</FONT></A><FONT size=4>	}
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/lib/kobject.c#99" name=99><FONT size=4>99</FONT></A>
<A class=hl style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(0,0,0); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/lib/kobject.c#100" name=100><FONT size=4>100</FONT></A><FONT size=4>	<B>return</B> 0;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/lib/kobject.c#101" name=101><FONT size=4>101</FONT></A><FONT size=4>}</FONT></PRE>
<H4>3. attribute </H4>
<H5>3.1 attribute&#30340;&#21151;&#33021;&#27010;&#36848; </H5>&#22312;sysfs&#20013;&#65292;&#20026;&#20160;&#20040;&#20250;&#26377;attribute&#30340;&#27010;&#24565;&#21602;&#65311;&#20854;&#23454;&#23427;&#26159;&#23545;&#24212;kobject&#32780;&#35328;&#30340;&#65292;&#25351;&#30340;&#26159;kobject&#30340;&#8220;&#23646;&#24615;&#8221;&#12290;&#25105;&#20204;&#30693;&#36947;&#65292; 
<P>sysfs&#20013;&#30340;&#30446;&#24405;&#25551;&#36848;&#20102;kobject&#65292;&#32780;kobject&#26159;&#29305;&#23450;&#25968;&#25454;&#31867;&#22411;&#21464;&#37327;&#65288;&#22914;struct device&#65289;&#30340;&#20307;&#29616;&#12290;&#22240;&#27492;kobject&#30340;&#23646;&#24615;&#65292;&#23601;&#26159;&#36825;&#20123;&#21464;&#37327;&#30340;&#23646;&#24615;&#12290;&#23427;&#21487;&#20197;&#26159;&#20219;&#20309;&#19996;&#35199;&#65292;&#21517;&#31216;&#12289;&#19968;&#20010;&#20869;&#37096;&#21464;&#37327;&#12289;&#19968;&#20010;&#23383;&#31526;&#20018;&#31561;&#31561;&#12290;&#32780;attribute&#65292;&#22312;sysfs&#25991;&#20214;&#31995;&#32479;&#20013;&#26159;&#20197;&#25991;&#20214;&#30340;&#24418;&#24335;&#25552;&#20379;&#30340;&#65292;&#21363;&#65306;kobject&#30340;&#25152;&#26377;&#23646;&#24615;&#65292;&#37117;&#22312;&#23427;&#23545;&#24212;&#30340;sysfs&#30446;&#24405;&#19979;&#20197;&#25991;&#20214;&#30340;&#24418;&#24335;&#21576;&#29616;&#12290;&#36825;&#20123;&#25991;&#20214;&#19968;&#33324;&#26159;&#21487;&#35835;&#12289;&#20889;&#30340;&#65292;&#32780;kernel&#20013;&#23450;&#20041;&#20102;&#36825;&#20123;&#23646;&#24615;&#30340;&#27169;&#22359;&#65292;&#20250;&#26681;&#25454;&#29992;&#25143;&#31354;&#38388;&#30340;&#35835;&#20889;&#25805;&#20316;&#65292;&#35760;&#24405;&#21644;&#36820;&#22238;&#36825;&#20123;attribute&#30340;&#20540;&#12290; </P>
<P><SPAN style="COLOR: rgb(255,0,0)">&#24635;&#32467;&#19968;&#19979;&#65306;&#25152;&#35859;&#30340;attibute&#65292;&#23601;&#26159;&#20869;&#26680;&#31354;&#38388;&#21644;&#29992;&#25143;&#31354;&#38388;&#36827;&#34892;&#20449;&#24687;&#20132;&#20114;&#30340;&#19968;&#31181;&#26041;&#27861;&#12290;&#20363;&#22914;&#26576;&#20010;driver&#23450;&#20041;&#20102;&#19968;&#20010;&#21464;&#37327;&#65292;&#21364;&#24076;&#26395;&#29992;&#25143;&#31354;&#38388;&#31243;&#24207;&#21487;&#20197;&#20462;&#25913;&#35813;&#21464;&#37327;&#65292;&#20197;&#25511;&#21046;driver&#30340;&#36816;&#34892;&#34892;&#20026;&#65292;&#37027;&#20040;&#23601;&#21487;&#20197;&#23558;&#35813;&#21464;&#37327;&#20197;sysfs attribute&#30340;&#24418;&#24335;&#24320;&#25918;&#20986;&#26469;&#12290;</SPAN> </P>
<P>Linux&#20869;&#26680;&#20013;&#65292;attribute&#20998;&#20026;&#26222;&#36890;&#30340;attribute&#21644;&#20108;&#36827;&#21046;attribute&#65292;&#22914;&#19979;&#65306; </P><PRE style="BORDER-TOP: 0px; BORDER-RIGHT: 0px; FONT-VARIANT: normal; WORD-SPACING: 0px; BORDER-BOTTOM: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); FONT-STYLE: normal; MARGIN: 0px; BORDER-LEFT: 0px; LETTER-SPACING: normal; LINE-HEIGHT: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/sysfs.h#29" name=29><FONT size=4>29</FONT></A><FONT size=4><B>struct</B> </FONT><A class=xs style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153); FONT-STYLE: italic" name=attribute></A><A class=xs style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153); FONT-STYLE: italic" href="http://172.21.12.145:8080/source/s?refs=attribute&amp;project=linux-4.1"><FONT size=4>attribute</FONT></A><FONT size=4> {
</FONT><A class=hl style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(0,0,0); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/sysfs.h#30" name=30><FONT size=4>30</FONT></A><FONT size=4>	<B>const</B> <B>char</B>		*</FONT><A class=xmb style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,153,0)" name=name></A><A class=xmb style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,153,0)" href="http://172.21.12.145:8080/source/s?refs=name&amp;project=linux-4.1"><FONT size=4>name</FONT></A><FONT size=4>;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/sysfs.h#31" name=31><FONT size=4>31</FONT></A><FONT size=4>	</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=umode_t&amp;project=linux-4.1"><FONT size=4>umode_t</FONT></A><FONT size=4>			</FONT><A class=xmb style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,153,0)" name=mode></A><A class=xmb style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,153,0)" href="http://172.21.12.145:8080/source/s?refs=mode&amp;project=linux-4.1"><FONT size=4>mode</FONT></A><FONT size=4>;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/sysfs.h#32" name=32><FONT size=4>32</FONT></A><FONT size=4>#<B>ifdef</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=CONFIG_DEBUG_LOCK_ALLOC&amp;project=linux-4.1"><FONT size=4>CONFIG_DEBUG_LOCK_ALLOC</FONT></A>
<A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/sysfs.h#33" name=33><FONT size=4>33</FONT></A><FONT size=4>	<B>bool</B>			</FONT><A class=xmb style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,153,0)" name=ignore_lockdep></A><A class=xmb style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,153,0)" href="http://172.21.12.145:8080/source/s?refs=ignore_lockdep&amp;project=linux-4.1"><FONT size=4>ignore_lockdep</FONT></A><FONT size=4>:<SPAN class=n style="COLOR: rgb(165,42,42)">1</SPAN>;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/sysfs.h#34" name=34><FONT size=4>34</FONT></A><FONT size=4>	<B>struct</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=lock_class_key&amp;project=linux-4.1"><FONT size=4>lock_class_key</FONT></A><FONT size=4>	*</FONT><A class=xmb style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,153,0)" name=key></A><A class=xmb style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,153,0)" href="http://172.21.12.145:8080/source/s?refs=key&amp;project=linux-4.1"><FONT size=4>key</FONT></A><FONT size=4>;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/sysfs.h#35" name=35><FONT size=4>35</FONT></A><FONT size=4>	<B>struct</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=lock_class_key&amp;project=linux-4.1"><FONT size=4>lock_class_key</FONT></A><FONT size=4>	</FONT><A class=xmb style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,153,0)" name=skey></A><A class=xmb style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,153,0)" href="http://172.21.12.145:8080/source/s?refs=skey&amp;project=linux-4.1"><FONT size=4>skey</FONT></A><FONT size=4>;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/sysfs.h#36" name=36><FONT size=4>36</FONT></A><FONT size=4>#<B>endif</B>
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/sysfs.h#37" name=37><FONT size=4>37</FONT></A><FONT size=4>};</FONT></PRE>
<P><FONT size=4></FONT>&nbsp;</P><PRE style="BORDER-TOP: 0px; BORDER-RIGHT: 0px; FONT-VARIANT: normal; WORD-SPACING: 0px; BORDER-BOTTOM: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); FONT-STYLE: normal; MARGIN: 0px; BORDER-LEFT: 0px; LETTER-SPACING: normal; LINE-HEIGHT: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; BACKGROUND: orange; COLOR: yellow; TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/sysfs.h#145" name=145><FONT size=4>145</FONT></A><FONT size=4><B>struct</B> </FONT><A class=xs style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153); FONT-STYLE: italic" name=bin_attribute></A><A class=xs style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153); FONT-STYLE: italic" href="http://172.21.12.145:8080/source/s?refs=bin_attribute&amp;project=linux-4.1"><FONT size=4>bin_attribute</FONT></A><FONT size=4> {
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/sysfs.h#146" name=146><FONT size=4>146</FONT></A><FONT size=4>	<B>struct</B> </FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/sysfs.h#attribute"><FONT size=4>attribute</FONT></A><FONT size=4>	</FONT><A class=xmb style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,153,0)" name=attr></A><A class=xmb style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,153,0)" href="http://172.21.12.145:8080/source/s?refs=attr&amp;project=linux-4.1"><FONT size=4>attr</FONT></A><FONT size=4>;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/sysfs.h#147" name=147><FONT size=4>147</FONT></A><FONT size=4>	</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=size_t&amp;project=linux-4.1"><FONT size=4>size_t</FONT></A><FONT size=4>			</FONT><A class=xmb style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,153,0)" name=size></A><A class=xmb style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,153,0)" href="http://172.21.12.145:8080/source/s?refs=size&amp;project=linux-4.1"><FONT size=4>size</FONT></A><FONT size=4>;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/sysfs.h#148" name=148><FONT size=4>148</FONT></A><FONT size=4>	<B>void</B>			*</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=private&amp;project=linux-4.1"><FONT size=4>private</FONT></A><FONT size=4>;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/sysfs.h#149" name=149><FONT size=4>149</FONT></A><FONT size=4>	</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=ssize_t&amp;project=linux-4.1"><FONT size=4>ssize_t</FONT></A><FONT size=4> (*</FONT><A class=xmb style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,153,0)" name=read></A><A class=xmb style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,153,0)" href="http://172.21.12.145:8080/source/s?refs=read&amp;project=linux-4.1"><FONT size=4>read</FONT></A><FONT size=4>)(<B>struct</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=file&amp;project=linux-4.1"><FONT size=4>file</FONT></A><FONT size=4> *, <B>struct</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=kobject&amp;project=linux-4.1"><FONT size=4>kobject</FONT></A><FONT size=4> *, <B>struct</B> </FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/sysfs.h#bin_attribute"><FONT size=4>bin_attribute</FONT></A><FONT size=4> *,
</FONT><A class=hl style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(0,0,0); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/sysfs.h#150" name=150><FONT size=4>150</FONT></A><FONT size=4>			<B>char</B> *, </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=loff_t&amp;project=linux-4.1"><FONT size=4>loff_t</FONT></A><FONT size=4>, </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=size_t&amp;project=linux-4.1"><FONT size=4>size_t</FONT></A><FONT size=4>);
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/sysfs.h#151" name=151><FONT size=4>151</FONT></A><FONT size=4>	</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=ssize_t&amp;project=linux-4.1"><FONT size=4>ssize_t</FONT></A><FONT size=4> (*</FONT><A class=xmb style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,153,0)" name=write></A><A class=xmb style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,153,0)" href="http://172.21.12.145:8080/source/s?refs=write&amp;project=linux-4.1"><FONT size=4>write</FONT></A><FONT size=4>)(<B>struct</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=file&amp;project=linux-4.1"><FONT size=4>file</FONT></A><FONT size=4> *, <B>struct</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=kobject&amp;project=linux-4.1"><FONT size=4>kobject</FONT></A><FONT size=4> *, <B>struct</B> </FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/sysfs.h#bin_attribute"><FONT size=4>bin_attribute</FONT></A><FONT size=4> *,
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/sysfs.h#152" name=152><FONT size=4>152</FONT></A><FONT size=4>			 <B>char</B> *, </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=loff_t&amp;project=linux-4.1"><FONT size=4>loff_t</FONT></A><FONT size=4>, </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=size_t&amp;project=linux-4.1"><FONT size=4>size_t</FONT></A><FONT size=4>);
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/sysfs.h#153" name=153><FONT size=4>153</FONT></A><FONT size=4>	<B>int</B> (*</FONT><A class=xmb style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,153,0)" name=mmap></A><A class=xmb style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,153,0)" href="http://172.21.12.145:8080/source/s?refs=mmap&amp;project=linux-4.1"><FONT size=4>mmap</FONT></A><FONT size=4>)(<B>struct</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=file&amp;project=linux-4.1"><FONT size=4>file</FONT></A><FONT size=4> *, <B>struct</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=kobject&amp;project=linux-4.1"><FONT size=4>kobject</FONT></A><FONT size=4> *, <B>struct</B> </FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/sysfs.h#bin_attribute"><FONT size=4>bin_attribute</FONT></A><FONT size=4> *</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=attr&amp;project=linux-4.1"><FONT size=4>attr</FONT></A><FONT size=4>,
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/sysfs.h#154" name=154><FONT size=4>154</FONT></A><FONT size=4>		    <B>struct</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=vm_area_struct&amp;project=linux-4.1"><FONT size=4>vm_area_struct</FONT></A><FONT size=4> *</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=vma&amp;project=linux-4.1"><FONT size=4>vma</FONT></A><FONT size=4>);
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/sysfs.h#155" name=155><FONT size=4>155</FONT></A><FONT size=4>};</FONT></PRE>
<P>struct attribute&#20026;&#26222;&#36890;&#30340;attribute&#65292;&#20351;&#29992;&#35813;attribute&#29983;&#25104;&#30340;sysfs&#25991;&#20214;&#65292;&#21482;&#33021;&#29992;&#23383;&#31526;&#20018;&#30340;&#24418;&#24335;&#35835;&#20889;&#65288;&#21518;&#38754;&#20250;&#35828;&#20026;&#20160;&#20040;&#65289;&#12290;&#32780;struct bin_attribute&#22312;struct attribute&#30340;&#22522;&#30784;&#19978;&#65292;&#22686;&#21152;&#20102;read&#12289;write&#31561;&#20989;&#25968;&#65292;&#22240;&#27492;&#23427;&#25152;&#29983;&#25104;&#30340;sysfs&#25991;&#20214;&#21487;&#20197;&#29992;&#20219;&#20309;&#26041;&#24335;&#35835;&#20889;&#12290; </P>
<P>&#35828;&#23436;&#22522;&#26412;&#27010;&#24565;&#65292;&#25105;&#20204;&#35201;&#38382;&#20004;&#20010;&#38382;&#39064;&#65306; </P>
<P>Kernel&#24590;&#20040;&#25226;attribute&#21464;&#25104;sysfs&#20013;&#30340;&#25991;&#20214;&#21602;&#65311; </P>
<P>&#29992;&#25143;&#31354;&#38388;&#23545;sysfs&#30340;&#25991;&#20214;&#36827;&#34892;&#30340;&#35835;&#20889;&#25805;&#20316;&#65292;&#24590;&#20040;&#20256;&#36882;&#32473;Kernel&#21602;&#65311; </P>
<P>&#19979;&#38754;&#26469;&#30475;&#30475;&#36825;&#20010;&#36807;&#31243;&#12290; </P>
<H5>3.2 attibute&#25991;&#20214;&#30340;&#21019;&#24314; </H5>
<P>&#22312;linux&#20869;&#26680;&#20013;&#65292;attibute&#25991;&#20214;&#30340;&#21019;&#24314;&#26159;&#30001;fs/sysfs/file.c&#20013;sysfs_create_file&#25509;&#21475;&#23436;&#25104;&#30340;&#65292;&#35813;&#25509;&#21475;&#30340;&#23454;&#29616;&#27809;&#26377;&#20160;&#20040;&#29305;&#27530;&#20043;&#22788;&#65292;&#22823;&#22810;&#26159;&#25991;&#20214;&#31995;&#32479;&#30456;&#20851;&#30340;&#25805;&#20316;&#65292;&#21644;&#35774;&#22791;&#27169;&#22411;&#27809;&#26377;&#22826;&#22810;&#30340;&#20851;&#31995;&#65292;&#36825;&#37324;&#20808;&#30053;&#36807;&#19981;&#25552;&#12290; </P>
<H5>3.3 attibute&#25991;&#20214;&#30340;read&#21644;write </H5>
<P>&#30475;&#21040;3.1&#31456;&#33410;struct attribute&#30340;&#21407;&#22411;&#26102;&#65292;&#20063;&#35768;&#25105;&#20204;&#20250;&#29359;&#22016;&#21653;&#65292;&#35813;&#32467;&#26500;&#24456;&#31616;&#21333;&#21834;&#65292;name&#34920;&#31034;&#25991;&#20214;&#21517;&#31216;&#65292;mode&#34920;&#31034;&#25991;&#20214;&#27169;&#24335;&#65292;&#20854;&#23427;&#30340;&#23383;&#27573;&#37117;&#26159;&#20869;&#26680;&#29992;&#20110;debug Kernel Lock&#30340;&#65292;&#37027;&#25991;&#20214;&#25805;&#20316;&#30340;&#25509;&#21475;&#22312;&#21738;&#37324;&#21602;&#65311; </P>
<P>&#19981;&#30528;&#24613;&#65292;&#25105;&#20204;&#21435;fs/sysfs&#30446;&#24405;&#19979;&#30475;&#30475;sysfs&#30456;&#20851;&#30340;&#20195;&#30721;&#36923;&#36753;&#12290; </P>
<P>&#25152;&#26377;&#30340;&#25991;&#20214;&#31995;&#32479;&#65292;&#37117;&#20250;&#23450;&#20041;&#19968;&#20010;struct file_operations&#21464;&#37327;&#65292;&#29992;&#20110;&#25551;&#36848;&#26412;&#25991;&#20214;&#31995;&#32479;&#30340;&#25805;&#20316;&#25509;&#21475;&#65292;sysfs&#20063;&#19981;&#20363;&#22806;&#65306; </P>
<P>Last time exists in 3.10</P><PRE style="BORDER-TOP: 0px; BORDER-RIGHT: 0px; FONT-VARIANT: normal; WORD-SPACING: 0px; BORDER-BOTTOM: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); FONT-STYLE: normal; MARGIN: 0px; BORDER-LEFT: 0px; LETTER-SPACING: normal; LINE-HEIGHT: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; BACKGROUND: orange; COLOR: yellow; TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#479" name=479><FONT size=3>479</FONT></A><FONT size=3><B>const</B> <B>struct</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=file_operations&amp;project=linux-3.10"><FONT size=3>file_operations</FONT></A><FONT size=3> </FONT><A class=xv style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(204,51,0)" name=sysfs_file_operations></A><A class=xv style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(204,51,0)" href="http://172.21.12.145:8080/source/s?refs=sysfs_file_operations&amp;project=linux-3.10"><FONT size=3>sysfs_file_operations</FONT></A><FONT size=3> = {
</FONT><A class=hl style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(0,0,0); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#480" name=480><FONT size=3>480</FONT></A><FONT size=3>	.</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=read&amp;project=linux-3.10"><FONT size=3>read</FONT></A><FONT size=3>		= </FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#sysfs_read_file"><FONT size=3>sysfs_read_file</FONT></A><FONT size=3>,
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#481" name=481><FONT size=3>481</FONT></A><FONT size=3>	.</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=write&amp;project=linux-3.10"><FONT size=3>write</FONT></A><FONT size=3>		= </FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#sysfs_write_file"><FONT size=3>sysfs_write_file</FONT></A><FONT size=3>,
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#482" name=482><FONT size=3>482</FONT></A><FONT size=3>	.</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=llseek&amp;project=linux-3.10"><FONT size=3>llseek</FONT></A><FONT size=3>		= </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=generic_file_llseek&amp;project=linux-3.10"><FONT size=3>generic_file_llseek</FONT></A><FONT size=3>,
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#483" name=483><FONT size=3>483</FONT></A><FONT size=3>	.</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=open&amp;project=linux-3.10"><FONT size=3>open</FONT></A><FONT size=3>		= </FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#sysfs_open_file"><FONT size=3>sysfs_open_file</FONT></A><FONT size=3>,
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#484" name=484><FONT size=3>484</FONT></A><FONT size=3>	.</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=release&amp;project=linux-3.10"><FONT size=3>release</FONT></A><FONT size=3>	= </FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#sysfs_release"><FONT size=3>sysfs_release</FONT></A><FONT size=3>,
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#485" name=485><FONT size=3>485</FONT></A><FONT size=3>	.</FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#poll"><FONT size=3>poll</FONT></A><FONT size=3>		= </FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#sysfs_poll"><FONT size=3>sysfs_poll</FONT></A><FONT size=3>,
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#486" name=486><FONT size=3>486</FONT></A><FONT size=3>};</FONT></PRE>
<P>attribute&#25991;&#20214;&#30340;read&#25805;&#20316;&#65292;&#20250;&#30001;VFS&#36716;&#21040;sysfs_file_operations&#30340;read&#65288;&#20063;&#23601;&#26159;sysfs_read_file&#65289;&#25509;&#21475;&#19978;&#65292;&#35753;&#25105;&#20204;&#22823;&#27010;&#30475;&#19968;&#19979;&#35813;&#25509;&#21475;&#30340;&#22788;&#29702;&#36923;&#36753;&#12290; </P>
<P>Last time exists in 3.10</P><PRE style="BORDER-TOP: 0px; BORDER-RIGHT: 0px; FONT-VARIANT: normal; WORD-SPACING: 0px; BORDER-BOTTOM: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); FONT-STYLE: normal; MARGIN: 0px; BORDER-LEFT: 0px; LETTER-SPACING: normal; LINE-HEIGHT: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#108" name=108><FONT size=4>108</FONT></A><SPAN class=c style="COLOR: rgb(102,102,102)"><FONT size=4>/**
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#109" name=109><FONT size=4>109</FONT></A><FONT size=4> *	sysfs_read_file - read an attribute.
</FONT><A class=hl style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(0,0,0); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#110" name=110><FONT size=4>110</FONT></A><FONT size=4> *	@file:	file pointer.
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#111" name=111><FONT size=4>111</FONT></A><FONT size=4> *	@buf:	buffer to fill.
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#112" name=112><FONT size=4>112</FONT></A><FONT size=4> *	@count:	number of bytes to read.
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#113" name=113><FONT size=4>113</FONT></A><FONT size=4> *	@ppos:	starting offset in file.
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#114" name=114><FONT size=4>114</FONT></A><FONT size=4> *
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#115" name=115><FONT size=4>115</FONT></A><FONT size=4> *	Userspace wants to read an attribute file. The attribute descriptor
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#116" name=116><FONT size=4>116</FONT></A><FONT size=4> *	is in the file's -&gt;d_fsdata. The target object is in the directory's
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#117" name=117><FONT size=4>117</FONT></A><FONT size=4> *	-&gt;d_fsdata.
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#118" name=118><FONT size=4>118</FONT></A><FONT size=4> *
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#119" name=119><FONT size=4>119</FONT></A><FONT size=4> *	We call fill_read_buffer() to allocate and fill the buffer from the
</FONT><A class=hl style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(0,0,0); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#120" name=120><FONT size=4>120</FONT></A><FONT size=4> *	object's show() method exactly once (if the read is happening from
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#121" name=121><FONT size=4>121</FONT></A><FONT size=4> *	the beginning of the file). That should fill the entire buffer with
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#122" name=122><FONT size=4>122</FONT></A><FONT size=4> *	all the data the object has to offer for that attribute.
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#123" name=123><FONT size=4>123</FONT></A><FONT size=4> *	We then call flush_read_buffer() to copy the buffer to userspace
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#124" name=124><FONT size=4>124</FONT></A><FONT size=4> *	in the increments specified.
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#125" name=125><FONT size=4>125</FONT></A><FONT size=4> */</FONT></SPAN>
<A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#126" name=126><FONT size=4>126</FONT></A>
<A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#127" name=127><FONT size=4>127</FONT></A><FONT size=4><B>static</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=ssize_t&amp;project=linux-3.10"><FONT size=4>ssize_t</FONT></A>
<A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#128" name=128><FONT size=4>128</FONT></A><A class=xf style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,0,255)" name=sysfs_read_file></A><A class=xf style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,0,255)" href="http://172.21.12.145:8080/source/s?refs=sysfs_read_file&amp;project=linux-3.10"><FONT size=4>sysfs_read_file</FONT></A><FONT size=4>(<B>struct</B> </FONT><A class=xa style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(102,0,204)" name=file></A><A class=xa style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(102,0,204)" href="http://172.21.12.145:8080/source/s?refs=file&amp;project=linux-3.10"><FONT size=4>file</FONT></A><FONT size=4> *</FONT><A class=xa style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(102,0,204)" name=file></A><A class=xa style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(102,0,204)" href="http://172.21.12.145:8080/source/s?refs=file&amp;project=linux-3.10"><FONT size=4>file</FONT></A><FONT size=4>, <B>char</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=__user&amp;project=linux-3.10"><FONT size=4>__user</FONT></A><FONT size=4> *</FONT><A class=xa style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(102,0,204)" name=buf></A><A class=xa style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(102,0,204)" href="http://172.21.12.145:8080/source/s?refs=buf&amp;project=linux-3.10"><FONT size=4>buf</FONT></A><FONT size=4>, </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=size_t&amp;project=linux-3.10"><FONT size=4>size_t</FONT></A><FONT size=4> </FONT><A class=xa style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(102,0,204)" name=count></A><A class=xa style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(102,0,204)" href="http://172.21.12.145:8080/source/s?refs=count&amp;project=linux-3.10"><FONT size=4>count</FONT></A><FONT size=4>, </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=loff_t&amp;project=linux-3.10"><FONT size=4>loff_t</FONT></A><FONT size=4> *</FONT><A class=xa style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(102,0,204)" name=ppos></A><A class=xa style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(102,0,204)" href="http://172.21.12.145:8080/source/s?refs=ppos&amp;project=linux-3.10"><FONT size=4>ppos</FONT></A><FONT size=4>)
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#129" name=129><FONT size=4>129</FONT></A><FONT size=4>{
</FONT><A class=hl style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(0,0,0); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#130" name=130><FONT size=4>130</FONT></A><FONT size=4>	<B>struct</B> </FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#sysfs_buffer"><FONT size=4>sysfs_buffer</FONT></A><FONT size=4> * </FONT><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" name=buffer></A><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" href="http://172.21.12.145:8080/source/s?refs=buffer&amp;project=linux-3.10"><FONT size=4>buffer</FONT></A><FONT size=4> = </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=file&amp;project=linux-3.10"><FONT size=4>file</FONT></A><FONT size=4>-&gt;</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=private_data&amp;project=linux-3.10"><FONT size=4>private_data</FONT></A><FONT size=4>;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#131" name=131><FONT size=4>131</FONT></A><FONT size=4>	</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=ssize_t&amp;project=linux-3.10"><FONT size=4>ssize_t</FONT></A><FONT size=4> </FONT><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" name=retval></A><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" href="http://172.21.12.145:8080/source/s?refs=retval&amp;project=linux-3.10"><FONT size=4>retval</FONT></A><FONT size=4> = 0;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#132" name=132><FONT size=4>132</FONT></A>
<A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#133" name=133><FONT size=4>133</FONT></A><FONT size=4>	</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=mutex_lock&amp;project=linux-3.10"><FONT size=4>mutex_lock</FONT></A><FONT size=4>(&amp;</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=buffer&amp;project=linux-3.10"><FONT size=4>buffer</FONT></A><FONT size=4>-&gt;</FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#mutex"><FONT size=4>mutex</FONT></A><FONT size=4>);
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#134" name=134><FONT size=4>134</FONT></A><FONT size=4>	<B>if</B> (</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=buffer&amp;project=linux-3.10"><FONT size=4>buffer</FONT></A><FONT size=4>-&gt;</FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#needs_read_fill"><FONT size=4>needs_read_fill</FONT></A><FONT size=4> || *</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=ppos&amp;project=linux-3.10"><FONT size=4>ppos</FONT></A><FONT size=4> == 0) {
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#135" name=135><FONT size=4>135</FONT></A><FONT size=4>		</FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#retval"><FONT size=4>retval</FONT></A><FONT size=4> = </FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#fill_read_buffer"><FONT size=4>fill_read_buffer</FONT></A><FONT size=4>(</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=file&amp;project=linux-3.10"><FONT size=4>file</FONT></A><FONT size=4>-&gt;</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=f_path&amp;project=linux-3.10"><FONT size=4>f_path</FONT></A><FONT size=4>.</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=dentry&amp;project=linux-3.10"><FONT size=4>dentry</FONT></A><FONT size=4>,</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=buffer&amp;project=linux-3.10"><FONT size=4>buffer</FONT></A><FONT size=4>);
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#136" name=136><FONT size=4>136</FONT></A><FONT size=4>		<B>if</B> (</FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#retval"><FONT size=4>retval</FONT></A><FONT size=4>)
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#137" name=137><FONT size=4>137</FONT></A><FONT size=4>			<B>goto</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=out&amp;project=linux-3.10"><FONT size=4>out</FONT></A><FONT size=4>;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#138" name=138><FONT size=4>138</FONT></A><FONT size=4>	}
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#139" name=139><FONT size=4>139</FONT></A><FONT size=4>	</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=pr_debug&amp;project=linux-3.10"><FONT size=4>pr_debug</FONT></A><FONT size=4>(<SPAN class=s style="COLOR: green">"%s: count = %zd, ppos = %lld, buf = %s\n"</SPAN>,
</FONT><A class=hl style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(0,0,0); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#140" name=140><FONT size=4>140</FONT></A><FONT size=4>		 </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=__func__&amp;project=linux-3.10"><FONT size=4>__func__</FONT></A><FONT size=4>, </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=count&amp;project=linux-3.10"><FONT size=4>count</FONT></A><FONT size=4>, *</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=ppos&amp;project=linux-3.10"><FONT size=4>ppos</FONT></A><FONT size=4>, </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=buffer&amp;project=linux-3.10"><FONT size=4>buffer</FONT></A><FONT size=4>-&gt;</FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#page"><FONT size=4>page</FONT></A><FONT size=4>);
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#141" name=141><FONT size=4>141</FONT></A><FONT size=4>	</FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#retval"><FONT size=4>retval</FONT></A><FONT size=4> = </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=simple_read_from_buffer&amp;project=linux-3.10"><FONT size=4>simple_read_from_buffer</FONT></A><FONT size=4>(</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=buf&amp;project=linux-3.10"><FONT size=4>buf</FONT></A><FONT size=4>, </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=count&amp;project=linux-3.10"><FONT size=4>count</FONT></A><FONT size=4>, </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=ppos&amp;project=linux-3.10"><FONT size=4>ppos</FONT></A><FONT size=4>, </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=buffer&amp;project=linux-3.10"><FONT size=4>buffer</FONT></A><FONT size=4>-&gt;</FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#page"><FONT size=4>page</FONT></A><FONT size=4>,
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#142" name=142><FONT size=4>142</FONT></A><FONT size=4>					 </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=buffer&amp;project=linux-3.10"><FONT size=4>buffer</FONT></A><FONT size=4>-&gt;</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=count&amp;project=linux-3.10"><FONT size=4>count</FONT></A><FONT size=4>);
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#143" name=143><FONT size=4>143</FONT></A><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=out&amp;project=linux-3.10"><FONT size=4>out</FONT></A><FONT size=4>:
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#144" name=144><FONT size=4>144</FONT></A><FONT size=4>	</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=mutex_unlock&amp;project=linux-3.10"><FONT size=4>mutex_unlock</FONT></A><FONT size=4>(&amp;</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=buffer&amp;project=linux-3.10"><FONT size=4>buffer</FONT></A><FONT size=4>-&gt;</FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#mutex"><FONT size=4>mutex</FONT></A><FONT size=4>);
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#145" name=145><FONT size=4>145</FONT></A><FONT size=4>	<B>return</B> </FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#retval"><FONT size=4>retval</FONT></A><FONT size=4>;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#146" name=146><FONT size=4>146</FONT></A><FONT size=4>}</FONT></PRE>
<BLOCKQUOTE><PRE style="BORDER-TOP: 0px; BORDER-RIGHT: 0px; FONT-VARIANT: normal; WORD-SPACING: 0px; BORDER-BOTTOM: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); FONT-STYLE: normal; MARGIN: 0px; BORDER-LEFT: 0px; LETTER-SPACING: normal; LINE-HEIGHT: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#56" name=56><FONT size=4>56</FONT></A><SPAN class=c style="COLOR: rgb(102,102,102)"><FONT size=4>/**
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#57" name=57><FONT size=4>57</FONT></A><FONT size=4> *	fill_read_buffer - allocate and fill buffer from object.
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#58" name=58><FONT size=4>58</FONT></A><FONT size=4> *	@dentry:	dentry pointer.
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#59" name=59><FONT size=4>59</FONT></A><FONT size=4> *	@buffer:	data buffer for file.
</FONT><A class=hl style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(0,0,0); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#60" name=60><FONT size=4>60</FONT></A><FONT size=4> *
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#61" name=61><FONT size=4>61</FONT></A><FONT size=4> *	Allocate @buffer-&gt;page, if it hasn't been already, then call the
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#62" name=62><FONT size=4>62</FONT></A><FONT size=4> *	kobject's show() method to fill the buffer with this attribute's
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#63" name=63><FONT size=4>63</FONT></A><FONT size=4> *	data.
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#64" name=64><FONT size=4>64</FONT></A><FONT size=4> *	This is called only once, on the file's first read unless an error
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#65" name=65><FONT size=4>65</FONT></A><FONT size=4> *	is returned.
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#66" name=66><FONT size=4>66</FONT></A><FONT size=4> */</FONT></SPAN>
<A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#67" name=67><FONT size=4>67</FONT></A><FONT size=4><B>static</B> <B>int</B> </FONT><A class=xf style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,0,255)" name=fill_read_buffer></A><A class=xf style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,0,255)" href="http://172.21.12.145:8080/source/s?refs=fill_read_buffer&amp;project=linux-3.10"><FONT size=4>fill_read_buffer</FONT></A><FONT size=4>(<B>struct</B> </FONT><A class=xa style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(102,0,204)" name=dentry></A><A class=xa style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(102,0,204)" href="http://172.21.12.145:8080/source/s?refs=dentry&amp;project=linux-3.10"><FONT size=4>dentry</FONT></A><FONT size=4> * </FONT><A class=xa style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(102,0,204)" name=dentry></A><A class=xa style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(102,0,204)" href="http://172.21.12.145:8080/source/s?refs=dentry&amp;project=linux-3.10"><FONT size=4>dentry</FONT></A><FONT size=4>, <B>struct</B> </FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#sysfs_buffer"><FONT size=4>sysfs_buffer</FONT></A><FONT size=4> * </FONT><A class=xa style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(102,0,204)" name=buffer></A><A class=xa style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(102,0,204)" href="http://172.21.12.145:8080/source/s?refs=buffer&amp;project=linux-3.10"><FONT size=4>buffer</FONT></A><FONT size=4>)
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#68" name=68><FONT size=4>68</FONT></A><FONT size=4>{
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#69" name=69><FONT size=4>69</FONT></A><FONT size=4>	<B>struct</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=sysfs_dirent&amp;project=linux-3.10"><FONT size=4>sysfs_dirent</FONT></A><FONT size=4> *</FONT><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" name=attr_sd></A><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" href="http://172.21.12.145:8080/source/s?refs=attr_sd&amp;project=linux-3.10"><FONT size=4>attr_sd</FONT></A><FONT size=4> = </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=dentry&amp;project=linux-3.10"><FONT size=4>dentry</FONT></A><FONT size=4>-&gt;</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=d_fsdata&amp;project=linux-3.10"><FONT size=4>d_fsdata</FONT></A><FONT size=4>;
</FONT><A class=hl style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(0,0,0); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#70" name=70><FONT size=4>70</FONT></A><FONT size=4>	<B>struct</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=kobject&amp;project=linux-3.10"><FONT size=4>kobject</FONT></A><FONT size=4> *</FONT><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" name=kobj></A><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" href="http://172.21.12.145:8080/source/s?refs=kobj&amp;project=linux-3.10"><FONT size=4>kobj</FONT></A><FONT size=4> = </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=attr_sd&amp;project=linux-3.10"><FONT size=4>attr_sd</FONT></A><FONT size=4>-&gt;</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=s_parent&amp;project=linux-3.10"><FONT size=4>s_parent</FONT></A><FONT size=4>-&gt;</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=s_dir&amp;project=linux-3.10"><FONT size=4>s_dir</FONT></A><FONT size=4>.</FONT><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" name=kobj></A><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" href="http://172.21.12.145:8080/source/s?refs=kobj&amp;project=linux-3.10"><FONT size=4>kobj</FONT></A><FONT size=4>;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#71" name=71><FONT size=4>71</FONT></A><FONT size=4>	<B>const</B> <B>struct</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=sysfs_ops&amp;project=linux-3.10"><FONT size=4>sysfs_ops</FONT></A><FONT size=4> * </FONT><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" name=ops></A><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" href="http://172.21.12.145:8080/source/s?refs=ops&amp;project=linux-3.10"><FONT size=4>ops</FONT></A><FONT size=4> = </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=buffer&amp;project=linux-3.10"><FONT size=4>buffer</FONT></A><FONT size=4>-&gt;</FONT><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" name=ops></A><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" href="http://172.21.12.145:8080/source/s?refs=ops&amp;project=linux-3.10"><FONT size=4>ops</FONT></A><FONT size=4>;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#72" name=72><FONT size=4>72</FONT></A><FONT size=4>	<B>int</B> </FONT><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" name=ret></A><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" href="http://172.21.12.145:8080/source/s?refs=ret&amp;project=linux-3.10"><FONT size=4>ret</FONT></A><FONT size=4> = 0;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#73" name=73><FONT size=4>73</FONT></A><FONT size=4>	</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=ssize_t&amp;project=linux-3.10"><FONT size=4>ssize_t</FONT></A><FONT size=4> </FONT><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" name=count></A><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" href="http://172.21.12.145:8080/source/s?refs=count&amp;project=linux-3.10"><FONT size=4>count</FONT></A><FONT size=4>;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#74" name=74><FONT size=4>74</FONT></A>
<A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#75" name=75><FONT size=4>75</FONT></A><FONT size=4>	<B>if</B> (!</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=buffer&amp;project=linux-3.10"><FONT size=4>buffer</FONT></A><FONT size=4>-&gt;</FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#page"><FONT size=4>page</FONT></A><FONT size=4>)
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#76" name=76><FONT size=4>76</FONT></A><FONT size=4>		</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=buffer&amp;project=linux-3.10"><FONT size=4>buffer</FONT></A><FONT size=4>-&gt;</FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#page"><FONT size=4>page</FONT></A><FONT size=4> = (<B>char</B> *) </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=get_zeroed_page&amp;project=linux-3.10"><FONT size=4>get_zeroed_page</FONT></A><FONT size=4>(</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=GFP_KERNEL&amp;project=linux-3.10"><FONT size=4>GFP_KERNEL</FONT></A><FONT size=4>);
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#77" name=77><FONT size=4>77</FONT></A><FONT size=4>	<B>if</B> (!</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=buffer&amp;project=linux-3.10"><FONT size=4>buffer</FONT></A><FONT size=4>-&gt;</FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#page"><FONT size=4>page</FONT></A><FONT size=4>)
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#78" name=78><FONT size=4>78</FONT></A><FONT size=4>		<B>return</B> -</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=ENOMEM&amp;project=linux-3.10"><FONT size=4>ENOMEM</FONT></A><FONT size=4>;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#79" name=79><FONT size=4>79</FONT></A>
<A class=hl style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(0,0,0); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#80" name=80><FONT size=4>80</FONT></A><FONT size=4>	<SPAN class=c style="COLOR: rgb(102,102,102)">/* need attr_sd for attr and ops, its parent for kobj */</SPAN>
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#81" name=81><FONT size=4>81</FONT></A><FONT size=4>	<B>if</B> (!</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=sysfs_get_active&amp;project=linux-3.10"><FONT size=4>sysfs_get_active</FONT></A><FONT size=4>(</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=attr_sd&amp;project=linux-3.10"><FONT size=4>attr_sd</FONT></A><FONT size=4>))
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#82" name=82><FONT size=4>82</FONT></A><FONT size=4>		<B>return</B> -</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=ENODEV&amp;project=linux-3.10"><FONT size=4>ENODEV</FONT></A><FONT size=4>;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#83" name=83><FONT size=4>83</FONT></A>
<A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#84" name=84><FONT size=4>84</FONT></A><FONT size=4>	</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=buffer&amp;project=linux-3.10"><FONT size=4>buffer</FONT></A><FONT size=4>-&gt;</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=event&amp;project=linux-3.10"><FONT size=4>event</FONT></A><FONT size=4> = </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=atomic_read&amp;project=linux-3.10"><FONT size=4>atomic_read</FONT></A><FONT size=4>(&amp;</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=attr_sd&amp;project=linux-3.10"><FONT size=4>attr_sd</FONT></A><FONT size=4>-&gt;</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=s_attr&amp;project=linux-3.10"><FONT size=4>s_attr</FONT></A><FONT size=4>.</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=open&amp;project=linux-3.10"><FONT size=4>open</FONT></A><FONT size=4>-&gt;</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=event&amp;project=linux-3.10"><FONT size=4>event</FONT></A><FONT size=4>);
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#85" name=85><FONT size=4>85</FONT></A><FONT size=4>	</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=count&amp;project=linux-3.10"><FONT size=4>count</FONT></A><FONT size=4> = </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=ops&amp;project=linux-3.10"><FONT size=4>ops</FONT></A><FONT size=4>-&gt;</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=show&amp;project=linux-3.10"><FONT size=4>show</FONT></A><FONT size=4>(</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=kobj&amp;project=linux-3.10"><FONT size=4>kobj</FONT></A><FONT size=4>, </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=attr_sd&amp;project=linux-3.10"><FONT size=4>attr_sd</FONT></A><FONT size=4>-&gt;</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=s_attr&amp;project=linux-3.10"><FONT size=4>s_attr</FONT></A><FONT size=4>.</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=attr&amp;project=linux-3.10"><FONT size=4>attr</FONT></A><FONT size=4>, </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=buffer&amp;project=linux-3.10"><FONT size=4>buffer</FONT></A><FONT size=4>-&gt;</FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#page"><FONT size=4>page</FONT></A><FONT size=4>);
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#86" name=86><FONT size=4>86</FONT></A>
<A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#87" name=87><FONT size=4>87</FONT></A><FONT size=4>	</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=sysfs_put_active&amp;project=linux-3.10"><FONT size=4>sysfs_put_active</FONT></A><FONT size=4>(</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=attr_sd&amp;project=linux-3.10"><FONT size=4>attr_sd</FONT></A><FONT size=4>);
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#88" name=88><FONT size=4>88</FONT></A>
<A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#89" name=89><FONT size=4>89</FONT></A><FONT size=4>	</FONT><SPAN class=c style="COLOR: rgb(102,102,102)"><FONT size=4>/*
</FONT><A class=hl style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(0,0,0); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#90" name=90><FONT size=4>90</FONT></A><FONT size=4>	 * The code works fine with PAGE_SIZE return but it's likely to
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#91" name=91><FONT size=4>91</FONT></A><FONT size=4>	 * indicate truncated result or overflow in normal use cases.
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#92" name=92><FONT size=4>92</FONT></A><FONT size=4>	 */</FONT></SPAN>
<A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#93" name=93><FONT size=4>93</FONT></A><FONT size=4>	<B>if</B> (</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=count&amp;project=linux-3.10"><FONT size=4>count</FONT></A><FONT size=4> &gt;= (</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=ssize_t&amp;project=linux-3.10"><FONT size=4>ssize_t</FONT></A><FONT size=4>)</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=PAGE_SIZE&amp;project=linux-3.10"><FONT size=4>PAGE_SIZE</FONT></A><FONT size=4>) {
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#94" name=94><FONT size=4>94</FONT></A><FONT size=4>		</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=print_symbol&amp;project=linux-3.10"><FONT size=4>print_symbol</FONT></A><FONT size=4>(<SPAN class=s style="COLOR: green">"fill_read_buffer: %s returned bad count\n"</SPAN>,
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#95" name=95><FONT size=4>95</FONT></A><FONT size=4>			(<B>unsigned</B> <B>long</B>)</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=ops&amp;project=linux-3.10"><FONT size=4>ops</FONT></A><FONT size=4>-&gt;</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=show&amp;project=linux-3.10"><FONT size=4>show</FONT></A><FONT size=4>);
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#96" name=96><FONT size=4>96</FONT></A><FONT size=4>		<SPAN class=c style="COLOR: rgb(102,102,102)">/* Try to struggle along */</SPAN>
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#97" name=97><FONT size=4>97</FONT></A><FONT size=4>		</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=count&amp;project=linux-3.10"><FONT size=4>count</FONT></A><FONT size=4> = </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=PAGE_SIZE&amp;project=linux-3.10"><FONT size=4>PAGE_SIZE</FONT></A><FONT size=4> - <SPAN class=n style="COLOR: rgb(165,42,42)">1</SPAN>;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#98" name=98><FONT size=4>98</FONT></A><FONT size=4>	}
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#99" name=99><FONT size=4>99</FONT></A><FONT size=4>	<B>if</B> (</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=count&amp;project=linux-3.10"><FONT size=4>count</FONT></A><FONT size=4> &gt;= 0) {
</FONT><A class=hl style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(0,0,0); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#100" name=100><FONT size=4>100</FONT></A><FONT size=4>		</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=buffer&amp;project=linux-3.10"><FONT size=4>buffer</FONT></A><FONT size=4>-&gt;</FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#needs_read_fill"><FONT size=4>needs_read_fill</FONT></A><FONT size=4> = 0;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#101" name=101><FONT size=4>101</FONT></A><FONT size=4>		</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=buffer&amp;project=linux-3.10"><FONT size=4>buffer</FONT></A><FONT size=4>-&gt;</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=count&amp;project=linux-3.10"><FONT size=4>count</FONT></A><FONT size=4> = </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=count&amp;project=linux-3.10"><FONT size=4>count</FONT></A><FONT size=4>;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#102" name=102><FONT size=4>102</FONT></A><FONT size=4>	} <B>else</B> {
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#103" name=103><FONT size=4>103</FONT></A><FONT size=4>		</FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#ret"><FONT size=4>ret</FONT></A><FONT size=4> = </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=count&amp;project=linux-3.10"><FONT size=4>count</FONT></A><FONT size=4>;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#104" name=104><FONT size=4>104</FONT></A><FONT size=4>	}
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#105" name=105><FONT size=4>105</FONT></A><FONT size=4>	<B>return</B> </FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#ret"><FONT size=4>ret</FONT></A><FONT size=4>;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#106" name=106><FONT size=4>106</FONT></A><FONT size=4>}</FONT></PRE>
<P>read&#22788;&#29702;&#30475;&#30528;&#24456;&#31616;&#21333;&#65292;sysfs_read_file&#20174;file&#25351;&#38024;&#20013;&#21462;&#19968;&#20010;&#31169;&#26377;&#25351;&#38024;&#65288;<SPAN style="COLOR: rgb(255,0,0)">&#27880;&#65306;&#22823;&#23478;&#21487;&#20197;&#31245;&#24494;&#30041;&#19968;&#19979;&#24515;&#65292;&#31169;&#26377;&#25968;&#25454;&#30340;&#27010;&#24565;&#65292;&#22312;VFS&#20013;&#20351;&#29992;&#26159;&#38750;&#24120;&#26222;&#36941;&#30340;</SPAN>&#65289;&#65292;&#36716;&#25442;&#20026;&#19968;&#20010;struct sysfs_buffer&#31867;&#22411;&#30340;&#25351;&#38024;&#65292;&#20197;&#27492;&#20026;&#21442;&#25968;&#65288;buffer&#65289;&#65292;&#36716;&#36523;&#23601;&#35843;&#29992;fill_read_buffer&#25509;&#21475;&#12290; </P>
<P>&#32780;fill_read_buffer&#25509;&#21475;&#65292;&#30452;&#25509;&#20174;buffer&#25351;&#38024;&#20013;&#21462;&#20986;&#19968;&#20010;struct sysfs_ops&#25351;&#38024;&#65292;&#35843;&#29992;&#35813;&#25351;&#38024;&#30340;show&#20989;&#25968;&#65292;&#21363;&#23436;&#25104;&#20102;&#25991;&#20214;&#30340;read&#25805;&#20316;&#12290; </P>
<P>&#37027;&#20040;&#21518;&#32493;&#21602;&#65311;&#24403;&#28982;&#26159;&#30001;ops-&gt;show&#25509;&#21475;&#25509;&#30528;&#22788;&#29702;&#21679;&#12290;&#32780;&#20855;&#20307;&#24590;&#20040;&#22788;&#29702;&#65292;&#23601;&#26159;&#20854;&#23427;&#27169;&#22359;&#65288;&#20363;&#22914;&#26576;&#20010;driver&#65289;&#30340;&#20107;&#20102;&#65292;sysfs&#19981;&#20877;&#20851;&#24515;&#65288;<SPAN style="COLOR: rgb(255,0,0)">&#20854;&#23454;&#65292;Linux&#22823;&#22810;&#30340;&#26680;&#24515;&#20195;&#30721;&#65292;&#37117;&#26159;&#21482;&#25552;&#20379;&#26550;&#26500;&#21644;&#26426;&#21046;&#65292;&#20855;&#20307;&#30340;&#23454;&#29616;&#65292;&#20063;&#23601;&#26159;&#33510;&#21147;&#65292;&#30041;&#32473;&#37027;&#20123;&#30721;&#20892;&#21543;&#65281;&#36825;&#23601;&#26159;&#35774;&#35745;&#30340;&#39749;&#21147;</SPAN>&#65289;&#12290; </P>
<P>&#19981;&#36807;&#36824;&#27809;&#23436;&#65292;&#36825;&#20010;struct sysfs_ops&#25351;&#38024;&#21738;&#26469;&#30340;&#65311;&#22909;&#21543;&#65292;&#25105;&#20204;&#20877;&#30475;&#30475;open(sysfs_open_file)&#25509;&#21475;&#21543;&#12290; </P><PRE style="BORDER-TOP: 0px; BORDER-RIGHT: 0px; FONT-VARIANT: normal; WORD-SPACING: 0px; BORDER-BOTTOM: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); FONT-STYLE: normal; MARGIN: 0px; BORDER-LEFT: 0px; LETTER-SPACING: normal; LINE-HEIGHT: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#326" name=326><FONT size=4>326</FONT></A><FONT size=4><B>static</B> <B>int</B> </FONT><A class=xf style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,0,255)" name=sysfs_open_file></A><A class=xf style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,0,255)" href="http://172.21.12.145:8080/source/s?refs=sysfs_open_file&amp;project=linux-3.10"><FONT size=4>sysfs_open_file</FONT></A><FONT size=4>(<B>struct</B> </FONT><A class=xa style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(102,0,204)" name=inode></A><A class=xa style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(102,0,204)" href="http://172.21.12.145:8080/source/s?refs=inode&amp;project=linux-3.10"><FONT size=4>inode</FONT></A><FONT size=4> *</FONT><A class=xa style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(102,0,204)" name=inode></A><A class=xa style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(102,0,204)" href="http://172.21.12.145:8080/source/s?refs=inode&amp;project=linux-3.10"><FONT size=4>inode</FONT></A><FONT size=4>, <B>struct</B> </FONT><A class=xa style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(102,0,204)" name=file></A><A class=xa style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(102,0,204)" href="http://172.21.12.145:8080/source/s?refs=file&amp;project=linux-3.10"><FONT size=4>file</FONT></A><FONT size=4> *</FONT><A class=xa style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(102,0,204)" name=file></A><A class=xa style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(102,0,204)" href="http://172.21.12.145:8080/source/s?refs=file&amp;project=linux-3.10"><FONT size=4>file</FONT></A><FONT size=4>)
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#327" name=327><FONT size=4>327</FONT></A><FONT size=4>{
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#328" name=328><FONT size=4>328</FONT></A><FONT size=4>	<B>struct</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=sysfs_dirent&amp;project=linux-3.10"><FONT size=4>sysfs_dirent</FONT></A><FONT size=4> *</FONT><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" name=attr_sd></A><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" href="http://172.21.12.145:8080/source/s?refs=attr_sd&amp;project=linux-3.10"><FONT size=4>attr_sd</FONT></A><FONT size=4> = </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=file&amp;project=linux-3.10"><FONT size=4>file</FONT></A><FONT size=4>-&gt;</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=f_path&amp;project=linux-3.10"><FONT size=4>f_path</FONT></A><FONT size=4>.</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=dentry&amp;project=linux-3.10"><FONT size=4>dentry</FONT></A><FONT size=4>-&gt;</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=d_fsdata&amp;project=linux-3.10"><FONT size=4>d_fsdata</FONT></A><FONT size=4>;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#329" name=329><FONT size=4>329</FONT></A><FONT size=4>	<B>struct</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=kobject&amp;project=linux-3.10"><FONT size=4>kobject</FONT></A><FONT size=4> *</FONT><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" name=kobj></A><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" href="http://172.21.12.145:8080/source/s?refs=kobj&amp;project=linux-3.10"><FONT size=4>kobj</FONT></A><FONT size=4> = </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=attr_sd&amp;project=linux-3.10"><FONT size=4>attr_sd</FONT></A><FONT size=4>-&gt;</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=s_parent&amp;project=linux-3.10"><FONT size=4>s_parent</FONT></A><FONT size=4>-&gt;</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=s_dir&amp;project=linux-3.10"><FONT size=4>s_dir</FONT></A><FONT size=4>.</FONT><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" name=kobj></A><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" href="http://172.21.12.145:8080/source/s?refs=kobj&amp;project=linux-3.10"><FONT size=4>kobj</FONT></A><FONT size=4>;
</FONT><A class=hl style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(0,0,0); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#330" name=330><FONT size=4>330</FONT></A><FONT size=4>	<B>struct</B> </FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#sysfs_buffer"><FONT size=4>sysfs_buffer</FONT></A><FONT size=4> *</FONT><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" name=buffer></A><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" href="http://172.21.12.145:8080/source/s?refs=buffer&amp;project=linux-3.10"><FONT size=4>buffer</FONT></A><FONT size=4>;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#331" name=331><FONT size=4>331</FONT></A><FONT size=4>	<B>const</B> <B>struct</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=sysfs_ops&amp;project=linux-3.10"><FONT size=4>sysfs_ops</FONT></A><FONT size=4> *</FONT><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" name=ops></A><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" href="http://172.21.12.145:8080/source/s?refs=ops&amp;project=linux-3.10"><FONT size=4>ops</FONT></A><FONT size=4>;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#332" name=332><FONT size=4>332</FONT></A><FONT size=4>	<B>int</B> </FONT><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" name=error></A><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" href="http://172.21.12.145:8080/source/s?refs=error&amp;project=linux-3.10"><FONT size=4>error</FONT></A><FONT size=4> = -</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=EACCES&amp;project=linux-3.10"><FONT size=4>EACCES</FONT></A><FONT size=4>;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#333" name=333><FONT size=4>333</FONT></A>
<A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#334" name=334><FONT size=4>334</FONT></A><FONT size=4>	<SPAN class=c style="COLOR: rgb(102,102,102)">/* need attr_sd for attr and ops, its parent for kobj */</SPAN>
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#335" name=335><FONT size=4>335</FONT></A><FONT size=4>	<B>if</B> (!</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=sysfs_get_active&amp;project=linux-3.10"><FONT size=4>sysfs_get_active</FONT></A><FONT size=4>(</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=attr_sd&amp;project=linux-3.10"><FONT size=4>attr_sd</FONT></A><FONT size=4>))
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#336" name=336><FONT size=4>336</FONT></A><FONT size=4>		<B>return</B> -</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=ENODEV&amp;project=linux-3.10"><FONT size=4>ENODEV</FONT></A><FONT size=4>;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#337" name=337><FONT size=4>337</FONT></A>
<A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#338" name=338><FONT size=4>338</FONT></A><FONT size=4>	<SPAN class=c style="COLOR: rgb(102,102,102)">/* every kobject with an attribute needs a ktype assigned */</SPAN>
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#339" name=339><FONT size=4>339</FONT></A><FONT size=4>	<B>if</B> (</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=kobj&amp;project=linux-3.10"><FONT size=4>kobj</FONT></A><FONT size=4>-&gt;</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=ktype&amp;project=linux-3.10"><FONT size=4>ktype</FONT></A><FONT size=4> &amp;&amp; </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=kobj&amp;project=linux-3.10"><FONT size=4>kobj</FONT></A><FONT size=4>-&gt;</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=ktype&amp;project=linux-3.10"><FONT size=4>ktype</FONT></A><FONT size=4>-&gt;</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=sysfs_ops&amp;project=linux-3.10"><FONT size=4>sysfs_ops</FONT></A><FONT size=4>)
</FONT><A class=hl style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(0,0,0); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#340" name=340><FONT size=4>340</FONT></A><FONT size=4>		</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=ops&amp;project=linux-3.10"><FONT size=4>ops</FONT></A><FONT size=4> = </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=kobj&amp;project=linux-3.10"><FONT size=4>kobj</FONT></A><FONT size=4>-&gt;</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=ktype&amp;project=linux-3.10"><FONT size=4>ktype</FONT></A><FONT size=4>-&gt;</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=sysfs_ops&amp;project=linux-3.10"><FONT size=4>sysfs_ops</FONT></A><FONT size=4>;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#341" name=341><FONT size=4>341</FONT></A><FONT size=4>	<B>else</B> {
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#342" name=342><FONT size=4>342</FONT></A><FONT size=4>		</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=WARN&amp;project=linux-3.10"><FONT size=4>WARN</FONT></A><FONT size=4>(<SPAN class=n style="COLOR: rgb(165,42,42)">1</SPAN>, </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=KERN_ERR&amp;project=linux-3.10"><FONT size=4>KERN_ERR</FONT></A><FONT size=4> <SPAN class=s style="COLOR: green">"missing sysfs attribute operations for "</SPAN>
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#343" name=343><FONT size=4>343</FONT></A><FONT size=4>		       <SPAN class=s style="COLOR: green">"kobject: %s\n"</SPAN>, </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=kobject_name&amp;project=linux-3.10"><FONT size=4>kobject_name</FONT></A><FONT size=4>(</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=kobj&amp;project=linux-3.10"><FONT size=4>kobj</FONT></A><FONT size=4>));
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#344" name=344><FONT size=4>344</FONT></A><FONT size=4>		<B>goto</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=err_out&amp;project=linux-3.10"><FONT size=4>err_out</FONT></A><FONT size=4>;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#345" name=345><FONT size=4>345</FONT></A><FONT size=4>	}
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#346" name=346><FONT size=4>346</FONT></A>
<A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#347" name=347><FONT size=4>347</FONT></A><FONT size=4>	</FONT><SPAN class=c style="COLOR: rgb(102,102,102)"><FONT size=4>/* File needs write support.
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#348" name=348><FONT size=4>348</FONT></A><FONT size=4>	 * The inode's perms must say it's ok,
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#349" name=349><FONT size=4>349</FONT></A><FONT size=4>	 * and we must have a store method.
</FONT><A class=hl style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(0,0,0); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#350" name=350><FONT size=4>350</FONT></A><FONT size=4>	 */</FONT></SPAN>
<A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#351" name=351><FONT size=4>351</FONT></A><FONT size=4>	<B>if</B> (</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=file&amp;project=linux-3.10"><FONT size=4>file</FONT></A><FONT size=4>-&gt;</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=f_mode&amp;project=linux-3.10"><FONT size=4>f_mode</FONT></A><FONT size=4> &amp; </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=FMODE_WRITE&amp;project=linux-3.10"><FONT size=4>FMODE_WRITE</FONT></A><FONT size=4>) {
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#352" name=352><FONT size=4>352</FONT></A><FONT size=4>		<B>if</B> (!(</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=inode&amp;project=linux-3.10"><FONT size=4>inode</FONT></A><FONT size=4>-&gt;</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=i_mode&amp;project=linux-3.10"><FONT size=4>i_mode</FONT></A><FONT size=4> &amp; </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=S_IWUGO&amp;project=linux-3.10"><FONT size=4>S_IWUGO</FONT></A><FONT size=4>) || !</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=ops&amp;project=linux-3.10"><FONT size=4>ops</FONT></A><FONT size=4>-&gt;</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=store&amp;project=linux-3.10"><FONT size=4>store</FONT></A><FONT size=4>)
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#353" name=353><FONT size=4>353</FONT></A><FONT size=4>			<B>goto</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=err_out&amp;project=linux-3.10"><FONT size=4>err_out</FONT></A><FONT size=4>;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#354" name=354><FONT size=4>354</FONT></A><FONT size=4>	}
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#355" name=355><FONT size=4>355</FONT></A>
<A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#356" name=356><FONT size=4>356</FONT></A><FONT size=4>	</FONT><SPAN class=c style="COLOR: rgb(102,102,102)"><FONT size=4>/* File needs read support.
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#357" name=357><FONT size=4>357</FONT></A><FONT size=4>	 * The inode's perms must say it's ok, and we there
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#358" name=358><FONT size=4>358</FONT></A><FONT size=4>	 * must be a show method for it.
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#359" name=359><FONT size=4>359</FONT></A><FONT size=4>	 */</FONT></SPAN>
<A class=hl style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(0,0,0); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#360" name=360><FONT size=4>360</FONT></A><FONT size=4>	<B>if</B> (</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=file&amp;project=linux-3.10"><FONT size=4>file</FONT></A><FONT size=4>-&gt;</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=f_mode&amp;project=linux-3.10"><FONT size=4>f_mode</FONT></A><FONT size=4> &amp; </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=FMODE_READ&amp;project=linux-3.10"><FONT size=4>FMODE_READ</FONT></A><FONT size=4>) {
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#361" name=361><FONT size=4>361</FONT></A><FONT size=4>		<B>if</B> (!(</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=inode&amp;project=linux-3.10"><FONT size=4>inode</FONT></A><FONT size=4>-&gt;</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=i_mode&amp;project=linux-3.10"><FONT size=4>i_mode</FONT></A><FONT size=4> &amp; </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=S_IRUGO&amp;project=linux-3.10"><FONT size=4>S_IRUGO</FONT></A><FONT size=4>) || !</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=ops&amp;project=linux-3.10"><FONT size=4>ops</FONT></A><FONT size=4>-&gt;</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=show&amp;project=linux-3.10"><FONT size=4>show</FONT></A><FONT size=4>)
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#362" name=362><FONT size=4>362</FONT></A><FONT size=4>			<B>goto</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=err_out&amp;project=linux-3.10"><FONT size=4>err_out</FONT></A><FONT size=4>;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#363" name=363><FONT size=4>363</FONT></A><FONT size=4>	}
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#364" name=364><FONT size=4>364</FONT></A>
<A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#365" name=365><FONT size=4>365</FONT></A><FONT size=4>	</FONT><SPAN class=c style="COLOR: rgb(102,102,102)"><FONT size=4>/* No error? Great, allocate a buffer for the file, and store it
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#366" name=366><FONT size=4>366</FONT></A><FONT size=4>	 * it in file-&gt;private_data for easy access.
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#367" name=367><FONT size=4>367</FONT></A><FONT size=4>	 */</FONT></SPAN>
<A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#368" name=368><FONT size=4>368</FONT></A><FONT size=4>	</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=error&amp;project=linux-3.10"><FONT size=4>error</FONT></A><FONT size=4> = -</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=ENOMEM&amp;project=linux-3.10"><FONT size=4>ENOMEM</FONT></A><FONT size=4>;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#369" name=369><FONT size=4>369</FONT></A><FONT size=4>	</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=buffer&amp;project=linux-3.10"><FONT size=4>buffer</FONT></A><FONT size=4> = </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=kzalloc&amp;project=linux-3.10"><FONT size=4>kzalloc</FONT></A><FONT size=4>(<B>sizeof</B>(<B>struct</B> </FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#sysfs_buffer"><FONT size=4>sysfs_buffer</FONT></A><FONT size=4>), </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=GFP_KERNEL&amp;project=linux-3.10"><FONT size=4>GFP_KERNEL</FONT></A><FONT size=4>);
</FONT><A class=hl style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(0,0,0); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#370" name=370><FONT size=4>370</FONT></A><FONT size=4>	<B>if</B> (!</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=buffer&amp;project=linux-3.10"><FONT size=4>buffer</FONT></A><FONT size=4>)
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#371" name=371><FONT size=4>371</FONT></A><FONT size=4>		<B>goto</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=err_out&amp;project=linux-3.10"><FONT size=4>err_out</FONT></A><FONT size=4>;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#372" name=372><FONT size=4>372</FONT></A>
<A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#373" name=373><FONT size=4>373</FONT></A><FONT size=4>	</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=mutex_init&amp;project=linux-3.10"><FONT size=4>mutex_init</FONT></A><FONT size=4>(&amp;</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=buffer&amp;project=linux-3.10"><FONT size=4>buffer</FONT></A><FONT size=4>-&gt;</FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#mutex"><FONT size=4>mutex</FONT></A><FONT size=4>);
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#374" name=374><FONT size=4>374</FONT></A><FONT size=4>	</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=buffer&amp;project=linux-3.10"><FONT size=4>buffer</FONT></A><FONT size=4>-&gt;</FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#needs_read_fill"><FONT size=4>needs_read_fill</FONT></A><FONT size=4> = <SPAN class=n style="COLOR: rgb(165,42,42)">1</SPAN>;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#375" name=375><FONT size=4>375</FONT></A><FONT size=4>	</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=buffer&amp;project=linux-3.10"><FONT size=4>buffer</FONT></A><FONT size=4>-&gt;</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=ops&amp;project=linux-3.10"><FONT size=4>ops</FONT></A><FONT size=4> = </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=ops&amp;project=linux-3.10"><FONT size=4>ops</FONT></A><FONT size=4>;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#376" name=376><FONT size=4>376</FONT></A><FONT size=4>	</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=file&amp;project=linux-3.10"><FONT size=4>file</FONT></A><FONT size=4>-&gt;</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=private_data&amp;project=linux-3.10"><FONT size=4>private_data</FONT></A><FONT size=4> = </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=buffer&amp;project=linux-3.10"><FONT size=4>buffer</FONT></A><FONT size=4>;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#377" name=377><FONT size=4>377</FONT></A>
<A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#378" name=378><FONT size=4>378</FONT></A><FONT size=4>	<SPAN class=c style="COLOR: rgb(102,102,102)">/* make sure we have open dirent struct */</SPAN>
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#379" name=379><FONT size=4>379</FONT></A><FONT size=4>	</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=error&amp;project=linux-3.10"><FONT size=4>error</FONT></A><FONT size=4> = </FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#sysfs_get_open_dirent"><FONT size=4>sysfs_get_open_dirent</FONT></A><FONT size=4>(</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=attr_sd&amp;project=linux-3.10"><FONT size=4>attr_sd</FONT></A><FONT size=4>, </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=buffer&amp;project=linux-3.10"><FONT size=4>buffer</FONT></A><FONT size=4>);
</FONT><A class=hl style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(0,0,0); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#380" name=380><FONT size=4>380</FONT></A><FONT size=4>	<B>if</B> (</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=error&amp;project=linux-3.10"><FONT size=4>error</FONT></A><FONT size=4>)
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#381" name=381><FONT size=4>381</FONT></A><FONT size=4>		<B>goto</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=err_free&amp;project=linux-3.10"><FONT size=4>err_free</FONT></A><FONT size=4>;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#382" name=382><FONT size=4>382</FONT></A>
<A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#383" name=383><FONT size=4>383</FONT></A><FONT size=4>	<SPAN class=c style="COLOR: rgb(102,102,102)">/* open succeeded, put active references */</SPAN>
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#384" name=384><FONT size=4>384</FONT></A><FONT size=4>	</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=sysfs_put_active&amp;project=linux-3.10"><FONT size=4>sysfs_put_active</FONT></A><FONT size=4>(</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=attr_sd&amp;project=linux-3.10"><FONT size=4>attr_sd</FONT></A><FONT size=4>);
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#385" name=385><FONT size=4>385</FONT></A><FONT size=4>	<B>return</B> 0;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#386" name=386><FONT size=4>386</FONT></A>
<A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#387" name=387><FONT size=4>387</FONT></A><FONT size=4> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=err_free&amp;project=linux-3.10"><FONT size=4>err_free</FONT></A><FONT size=4>:
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#388" name=388><FONT size=4>388</FONT></A><FONT size=4>	</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=kfree&amp;project=linux-3.10"><FONT size=4>kfree</FONT></A><FONT size=4>(</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=buffer&amp;project=linux-3.10"><FONT size=4>buffer</FONT></A><FONT size=4>);
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#389" name=389><FONT size=4>389</FONT></A><FONT size=4> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=err_out&amp;project=linux-3.10"><FONT size=4>err_out</FONT></A><FONT size=4>:
</FONT><A class=hl style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(0,0,0); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#390" name=390><FONT size=4>390</FONT></A><FONT size=4>	</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=sysfs_put_active&amp;project=linux-3.10"><FONT size=4>sysfs_put_active</FONT></A><FONT size=4>(</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=attr_sd&amp;project=linux-3.10"><FONT size=4>attr_sd</FONT></A><FONT size=4>);
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#391" name=391><FONT size=4>391</FONT></A><FONT size=4>	<B>return</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=error&amp;project=linux-3.10"><FONT size=4>error</FONT></A><FONT size=4>;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-3.10/fs/sysfs/file.c#392" name=392><FONT size=4>392</FONT></A><FONT size=4>}</FONT></PRE></BLOCKQUOTE>
<BLOCKQUOTE>
<P>&#21734;&#65292;&#21407;&#26469;&#21644;ktype&#26377;&#20851;&#31995;&#12290;&#36825;&#20010;&#25351;&#38024;&#26159;&#20174;&#35813;attribute&#25152;&#20174;&#23646;&#30340;kobject&#20013;&#25343;&#30340;&#12290;&#20877;&#21435;&#30475;&#19968;&#19979;"<A href="http://www.wowotech.net/linux_kenrel/kobject.html">Linux&#35774;&#22791;&#27169;&#22411;_Kobject</A>&#8221;&#20013;ktype&#30340;&#23450;&#20041;&#65292;&#36824;&#30495;&#26377;&#19968;&#20010;struct sysfs_ops&#30340;&#25351;&#38024;&#12290; </P>
<P>&#25105;&#20204;&#27880;&#24847;&#19968;&#19979;14&#34892;&#30340;&#27880;&#37322;&#20197;&#21450;&#20854;&#21518;&#20195;&#30721;&#36923;&#36753;&#65292;<SPAN style="COLOR: rgb(255,0,0)">&#22914;&#26524;&#20174;&#23646;&#30340;kobject&#65288;&#23601;&#26159;attribute&#25991;&#20214;&#25152;&#22312;&#30340;&#30446;&#24405;&#65289;&#27809;&#26377;ktype&#65292;&#25110;&#32773;&#27809;&#26377;ktype-&gt;sysfs_ops&#25351;&#38024;&#65292;&#26159;&#19981;&#20801;&#35768;&#23427;&#27880;&#20876;&#20219;&#20309;attribute&#30340;</SPAN>&#65281; </P>
<P>&#32463;&#36807;&#30830;&#35748;&#21518;&#65292;<FONT class=extract>sysfs_open_file&#20174;ktype&#20013;&#21462;&#20986;struct sysfs_ops&#25351;&#38024;&#65292;&#24182;&#22312;&#38543;&#21518;&#30340;&#20195;&#30721;&#36923;&#36753;&#20013;&#65292;&#20998;&#37197;&#19968;&#20010;struct sysfs_buffer&#31867;&#22411;&#30340;&#25351;&#38024;&#65288;buffer&#65289;&#65292;&#24182;&#25226;struct sysfs_ops&#25351;&#38024;&#20445;&#23384;&#22312;&#20854;&#20013;&#65292;&#38543;&#21518;&#65288;&#27880;&#24847;&#21734;&#65289;&#65292;&#25226;buffer&#25351;&#38024;&#20132;&#32473;file&#30340;private_data&#65292;&#38543;&#21518;read/write&#31561;&#25509;&#21475;&#20415;&#21487;&#20197;&#21462;&#20986;&#20351;&#29992;&#12290;</FONT>&#21999;&#65281;&#24815;&#29992;&#20238;&#20457;&#65281; </P></BLOCKQUOTE>
<P>&#39034;&#20415;&#30475;&#19968;&#19979;struct sysfs_ops&#21543;&#65292;&#25105;&#24819;&#20320;&#24050;&#32463;&#33021;&#22815;&#29468;&#21040;&#20102;&#12290; </P>
<DIV id=codeSnippetWrapper style='FONT-FAMILY: "direction:ltr;max-height:200px;font-size:8pt;overflow:auto;border-top:silver 1px solid;cursor:text;border-right:silver 1px solid;padding-top:4px;"; WIDTH: 97.5%; BORDER-BOTTOM: silver 1px solid; PADDING-BOTTOM: 4px; TEXT-ALIGN: left; PADDING-LEFT: 4px; MARGIN: 20px 0px 10px; BORDER-LEFT: silver 1px solid; LINE-HEIGHT: 12pt; PADDING-RIGHT: 4px; BACKGROUND-COLOR: rgb(244,244,244)'>
<DIV id=codeSnippet style='FONT-FAMILY: "direction:ltr;border-top-style:none;color:black;font-size:8pt;border-left-style:none;overflow:visible;padding-top:0px;"; WIDTH: 100%; BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; TEXT-ALIGN: left; BORDER-RIGHT-STYLE: none; PADDING-LEFT: 0px; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(244,244,244)'><PRE style='FONT-FAMILY: "direction:ltr;border-top-style:none;color:black;font-size:8pt;border-left-style:none;overflow:visible;padding-top:0px;"; WIDTH: 100%; BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; TEXT-ALIGN: left; BORDER-RIGHT-STYLE: none; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: white'><SPAN id=lnum1 style="COLOR: rgb(96,96,96)"> 1:</SPAN> <SPAN style="COLOR: rgb(0,128,0)">/* include/linux/sysfs.h, line 124 */</SPAN></PRE><!--CRLF--><PRE style='FONT-FAMILY: "direction:ltr;border-top-style:none;color:black;font-size:8pt;border-left-style:none;overflow:visible;padding-top:0px;"; WIDTH: 100%; BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; TEXT-ALIGN: left; BORDER-RIGHT-STYLE: none; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(244,244,244)'><SPAN id=lnum2 style="COLOR: rgb(96,96,96)"> 2:</SPAN> <SPAN style="COLOR: rgb(0,0,255)">struct</SPAN> sysfs_ops {</PRE><!--CRLF--><PRE style='FONT-FAMILY: "direction:ltr;border-top-style:none;color:black;font-size:8pt;border-left-style:none;overflow:visible;padding-top:0px;"; WIDTH: 100%; BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; TEXT-ALIGN: left; BORDER-RIGHT-STYLE: none; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: white'><SPAN id=lnum3 style="COLOR: rgb(96,96,96)"> 3:</SPAN> &nbsp;&nbsp;&nbsp;&nbsp;ssize_t (*show)(<SPAN style="COLOR: rgb(0,0,255)">struct</SPAN> kobject *, <SPAN style="COLOR: rgb(0,0,255)">struct</SPAN> attribute *,<SPAN style="COLOR: rgb(0,0,255)">char</SPAN> *);</PRE><!--CRLF--><PRE style='FONT-FAMILY: "direction:ltr;border-top-style:none;color:black;font-size:8pt;border-left-style:none;overflow:visible;padding-top:0px;"; WIDTH: 100%; BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; TEXT-ALIGN: left; BORDER-RIGHT-STYLE: none; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(244,244,244)'><SPAN id=lnum4 style="COLOR: rgb(96,96,96)"> 4:</SPAN> &nbsp;&nbsp;&nbsp;&nbsp;ssize_t (*store)(<SPAN style="COLOR: rgb(0,0,255)">struct</SPAN> kobject *,<SPAN style="COLOR: rgb(0,0,255)">struct</SPAN> attribute *,<SPAN style="COLOR: rgb(0,0,255)">const</SPAN> <SPAN style="COLOR: rgb(0,0,255)">char</SPAN> *, size_t);</PRE><!--CRLF--><PRE style='FONT-FAMILY: "direction:ltr;border-top-style:none;color:black;font-size:8pt;border-left-style:none;overflow:visible;padding-top:0px;"; WIDTH: 100%; BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; TEXT-ALIGN: left; BORDER-RIGHT-STYLE: none; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: white'><SPAN id=lnum5 style="COLOR: rgb(96,96,96)"> 5:</SPAN> &nbsp;&nbsp;&nbsp;&nbsp;<SPAN style="COLOR: rgb(0,0,255)">const</SPAN> <SPAN style="COLOR: rgb(0,0,255)">void</SPAN> *(*<SPAN style="COLOR: rgb(0,0,255)">namespace</SPAN>)(<SPAN style="COLOR: rgb(0,0,255)">struct</SPAN> kobject *, <SPAN style="COLOR: rgb(0,0,255)">const</SPAN> <SPAN style="COLOR: rgb(0,0,255)">struct</SPAN> attribute *);</PRE><!--CRLF--><PRE style='FONT-FAMILY: "direction:ltr;border-top-style:none;color:black;font-size:8pt;border-left-style:none;overflow:visible;padding-top:0px;"; WIDTH: 100%; BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; TEXT-ALIGN: left; BORDER-RIGHT-STYLE: none; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(244,244,244)'><SPAN id=lnum6 style="COLOR: rgb(96,96,96)"> 6:</SPAN> };</PRE><!--CRLF--></DIV></DIV>
<P>&nbsp; </P>
<P>attribute&#25991;&#20214;&#30340;write&#36807;&#31243;&#21644;read&#31867;&#20284;&#65292;&#36825;&#37324;&#23601;&#19981;&#20877;&#22810;&#35828;&#12290;&#21478;&#22806;&#65292;&#19978;&#38754;&#21482;&#20998;&#26512;&#20102;&#26222;&#36890;attribute&#30340;&#36923;&#36753;&#65292;&#32780;&#20108;&#36827;&#21046;&#31867;&#22411;&#30340;&#21602;&#65311;&#20063;&#31867;&#20284;&#65292;&#21435;&#30475;&#30475;fs/sysfs/bin.c&#21543;&#65292;&#36825;&#37324;&#20063;&#19981;&#35828;&#20102;&#12290; </P>
<P>&nbsp; </P>
<P>&#35762;&#21040;&#36825;&#37324;&#65292;&#24212;&#35813;&#24050;&#32463;&#32467;&#26463;&#20102;&#65292;&#20107;&#23454;&#21364;&#19981;&#26159;&#22914;&#27492;&#12290;&#19978;&#38754;read/write&#30340;&#25968;&#25454;&#27969;&#65292;&#21482;&#21040;kobject&#65288;&#20063;&#23601;&#26159;&#30446;&#24405;&#65289;&#32423;&#21035;&#21734;&#65292;&#32780;&#30495;&#27491;&#38656;&#35201;&#25805;&#20316;&#30340;&#26159;attribute&#65288;&#25991;&#20214;&#65289;&#21834;&#65281;&#36825;&#20013;&#38388;&#19968;&#23450;&#36824;&#26377;&#19968;&#23618;&#36716;&#25442;&#65281;&#30830;&#23454;&#65292;&#19981;&#36807;&#21448;&#20132;&#32473;&#20854;&#23427;&#27169;&#22359;&#20102;&#12290; &#19979;&#38754;&#25105;&#20204;&#36890;&#36807;&#19968;&#20010;&#20363;&#23376;&#65292;&#26469;&#35828;&#26126;&#22914;&#20309;&#36716;&#25442;&#30340;&#12290; </P>
<H4>4. sysfs&#22312;&#35774;&#22791;&#27169;&#22411;&#20013;&#30340;&#24212;&#29992;&#24635;&#32467; </H4>
<P>&#35753;&#25105;&#20204;&#36890;&#36807;&#35774;&#22791;&#27169;&#22411;class.c&#20013;&#26377;&#20851;sysfs&#30340;&#23454;&#29616;&#65292;&#26469;&#24635;&#32467;&#19968;&#19979;sysfs&#30340;&#24212;&#29992;&#26041;&#24335;&#12290; </P>
<P>&#39318;&#20808;&#65292;&#22312;class.c&#20013;&#65292;&#23450;&#20041;&#20102;Class&#25152;&#38656;&#30340;ktype&#20197;&#21450;sysfs_ops&#31867;&#22411;&#30340;&#21464;&#37327;&#65292;&#22914;&#19979;&#65306; </P><PRE style="BORDER-TOP: 0px; BORDER-RIGHT: 0px; FONT-VARIANT: normal; WORD-SPACING: 0px; BORDER-BOTTOM: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); FONT-STYLE: normal; MARGIN: 0px; BORDER-LEFT: 0px; LETTER-SPACING: normal; LINE-HEIGHT: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; BACKGROUND: orange; COLOR: yellow; TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/class.c#74" name=74><FONT size=4>74</FONT></A><FONT size=4><B>static</B> <B>const</B> <B>struct</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=sysfs_ops&amp;project=linux-4.1"><FONT size=4>sysfs_ops</FONT></A><FONT size=4> </FONT><A class=xv style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(204,51,0)" name=class_sysfs_ops></A><A class=xv style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(204,51,0)" href="http://172.21.12.145:8080/source/s?refs=class_sysfs_ops&amp;project=linux-4.1"><FONT size=4>class_sysfs_ops</FONT></A><FONT size=4> = {
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/class.c#75" name=75><FONT size=4>75</FONT></A><FONT size=4>	.</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=show&amp;project=linux-4.1"><FONT size=4>show</FONT></A><FONT size=4>	   = </FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/class.c#class_attr_show"><FONT size=4>class_attr_show</FONT></A><FONT size=4>,
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/class.c#76" name=76><FONT size=4>76</FONT></A><FONT size=4>	.</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=store&amp;project=linux-4.1"><FONT size=4>store</FONT></A><FONT size=4>	   = </FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/class.c#class_attr_store"><FONT size=4>class_attr_store</FONT></A><FONT size=4>,
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/class.c#77" name=77><FONT size=4>77</FONT></A><FONT size=4>};
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/class.c#78" name=78><FONT size=4>78</FONT></A>
<A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/class.c#79" name=79><FONT size=4>79</FONT></A><FONT size=4><B>static</B> <B>struct</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=kobj_type&amp;project=linux-4.1"><FONT size=4>kobj_type</FONT></A><FONT size=4> </FONT><A class=xv style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(204,51,0)" name=class_ktype></A><A class=xv style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(204,51,0)" href="http://172.21.12.145:8080/source/s?refs=class_ktype&amp;project=linux-4.1"><FONT size=4>class_ktype</FONT></A><FONT size=4> = {
</FONT><A class=hl style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(0,0,0); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/class.c#80" name=80><FONT size=4>80</FONT></A><FONT size=4>	.</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=sysfs_ops&amp;project=linux-4.1"><FONT size=4>sysfs_ops</FONT></A><FONT size=4>	= &amp;</FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/class.c#class_sysfs_ops"><FONT size=4>class_sysfs_ops</FONT></A><FONT size=4>,
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/class.c#81" name=81><FONT size=4>81</FONT></A><FONT size=4>	.</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=release&amp;project=linux-4.1"><FONT size=4>release</FONT></A><FONT size=4>	= </FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/class.c#class_release"><FONT size=4>class_release</FONT></A><FONT size=4>,
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/class.c#82" name=82><FONT size=4>82</FONT></A><FONT size=4>	.</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=child_ns_type&amp;project=linux-4.1"><FONT size=4>child_ns_type</FONT></A><FONT size=4>	= </FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/class.c#class_child_ns_type"><FONT size=4>class_child_ns_type</FONT></A><FONT size=4>,
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/class.c#83" name=83><FONT size=4>83</FONT></A><FONT size=4>};</FONT></PRE>
<P>&#30001;&#21069;&#38754;&#31456;&#33410;&#30340;&#25551;&#36848;&#21487;&#30693;&#65292;&#25152;&#26377;class_type&#30340;Kobject&#19979;&#38754;&#30340;attribute&#25991;&#20214;&#30340;&#35835;&#20889;&#25805;&#20316;&#65292;&#37117;&#20250;&#20132;&#32473;class_attr_show&#21644;class_attr_store&#20004;&#20010;&#25509;&#21475;&#22788;&#29702;&#12290;&#20197;class_attr_show&#20026;&#20363;&#65306; </P><PRE style="BORDER-TOP: 0px; BORDER-RIGHT: 0px; FONT-VARIANT: normal; WORD-SPACING: 0px; BORDER-BOTTOM: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); FONT-STYLE: normal; MARGIN: 0px; BORDER-LEFT: 0px; LETTER-SPACING: normal; LINE-HEIGHT: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/class.c#24" name=24><FONT size=4>24</FONT></A><FONT size=4>#<B>define</B> </FONT><A class=xm style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(204,102,102)" name=to_class_attr></A><A class=xm style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(204,102,102)" href="http://172.21.12.145:8080/source/s?refs=to_class_attr&amp;project=linux-4.1"><FONT size=4>to_class_attr</FONT></A><FONT size=4>(</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=_attr&amp;project=linux-4.1"><FONT size=4>_attr</FONT></A><FONT size=4>) </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=container_of&amp;project=linux-4.1"><FONT size=4>container_of</FONT></A><FONT size=4>(</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=_attr&amp;project=linux-4.1"><FONT size=4>_attr</FONT></A><FONT size=4>, <B>struct</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=class_attribute&amp;project=linux-4.1"><FONT size=4>class_attribute</FONT></A><FONT size=4>, </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=attr&amp;project=linux-4.1"><FONT size=4>attr</FONT></A><FONT size=4>)
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/class.c#25" name=25><FONT size=4>25</FONT></A>
<A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; BACKGROUND: orange; COLOR: yellow; TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/class.c#26" name=26><FONT size=4>26</FONT></A><FONT size=4><B>static</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=ssize_t&amp;project=linux-4.1"><FONT size=4>ssize_t</FONT></A><FONT size=4> </FONT><A class=xf style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,0,255)" name=class_attr_show></A><A class=xf style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,0,255)" href="http://172.21.12.145:8080/source/s?refs=class_attr_show&amp;project=linux-4.1"><FONT size=4>class_attr_show</FONT></A><FONT size=4>(<B>struct</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=kobject&amp;project=linux-4.1"><FONT size=4>kobject</FONT></A><FONT size=4> *</FONT><A class=xa style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(102,0,204)" name=kobj></A><A class=xa style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(102,0,204)" href="http://172.21.12.145:8080/source/s?refs=kobj&amp;project=linux-4.1"><FONT size=4>kobj</FONT></A><FONT size=4>, <B>struct</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=attribute&amp;project=linux-4.1"><FONT size=4>attribute</FONT></A><FONT size=4> *</FONT><A class=xa style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(102,0,204)" name=attr></A><A class=xa style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(102,0,204)" href="http://172.21.12.145:8080/source/s?refs=attr&amp;project=linux-4.1"><FONT size=4>attr</FONT></A><FONT size=4>,
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/class.c#27" name=27><FONT size=4>27</FONT></A><FONT size=4>			       <B>char</B> *</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=buf&amp;project=linux-4.1"><FONT size=4>buf</FONT></A><FONT size=4>)
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/class.c#28" name=28><FONT size=4>28</FONT></A><FONT size=4>{
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/class.c#29" name=29><FONT size=4>29</FONT></A><FONT size=4>	<B>struct</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=class_attribute&amp;project=linux-4.1"><FONT size=4>class_attribute</FONT></A><FONT size=4> *</FONT><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" name=class_attr></A><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" href="http://172.21.12.145:8080/source/s?refs=class_attr&amp;project=linux-4.1"><FONT size=4>class_attr</FONT></A><FONT size=4> = </FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/class.c#to_class_attr"><FONT size=4>to_class_attr</FONT></A><FONT size=4>(</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=attr&amp;project=linux-4.1"><FONT size=4>attr</FONT></A><FONT size=4>);
</FONT><A class=hl style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(0,0,0); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/class.c#30" name=30><FONT size=4>30</FONT></A><FONT size=4>	<B>struct</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=subsys_private&amp;project=linux-4.1"><FONT size=4>subsys_private</FONT></A><FONT size=4> *</FONT><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" name=cp></A><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" href="http://172.21.12.145:8080/source/s?refs=cp&amp;project=linux-4.1"><FONT size=4>cp</FONT></A><FONT size=4> = </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=to_subsys_private&amp;project=linux-4.1"><FONT size=4>to_subsys_private</FONT></A><FONT size=4>(</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=kobj&amp;project=linux-4.1"><FONT size=4>kobj</FONT></A><FONT size=4>);
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/class.c#31" name=31><FONT size=4>31</FONT></A><FONT size=4>	</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=ssize_t&amp;project=linux-4.1"><FONT size=4>ssize_t</FONT></A><FONT size=4> </FONT><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" name=ret></A><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" href="http://172.21.12.145:8080/source/s?refs=ret&amp;project=linux-4.1"><FONT size=4>ret</FONT></A><FONT size=4> = -</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=EIO&amp;project=linux-4.1"><FONT size=4>EIO</FONT></A><FONT size=4>;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/class.c#32" name=32><FONT size=4>32</FONT></A>
<A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/class.c#33" name=33><FONT size=4>33</FONT></A><FONT size=4>	<B>if</B> (</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=class_attr&amp;project=linux-4.1"><FONT size=4>class_attr</FONT></A><FONT size=4>-&gt;</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=show&amp;project=linux-4.1"><FONT size=4>show</FONT></A><FONT size=4>)
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/class.c#34" name=34><FONT size=4>34</FONT></A><FONT size=4>		</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=ret&amp;project=linux-4.1"><FONT size=4>ret</FONT></A><FONT size=4> = </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=class_attr&amp;project=linux-4.1"><FONT size=4>class_attr</FONT></A><FONT size=4>-&gt;</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=show&amp;project=linux-4.1"><FONT size=4>show</FONT></A><FONT size=4>(</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=cp&amp;project=linux-4.1"><FONT size=4>cp</FONT></A><FONT size=4>-&gt;</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=class&amp;project=linux-4.1"><FONT size=4>class</FONT></A><FONT size=4>, </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=class_attr&amp;project=linux-4.1"><FONT size=4>class_attr</FONT></A><FONT size=4>, </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=buf&amp;project=linux-4.1"><FONT size=4>buf</FONT></A><FONT size=4>);
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/class.c#35" name=35><FONT size=4>35</FONT></A><FONT size=4>	<B>return</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=ret&amp;project=linux-4.1"><FONT size=4>ret</FONT></A><FONT size=4>;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/class.c#36" name=36><FONT size=4>36</FONT></A><FONT size=4>}
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/class.c#37" name=37><FONT size=4>37</FONT></A>
<A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/class.c#38" name=38><FONT size=4>38</FONT></A><FONT size=4><B>static</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=ssize_t&amp;project=linux-4.1"><FONT size=4>ssize_t</FONT></A><FONT size=4> </FONT><A class=xf style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,0,255)" name=class_attr_store></A><A class=xf style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,0,255)" href="http://172.21.12.145:8080/source/s?refs=class_attr_store&amp;project=linux-4.1"><FONT size=4>class_attr_store</FONT></A><FONT size=4>(<B>struct</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=kobject&amp;project=linux-4.1"><FONT size=4>kobject</FONT></A><FONT size=4> *</FONT><A class=xa style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(102,0,204)" name=kobj></A><A class=xa style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(102,0,204)" href="http://172.21.12.145:8080/source/s?refs=kobj&amp;project=linux-4.1"><FONT size=4>kobj</FONT></A><FONT size=4>, <B>struct</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=attribute&amp;project=linux-4.1"><FONT size=4>attribute</FONT></A><FONT size=4> *</FONT><A class=xa style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(102,0,204)" name=attr></A><A class=xa style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(102,0,204)" href="http://172.21.12.145:8080/source/s?refs=attr&amp;project=linux-4.1"><FONT size=4>attr</FONT></A><FONT size=4>,
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/class.c#39" name=39><FONT size=4>39</FONT></A><FONT size=4>				<B>const</B> <B>char</B> *</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=buf&amp;project=linux-4.1"><FONT size=4>buf</FONT></A><FONT size=4>, </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=size_t&amp;project=linux-4.1"><FONT size=4>size_t</FONT></A><FONT size=4> </FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/class.c#count"><FONT size=4>count</FONT></A><FONT size=4>)
</FONT><A class=hl style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(0,0,0); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/class.c#40" name=40><FONT size=4>40</FONT></A><FONT size=4>{
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/class.c#41" name=41><FONT size=4>41</FONT></A><FONT size=4>	<B>struct</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=class_attribute&amp;project=linux-4.1"><FONT size=4>class_attribute</FONT></A><FONT size=4> *</FONT><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" name=class_attr></A><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" href="http://172.21.12.145:8080/source/s?refs=class_attr&amp;project=linux-4.1"><FONT size=4>class_attr</FONT></A><FONT size=4> = </FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/class.c#to_class_attr"><FONT size=4>to_class_attr</FONT></A><FONT size=4>(</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=attr&amp;project=linux-4.1"><FONT size=4>attr</FONT></A><FONT size=4>);
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/class.c#42" name=42><FONT size=4>42</FONT></A><FONT size=4>	<B>struct</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=subsys_private&amp;project=linux-4.1"><FONT size=4>subsys_private</FONT></A><FONT size=4> *</FONT><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" name=cp></A><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" href="http://172.21.12.145:8080/source/s?refs=cp&amp;project=linux-4.1"><FONT size=4>cp</FONT></A><FONT size=4> = </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=to_subsys_private&amp;project=linux-4.1"><FONT size=4>to_subsys_private</FONT></A><FONT size=4>(</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=kobj&amp;project=linux-4.1"><FONT size=4>kobj</FONT></A><FONT size=4>);
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/class.c#43" name=43><FONT size=4>43</FONT></A><FONT size=4>	</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=ssize_t&amp;project=linux-4.1"><FONT size=4>ssize_t</FONT></A><FONT size=4> </FONT><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" name=ret></A><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" href="http://172.21.12.145:8080/source/s?refs=ret&amp;project=linux-4.1"><FONT size=4>ret</FONT></A><FONT size=4> = -</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=EIO&amp;project=linux-4.1"><FONT size=4>EIO</FONT></A><FONT size=4>;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/class.c#44" name=44><FONT size=4>44</FONT></A>
<A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/class.c#45" name=45><FONT size=4>45</FONT></A><FONT size=4>	<B>if</B> (</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=class_attr&amp;project=linux-4.1"><FONT size=4>class_attr</FONT></A><FONT size=4>-&gt;</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=store&amp;project=linux-4.1"><FONT size=4>store</FONT></A><FONT size=4>)
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/class.c#46" name=46><FONT size=4>46</FONT></A><FONT size=4>		</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=ret&amp;project=linux-4.1"><FONT size=4>ret</FONT></A><FONT size=4> = </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=class_attr&amp;project=linux-4.1"><FONT size=4>class_attr</FONT></A><FONT size=4>-&gt;</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=store&amp;project=linux-4.1"><FONT size=4>store</FONT></A><FONT size=4>(</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=cp&amp;project=linux-4.1"><FONT size=4>cp</FONT></A><FONT size=4>-&gt;</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=class&amp;project=linux-4.1"><FONT size=4>class</FONT></A><FONT size=4>, </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=class_attr&amp;project=linux-4.1"><FONT size=4>class_attr</FONT></A><FONT size=4>, </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=buf&amp;project=linux-4.1"><FONT size=4>buf</FONT></A><FONT size=4>, </FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/class.c#count"><FONT size=4>count</FONT></A><FONT size=4>);
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/class.c#47" name=47><FONT size=4>47</FONT></A><FONT size=4>	<B>return</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=ret&amp;project=linux-4.1"><FONT size=4>ret</FONT></A><FONT size=4>;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/drivers/base/class.c#48" name=48><FONT size=4>48</FONT></A><FONT size=4>}</FONT></PRE>
<P>&#35813;&#25509;&#21475;&#20351;&#29992;container_of&#20174;struct attribute&#31867;&#22411;&#30340;&#25351;&#38024;&#20013;&#21462;&#24471;&#19968;&#20010;class&#27169;&#22359;&#30340;&#33258;&#23450;&#20041;&#25351;&#38024;&#65306;struct class_attribute&#65292;&#35813;&#25351;&#38024;&#20013;&#21253;&#21547;&#20102;class&#27169;&#22359;&#33258;&#36523;&#30340;show&#21644;store&#25509;&#21475;&#12290;&#19979;&#38754;&#26159;struct class_attribute&#30340;&#22768;&#26126;&#65306; </P><PRE style="BORDER-TOP: 0px; BORDER-RIGHT: 0px; FONT-VARIANT: normal; WORD-SPACING: 0px; BORDER-BOTTOM: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); FONT-STYLE: normal; MARGIN: 0px; BORDER-LEFT: 0px; LETTER-SPACING: normal; LINE-HEIGHT: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; BACKGROUND: orange; COLOR: yellow; TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#419" name=419><FONT size=3>419</FONT></A><FONT size=3><B>struct</B> </FONT><A class=xs style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153); FONT-STYLE: italic" name=class_attribute></A><A class=xs style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153); FONT-STYLE: italic" href="http://172.21.12.145:8080/source/s?refs=class_attribute&amp;project=linux-4.1"><FONT size=3>class_attribute</FONT></A><FONT size=3> {
</FONT><A class=hl style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(0,0,0); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#420" name=420><FONT size=3>420</FONT></A><FONT size=3>	<B>struct</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=attribute&amp;project=linux-4.1"><FONT size=3>attribute</FONT></A><FONT size=3> </FONT><A class=xmb style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,153,0)" name=attr></A><A class=xmb style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,153,0)" href="http://172.21.12.145:8080/source/s?refs=attr&amp;project=linux-4.1"><FONT size=3>attr</FONT></A><FONT size=3>;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#421" name=421><FONT size=3>421</FONT></A><FONT size=3>	</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=ssize_t&amp;project=linux-4.1"><FONT size=3>ssize_t</FONT></A><FONT size=3> (*</FONT><A class=xmb style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,153,0)" name=show></A><A class=xmb style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,153,0)" href="http://172.21.12.145:8080/source/s?refs=show&amp;project=linux-4.1"><FONT size=3>show</FONT></A><FONT size=3>)(<B>struct</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=class&amp;project=linux-4.1"><FONT size=3>class</FONT></A><FONT size=3> *</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=class&amp;project=linux-4.1"><FONT size=3>class</FONT></A><FONT size=3>, <B>struct</B> </FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#class_attribute"><FONT size=3>class_attribute</FONT></A><FONT size=3> *</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=attr&amp;project=linux-4.1"><FONT size=3>attr</FONT></A><FONT size=3>,
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#422" name=422><FONT size=3>422</FONT></A><FONT size=3>			<B>char</B> *</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=buf&amp;project=linux-4.1"><FONT size=3>buf</FONT></A><FONT size=3>);
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#423" name=423><FONT size=3>423</FONT></A><FONT size=3>	</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=ssize_t&amp;project=linux-4.1"><FONT size=3>ssize_t</FONT></A><FONT size=3> (*</FONT><A class=xmb style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,153,0)" name=store></A><A class=xmb style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,153,0)" href="http://172.21.12.145:8080/source/s?refs=store&amp;project=linux-4.1"><FONT size=3>store</FONT></A><FONT size=3>)(<B>struct</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=class&amp;project=linux-4.1"><FONT size=3>class</FONT></A><FONT size=3> *</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=class&amp;project=linux-4.1"><FONT size=3>class</FONT></A><FONT size=3>, <B>struct</B> </FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#class_attribute"><FONT size=3>class_attribute</FONT></A><FONT size=3> *</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=attr&amp;project=linux-4.1"><FONT size=3>attr</FONT></A><FONT size=3>,
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#424" name=424><FONT size=3>424</FONT></A><FONT size=3>			<B>const</B> <B>char</B> *</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=buf&amp;project=linux-4.1"><FONT size=3>buf</FONT></A><FONT size=3>, </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=size_t&amp;project=linux-4.1"><FONT size=3>size_t</FONT></A><FONT size=3> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=count&amp;project=linux-4.1"><FONT size=3>count</FONT></A><FONT size=3>);
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#425" name=425><FONT size=3>425</FONT></A><FONT size=3>};</FONT></PRE>
<P>&nbsp;</P>
<P>&#22240;&#27492;&#65292;<FONT class=extract>&#25152;&#26377;&#38656;&#35201;&#20351;&#29992;attribute&#30340;&#27169;&#22359;&#65292;&#37117;&#19981;&#20250;&#30452;&#25509;&#23450;&#20041;struct attribute&#21464;&#37327;&#65292;&#32780;&#26159;&#36890;&#36807;&#19968;&#20010;&#33258;&#23450;&#20041;&#30340;&#25968;&#25454;&#32467;&#26500;&#65292;&#35813;&#25968;&#25454;&#32467;&#26500;&#30340;&#19968;&#20010;&#25104;&#21592;&#26159;struct attribute&#31867;&#22411;&#30340;&#21464;&#37327;&#65292;&#24182;&#25552;&#20379;show&#21644;store&#22238;&#35843;&#20989;&#25968;&#12290;&#28982;&#21518;&#22312;&#35813;&#27169;&#22359;ktype&#25152;&#23545;&#24212;&#30340;struct sysfs_ops&#21464;&#37327;&#20013;&#65292;&#23454;&#29616;&#35813;&#26412;&#27169;&#22359;&#25972;&#20307;&#30340;show&#21644;store&#20989;&#25968;&#65292;&#24182;&#22312;&#34987;&#35843;&#29992;&#26102;&#65292;&#36716;&#25509;&#21040;&#33258;&#23450;&#20041;&#25968;&#25454;&#32467;&#26500;&#65288;struct class_attribute&#65289;&#20013;&#30340;show&#21644;store&#20989;&#25968;&#20013;&#12290;&#36825;&#26679;&#65292;&#27599;&#20010;atrribute&#25991;&#20214;&#65292;&#23454;&#38469;&#19978;&#23545;&#24212;&#21040;&#19968;&#20010;&#33258;&#23450;&#20041;&#25968;&#25454;&#32467;&#26500;&#21464;&#37327;&#20013;&#20102;&#12290;</FONT> </P>
<P><SPAN style="COLOR: rgb(128,128,128)"><EM></EM></SPAN></P>
<P><SPAN style="COLOR: rgb(128,128,128)"><EM>&#21407;&#21019;&#25991;&#31456;&#65292;&#36716;&#21457;&#35831;&#27880;&#26126;&#20986;&#22788;&#12290;&#34583;&#31389;&#31185;&#25216;&#65292;<A href="http://www.wowotech.net/linux_kenrel/dm_sysfs.html">www.wowotech.net</A>&#12290;</EM></SPAN>