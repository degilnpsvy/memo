<H2>Linux&#35774;&#22791;&#27169;&#22411;(7)_Class</H2>
<P class=date>&#20316;&#32773;&#65306;<A href="http://www.wowotech.net/author/2">&#34583;&#34583;</A> &#21457;&#24067;&#20110;&#65306;2014-4-23 15:17 &#20998;&#31867;&#65306;<A href="http://www.wowotech.net/sort/device_model">&#32479;&#19968;&#35774;&#22791;&#27169;&#22411;</A> </P>
<H4>1. &#27010;&#36848; </H4>
<P>&#22312;&#35774;&#22791;&#27169;&#22411;&#20013;&#65292;Bus&#12289;Device&#12289;Device driver&#31561;&#31561;&#65292;&#37117;&#27604;&#36739;&#22909;&#29702;&#35299;&#65292;&#22240;&#20026;&#23427;&#20204;&#23545;&#24212;&#20102;&#23454;&#23454;&#22312;&#22312;&#30340;&#19996;&#35199;&#65292;&#25152;&#26377;&#30340;&#36923;&#36753;&#37117;&#26159;&#22260;&#32469;&#30528;&#36825;&#20123;&#23454;&#20307;&#23637;&#24320;&#30340;&#12290;&#32780;&#26412;&#25991;&#25152;&#35201;&#25551;&#36848;&#30340;Class&#23601;&#26377;&#20123;&#19981;&#21516;&#20102;&#65292;&#22240;&#20026;&#23427;&#26159;&#34394;&#25311;&#20986;&#26469;&#30340;&#65292;&#21482;&#26159;&#20026;&#20102;&#25277;&#35937;&#35774;&#22791;&#30340;&#20849;&#24615;&#12290; </P>
<P><FONT class=extract>&#20030;&#20010;&#20363;&#23376;&#65292;&#19968;&#20123;&#24180;&#40836;&#30456;&#20223;&#12289;&#38656;&#35201;&#33719;&#21462;&#30340;&#30693;&#35782;&#30456;&#20284;&#30340;&#20154;&#65292;&#32858;&#22312;&#19968;&#36215;&#23398;&#20064;&#65292;&#23601;&#26500;&#25104;&#20102;&#19968;&#20010;&#29677;&#32423;&#65288;Class&#65289;&#12290;&#36825;&#20010;&#29677;&#32423;&#21487;&#20197;&#26377;&#33258;&#24049;&#30340;&#21517;&#31216;&#65288;&#22914;295&#65289;&#65292;&#20294;&#22914;&#26524;&#31163;&#24320;&#26500;&#25104;&#23427;&#30340;&#23398;&#29983;&#65288;device&#65289;&#65292;&#23427;&#23601;&#27809;&#26377;&#20219;&#20309;&#23384;&#22312;&#24847;&#20041;&#12290;&#21478;&#22806;&#65292;&#29677;&#32423;&#23384;&#22312;&#30340;&#26368;&#22823;&#24847;&#20041;&#26159;&#20160;&#20040;&#21602;&#65311;&#26159;&#30001;&#32769;&#24072;&#35762;&#25480;&#30340;&#27599;&#19968;&#20010;&#35838;&#31243;&#65281;&#22240;&#20026;&#32769;&#24072;&#21482;&#38656;&#35201;&#35762;&#19968;&#36941;&#65292;&#19968;&#20010;&#29677;&#30340;&#23398;&#29983;&#37117;&#21487;&#20197;&#21548;&#21040;&#12290;&#19981;&#28982;&#30340;&#35805;&#65288;&#20363;&#22914;&#27599;&#20010;&#23398;&#29983;&#37117;&#22312;&#23478;&#23398;&#20064;&#65289;&#65292;&#23601;&#35201;&#20026;&#27599;&#20154;&#35831;&#19968;&#20010;&#32769;&#24072;&#65292;&#35762;&#25480;&#19968;&#36941;&#12290;&#32780;&#35762;&#30340;&#20869;&#23481;&#65292;&#22823;&#22810;&#26159;&#19968;&#26679;&#30340;&#65292;&#36825;&#23601;&#26159;&#26497;&#22823;&#30340;&#28010;&#36153;&#12290; </FONT></P>
<P><FONT class=extract>&#35774;&#22791;&#27169;&#22411;&#20013;&#30340;Class&#25152;&#25552;&#20379;&#30340;&#21151;&#33021;&#20063;&#19968;&#26679;&#20102;&#65292;&#20363;&#22914;&#19968;&#20123;&#30456;&#20284;&#30340;device&#65288;&#23398;&#29983;&#65289;&#65292;&#38656;&#35201;&#21521;&#29992;&#25143;&#31354;&#38388;&#25552;&#20379;&#30456;&#20284;&#30340;&#25509;&#21475;&#65288;&#35838;&#31243;&#65289;&#65292;&#22914;&#26524;&#27599;&#20010;&#35774;&#22791;&#30340;&#39537;&#21160;&#37117;&#23454;&#29616;&#19968;&#36941;&#30340;&#35805;&#65292;&#23601;&#20250;&#23548;&#33268;&#20869;&#26680;&#26377;&#22823;&#37327;&#30340;&#20887;&#20313;&#20195;&#30721;&#65292;&#36825;&#23601;&#26159;&#26497;&#22823;&#30340;&#28010;&#36153;&#12290;&#25152;&#20197;&#65292;Class&#35828;&#20102;&#65292;&#25105;&#24110;&#20320;&#20204;&#23454;&#29616;&#21543;&#65292;&#20320;&#20204;&#20250;&#29992;&#23601;&#34892;&#20102;&#12290;</FONT> </P>
<P>&#36825;&#23601;&#26159;&#35774;&#22791;&#27169;&#22411;&#20013;Class&#30340;&#21151;&#33021;&#65292;&#20877;&#32467;&#21512;&#20869;&#26680;&#30340;&#27880;&#37322;&#65306;<FONT class=extract>A class is a higher-level view of a device that abstracts out low-level implementation details(include/linux/device.h line326)</FONT>&#65292;&#23601;&#23481;&#26131;&#29702;&#35299;&#20102;&#12290; </P>
<H4>2. &#25968;&#25454;&#32467;&#26500;&#25551;&#36848; </H4>
<H5>2.1 struct class </H5>
<P><FONT class=extract>struct class&#26159;class&#30340;&#25277;&#35937;&#65292;&#23427;&#30340;&#23450;&#20041;&#22914;&#19979;&#65306; </FONT></P><PRE style="BORDER-TOP: 0px; BORDER-RIGHT: 0px; FONT-VARIANT: normal; WORD-SPACING: 0px; BORDER-BOTTOM: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); FONT-STYLE: normal; MARGIN: 0px; BORDER-LEFT: 0px; LETTER-SPACING: normal; LINE-HEIGHT: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#325" name=325><FONT class=extract size=4>325</FONT></A><SPAN class=c style="COLOR: rgb(102,102,102)"><FONT class=extract size=4>/**
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#326" name=326><FONT class=extract size=4>326</FONT></A><FONT class=extract size=4> * struct class - device classes
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#327" name=327><FONT class=extract size=4>327</FONT></A><FONT class=extract size=4> * @name:	Name of the class.
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#328" name=328><FONT class=extract size=4>328</FONT></A><FONT class=extract size=4> * @owner:	The module owner.
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#329" name=329><FONT class=extract size=4>329</FONT></A><FONT class=extract size=4> * @class_attrs: Default attributes of this class.
</FONT><A class=hl style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(0,0,0); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#330" name=330><FONT class=extract size=4>330</FONT></A><FONT class=extract size=4> * @dev_groups:	Default attributes of the devices that belong to the class.
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#331" name=331><FONT class=extract size=4>331</FONT></A><FONT class=extract size=4> * @dev_kobj:	The kobject that represents this class and links it into the hierarchy.
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#332" name=332><FONT class=extract size=4>332</FONT></A><FONT class=extract size=4> * @dev_uevent:	Called when a device is added, removed from this class, or a
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#333" name=333><FONT class=extract size=4>333</FONT></A><FONT class=extract size=4> *		few other things that generate uevents to add the environment
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#334" name=334><FONT class=extract size=4>334</FONT></A><FONT class=extract size=4> *		variables.
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#335" name=335><FONT class=extract size=4>335</FONT></A><FONT class=extract size=4> * @devnode:	Callback to provide the devtmpfs.
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#336" name=336><FONT class=extract size=4>336</FONT></A><FONT class=extract size=4> * @class_release: Called to release this class.
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#337" name=337><FONT class=extract size=4>337</FONT></A><FONT class=extract size=4> * @dev_release: Called to release the device.
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#338" name=338><FONT class=extract size=4>338</FONT></A><FONT class=extract size=4> * @suspend:	Used to put the device to sleep mode, usually to a low power
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#339" name=339><FONT class=extract size=4>339</FONT></A><FONT class=extract size=4> *		state.
</FONT><A class=hl style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(0,0,0); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#340" name=340><FONT class=extract size=4>340</FONT></A><FONT class=extract size=4> * @resume:	Used to bring the device from the sleep mode.
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#341" name=341><FONT class=extract size=4>341</FONT></A><FONT class=extract size=4> * @ns_type:	Callbacks so sysfs can detemine namespaces.
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#342" name=342><FONT class=extract size=4>342</FONT></A><FONT class=extract size=4> * @namespace:	Namespace of the device belongs to this class.
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#343" name=343><FONT class=extract size=4>343</FONT></A><FONT class=extract size=4> * @pm:		The default device power management operations of this class.
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#344" name=344><FONT class=extract size=4>344</FONT></A><FONT class=extract size=4> * @p:		The private data of the driver core, no one other than the
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#345" name=345><FONT class=extract size=4>345</FONT></A><FONT class=extract size=4> *		driver core can touch this.
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#346" name=346><FONT class=extract size=4>346</FONT></A><FONT class=extract size=4> *
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#347" name=347><FONT class=extract size=4>347</FONT></A><FONT class=extract size=4> * A class is a higher-level view of a device that abstracts out low-level
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#348" name=348><FONT class=extract size=4>348</FONT></A><FONT class=extract size=4> * implementation details. Drivers may see a SCSI disk or an ATA disk, but,
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#349" name=349><FONT class=extract size=4>349</FONT></A><FONT class=extract size=4> * at the class level, they are all simply disks. Classes allow user space
</FONT><A class=hl style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(0,0,0); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#350" name=350><FONT class=extract size=4>350</FONT></A><FONT class=extract size=4> * to work with devices based on what they do, rather than how they are
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#351" name=351><FONT class=extract size=4>351</FONT></A><FONT class=extract size=4> * connected or how they work.
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#352" name=352><FONT class=extract size=4>352</FONT></A><FONT class=extract size=4> */</FONT></SPAN>
<A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#353" name=353><FONT class=extract size=4>353</FONT></A><FONT size=4><FONT class=extract><B>struct</B> </FONT></FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=class&amp;project=linux-4.1"><FONT class=extract size=4>class</FONT></A><FONT class=extract size=4> {
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#354" name=354><FONT class=extract size=4>354</FONT></A><FONT class=extract size=4>	<B>const</B> <B>char</B>		*</FONT><A class=xmb style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,153,0)" name=name></A><A class=xmb style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,153,0)" href="http://172.21.12.145:8080/source/s?refs=name&amp;project=linux-4.1"><FONT class=extract size=4>name</FONT></A><FONT class=extract size=4>;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#355" name=355><FONT class=extract size=4>355</FONT></A><FONT class=extract size=4>	<B>struct</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=module&amp;project=linux-4.1"><FONT class=extract size=4>module</FONT></A><FONT class=extract size=4>		*</FONT><A class=xmb style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,153,0)" name=owner></A><A class=xmb style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,153,0)" href="http://172.21.12.145:8080/source/s?refs=owner&amp;project=linux-4.1"><FONT class=extract size=4>owner</FONT></A><FONT class=extract size=4>;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#356" name=356><FONT class=extract size=4>356</FONT></A>
<A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#357" name=357><FONT class=extract size=4>357</FONT></A><FONT class=extract size=4>	<B>struct</B> </FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#class_attribute"><FONT class=extract size=4>class_attribute</FONT></A><FONT class=extract size=4>		*</FONT><A class=xmb style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,153,0)" name=class_attrs></A><A class=xmb style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,153,0)" href="http://172.21.12.145:8080/source/s?refs=class_attrs&amp;project=linux-4.1"><FONT class=extract size=4>class_attrs</FONT></A><FONT class=extract size=4>;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#358" name=358><FONT class=extract size=4>358</FONT></A><FONT class=extract size=4>	<B>const</B> <B>struct</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=attribute_group&amp;project=linux-4.1"><FONT class=extract size=4>attribute_group</FONT></A><FONT class=extract size=4>	**</FONT><A class=xmb style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,153,0)" name=dev_groups></A><A class=xmb style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,153,0)" href="http://172.21.12.145:8080/source/s?refs=dev_groups&amp;project=linux-4.1"><FONT class=extract size=4>dev_groups</FONT></A><FONT class=extract size=4>;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#359" name=359><FONT class=extract size=4>359</FONT></A><FONT class=extract size=4>	<B>struct</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=kobject&amp;project=linux-4.1"><FONT class=extract size=4>kobject</FONT></A><FONT class=extract size=4>			*</FONT><A class=xmb style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,153,0)" name=dev_kobj></A><A class=xmb style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,153,0)" href="http://172.21.12.145:8080/source/s?refs=dev_kobj&amp;project=linux-4.1"><FONT class=extract size=4>dev_kobj</FONT></A><FONT class=extract size=4>;
</FONT><A class=hl style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(0,0,0); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#360" name=360><FONT class=extract size=4>360</FONT></A>
<A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#361" name=361><FONT class=extract size=4>361</FONT></A><FONT class=extract size=4>	<B>int</B> (*</FONT><A class=xmb style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,153,0)" name=dev_uevent></A><A class=xmb style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,153,0)" href="http://172.21.12.145:8080/source/s?refs=dev_uevent&amp;project=linux-4.1"><FONT class=extract size=4>dev_uevent</FONT></A><FONT class=extract size=4>)(<B>struct</B> </FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#device"><FONT class=extract size=4>device</FONT></A><FONT class=extract size=4> *</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.1"><FONT class=extract size=4>dev</FONT></A><FONT class=extract size=4>, <B>struct</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=kobj_uevent_env&amp;project=linux-4.1"><FONT class=extract size=4>kobj_uevent_env</FONT></A><FONT class=extract size=4> *</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=env&amp;project=linux-4.1"><FONT class=extract size=4>env</FONT></A><FONT class=extract size=4>);
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#362" name=362><FONT class=extract size=4>362</FONT></A><FONT class=extract size=4>	<B>char</B> *(*</FONT><A class=xmb style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,153,0)" name=devnode></A><A class=xmb style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,153,0)" href="http://172.21.12.145:8080/source/s?refs=devnode&amp;project=linux-4.1"><FONT class=extract size=4>devnode</FONT></A><FONT class=extract size=4>)(<B>struct</B> </FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#device"><FONT class=extract size=4>device</FONT></A><FONT class=extract size=4> *</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.1"><FONT class=extract size=4>dev</FONT></A><FONT class=extract size=4>, </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=umode_t&amp;project=linux-4.1"><FONT class=extract size=4>umode_t</FONT></A><FONT class=extract size=4> *</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=mode&amp;project=linux-4.1"><FONT class=extract size=4>mode</FONT></A><FONT class=extract size=4>);
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#363" name=363><FONT class=extract size=4>363</FONT></A>
<A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#364" name=364><FONT class=extract size=4>364</FONT></A><FONT class=extract size=4>	<B>void</B> (*</FONT><A class=xmb style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,153,0)" name=class_release></A><A class=xmb style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,153,0)" href="http://172.21.12.145:8080/source/s?refs=class_release&amp;project=linux-4.1"><FONT class=extract size=4>class_release</FONT></A><FONT class=extract size=4>)(<B>struct</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=class&amp;project=linux-4.1"><FONT class=extract size=4>class</FONT></A><FONT class=extract size=4> *</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=class&amp;project=linux-4.1"><FONT class=extract size=4>class</FONT></A><FONT class=extract size=4>);
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#365" name=365><FONT class=extract size=4>365</FONT></A><FONT class=extract size=4>	<B>void</B> (*</FONT><A class=xmb style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,153,0)" name=dev_release></A><A class=xmb style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,153,0)" href="http://172.21.12.145:8080/source/s?refs=dev_release&amp;project=linux-4.1"><FONT class=extract size=4>dev_release</FONT></A><FONT class=extract size=4>)(<B>struct</B> </FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#device"><FONT class=extract size=4>device</FONT></A><FONT class=extract size=4> *</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.1"><FONT class=extract size=4>dev</FONT></A><FONT class=extract size=4>);
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#366" name=366><FONT class=extract size=4>366</FONT></A>
<A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#367" name=367><FONT class=extract size=4>367</FONT></A><FONT class=extract size=4>	<B>int</B> (*</FONT><A class=xmb style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,153,0)" name=suspend></A><A class=xmb style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,153,0)" href="http://172.21.12.145:8080/source/s?refs=suspend&amp;project=linux-4.1"><FONT class=extract size=4>suspend</FONT></A><FONT class=extract size=4>)(<B>struct</B> </FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#device"><FONT class=extract size=4>device</FONT></A><FONT class=extract size=4> *</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.1"><FONT class=extract size=4>dev</FONT></A><FONT class=extract size=4>, </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=pm_message_t&amp;project=linux-4.1"><FONT class=extract size=4>pm_message_t</FONT></A><FONT class=extract size=4> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=state&amp;project=linux-4.1"><FONT class=extract size=4>state</FONT></A><FONT class=extract size=4>);
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#368" name=368><FONT class=extract size=4>368</FONT></A><FONT class=extract size=4>	<B>int</B> (*</FONT><A class=xmb style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,153,0)" name=resume></A><A class=xmb style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,153,0)" href="http://172.21.12.145:8080/source/s?refs=resume&amp;project=linux-4.1"><FONT class=extract size=4>resume</FONT></A><FONT class=extract size=4>)(<B>struct</B> </FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#device"><FONT class=extract size=4>device</FONT></A><FONT class=extract size=4> *</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.1"><FONT class=extract size=4>dev</FONT></A><FONT class=extract size=4>);
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#369" name=369><FONT class=extract size=4>369</FONT></A>
<A class=hl style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(0,0,0); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#370" name=370><FONT class=extract size=4>370</FONT></A><FONT class=extract size=4>	<B>const</B> <B>struct</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=kobj_ns_type_operations&amp;project=linux-4.1"><FONT class=extract size=4>kobj_ns_type_operations</FONT></A><FONT class=extract size=4> *</FONT><A class=xmb style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,153,0)" name=ns_type></A><A class=xmb style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,153,0)" href="http://172.21.12.145:8080/source/s?refs=ns_type&amp;project=linux-4.1"><FONT class=extract size=4>ns_type</FONT></A><FONT class=extract size=4>;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#371" name=371><FONT class=extract size=4>371</FONT></A><FONT class=extract size=4>	<B>const</B> <B>void</B> *(*</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=namespace&amp;project=linux-4.1"><FONT class=extract size=4>namespace</FONT></A><FONT class=extract size=4>)(<B>struct</B> </FONT><A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#device"><FONT class=extract size=4>device</FONT></A><FONT class=extract size=4> *</FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=dev&amp;project=linux-4.1"><FONT class=extract size=4>dev</FONT></A><FONT class=extract size=4>);
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#372" name=372><FONT class=extract size=4>372</FONT></A>
<A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#373" name=373><FONT class=extract size=4>373</FONT></A><FONT class=extract size=4>	<B>const</B> <B>struct</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=dev_pm_ops&amp;project=linux-4.1"><FONT class=extract size=4>dev_pm_ops</FONT></A><FONT class=extract size=4> *</FONT><A class=xmb style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,153,0)" name=pm></A><A class=xmb style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,153,0)" href="http://172.21.12.145:8080/source/s?refs=pm&amp;project=linux-4.1"><FONT class=extract size=4>pm</FONT></A><FONT class=extract size=4>;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#374" name=374><FONT class=extract size=4>374</FONT></A>
<A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#375" name=375><FONT class=extract size=4>375</FONT></A><FONT class=extract size=4>	<B>struct</B> </FONT><A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.21.12.145:8080/source/s?defs=subsys_private&amp;project=linux-4.1"><FONT class=extract size=4>subsys_private</FONT></A><FONT class=extract size=4> *p;
</FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/include/linux/device.h#376" name=376><FONT class=extract size=4>376</FONT></A><FONT class=extract size=4>};</FONT></PRE>
<BLOCKQUOTE>
<P><FONT class=extract>&#20854;&#23454;struct class&#21644;struct bus&#24456;&#31867;&#20284;&#65292;&#35299;&#37322;&#22914;&#19979;&#65306; </FONT></P>
<P><FONT class=extract>name&#65292;class&#30340;&#21517;&#31216;&#65292;&#20250;&#22312;&#8220;/sys/class/&#8221;&#30446;&#24405;&#19979;&#20307;&#29616;&#12290; </FONT></P>
<P><FONT class=extract>class_atrrs&#65292;&#35813;class&#30340;&#40664;&#35748;attribute&#65292;&#20250;&#22312;class&#27880;&#20876;&#21040;&#20869;&#26680;&#26102;&#65292;&#33258;&#21160;&#22312;&#8220;/sys/class/xxx_class&#8221;&#19979;&#21019;&#24314;&#23545;&#24212;&#30340;attribute&#25991;&#20214;&#12290; </FONT></P>
<P><FONT class=extract>dev_attrs&#65292;&#35813;class&#19979;&#27599;&#20010;&#35774;&#22791;&#30340;attribute&#65292;&#20250;&#22312;&#35774;&#22791;&#27880;&#20876;&#21040;&#20869;&#26680;&#26102;&#65292;&#33258;&#21160;&#22312;&#35813;&#35774;&#22791;&#30340;sysfs&#30446;&#24405;&#19979;&#21019;&#24314;&#23545;&#24212;&#30340;attribute&#25991;&#20214;&#12290; </FONT></P>
<P><FONT class=extract>dev_bin_attrs&#65292;&#31867;&#20284;dev_attrs&#65292;&#21482;&#19981;&#36807;&#26159;&#20108;&#36827;&#21046;&#31867;&#22411;attribute&#12290; </FONT></P>
<P><FONT class=extract>dev_kobj&#65292;&#34920;&#31034;&#35813;class&#19979;&#30340;&#35774;&#22791;&#22312;/sys/dev/&#19979;&#30340;&#30446;&#24405;&#65292;&#29616;&#22312;&#19968;&#33324;&#26377;char&#21644;block&#20004;&#20010;&#65292;&#22914;&#26524;dev_kobj&#20026;NULL&#65292;&#21017;&#40664;&#35748;&#36873;&#25321;char&#12290; </FONT></P>
<P><FONT class=extract>dev_uevent&#65292;&#24403;&#35813;class&#19979;&#26377;&#35774;&#22791;&#21457;&#29983;&#21464;&#21270;&#26102;&#65292;&#20250;&#35843;&#29992;class&#30340;uevent&#22238;&#35843;&#20989;&#25968;&#12290; </FONT></P>
<P><FONT class=extract>class_release&#65292;&#29992;&#20110;release&#33258;&#36523;&#30340;&#22238;&#35843;&#20989;&#25968;&#12290; </FONT></P>
<P><FONT class=extract>dev_release&#65292;&#29992;&#20110;release class&#20869;&#35774;&#22791;&#30340;&#22238;&#35843;&#20989;&#25968;&#12290;&#22312;device_release&#25509;&#21475;&#20013;&#65292;&#20250;&#20381;&#27425;&#26816;&#26597;Device&#12289;Device Type&#20197;&#21450;Device&#25152;&#22312;&#30340;class&#65292;&#26159;&#21542;&#27880;&#20876;release&#25509;&#21475;&#65292;&#22914;&#26524;&#26377;&#21017;&#35843;&#29992;&#30456;&#24212;&#30340;release&#25509;&#21475;release&#35774;&#22791;&#25351;&#38024;&#12290; </FONT></P>
<P><FONT class=extract>p&#65292;&#21644;&#8220;</FONT><A href="http://www.wowotech.net/linux_kenrel/bus.html"><FONT class=extract>Linux&#35774;&#22791;&#27169;&#22411;(6)_Bus</FONT></A><FONT class=extract>&#8221;&#20013;struct bus&#32467;&#26500;&#19968;&#26679;&#65292;&#19981;&#20877;&#35828;&#26126;&#12290; </FONT></P></BLOCKQUOTE>
<H5>2.2 struct class_interface </H5>
<P><FONT class=extract>struct class_interface&#26159;&#36825;&#26679;&#30340;&#19968;&#20010;&#32467;&#26500;&#65306;&#23427;&#20801;&#35768;class driver&#22312;class&#19979;&#26377;&#35774;&#22791;&#28155;&#21152;&#25110;&#31227;&#38500;&#30340;&#26102;&#20505;&#65292;&#35843;&#29992;&#39044;&#20808;&#35774;&#32622;&#22909;&#30340;&#22238;&#35843;&#20989;&#25968;&#65288;add_dev&#21644;remove_dev&#65289;&#12290;&#37027;&#35843;&#29992;&#23427;&#20204;&#20570;&#20160;&#20040;&#21602;&#65311;&#24819;&#20570;&#20160;&#20040;&#37117;&#34892;&#65288;&#20363;&#22914;&#20462;&#25913;&#35774;&#22791;&#30340;&#21517;&#31216;&#65289;&#65292;&#30001;&#20855;&#20307;&#30340;class driver&#23454;&#29616;&#12290; </FONT></P>
<P><FONT class=extract>&#35813;&#32467;&#26500;&#30340;&#23450;&#20041;&#22914;&#19979;&#65306; </FONT></P>
<DIV id=codeSnippetWrapper style='OVERFLOW: auto; CURSOR: text; FONT-SIZE: 8pt; BORDER-TOP: silver 1px solid; FONT-FAMILY: "Courier New", courier, monospace; BORDER-RIGHT: silver 1px solid; WIDTH: 97.5%; BORDER-BOTTOM: silver 1px solid; PADDING-BOTTOM: 4px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 4px; PADDING-LEFT: 4px; MARGIN: 20px 0px 10px; BORDER-LEFT: silver 1px solid; LINE-HEIGHT: 12pt; PADDING-RIGHT: 4px; MAX-HEIGHT: 200px; BACKGROUND-COLOR: rgb(244,244,244)'>
<DIV id=codeSnippet style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(244,244,244)'><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: white'><FONT class=extract><SPAN id=lnum1 style="COLOR: rgb(96,96,96)">   1:</SPAN> <SPAN style="COLOR: rgb(0,128,0)">/* include/linux/device.h, line 434 */</SPAN></FONT></PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(244,244,244)'><FONT class=extract><SPAN id=lnum2 style="COLOR: rgb(96,96,96)">   2:</SPAN> <SPAN style="COLOR: rgb(0,0,255)">struct</SPAN> class_interface {</FONT></PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: white'><FONT class=extract><SPAN id=lnum3 style="COLOR: rgb(96,96,96)">   3:</SPAN>         <SPAN style="COLOR: rgb(0,0,255)">struct</SPAN> list_head        node;</FONT></PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(244,244,244)'><FONT class=extract><SPAN id=lnum4 style="COLOR: rgb(96,96,96)">   4:</SPAN>         <SPAN style="COLOR: rgb(0,0,255)">struct</SPAN> <SPAN style="COLOR: rgb(0,0,255)">class</SPAN>            *<SPAN style="COLOR: rgb(0,0,255)">class</SPAN>;</FONT></PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: white'><FONT class=extract><SPAN id=lnum5 style="COLOR: rgb(96,96,96)">   5:</SPAN>&nbsp; </FONT></PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(244,244,244)'><FONT class=extract><SPAN id=lnum6 style="COLOR: rgb(96,96,96)">   6:</SPAN>         <SPAN style="COLOR: rgb(0,0,255)">int</SPAN> (*add_dev)          (<SPAN style="COLOR: rgb(0,0,255)">struct</SPAN> device *, <SPAN style="COLOR: rgb(0,0,255)">struct</SPAN> class_interface *);</FONT></PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: white'><FONT class=extract><SPAN id=lnum7 style="COLOR: rgb(96,96,96)">   7:</SPAN>         <SPAN style="COLOR: rgb(0,0,255)">void</SPAN> (*remove_dev)      (<SPAN style="COLOR: rgb(0,0,255)">struct</SPAN> device *, <SPAN style="COLOR: rgb(0,0,255)">struct</SPAN> class_interface *);</FONT></PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(244,244,244)'><FONT class=extract><SPAN id=lnum8 style="COLOR: rgb(96,96,96)">   8:</SPAN> };</FONT></PRE><!--CRLF--></DIV></DIV>
<H4>3. &#21151;&#33021;&#21450;&#20869;&#37096;&#36923;&#36753;&#35299;&#26512; </H4>
<H5>3.1 class&#30340;&#21151;&#33021; </H5>
<P>&#30475;&#23436;&#19978;&#38754;&#30340;&#19996;&#35199;&#65292;&#34583;&#34583;&#20381;&#26087;&#31946;&#37324;&#31946;&#28034;&#30340;&#65292;class&#21040;&#24213;&#25552;&#20379;&#20102;&#20160;&#20040;&#21151;&#33021;&#65311;&#24590;&#20040;&#20351;&#29992;&#21602;&#65311;&#35753;&#25105;&#20204;&#20808;&#30475;&#19968;&#19979;&#29616;&#26377;Linux&#31995;&#32479;&#20013;&#26377;&#20851;class&#30340;&#29366;&#20917;&#65288;&#36825;&#37324;&#20197;input class&#20026;&#20363;&#65289;&#65306; </P>
<BLOCKQUOTE>
<P><SPAN style="COLOR: rgb(0,0,255)">root@android:/ # ls /sys/class/input/ -l</SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>lrwxrwxrwx root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2014-04-23 03:39 event0 -&gt; ../../devices/platform/i2c-gpio.17/i2c-17/17-0066/max77693-muic/input/input0/event0 <BR>lrwxrwxrwx root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2014-04-23 03:39 event1 -&gt; ../../devices/platform/gpio-keys.0/input/input1/event1 <BR>lrwxrwxrwx root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2014-04-23 03:39 event10 -&gt; ../../devices/virtual/input/input10/event10 <BR><SPAN style="COLOR: rgb(255,0,0)">lrwxrwxrwx root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2014-04-23 03:39 event2 -&gt; ../../devices/platform/s3c2440-i2c.3/i2c-3/3-0048/input/input2/event2 <BR></SPAN>&#8230; <BR>lrwxrwxrwx root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2014-04-23 03:39 event8 -&gt; ../../devices/platform/soc-audio/sound/card0/input8/event8 <BR>lrwxrwxrwx root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2014-04-23 03:39 event9 -&gt; ../../devices/platform/i2c-gpio.8/i2c-8/8-0020/input/input9/event9 <BR>lrwxrwxrwx root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2014-04-23 03:39 input0 -&gt; ../../devices/platform/i2c-gpio.17/i2c-17/17-0066/max77693-muic/input/input0 <BR>&#8230; <BR><SPAN style="COLOR: rgb(255,0,0)">lrwxrwxrwx root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2014-04-23 03:39 mice -&gt; ../../devices/virtual/input/mice</SPAN> </P>
<P><A href="mailto:root@android:/"><SPAN style="COLOR: rgb(0,0,255)">root@android:/</SPAN></A><SPAN style="COLOR: rgb(0,0,255)"> # ls /sys/devices/platform/s3c2440-i2c.3/i2c-3/3-0048/input/input2/event2/ -l</SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </P>
<P>-r--r--r-- root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4096 2014-04-23 04:08 dev <BR>lrwxrwxrwx root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2014-04-23 04:08 device -&gt; ../../input2 <BR>drwxr-xr-x root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2014-04-23 04:08 power <BR><SPAN style="COLOR: rgb(255,0,0)">lrwxrwxrwx root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2014-04-23 04:08 subsystem -&gt; ../../../../../../../../class/input</SPAN> <BR>-rw-r--r-- root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4096 2014-04-23 04:08 uevent </P>
<P><SPAN style="COLOR: rgb(0,0,255)">root@android:/ # ls /sys/devices/virtual/input/mice/ -l</SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>-r--r--r-- root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4096 2014-04-23 03:57 dev <BR>drwxr-xr-x root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2014-04-23 03:57 power <BR><SPAN style="COLOR: rgb(255,0,0)">lrwxrwxrwx root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2014-04-23 03:57 subsystem -&gt; ../../../../class/input</SPAN> <BR>-rw-r--r-- root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4096 2014-04-23 03:57 uevent </P></BLOCKQUOTE>
<P>&#30475;&#19978;&#38754;&#30340;&#20363;&#23376;&#65292;&#21457;&#29616;input class&#20063;&#27809;&#20570;&#20160;&#20040;&#23454;&#23454;&#22312;&#22312;&#30340;&#20107;&#20799;&#65292;<FONT class=extract>&#23427;&#65288;input class&#65289;&#30340;&#21151;&#33021;&#65292;&#20165;&#20165;&#26159;&#65306; </FONT></P>
<UL>
<LI><FONT class=extract>&#22312;/sys/class/&#30446;&#24405;&#19979;&#65292;&#21019;&#24314;&#19968;&#20010;&#26412;class&#30340;&#30446;&#24405;&#65288;input&#65289; </FONT>
<LI><FONT class=extract>&#22312;&#26412;&#30446;&#24405;&#19979;&#65292;&#21019;&#24314;&#27599;&#19968;&#20010;&#23646;&#20110;&#35813;class&#30340;&#35774;&#22791;&#30340;&#31526;&#21495;&#38142;&#25509;&#65288;&#22914;&#65292;&#25226;&#8220;sys/devices/platform/s3c2440-i2c.3/i2c-3/3-0048/input/input2/event2&#8221;&#35774;&#22791;&#38142;&#25509;&#21040;&#8221;/sys/class/input/event2&#8221;&#65289;&#65292;&#36825;&#26679;&#23601;&#21487;&#20197;&#22312;&#26412;class&#30446;&#24405;&#19979;&#65292;&#35775;&#38382;&#35813;&#35774;&#22791;&#30340;&#25152;&#26377;&#29305;&#24615;&#65288;&#21363;attribute&#65289; </FONT>
<LI><FONT class=extract>&#21478;&#22806;&#65292;device&#22312;sysfs&#30340;&#30446;&#24405;&#19979;&#65292;&#20063;&#20250;&#21019;&#24314;&#19968;&#20010;subsystem&#30340;&#31526;&#21495;&#38142;&#25509;&#65292;&#38142;&#25509;&#21040;&#26412;class&#30340;&#30446;&#24405; </FONT></LI></UL>
<P>&#31639;&#20102;&#65292;&#25105;&#20204;&#36824;&#26159;&#20808;&#20998;&#26512;&#19968;&#19979;Class&#30340;&#26680;&#24515;&#36923;&#36753;&#37117;&#20570;&#20102;&#21738;&#20123;&#20107;&#24773;&#65292;&#33267;&#20110;class&#21040;&#24213;&#26377;&#20160;&#20040;&#29992;&#22788;&#65292;&#21487;&#20197;&#22312;&#21518;&#32493;&#20855;&#20307;&#30340;&#23376;&#31995;&#32479;&#37324;&#38754;&#65288;&#22914;input&#23376;&#31995;&#32479;&#65289;&#65292;&#26356;&#20026;&#32454;&#33268;&#30340;&#25506;&#35752;&#12290; </P>
<H5>3.2 class&#30340;&#27880;&#20876; </H5>
<BLOCKQUOTE>
<P><FONT class=extract>class&#30340;&#27880;&#20876;&#65292;&#26159;&#30001;__class_register&#25509;&#21475;&#65288;&#23427;&#30340;&#23454;&#29616;&#20301;&#20110;"drivers/base/class.c, line 609"&#65289;&#23454;&#29616;&#30340;&#65292;&#23427;&#30340;&#22788;&#29702;&#36923;&#36753;&#21644;bus&#30340;&#27880;&#20876;&#31867;&#20284;&#65292;&#20027;&#35201;&#21253;&#25324;&#65306; </FONT></P>
<UL>
<LI><FONT class=extract>&#20026;class&#32467;&#26500;&#20013;&#30340;struct subsys_private&#31867;&#22411;&#30340;&#25351;&#38024;&#65288;cp&#65289;&#20998;&#37197;&#31354;&#38388;&#65292;&#24182;&#21021;&#22987;&#21270;&#20854;&#20013;&#30340;&#23383;&#27573;&#65292;&#21253;&#25324;cp-&gt;subsys.kobj.kset&#12289;cp-&gt;subsys.kobj.ktype&#31561;&#31561; </FONT>
<LI><FONT class=extract>&#35843;&#29992;kset_register&#65292;&#27880;&#20876;&#35813;class&#65288;&#22238;&#24518;&#8220;</FONT><A href="http://www.wowotech.net/linux_kenrel/bus.html"><FONT class=extract>Linux&#35774;&#22791;&#27169;&#22411;(6)_Bus</FONT></A><FONT class=extract>&#8221;&#20013;&#30340;&#25551;&#36848;&#65292;&#19968;&#20010;class&#23601;&#26159;&#19968;&#20010;&#23376;&#31995;&#32479;&#65292;&#22240;&#27492;&#27880;&#20876;class&#20063;&#26159;&#27880;&#20876;&#23376;&#31995;&#32479;&#65289;&#12290;&#35813;&#36807;&#31243;&#32467;&#26463;&#21518;&#65292;&#22312;/sys/class/&#30446;&#24405;&#19979;&#65292;&#23601;&#20250;&#21019;&#24314;&#23545;&#24212;&#35813;class&#65288;&#23376;&#31995;&#32479;&#65289;&#30340;&#30446;&#24405; </FONT>
<LI><FONT class=extract>&#35843;&#29992;add_class_attrs&#25509;&#21475;&#65292;&#23558;class&#32467;&#26500;&#20013;class_attrs&#25351;&#38024;&#25152;&#25351;&#21521;&#30340;attribute&#65292;&#28155;&#21152;&#21040;&#20869;&#26680;&#20013;&#12290;&#25191;&#34892;&#23436;&#21518;&#65292;&#22312;/sys/class/xxx_class/&#30446;&#24405;&#19979;&#65292;&#23601;&#20250;&#30475;&#21040;&#36825;&#20123;attribute&#23545;&#24212;&#30340;&#25991;&#20214;</FONT> </LI></UL></BLOCKQUOTE>
<H5>3.3 device&#27880;&#20876;&#26102;&#65292;&#21644;class&#26377;&#20851;&#30340;&#21160;&#20316; </H5>
<P><FONT class=extract>&#22312;"</FONT><A href="http://www.wowotech.net/linux_kenrel/device_and_driver.html"><FONT class=extract>Linux&#35774;&#22791;&#27169;&#22411;(5)_device&#21644;device driver</FONT></A><FONT class=extract>&#8221;&#20013;&#65292;&#25105;&#20204;&#26377;&#35762;&#36807;struct device&#21644;struct device_driver&#36825;&#20004;&#20010;&#25968;&#25454;&#32467;&#26500;&#65292;&#20854;&#20013;struct device&#32467;&#26500;&#20250;&#21253;&#21547;&#19968;&#20010;struct class&#25351;&#38024;&#65288;<SPAN style="COLOR: rgb(255,0,0)">&#36825;&#20174;&#20391;&#38754;&#35828;&#26126;&#20102;class&#26159;device&#30340;&#38598;&#21512;&#65292;&#29978;&#33267;&#65292;class&#21487;&#20197;&#26159;device&#30340;driver</SPAN>&#65289;&#12290;&#24403;&#26576;&#20010;class driver&#21521;&#20869;&#26680;&#27880;&#20876;&#20102;&#19968;&#20010;class&#21518;&#65292;&#38656;&#35201;&#20351;&#29992;&#35813;class&#30340;device&#65292;&#36890;&#36807;&#25226;&#33258;&#36523;&#30340;class&#25351;&#38024;&#25351;&#21521;&#35813;class&#21363;&#21487;&#65292;&#21097;&#19979;&#30340;&#20107;&#24773;&#65292;&#23601;&#30001;&#20869;&#26680;&#22312;&#27880;&#20876;device&#26102;&#22788;&#29702;&#20102;&#12290;</FONT> </P>
<P>&#26412;&#33410;&#65292;&#25105;&#20204;&#35762;&#19968;&#19979;&#22312;device&#27880;&#20876;&#26102;&#65292;&#21644;class&#26377;&#20851;&#30340;&#21160;&#20316;&#65306; </P>
<BLOCKQUOTE>
<P><FONT class=extract>device&#30340;&#27880;&#20876;&#26368;&#32456;&#26159;&#30001;device_add&#25509;&#21475;&#65288;drivers/base/core.c&#65289;&#23454;&#29616;&#20102;&#65292;&#35813;&#25509;&#21475;&#20013;&#21644;class&#26377;&#20851;&#30340;&#21160;&#20316;&#21253;&#25324;&#65306; </FONT></P>
<UL>
<LI><FONT class=extract>&#35843;&#29992;device_add_class_symlinks&#25509;&#21475;&#65292;&#21019;&#24314;3.1&#23567;&#33410;&#25551;&#36848;&#30340;&#21508;&#31181;&#31526;&#21495;&#38142;&#25509;&#65292;&#21363;&#65306;&#22312;&#23545;&#24212;class&#30340;&#30446;&#24405;&#19979;&#65292;&#21019;&#24314;&#25351;&#21521;device&#30340;&#31526;&#21495;&#38142;&#25509;&#65307;&#22312;device&#30340;&#30446;&#24405;&#19979;&#65292;&#21019;&#24314;&#21517;&#31216;&#20026;subsystem&#12289;&#25351;&#21521;&#23545;&#24212;class&#30446;&#24405;&#30340;&#31526;&#21495;&#38142;&#25509; </FONT>
<LI><FONT class=extract>&#35843;&#29992;device_add_attrs&#65292;&#28155;&#21152;&#30001;class&#25351;&#23450;&#30340;attributes&#65288;class-&gt;dev_attrs&#65289; </FONT>
<LI><FONT class=extract>&#22914;&#26524;&#23384;&#22312;&#23545;&#24212;&#35813;class&#30340;add_dev&#22238;&#35843;&#20989;&#25968;&#65292;&#35843;&#29992;&#35813;&#22238;&#35843;&#20989;&#25968;</FONT> </LI></UL></BLOCKQUOTE>
<H4>4. &#32467;&#26463;&#35821; </H4>
<P>&#20854;&#23454;&#22312;&#36825;&#31687;&#25991;&#31456;&#32467;&#26463;&#21518;&#65292;&#34583;&#34583;&#20381;&#26087;&#27809;&#26377;&#24324;&#28165;&#26970;class&#22312;&#20869;&#26680;&#21040;&#24213;&#26159;&#24590;&#20040;&#20351;&#29992;&#30340;&#12290;&#19981;&#36807;&#27809;&#20851;&#31995;&#65292;&#22312;&#21518;&#32493;&#30340;&#23376;&#31995;&#32479;&#30340;&#20998;&#26512;&#20013;&#65288;&#22914;input&#23376;&#31995;&#32479;&#12289;RTC&#23376;&#31995;&#32479;&#31561;&#65289;&#65292;&#25105;&#20204;&#20250;&#30475;&#21040;&#24456;&#22810;class&#30340;&#20351;&#29992;&#29992;&#20363;&#12290;&#21040;&#26102;&#20505;&#65292;&#20877;&#22238;&#36807;&#22836;&#24635;&#32467;&#65292;&#23601;&#20250;&#24456;&#28165;&#26970;&#20102;&#12290; </P>
<P><EM><SPAN style="FONT-SIZE: xx-small; COLOR: rgb(128,128,128)"></SPAN></EM></P>
<P><EM><SPAN style="FONT-SIZE: x-small; COLOR: rgb(128,128,128)">&#21407;&#21019;&#25991;&#31456;&#65292;&#36716;&#21457;&#35831;&#27880;&#26126;&#20986;&#22788;&#12290;&#34583;&#31389;&#31185;&#25216;</SPAN>&#65292;<A href="http://www.wowotech.net/linux_kenrel/class.html">www.wowotech.net</A>&#12290;</EM>