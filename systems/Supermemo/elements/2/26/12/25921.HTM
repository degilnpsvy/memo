<H2>Linux kernel&#30340;&#20013;&#26029;&#23376;&#31995;&#32479;&#20043;&#65288;&#19968;&#65289;&#65306;&#32508;&#36848;</H2>
<P class=date>&#20316;&#32773;&#65306;<A href="http://www.wowotech.net/author/3">linuxer</A> &#21457;&#24067;&#20110;&#65306;2014-8-14 19:12 &#20998;&#31867;&#65306;<A href="http://www.wowotech.net/sort/irq_subsystem">&#20013;&#26029;&#23376;&#31995;&#32479;</A> </P>
<P>&#19968;&#12289;&#21069;&#35328; </P>
<P>&#19968;&#20010;&#21512;&#26684;&#30340;linux&#39537;&#21160;&#24037;&#31243;&#24072;&#38656;&#35201;&#23545;kernel&#20013;&#30340;&#20013;&#26029;&#23376;&#31995;&#32479;&#26377;&#28145;&#21051;&#30340;&#29702;&#35299;&#65292;&#21482;&#26377;&#36825;&#26679;&#65292;&#22312;&#20889;&#20855;&#20307;driver&#30340;&#26102;&#20505;&#25165;&#33021;&#65306; </P>
<P>1&#12289;&#27491;&#30830;&#30340;&#20351;&#29992;linux kernel&#25552;&#20379;&#30340;&#30340;API&#65292;&#20363;&#22914;&#26368;&#33879;&#21517;&#30340;request_threaded_irq&#65288;request_irq&#65289;&#25509;&#21475; </P>
<P>2&#12289;&#27491;&#30830;&#20351;&#29992;&#21516;&#27493;&#26426;&#21046;&#20445;&#25252;&#39537;&#21160;&#20195;&#30721;&#20013;&#30340;&#20020;&#30028;&#21306; </P>
<P>3&#12289;&#27491;&#30830;&#30340;&#20351;&#29992;kernel&#25552;&#20379;&#30340;softirq&#12289;tasklet&#12289;workqueue&#31561;&#26426;&#21046;&#26469;&#23436;&#25104;&#20855;&#20307;&#30340;&#20013;&#26029;&#22788;&#29702; </P>
<P>&#22522;&#20110;&#19978;&#38754;&#30340;&#21407;&#22240;&#65292;&#25105;&#24076;&#26395;&#33021;&#22815;&#36890;&#36807;&#19968;&#31995;&#21015;&#30340;&#25991;&#26723;&#26469;&#25551;&#36848;&#28165;&#26970;linux kernel&#20013;&#30340;&#20013;&#26029;&#23376;&#31995;&#32479;&#26041;&#26041;&#38754;&#38754;&#30340;&#30693;&#35782;&#12290;&#19968;&#26041;&#38754;&#26159;&#25972;&#29702;&#33258;&#24049;&#30340;&#24605;&#32490;&#65292;&#21478;&#22806;&#19968;&#26041;&#38754;&#65292;&#24076;&#26395;&#33021;&#22815;&#23545;&#20854;&#20182;&#30340;&#39537;&#21160;&#24037;&#31243;&#24072;&#65288;&#25110;&#32773;&#24819;&#20174;&#20107;linux&#39537;&#21160;&#24037;&#20316;&#30340;&#24037;&#31243;&#24072;&#65289;&#26377;&#25152;&#24110;&#21161;&#12290; </P>
<P>&nbsp; </P>
<P>&#20108;&#12289;&#20013;&#26029;&#31995;&#32479;&#30456;&#20851;&#30828;&#20214;&#25551;&#36848; </P>
<P>&#20013;&#26029;&#30828;&#20214;&#31995;&#32479;&#20027;&#35201;&#26377;&#19977;&#31181;&#22120;&#20214;&#21442;&#19982;&#65292;&#21508;&#20010;&#22806;&#35774;&#12289;&#20013;&#26029;&#25511;&#21046;&#22120;&#21644;CPU&#12290;&#21508;&#20010;&#22806;&#35774;&#25552;&#20379;irq request line&#65292;&#22312;&#21457;&#29983;&#20013;&#26029;&#20107;&#20214;&#30340;&#26102;&#20505;&#65292;&#36890;&#36807;irq request line&#19978;&#30340;&#30005;&#27668;&#20449;&#21495;&#21521;CPU&#31995;&#32479;&#35831;&#27714;&#22788;&#29702;&#12290;&#22806;&#35774;&#30340;irq request line&#22826;&#22810;&#65292;CPU&#38656;&#35201;&#19968;&#20010;&#23567;&#20249;&#20276;&#24110;&#20182;&#65292;&#36825;&#23601;&#26159;Interrupt controller&#12290;Interrupt Controller&#26159;&#36830;&#25509;&#22806;&#35774;&#20013;&#26029;&#31995;&#32479;&#21644;CPU&#31995;&#32479;&#30340;&#26725;&#26753;&#12290;&#26681;&#25454;&#22806;&#35774;irq request line&#30340;&#22810;&#23569;&#65292;Interrupt Controller&#21487;&#20197;&#32423;&#32852;&#12290;CPU&#30340;&#20027;&#35201;&#21151;&#33021;&#26159;&#36816;&#31639;&#65292;&#22240;&#27492;CPU&#24182;&#19981;&#22788;&#29702;&#20013;&#26029;&#20248;&#20808;&#32423;&#65292;&#37027;&#26159;Interrupt controller&#30340;&#20107;&#24773;&#12290;&#23545;&#20110;CPU&#32780;&#35328;&#65292;&#19968;&#33324;&#26377;&#20004;&#31181;&#20013;&#26029;&#35831;&#27714;&#65292;&#20363;&#22914;&#65306;&#23545;&#20110;ARM&#65292;&#26159;IRQ&#21644;FIQ&#20449;&#21495;&#32447;&#65292;&#20998;&#21035;&#35753;ARM&#36827;&#20837;IRQ mode&#21644;FIQ mode&#12290;&#23545;&#20110;X86&#65292;&#26377;&#21487;&#23631;&#34109;&#20013;&#26029;&#21644;&#19981;&#21487;&#23631;&#34109;&#20013;&#26029;&#12290; </P>
<P>&#26412;&#31456;&#33410;&#19981;&#26159;&#25551;&#36848;&#20855;&#20307;&#30340;&#30828;&#20214;&#65292;&#32780;&#26159;&#20351;&#29992;&#20102;HW block&#36825;&#26679;&#30340;&#27010;&#24565;&#12290;&#20363;&#22914;CPU HW block&#26159;&#21482;ARM core&#25110;&#32773;X86&#36825;&#26679;&#30340;&#23454;&#38469;&#30828;&#20214;block&#30340;&#19968;&#20010;&#36923;&#36753;&#25551;&#36848;&#65292;&#23454;&#38469;&#20013;&#65292;&#21487;&#33021;&#26159;&#20219;&#20309;&#21487;&#33021;&#30340;CPU block&#12290; </P>
<P><BR></P>
<P>1&#12289;HW&#20013;&#26029;&#31995;&#32479;&#30340;&#36923;&#36753;block&#22270; </P>
<P>&#25105;&#23545;HW&#20013;&#26029;&#31995;&#32479;&#20043;&#36923;&#36753;block diagram&#30340;&#29702;&#35299;&#22914;&#19979;&#22270;&#25152;&#31034;&#65306; </P>
<P><A href="file:///C:/Documents%2520and%2520Settings/unigz/Local%2520Settings/Temp/WindowsLiveWriter-429641856/supfiles134F60E/irq3.gif"><IMG title=irq_thumb1 style="BORDER-LEFT-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; DISPLAY: inline; BORDER-TOP-WIDTH: 0px" border=0 alt=irq_thumb1 src="http://www.wowotech.net/content/uploadfile/201408/3c022613b452b88b4d1e2dc76ccd7a3a20140816061633.gif" width=736 height=587></A> </P>
<P>&#31995;&#32479;&#20013;&#26377;&#33509;&#24178;&#20010;CPU block&#29992;&#26469;&#25509;&#25910;&#20013;&#26029;&#20107;&#20214;&#24182;&#36827;&#34892;&#22788;&#29702;&#65292;&#33509;&#24178;&#20010;Interrupt controller&#24418;&#25104;&#26641;&#29366;&#30340;&#32467;&#26500;&#65292;&#27719;&#38598;&#31995;&#32479;&#20013;&#25152;&#26377;&#22806;&#35774;&#30340;irq request line&#65292;&#24182;&#23558;&#20013;&#26029;&#20107;&#20214;&#20998;&#21457;&#32473;&#26576;&#19968;&#20010;CPU block&#36827;&#34892;&#22788;&#29702;&#12290;&#20174;&#25509;&#21475;&#23618;&#38754;&#30475;&#65292;&#20027;&#35201;&#26377;&#20004;&#31867;&#25509;&#21475;&#65292;&#19968;&#31181;&#26159;&#20013;&#26029;&#25509;&#21475;&#12290;&#26377;&#30340;&#23454;&#29616;&#20013;&#65292;&#20855;&#20307;&#20013;&#26029;&#25509;&#21475;&#30340;&#24418;&#24577;&#23601;&#26159;&#19968;&#20010;&#30828;&#20214;&#30340;&#20449;&#21495;&#32447;&#65292;&#36890;&#36807;&#30005;&#24179;&#20449;&#21495;&#20256;&#36882;&#20013;&#26029;&#20107;&#20214;&#65288;ARM&#20197;&#21450;GIC&#32452;&#25104;&#30340;&#20013;&#26029;&#31995;&#32479;&#23601;&#26159;&#36825;&#20040;&#35774;&#35745;&#30340;&#65289;&#12290;&#26377;&#20123;&#31995;&#32479;&#37319;&#29992;&#20102;&#20854;&#20182;&#30340;&#26041;&#27861;&#26469;&#20256;&#36882;&#20013;&#26029;&#20107;&#20214;&#65292;&#27604;&#22914;x86&#65291;APIC&#65288;Advanced Programmable Interrupt Controller&#65289;&#32452;&#25104;&#30340;&#31995;&#32479;&#65292;&#27599;&#20010;x86&#30340;&#26680;&#26377;&#19968;&#20010;Local APIC&#65292;&#36825;&#20123;Local APIC&#20204;&#36890;&#36807;ICC&#65288;Interrupt Controller Communication&#65289;bus&#36830;&#25509;&#21040;IO APIC&#19978;&#12290;IO APIC&#25910;&#38598;&#21508;&#20010;&#22806;&#35774;&#30340;&#20013;&#26029;&#65292;&#24182;&#32763;&#35793;&#25104;&#24635;&#32447;&#19978;&#30340;message&#65292;&#20256;&#36882;&#32473;&#26576;&#20010;CPU&#19978;&#30340;Local APIC&#12290;&#22240;&#27492;&#65292;&#19978;&#38754;&#30340;&#32418;&#33394;&#32447;&#26465;&#20063;&#26159;&#36923;&#36753;&#23618;&#38754;&#30340;&#20013;&#26029;&#20449;&#21495;&#65292;&#21487;&#33021;&#26159;&#23454;&#38469;&#30340;PCB&#19978;&#30340;&#38108;&#32447;&#65288;&#25110;&#32773;SOC&#20869;&#37096;&#30340;&#38108;&#32447;&#65289;&#65292;&#20063;&#21487;&#33021;&#26159;&#19968;&#20010;message&#32780;&#24050;&#12290;&#38500;&#20102;&#20013;&#26029;&#25509;&#21475;&#65292;CPU&#21644;Interrupt Controller&#20043;&#38388;&#36824;&#38656;&#35201;&#26377;&#25511;&#21046;&#20449;&#24687;&#30340;&#20132;&#27969;&#12290;Interrupt Controller&#20250;&#24320;&#25918;&#19968;&#20123;&#23492;&#23384;&#22120;&#35753;CPU&#35775;&#38382;&#12289;&#25511;&#21046;&#12290; </P>
<P><BR></P>
<P>2&#12289;&#22810;&#20010;Interrupt controller&#21644;&#22810;&#20010;cpu&#20043;&#38388;&#30340;&#25299;&#25169;&#32467;&#26500; </P>
<P>Interrupt controller&#26377;&#30340;&#26159;&#25903;&#25345;&#22810;&#20010;CPU core&#30340;&#65288;&#20363;&#22914;GIC&#12289;APIC&#31561;&#65289;&#65292;&#26377;&#30340;&#19981;&#25903;&#25345;&#65288;&#20363;&#22914;S3C2410&#30340;&#20013;&#26029;&#25511;&#21046;&#22120;&#65292;X86&#24179;&#21488;&#30340;PIC&#31561;&#65289;&#12290;&#22914;&#26524;&#30828;&#20214;&#24179;&#21488;&#20013;&#21482;&#26377;&#19968;&#20010;GIC&#30340;&#35805;&#65292;&#37027;&#20040;&#36890;&#36807;&#25511;&#21046;&#35813;GIC&#30340;&#23492;&#23384;&#22120;&#21487;&#20197;&#23558;&#25152;&#26377;&#30340;&#22806;&#35774;&#20013;&#26029;&#65292;&#20998;&#21457;&#32473;&#36830;&#25509;&#22312;&#35813;interrupt controller&#19978;&#30340;CPU&#12290;&#22914;&#26524;&#26377;&#22810;&#20010;GIC&#21602;&#65288;&#25110;&#32773;&#32423;&#32852;&#30340;interrupt controller&#37117;&#25903;&#25345;multi cpu core&#65289;&#65311;&#20551;&#35774;&#25105;&#20204;&#35201;&#35774;&#35745;&#19968;&#20010;&#38750;&#24120;&#22797;&#26434;&#30340;&#31995;&#32479;&#65292;&#31995;&#32479;&#20013;&#26377;8&#20010;CPU&#65292;&#26377;2000&#20010;&#22806;&#35774;&#20013;&#26029;&#35201;&#22788;&#29702;&#65292;&#36825;&#26102;&#20505;&#20320;&#22914;&#20309;&#35774;&#35745;&#31995;&#32479;&#20013;&#30340;interrupt controller&#65311;&#22914;&#26524;&#20351;&#29992;GIC&#30340;&#35805;&#65292;&#25105;&#20204;&#38656;&#35201;&#20004;&#20010;GIC&#65288;&#19968;&#20010;GIC&#26368;&#22810;&#25903;&#25345;1024&#20010;&#20013;&#26029;&#28304;&#65289;&#65292;&#19968;&#20010;&#26159;root GIC&#65292;&#21478;&#22806;&#19968;&#20010;&#26159;secondary GIC&#12290;&#36825;&#26102;&#20505;&#65292;&#20320;&#26377;&#20004;&#31181;&#26041;&#26696;&#65306; </P>
<P>&#65288;1&#65289;&#25226;8&#20010;cpu&#37117;&#36830;&#25509;&#21040;root GIC&#19978;&#65292;secondary GIC&#19981;&#25509;CPU&#12290;&#36825;&#26102;&#20505;&#21407;&#26412;&#25346;&#25509;&#22312;secondary GIC&#30340;&#22806;&#35774;&#20013;&#26029;&#20250;&#36755;&#20986;&#21040;&#26576;&#20010;cpu&#65292;&#29616;&#22312;&#65292;&#21482;&#33021;&#26159;&#65288;&#36890;&#36807;&#26576;&#20010;cpu interface&#30340;irq signal&#65289;&#36755;&#21040;root GIC&#30340;&#26576;&#20010;SPI&#19978;&#12290;&#23545;&#20110;&#36719;&#20214;&#32780;&#35328;&#65292;&#36825;&#26159;&#19968;&#20010;&#27604;&#36739;&#31616;&#21333;&#30340;&#35774;&#35745;&#65292;secondary GIC&#30340;cpu interface&#30340;&#35774;&#23450;&#26159;&#22266;&#23450;&#19981;&#21464;&#30340;&#65292;&#27704;&#36828;&#26159;&#20174;&#19968;&#20010;&#22266;&#23450;&#30340;CPU interface&#36755;&#20986;&#21040;root GIC&#12290;&#36825;&#31181;&#26041;&#26696;&#30340;&#22351;&#22788;&#26159;&#65306;&#36825;&#26102;&#20505;secondary GIC&#30340;PPI&#21644;SGI&#37117;&#26159;&#27809;&#26377;&#29992;&#30340;&#20102;&#12290;&#27492;&#22806;&#65292;&#22312;&#36825;&#31181;&#35774;&#23450;&#19979;&#65292;&#25152;&#26377;&#36830;&#25509;&#22312;secondary GIC&#19978;&#30340;&#22806;&#35774;&#20013;&#26029;&#35201;&#36865;&#36798;&#30340;target CPU&#26159;&#32479;&#19968;&#22788;&#29702;&#30340;&#65292;&#35201;&#20040;&#36865;&#21435;cpu0&#65292;&#35201;&#20040;cpu 5&#65292;&#19981;&#33021;&#21333;&#29420;&#25511;&#21046;&#12290; </P>
<P>&#65288;2&#65289;&#24403;&#28982;&#65292;&#20320;&#20063;&#21487;&#20197;&#35753;&#27599;&#20010;GIC&#20998;&#21035;&#36830;&#25509;4&#20010;CPU core&#65292;root GIC&#36830;&#25509;CPU0~CPU3&#65292;secondary GIC&#36830;&#25509;CPU4~CPU7&#12290;&#36825;&#31181;&#29366;&#24577;&#19979;&#65292;&#36830;&#25509;&#22312;root GIC&#30340;&#20013;&#26029;&#21487;&#20197;&#30001;CPU0~CPU3&#20998;&#25285;&#22788;&#29702;&#65292;&#36830;&#25509;&#22312;secondary GIC&#30340;&#20013;&#26029;&#21487;&#20197;&#30001;CPU4~CPU7&#20998;&#25285;&#22788;&#29702;&#12290;&#20294;&#36825;&#26679;&#65292;&#22312;&#20013;&#26029;&#22788;&#29702;&#26041;&#38754;&#30475;&#36215;&#26469;&#23601;&#20307;&#29616;&#19981;&#20986;8&#26680;&#30340;&#23041;&#21147;&#20102;&#12290; </P>
<P>&#27880;&#65306;&#19978;&#19968;&#33410;&#20013;&#30340;&#36923;&#36753;block&#31034;&#24847;&#22270;&#37319;&#29992;&#30340;&#23601;&#26159;&#26041;&#26696;&#19968;&#12290; </P>
<P>3&#12289;Interrupt controller&#25226;&#20013;&#26029;&#20107;&#20214;&#36865;&#32473;&#21738;&#20010;CPU&#65311; </P>
<P>&#27627;&#26080;&#30097;&#38382;&#65292;&#21482;&#26377;&#25903;&#25345;multi cpu core&#30340;&#20013;&#26029;&#25511;&#21046;&#22120;&#25165;&#26377;&#36825;&#31181;&#24184;&#31119;&#30340;&#28902;&#24700;&#12290;&#19968;&#33324;&#32780;&#35328;&#65292;&#20013;&#26029;&#25511;&#21046;&#22120;&#21487;&#20197;&#25226;&#20013;&#26029;&#20107;&#20214;&#19978;&#25253;&#32473;&#19968;&#20010;CPU&#25110;&#32773;&#19968;&#32452;CPU&#65288;&#21253;&#25324;&#24191;&#25773;&#21040;&#25152;&#26377;&#30340;CPU&#19978;&#21435;&#65289;&#12290;&#23545;&#20110;&#22806;&#35774;&#31867;&#22411;&#30340;&#20013;&#26029;&#65292;&#24403;&#28982;&#26159;&#36865;&#21040;&#19968;&#20010;cpu&#19978;&#23601;OK&#20102;&#65292;&#25105;&#30475;&#19981;&#20986;&#26469;&#35201;&#25226;&#36825;&#26679;&#30340;&#20013;&#26029;&#36865;&#32473;&#22810;&#20010;CPU&#36827;&#34892;&#22788;&#29702;&#30340;&#24517;&#35201;&#24615;&#12290;&#22914;&#26524;&#36865;&#36798;&#20102;&#22810;&#20010;cpu&#65292;&#23454;&#38469;&#19978;&#65292;&#20063;&#24212;&#35813;&#21482;&#26377;&#19968;&#20010;handler&#23454;&#38469;&#21644;&#22806;&#35774;&#36827;&#34892;&#20132;&#20114;&#65292;&#21478;&#22806;&#19968;&#20010;cpu&#19978;&#30340;handler&#30340;&#21160;&#20316;&#24212;&#35813;&#26159;&#36825;&#26679;&#30340;&#65306;&#21457;&#29616;&#35813;irq number&#23545;&#24212;&#30340;&#20013;&#26029;&#24050;&#32463;&#34987;&#21478;&#22806;&#19968;&#20010;cpu&#22788;&#29702;&#20102;&#65292;&#30452;&#25509;&#36864;&#20986;handler&#65292;&#36820;&#22238;&#20013;&#26029;&#29616;&#22330;&#12290;IPI&#30340;&#20013;&#26029;&#19981;&#23384;&#22312;&#36825;&#20010;&#38480;&#21046;&#65292;IPI&#26356;&#20687;&#19968;&#20010;CPU&#20043;&#38388;&#36890;&#20449;&#30340;&#26426;&#21046;&#65292;&#23545;&#36825;&#31181;&#20013;&#26029;&#24191;&#25773;&#24212;&#35813;&#26159;&#27627;&#26080;&#21387;&#21147;&#12290; </P>
<P>&#23454;&#38469;&#19978;&#65292;&#20174;&#29992;&#25143;&#30340;&#35282;&#24230;&#30475;&#65292;&#20854;&#38656;&#27714;&#26159;&#30456;&#24403;&#22797;&#26434;&#30340;&#65292;&#25105;&#20204;&#30340;&#30446;&#26631;&#21487;&#33021;&#21253;&#25324;&#65306; </P>
<P>&#65288;1&#65289;&#35753;&#26576;&#20010;IRQ number&#30340;&#20013;&#26029;&#30001;&#26576;&#20010;&#29305;&#23450;&#30340;CPU&#22788;&#29702; </P>
<P>&#65288;2&#65289;&#35753;&#26576;&#20010;&#29305;&#23450;&#30340;&#20013;&#26029;&#30001;&#20960;&#20010;CPU&#36718;&#27969;&#22788;&#29702; </P>
<P>&#8230;&#8230; </P>
<P>&#24403;&#28982;&#65292;&#20855;&#20307;&#30340;&#38656;&#27714;&#21487;&#33021;&#26356;&#21152;&#22797;&#26434;&#65292;&#20294;&#26159;&#22914;&#20309;&#21306;&#20998;&#36719;&#20214;&#21644;&#30828;&#20214;&#30340;&#20998;&#24037;&#21602;&#65311;&#35753;&#30828;&#20214;&#22788;&#29702;&#37027;&#20040;&#22797;&#26434;&#30340;&#31574;&#30053;&#20854;&#23454;&#26159;&#19981;&#21512;&#29702;&#30340;&#65292;&#22797;&#26434;&#30340;&#36923;&#36753;&#22914;&#26524;&#30001;&#30828;&#20214;&#23454;&#29616;&#65292;&#37027;&#20040;&#23601;&#24847;&#21619;&#30528;&#26356;&#22810;&#30340;&#26230;&#20307;&#31649;&#65292;&#26356;&#22810;&#30340;&#21151;&#32791;&#12290;&#22240;&#27492;&#65292;&#26368;&#26222;&#36890;&#30340;&#20570;&#27861;&#23601;&#26159;&#20026;Interrupt Controller&#25903;&#25345;&#30340;&#27599;&#19968;&#20010;&#20013;&#26029;&#35774;&#23450;&#19968;&#20010;target cpu&#30340;&#25511;&#21046;&#25509;&#21475;&#65288;&#24403;&#28982;&#24212;&#35813;&#26159;&#20197;&#23492;&#23384;&#22120;&#24418;&#24335;&#20986;&#29616;&#65292;&#23545;&#20110;GIC&#65292;&#36825;&#20010;&#23492;&#23384;&#22120;&#23601;&#26159;Interrupt processor target register&#65289;&#12290;&#31995;&#32479;&#26377;&#22810;&#20010;cpu&#65292;&#36825;&#20010;&#25511;&#21046;&#25509;&#21475;&#23601;&#26377;&#22810;&#23569;&#20010;bit&#65292;&#27599;&#20010;bit&#20195;&#34920;&#19968;&#20010;CPU&#12290;&#22914;&#26524;&#35813;bit&#35774;&#23450;&#20026;1&#65292;&#37027;&#20040;&#35813;interrupt&#23601;&#19978;&#25253;&#32473;&#35813;CPU&#65292;&#22914;&#26524;&#20026;0&#65292;&#21017;&#19981;&#19978;&#25253;&#32473;&#35813;CPU&#12290;&#36825;&#26679;&#30340;&#30828;&#20214;&#36923;&#36753;&#27604;&#36739;&#31616;&#21333;&#65292;&#21097;&#20313;&#30340;&#25511;&#21046;&#20869;&#23481;&#23601;&#20132;&#32473;&#36719;&#20214;&#22909;&#20102;&#12290;&#20363;&#22914;&#22914;&#26524;&#31995;&#32479;&#26377;&#20004;&#20010;cpu core&#65292;&#26576;&#20013;&#26029;&#24819;&#36718;&#27969;&#30001;&#20004;&#20010;CPU&#22788;&#29702;&#12290;&#37027;&#20040;&#24403;CPU0&#30456;&#24212;&#35813;&#20013;&#26029;&#36827;&#20837;interrupt handler&#30340;&#26102;&#20505;&#65292;&#21487;&#20197;&#23558;Interrupt processor target register&#20013;&#26412;CPU&#23545;&#24212;&#30340;bit&#35774;&#23450;&#20026;0&#65292;&#21478;&#22806;&#19968;&#20010;CPU&#30340;bit&#35774;&#23450;&#20026;1&#12290;&#36825;&#26679;&#65292;&#22312;&#19979;&#27425;&#20013;&#26029;&#21457;&#29983;&#30340;&#26102;&#20505;&#65292;interupt controller&#23601;&#25226;&#20013;&#26029;&#36865;&#32473;&#20102;CPU1&#12290;&#23545;&#20110;CPU1&#32780;&#35328;&#65292;&#22312;&#25191;&#34892;&#35813;&#20013;&#26029;&#30340;handler&#30340;&#26102;&#20505;&#65292;&#23558;Interrupt processor target register&#20013;CPU0&#30340;bit&#20026;&#35774;&#32622;&#20026;1&#65292;disable&#26412;CPU&#30340;&#27604;&#29305;&#20301;&#65292;&#36825;&#26679;&#22312;&#19979;&#27425;&#20013;&#26029;&#21457;&#29983;&#30340;&#26102;&#20505;&#65292;interupt controller&#23601;&#25226;&#20013;&#26029;&#36865;&#32473;&#20102;CPU0&#12290;&#36825;&#26679;&#36719;&#20214;&#25511;&#21046;&#30340;&#32467;&#26524;&#23601;&#26159;&#23454;&#29616;&#20102;&#29305;&#23450;&#20013;&#26029;&#30001;2&#20010;CPU&#36718;&#27969;&#22788;&#29702;&#30340;&#31639;&#27861;&#12290; </P>
<P><BR></P>
<P>4&#12289;&#26356;&#22810;&#30340;&#24605;&#32771; </P>
<P>&#38754;&#23545;&#36825;&#20010;HW&#20013;&#26029;&#31995;&#32479;&#20043;&#36923;&#36753;block diagram&#65292;&#25105;&#20204;&#20854;&#23454;&#21487;&#20197;&#25552;&#20986;&#26356;&#22810;&#30340;&#38382;&#39064;&#65306; </P>
<P>&#65288;1&#65289;&#20013;&#26029;&#25511;&#21046;&#22120;&#21457;&#36865;&#32473;CPU&#30340;&#20013;&#26029;&#26159;&#21542;&#21487;&#20197;&#25910;&#22238;&#65311;&#37325;&#26032;&#20998;&#21457;&#32473;&#21478;&#22806;&#19968;&#20010;CPU&#65311; </P>
<P>&#65288;2&#65289;&#31995;&#32479;&#20013;&#30340;&#20013;&#26029;&#22914;&#20309;&#20998;&#21457;&#25165;&#33021;&#33719;&#24471;&#26356;&#22909;&#30340;&#24615;&#33021;&#21602;&#65311; </P>
<P>&#65288;3&#65289;&#20013;&#26029;&#20998;&#21457;&#30340;&#31574;&#30053;&#38656;&#35201;&#32771;&#34385;&#21738;&#20123;&#22240;&#32032;&#21602;&#65311; </P>
<P>&#8230;&#8230; </P>
<P>&#24456;&#22810;&#38382;&#39064;&#20854;&#23454;&#25105;&#20063;&#27809;&#26377;&#31572;&#26696;&#65292;&#24930;&#24930;&#24605;&#32771;&#65292;&#24930;&#24930;&#36924;&#36817;&#30495;&#30456;&#21543;&#12290; </P>
<P>&nbsp; </P>
<P>&#20108;&#12289;&#20013;&#26029;&#23376;&#31995;&#32479;&#30456;&#20851;&#30340;&#36719;&#20214;&#26694;&#26550; </P>
<P>linux kernel&#30340;&#20013;&#26029;&#23376;&#31995;&#32479;&#30456;&#20851;&#30340;&#36719;&#20214;&#26694;&#26550;&#22270;&#22914;&#19979;&#25152;&#31034;&#65306; </P>
<P><A href="http://www.wowotech.net/content/uploadfile/201408/4a6be3bcb547cdcd1c2d787a15db689720140814111245.gif"><IMG title=isbs style="BORDER-LEFT-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; DISPLAY: inline; BORDER-TOP-WIDTH: 0px" border=0 alt=isbs src="http://www.wowotech.net/content/uploadfile/201408/3ec48c362ba8d614358dfdb779fd6c3020140814111248.gif" width=727 height=603></A>&nbsp; </P>
<P>&#30001;&#19978;&#38754;&#30340;block&#22270;&#65292;&#25105;&#20204;&#21487;&#30693;linux kernel&#30340;&#20013;&#26029;&#23376;&#31995;&#32479;&#20998;&#25104;4&#20010;&#37096;&#20998;&#65306; </P>
<P>&#65288;1&#65289;&#30828;&#20214;&#26080;&#20851;&#30340;&#20195;&#30721;&#65292;&#25105;&#20204;&#31216;&#20043;Linux kernel&#36890;&#29992;&#20013;&#26029;&#22788;&#29702;&#27169;&#22359;&#12290;&#26080;&#35770;&#26159;&#21738;&#31181;CPU&#65292;&#21738;&#31181;controller&#65292;&#20854;&#20013;&#26029;&#22788;&#29702;&#30340;&#36807;&#31243;&#37117;&#26377;&#19968;&#20123;&#30456;&#21516;&#30340;&#20869;&#23481;&#65292;&#36825;&#20123;&#30456;&#21516;&#30340;&#20869;&#23481;&#34987;&#25277;&#35937;&#20986;&#26469;&#65292;&#21644;HW&#26080;&#20851;&#12290;&#27492;&#22806;&#65292;&#21508;&#20010;&#22806;&#35774;&#30340;&#39537;&#21160;&#20195;&#30721;&#20013;&#65292;&#20063;&#24076;&#26395;&#33021;&#29992;&#19968;&#20010;&#32479;&#19968;&#30340;&#25509;&#21475;&#23454;&#29616;irq&#30456;&#20851;&#30340;&#31649;&#29702;&#65288;&#19981;&#21644;&#20855;&#20307;&#30340;&#20013;&#26029;&#30828;&#20214;&#31995;&#32479;&#20197;&#21450;CPU&#20307;&#31995;&#32467;&#26500;&#30456;&#20851;&#65289;&#36825;&#20123;&#8220;&#36890;&#29992;&#8221;&#30340;&#20195;&#30721;&#32452;&#25104;&#20102;linux kernel interrupt subsystem&#30340;&#26680;&#24515;&#37096;&#20998;&#12290; </P>
<P>&#65288;2&#65289;CPU architecture&#30456;&#20851;&#30340;&#20013;&#26029;&#22788;&#29702;&#12290; &#21644;&#31995;&#32479;&#20351;&#29992;&#30340;&#20855;&#20307;&#30340;CPU architecture&#30456;&#20851;&#12290; </P>
<P>&#65288;3&#65289;Interrupt controller&#39537;&#21160;&#20195;&#30721; &#12290;&#21644;&#31995;&#32479;&#20351;&#29992;&#30340;Interrupt controller&#30456;&#20851;&#12290; </P>
<P>&#65288;4&#65289;&#26222;&#36890;&#22806;&#35774;&#30340;&#39537;&#21160;&#12290;&#36825;&#20123;&#39537;&#21160;&#23558;&#20351;&#29992;Linux kernel&#36890;&#29992;&#20013;&#26029;&#22788;&#29702;&#27169;&#22359;&#30340;API&#26469;&#23454;&#29616;&#33258;&#24049;&#30340;&#39537;&#21160;&#36923;&#36753;&#12290; </P>
<P>&nbsp; </P>
<P>&#19977;&#12289;&#20013;&#26029;&#23376;&#31995;&#32479;&#25991;&#26723;&#35268;&#21010; </P>
<P>&#20013;&#26029;&#30456;&#20851;&#30340;&#25991;&#26723;&#35268;&#21010;&#22914;&#19979;&#65306; </P>
<P>1&#12289;linux kernel&#30340;&#20013;&#26029;&#23376;&#31995;&#32479;&#20043;&#65288;&#19968;&#65289;&#65292;&#20063;&#23601;&#26159;&#26412;&#25991;&#65292;&#20854;&#23454;&#26159;&#19968;&#20010;&#23548;&#35770;&#65292;&#27809;&#26377;&#23454;&#38469;&#30340;&#20869;&#23481;&#65292;&#20027;&#35201;&#26159;&#32473;&#35835;&#32773;&#19968;&#20010;&#22823;&#27010;&#30340;&#36719;&#30828;&#20214;&#26694;&#26550;&#12290; </P>
<P>2&#12289;<A href="http://www.wowotech.net/linux_kenrel/irq-domain.html" target=_blank>linux kernel&#30340;&#20013;&#26029;&#23376;&#31995;&#32479;&#20043;&#65288;&#20108;&#65289;&#65306;irq domain&#20171;&#32461;</A>&#12290;&#20027;&#35201;&#25551;&#36848;&#22914;&#20309;&#23558;&#19968;&#20010;HW interrupt ID&#36716;&#25442;&#25104;IRQ number&#12290; </P>
<P>3&#12289;<A href="http://www.wowotech.net/linux_kenrel/interrupt_descriptor.html" target=_blank>linux kernel&#30340;&#20013;&#26029;&#23376;&#31995;&#32479;&#20043;&#65288;&#19977;&#65289;&#65306;IRQ number&#21644;&#20013;&#26029;&#25551;&#36848;&#31526;</A>&#12290;&#20027;&#35201;&#25551;&#36848;&#20013;&#26029;&#25551;&#36848;&#31526;&#30456;&#20851;&#30340;&#25968;&#25454;&#32467;&#26500;&#21644;&#25509;&#21475;API&#12290; </P>
<P>4&#12289;<A href="http://www.wowotech.net/linux_kenrel/High_level_irq_event_handler.html" target=_blank>linux kernel&#30340;&#20013;&#26029;&#23376;&#31995;&#32479;&#20043;&#65288;&#22235;&#65289;&#65306;high level irq event handler</A>&#12290; </P>
<P>5&#12289;<A href="http://www.wowotech.net/linux_kenrel/request_threaded_irq.html" target=_blank>linux kernel&#30340;&#20013;&#26029;&#23376;&#31995;&#32479;&#20043;&#65288;&#20116;&#65289;&#65306;driver API</A>&#12290;&#20027;&#35201;&#20197;&#19968;&#20010;&#26222;&#36890;&#30340;&#39537;&#21160;&#31243;&#24207;&#20026;&#35270;&#35282;&#65292;&#30475;&#24453;linux interrupt subsystem&#25552;&#20379;&#30340;API&#65292;&#22914;&#20309;&#21033;&#29992;&#36825;&#20123;API&#65292;&#20998;&#37197;&#36164;&#28304;&#65292;&#26159;&#21542;&#36164;&#28304;&#65292;&#22914;&#20309;&#22788;&#29702;&#20013;&#26029;&#30456;&#20851;&#30340;&#21516;&#27493;&#38382;&#39064;&#31561;&#31561;&#12290; </P>
<P>6&#12289;<A href="http://www.wowotech.net/linux_kenrel/irq_handler.html">linux kernel&#30340;&#20013;&#26029;&#23376;&#31995;&#32479;&#20043;&#65288;&#20845;&#65289;&#65306;ARM&#20013;&#26029;&#22788;&#29702;&#36807;&#31243;</A>&#65292;&#36825;&#20221;&#25991;&#26723;&#20197;ARM CPU&#20026;&#20363;&#65292;&#25551;&#36848;ARM&#30456;&#20851;&#30340;&#20013;&#26029;&#22788;&#29702;&#36807;&#31243; </P>
<P>7&#12289;<A href="http://www.wowotech.net/linux_kenrel/gic-irq-chip-driver.html">linux kernel&#30340;&#20013;&#26029;&#23376;&#31995;&#32479;&#20043;&#65288;&#19971;&#65289;&#65306;</A>GIC&#20195;&#30721;&#20998;&#26512;&#65292;&#36825;&#20221;&#25991;&#26723;&#26159;&#20197;&#19968;&#20010;&#20855;&#20307;&#30340;interrupt controller&#20026;&#20363;&#65292;&#25551;&#36848;irq chip driver&#30340;&#20195;&#30721;&#26500;&#25104;&#24773;&#20917;&#12290; </P>
<P>8&#12289;<A href="http://www.wowotech.net/linux_kenrel/soft-irq.html" target=_blank>linux kernel&#30340;&#20013;&#26029;&#23376;&#31995;&#32479;&#20043;&#65288;&#20843;&#65289;&#65306;softirq</A> </P>
<P>9&#12289;<A href="http://www.wowotech.net/irq_subsystem/tasklet.html" target=_blank>linux kernel&#30340;&#20013;&#26029;&#23376;&#31995;&#32479;&#20043;&#65288;&#20061;&#65289;&#65306;tasklet</A>