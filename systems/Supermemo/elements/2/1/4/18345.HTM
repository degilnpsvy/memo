<H3 style="LINE-HEIGHT: normal; TEXT-TRANSFORM: none; FONT-VARIANT: normal; FONT-STYLE: normal; TEXT-INDENT: 0px; FONT-FAMILY: Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" class=section>3.6 Options Controlling Objective-C and Objective-C++ Dialects</H3>
<P style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px"><A name=index-compiler-options_002c-Objective-C-and-Objective-C_002b_002b-219></A><A name=index-Objective-C-and-Objective-C_002b_002b-options_002c-command-line-220></A><A name=index-options_002c-Objective-C-and-Objective-C_002b_002b-221></A>(NOTE: This manual does not describe the Objective-C and Objective-C++ languages themselves. See<SPAN class=Apple-converted-space>&nbsp;</SPAN><A href="https://gcc.gnu.org/onlinedocs/gcc-4.9.1/gcc/Standards.html#Standards">Language Standards Supported by GCC</A>, for references.)</P>
<P style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">This section describes the command-line options that are only meaningful for Objective-C and Objective-C++ programs. You can also use most of the language-independent GNU compiler options. For example, you might compile a file<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>some_class.m</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>like this:</P><PRE style="LINE-HEIGHT: normal; TEXT-TRANSFORM: none; FONT-VARIANT: normal; FONT-STYLE: normal; TEXT-INDENT: 0px; LETTER-SPACING: normal; COLOR: rgb(0,0,0); FONT-SIZE: smaller; FONT-WEIGHT: normal; WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" class=smallexample>     gcc -g -fgnu-runtime -O -c some_class.m
</PRE>
<P style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" class=noindent>In this example,<SPAN class=Apple-converted-space>&nbsp;</SPAN><SAMP><SPAN class=option>-fgnu-runtime</SPAN></SAMP><SPAN class=Apple-converted-space>&nbsp;</SPAN>is an option meant only for Objective-C and Objective-C++ programs; you can use the other options with any language supported by GCC.</P>
<P style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">Note that since Objective-C is an extension of the C language, Objective-C compilations may also use options specific to the C front-end (e.g.,<SAMP><SPAN class=option>-Wtraditional</SPAN></SAMP>). Similarly, Objective-C++ compilations may use C++-specific options (e.g.,<SPAN class=Apple-converted-space>&nbsp;</SPAN><SAMP><SPAN class=option>-Wabi</SPAN></SAMP>).</P>
<P style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">Here is a list of options that are<SPAN class=Apple-converted-space>&nbsp;</SPAN><EM>only</EM><SPAN class=Apple-converted-space>&nbsp;</SPAN>for compiling Objective-C and Objective-C++ programs:</P>
<DL style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">
<DT><CODE>-fconstant-string-class=</CODE><VAR>class-name</VAR></DT>
<DD><A name=index-fconstant-string-class-222></A>Use<SPAN class=Apple-converted-space>&nbsp;</SPAN><VAR>class-name</VAR><SPAN class=Apple-converted-space>&nbsp;</SPAN>as the name of the class to instantiate for each literal string specified with the syntax<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>@"..."</CODE>. The default class name is<CODE>NXConstantString</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>if the GNU runtime is being used, and<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>NSConstantString</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>if the NeXT runtime is being used (see below). The<SPAN class=Apple-converted-space>&nbsp;</SPAN><SAMP><SPAN class=option>-fconstant-cfstrings</SPAN></SAMP>option, if also present, overrides the<SPAN class=Apple-converted-space>&nbsp;</SPAN><SAMP><SPAN class=option>-fconstant-string-class</SPAN></SAMP><SPAN class=Apple-converted-space>&nbsp;</SPAN>setting and cause<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>@"..."</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>literals to be laid out as constant CoreFoundation strings.<SPAN class=Apple-converted-space>&nbsp;</SPAN><BR></DD>
<DT><CODE>-fgnu-runtime</CODE></DT>
<DD><A name=index-fgnu-runtime-223></A>Generate object code compatible with the standard GNU Objective-C runtime. This is the default for most types of systems.<SPAN class=Apple-converted-space>&nbsp;</SPAN><BR></DD>
<DT><CODE>-fnext-runtime</CODE></DT>
<DD><A name=index-fnext-runtime-224></A>Generate output compatible with the NeXT runtime. This is the default for NeXT-based systems, including Darwin and Mac OS X. The macro<CODE>__NEXT_RUNTIME__</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>is predefined if (and only if) this option is used.<SPAN class=Apple-converted-space>&nbsp;</SPAN><BR></DD>
<DT><CODE>-fno-nil-receivers</CODE></DT>
<DD><A name=index-fno-nil-receivers-225></A>Assume that all Objective-C message dispatches (<CODE>[receiver message:arg]</CODE>) in this translation unit ensure that the receiver is not<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>nil</CODE>. This allows for more efficient entry points in the runtime to be used. This option is only available in conjunction with the NeXT runtime and ABI version 0 or 1.<SPAN class=Apple-converted-space>&nbsp;</SPAN><BR></DD>
<DT><CODE>-fobjc-abi-version=</CODE><VAR>n</VAR></DT>
<DD><A name=index-fobjc-abi-version-226></A>Use version<SPAN class=Apple-converted-space>&nbsp;</SPAN><VAR>n</VAR><SPAN class=Apple-converted-space>&nbsp;</SPAN>of the Objective-C ABI for the selected runtime. This option is currently supported only for the NeXT runtime. In that case, Version 0 is the traditional (32-bit) ABI without support for properties and other Objective-C 2.0 additions. Version 1 is the traditional (32-bit) ABI with support for properties and other Objective-C 2.0 additions. Version 2 is the modern (64-bit) ABI. If nothing is specified, the default is Version 0 on 32-bit target machines, and Version 2 on 64-bit target machines.<SPAN class=Apple-converted-space>&nbsp;</SPAN><BR></DD>
<DT><CODE>-fobjc-call-cxx-cdtors</CODE></DT>
<DD><A name=index-fobjc-call-cxx-cdtors-227></A>For each Objective-C class, check if any of its instance variables is a C++ object with a non-trivial default constructor. If so, synthesize a special<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>- (id) .cxx_construct</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>instance method which runs non-trivial default constructors on any such instance variables, in order, and then return<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>self</CODE>. Similarly, check if any instance variable is a C++ object with a non-trivial destructor, and if so, synthesize a special<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>- (void) .cxx_destruct</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>method which runs all such default destructors, in reverse order.
<P>The<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>- (id) .cxx_construct</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>and<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>- (void) .cxx_destruct</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>methods thusly generated only operate on instance variables declared in the current Objective-C class, and not those inherited from superclasses. It is the responsibility of the Objective-C runtime to invoke all such methods in an object's inheritance hierarchy. The<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>- (id) .cxx_construct</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>methods are invoked by the runtime immediately after a new object instance is allocated; the<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>- (void) .cxx_destruct</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>methods are invoked immediately before the runtime deallocates an object instance.</P>
<P>As of this writing, only the NeXT runtime on Mac OS X 10.4 and later has support for invoking the<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>- (id) .cxx_construct</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>and<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>- (void) .cxx_destruct</CODE>methods.<SPAN class=Apple-converted-space>&nbsp;</SPAN><BR></P></DD>
<DT><CODE>-fobjc-direct-dispatch</CODE></DT>
<DD><A name=index-fobjc-direct-dispatch-228></A>Allow fast jumps to the message dispatcher. On Darwin this is accomplished via the comm page.<SPAN class=Apple-converted-space>&nbsp;</SPAN><BR></DD>
<DT><CODE>-fobjc-exceptions</CODE></DT>
<DD><A name=index-fobjc-exceptions-229></A>Enable syntactic support for structured exception handling in Objective-C, similar to what is offered by C++ and Java. This option is required to use the Objective-C keywords<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>@try</CODE>,<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>@throw</CODE>,<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>@catch</CODE>,<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>@finally</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>and<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>@synchronized</CODE>. This option is available with both the GNU runtime and the NeXT runtime (but not available in conjunction with the NeXT runtime on Mac OS X 10.2 and earlier).<SPAN class=Apple-converted-space>&nbsp;</SPAN><BR></DD>
<DT><CODE>-fobjc-gc</CODE></DT>
<DD><A name=index-fobjc-gc-230></A>Enable garbage collection (GC) in Objective-C and Objective-C++ programs. This option is only available with the NeXT runtime; the GNU runtime has a different garbage collection implementation that does not require special compiler flags.<SPAN class=Apple-converted-space>&nbsp;</SPAN><BR></DD>
<DT><CODE>-fobjc-nilcheck</CODE></DT>
<DD><A name=index-fobjc-nilcheck-231></A>For the NeXT runtime with version 2 of the ABI, check for a nil receiver in method invocations before doing the actual method call. This is the default and can be disabled using<SPAN class=Apple-converted-space>&nbsp;</SPAN><SAMP><SPAN class=option>-fno-objc-nilcheck</SPAN></SAMP>. Class methods and super calls are never checked for nil in this way no matter what this flag is set to. Currently this flag does nothing when the GNU runtime, or an older version of the NeXT runtime ABI, is used.<SPAN class=Apple-converted-space>&nbsp;</SPAN><BR></DD>
<DT><CODE>-fobjc-std=objc1</CODE></DT>
<DD><A name=index-fobjc-std-232></A>Conform to the language syntax of Objective-C 1.0, the language recognized by GCC 4.0. This only affects the Objective-C additions to the C/C++ language; it does not affect conformance to C/C++ standards, which is controlled by the separate C/C++ dialect option flags. When this option is used with the Objective-C or Objective-C++ compiler, any Objective-C syntax that is not recognized by GCC 4.0 is rejected. This is useful if you need to make sure that your Objective-C code can be compiled with older versions of GCC.<SPAN class=Apple-converted-space>&nbsp;</SPAN><BR></DD>
<DT><CODE>-freplace-objc-classes</CODE></DT>
<DD><A name=index-freplace-objc-classes-233></A>Emit a special marker instructing<SPAN class=Apple-converted-space>&nbsp;</SPAN><SAMP><SPAN class=command>ld(1)</SPAN></SAMP><SPAN class=Apple-converted-space>&nbsp;</SPAN>not to statically link in the resulting object file, and allow<SPAN class=Apple-converted-space>&nbsp;</SPAN><SAMP><SPAN class=command>dyld(1)</SPAN></SAMP><SPAN class=Apple-converted-space>&nbsp;</SPAN>to load it in at run time instead. This is used in conjunction with the Fix-and-Continue debugging mode, where the object file in question may be recompiled and dynamically reloaded in the course of program execution, without the need to restart the program itself. Currently, Fix-and-Continue functionality is only available in conjunction with the NeXT runtime on Mac OS X 10.3 and later.<SPAN class=Apple-converted-space>&nbsp;</SPAN><BR></DD>
<DT><CODE>-fzero-link</CODE></DT>
<DD><A name=index-fzero-link-234></A>When compiling for the NeXT runtime, the compiler ordinarily replaces calls to<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>objc_getClass("...")</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>(when the name of the class is known at compile time) with static class references that get initialized at load time, which improves run-time performance. Specifying the<SPAN class=Apple-converted-space>&nbsp;</SPAN><SAMP><SPAN class=option>-fzero-link</SPAN></SAMP>flag suppresses this behavior and causes calls to<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>objc_getClass("...")</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>to be retained. This is useful in Zero-Link debugging mode, since it allows for individual class implementations to be modified during program execution. The GNU runtime currently always retains calls to<CODE>objc_get_class("...")</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>regardless of command-line options.<SPAN class=Apple-converted-space>&nbsp;</SPAN><BR></DD>
<DT><CODE>-gen-decls</CODE></DT>
<DD><A name=index-gen-decls-235></A>Dump interface declarations for all classes seen in the source file to a file named<SPAN class=Apple-converted-space>&nbsp;</SPAN><SAMP><VAR>sourcename</VAR><SPAN class=file>.decl</SPAN></SAMP>.<SPAN class=Apple-converted-space>&nbsp;</SPAN><BR></DD>
<DT><CODE>-Wassign-intercept<SPAN class=Apple-converted-space>&nbsp;</SPAN></CODE><SPAN style="FONT-FAMILY: serif; FONT-WEIGHT: normal" class=roman>(Objective-C and Objective-C++ only)</SPAN></DT>
<DD><A name=index-Wassign-intercept-236></A><A name=index-Wno-assign-intercept-237></A>Warn whenever an Objective-C assignment is being intercepted by the garbage collector.<SPAN class=Apple-converted-space>&nbsp;</SPAN><BR></DD>
<DT><CODE>-Wno-protocol<SPAN class=Apple-converted-space>&nbsp;</SPAN></CODE><SPAN style="FONT-FAMILY: serif; FONT-WEIGHT: normal" class=roman>(Objective-C and Objective-C++ only)</SPAN></DT>
<DD><A name=index-Wno-protocol-238></A><A name=index-Wprotocol-239></A>If a class is declared to implement a protocol, a warning is issued for every method in the protocol that is not implemented by the class. The default behavior is to issue a warning for every method not explicitly implemented in the class, even if a method implementation is inherited from the superclass. If you use the<SPAN class=Apple-converted-space>&nbsp;</SPAN><SAMP><SPAN class=option>-Wno-protocol</SPAN></SAMP><SPAN class=Apple-converted-space>&nbsp;</SPAN>option, then methods inherited from the superclass are considered to be implemented, and no warning is issued for them.<SPAN class=Apple-converted-space>&nbsp;</SPAN><BR></DD>
<DT><CODE>-Wselector<SPAN class=Apple-converted-space>&nbsp;</SPAN></CODE><SPAN style="FONT-FAMILY: serif; FONT-WEIGHT: normal" class=roman>(Objective-C and Objective-C++ only)</SPAN></DT>
<DD><A name=index-Wselector-240></A><A name=index-Wno-selector-241></A>Warn if multiple methods of different types for the same selector are found during compilation. The check is performed on the list of methods in the final stage of compilation. Additionally, a check is performed for each selector appearing in a<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>@selector(...)</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>expression, and a corresponding method for that selector has been found during compilation. Because these checks scan the method table only at the end of compilation, these warnings are not produced if the final stage of compilation is not reached, for example because an error is found during compilation, or because the<SPAN class=Apple-converted-space>&nbsp;</SPAN><SAMP><SPAN class=option>-fsyntax-only</SPAN></SAMP><SPAN class=Apple-converted-space>&nbsp;</SPAN>option is being used.<SPAN class=Apple-converted-space>&nbsp;</SPAN><BR></DD>
<DT><CODE>-Wstrict-selector-match<SPAN class=Apple-converted-space>&nbsp;</SPAN></CODE><SPAN style="FONT-FAMILY: serif; FONT-WEIGHT: normal" class=roman>(Objective-C and Objective-C++ only)</SPAN></DT>
<DD><A name=index-Wstrict-selector-match-242></A><A name=index-Wno-strict-selector-match-243></A>Warn if multiple methods with differing argument and/or return types are found for a given selector when attempting to send a message using this selector to a receiver of type<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>id</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>or<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>Class</CODE>. When this flag is off (which is the default behavior), the compiler omits such warnings if any differences found are confined to types that share the same size and alignment.<SPAN class=Apple-converted-space>&nbsp;</SPAN><BR></DD>
<DT><CODE>-Wundeclared-selector<SPAN class=Apple-converted-space>&nbsp;</SPAN></CODE><SPAN style="FONT-FAMILY: serif; FONT-WEIGHT: normal" class=roman>(Objective-C and Objective-C++ only)</SPAN></DT>
<DD><A name=index-Wundeclared-selector-244></A><A name=index-Wno-undeclared-selector-245></A>Warn if a<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>@selector(...)</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>expression referring to an undeclared selector is found. A selector is considered undeclared if no method with that name has been declared before the<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>@selector(...)</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>expression, either explicitly in an<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>@interface</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>or<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>@protocol</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>declaration, or implicitly in an<CODE>@implementation</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>section. This option always performs its checks as soon as a<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>@selector(...)</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>expression is found, while<SPAN class=Apple-converted-space>&nbsp;</SPAN><SAMP><SPAN class=option>-Wselector</SPAN></SAMP><SPAN class=Apple-converted-space>&nbsp;</SPAN>only performs its checks in the final stage of compilation. This also enforces the coding style convention that methods and selectors must be declared before being used.<SPAN class=Apple-converted-space>&nbsp;</SPAN><BR></DD>
<DT><CODE>-print-objc-runtime-info</CODE></DT>
<DD><A name=index-print-objc-runtime-info-246></A>Generate C header describing the largest structure that is passed by value, if any.</DD></DL>