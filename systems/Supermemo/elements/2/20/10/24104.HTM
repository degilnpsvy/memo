<TT>wake_up_interruptible()</TT></P><TT><PRE><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/include/linux/wait.h#222" name=222>222</A>#<B>define</B> <A class=xm name=wake_up_interruptible></A><A class=xm href="http://172.21.12.145:8080/source/s?refs=wake_up_interruptible&amp;project=linux-4.5">wake_up_interruptible</A>(x)	<A href="http://172.21.12.145:8080/source/s?defs=__wake_up&amp;project=linux-4.5">__wake_up</A>(x, <A href="http://172.21.12.145:8080/source/s?defs=TASK_INTERRUPTIBLE&amp;project=linux-4.5">TASK_INTERRUPTIBLE</A>, <SPAN class=n>1</SPAN>, <A href="http://172.21.12.145:8080/source/s?defs=NULL&amp;project=linux-4.5">NULL</A>)
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/include/linux/wait.h#223" name=223>223</A>#<B>define</B> <A class=xm name=wake_up_interruptible_nr></A><A class=xm href="http://172.21.12.145:8080/source/s?refs=wake_up_interruptible_nr&amp;project=linux-4.5">wake_up_interruptible_nr</A>(x, <A href="http://172.21.12.145:8080/source/s?defs=nr&amp;project=linux-4.5">nr</A>)	<A href="http://172.21.12.145:8080/source/s?defs=__wake_up&amp;project=linux-4.5">__wake_up</A>(x, <A href="http://172.21.12.145:8080/source/s?defs=TASK_INTERRUPTIBLE&amp;project=linux-4.5">TASK_INTERRUPTIBLE</A>, <A href="http://172.21.12.145:8080/source/s?defs=nr&amp;project=linux-4.5">nr</A>, <A href="http://172.21.12.145:8080/source/s?defs=NULL&amp;project=linux-4.5">NULL</A>)
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/include/linux/wait.h#224" name=224>224</A>#<B>define</B> <A class=xm name=wake_up_interruptible_all></A><A class=xm href="http://172.21.12.145:8080/source/s?refs=wake_up_interruptible_all&amp;project=linux-4.5">wake_up_interruptible_all</A>(x)	<A href="http://172.21.12.145:8080/source/s?defs=__wake_up&amp;project=linux-4.5">__wake_up</A>(x, <A href="http://172.21.12.145:8080/source/s?defs=TASK_INTERRUPTIBLE&amp;project=linux-4.5">TASK_INTERRUPTIBLE</A>, 0, <A href="http://172.21.12.145:8080/source/s?defs=NULL&amp;project=linux-4.5">NULL</A>)
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/include/linux/wait.h#225" name=225>225</A>#<B>define</B> <A class=xm name=wake_up_interruptible_sync></A><A class=xm href="http://172.21.12.145:8080/source/s?refs=wake_up_interruptible_sync&amp;project=linux-4.5">wake_up_interruptible_sync</A>(x)	<A href="http://172.21.12.145:8080/source/s?defs=__wake_up_sync&amp;project=linux-4.5">__wake_up_sync</A>((x), <A href="http://172.21.12.145:8080/source/s?defs=TASK_INTERRUPTIBLE&amp;project=linux-4.5">TASK_INTERRUPTIBLE</A>, <SPAN class=n>1</SPAN>)</PRE><PRE><PRE><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/sched/wait.c#79" name=79>79</A><SPAN class=c>/**
<A class=hl href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/sched/wait.c#80" name=80>80</A> * __wake_up - wake up threads blocked on a waitqueue.
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/sched/wait.c#81" name=81>81</A> * @q: the waitqueue
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/sched/wait.c#82" name=82>82</A> * @mode: which threads
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/sched/wait.c#83" name=83>83</A> * @nr_exclusive: how many wake-one or wake-many threads to wake up
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/sched/wait.c#84" name=84>84</A> * @key: is directly passed to the wakeup function
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/sched/wait.c#85" name=85>85</A> *
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/sched/wait.c#86" name=86>86</A> * It may be assumed that this function implies a write memory barrier before
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/sched/wait.c#87" name=87>87</A> * changing the task state if and only if any tasks are woken up.
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/sched/wait.c#88" name=88>88</A> */</SPAN>
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/sched/wait.c#89" name=89>89</A><B>void</B> <A class=xf name=__wake_up></A><A class=xf href="http://172.21.12.145:8080/source/s?refs=__wake_up&amp;project=linux-4.5">__wake_up</A>(<A href="http://172.21.12.145:8080/source/s?defs=wait_queue_head_t&amp;project=linux-4.5">wait_queue_head_t</A> *q, <B>unsigned</B> <B>int</B> <A class=xa name=mode></A><A class=xa href="http://172.21.12.145:8080/source/s?refs=mode&amp;project=linux-4.5">mode</A>,
<A class=hl href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/sched/wait.c#90" name=90>90</A>			<B>int</B> <A href="http://172.21.12.145:8080/source/s?defs=nr_exclusive&amp;project=linux-4.5">nr_exclusive</A>, <B>void</B> *<A href="http://172.21.12.145:8080/source/s?defs=key&amp;project=linux-4.5">key</A>)
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/sched/wait.c#91" name=91>91</A>{
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/sched/wait.c#92" name=92>92</A>	<B>unsigned</B> <B>long</B> <A class=xl name=flags></A><A class=xl href="http://172.21.12.145:8080/source/s?refs=flags&amp;project=linux-4.5">flags</A>;
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/sched/wait.c#93" name=93>93</A>
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/sched/wait.c#94" name=94>94</A>	<A href="http://172.21.12.145:8080/source/s?defs=spin_lock_irqsave&amp;project=linux-4.5">spin_lock_irqsave</A>(&amp;q-&gt;<A href="http://172.21.12.145:8080/source/s?defs=lock&amp;project=linux-4.5">lock</A>, <A href="http://172.21.12.145:8080/source/s?defs=flags&amp;project=linux-4.5">flags</A>);
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/sched/wait.c#95" name=95>95</A>	<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/sched/wait.c#__wake_up_common">__wake_up_common</A>(q, <A href="http://172.21.12.145:8080/source/s?defs=mode&amp;project=linux-4.5">mode</A>, <A href="http://172.21.12.145:8080/source/s?defs=nr_exclusive&amp;project=linux-4.5">nr_exclusive</A>, 0, <A href="http://172.21.12.145:8080/source/s?defs=key&amp;project=linux-4.5">key</A>);
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/sched/wait.c#96" name=96>96</A>	<A href="http://172.21.12.145:8080/source/s?defs=spin_unlock_irqrestore&amp;project=linux-4.5">spin_unlock_irqrestore</A>(&amp;q-&gt;<A href="http://172.21.12.145:8080/source/s?defs=lock&amp;project=linux-4.5">lock</A>, <A href="http://172.21.12.145:8080/source/s?defs=flags&amp;project=linux-4.5">flags</A>);
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/sched/wait.c#97" name=97>97</A>}
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/sched/wait.c#98" name=98>98</A><A href="http://172.21.12.145:8080/source/s?defs=EXPORT_SYMBOL&amp;project=linux-4.5">EXPORT_SYMBOL</A>(<A class=xv name=__wake_up></A><A class=xv href="http://172.21.12.145:8080/source/s?refs=__wake_up&amp;project=linux-4.5">__wake_up</A>);</PRE><PRE>&nbsp;</PRE><PRE><PRE><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/sched/wait.c#56" name=56>56</A><SPAN class=c>/*
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/sched/wait.c#57" name=57>57</A> * The core wakeup function. Non-exclusive wakeups (nr_exclusive == 0) just
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/sched/wait.c#58" name=58>58</A> * wake everything up. If it's an exclusive wakeup (nr_exclusive == small +ve
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/sched/wait.c#59" name=59>59</A> * number) then we wake all the non-exclusive tasks and one exclusive task.
<A class=hl href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/sched/wait.c#60" name=60>60</A> *
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/sched/wait.c#61" name=61>61</A> * There are circumstances in which we can try to wake a task which has already
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/sched/wait.c#62" name=62>62</A> * started to run but is not in state TASK_RUNNING. try_to_wake_up() returns
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/sched/wait.c#63" name=63>63</A> * zero in this (rare) case, and we handle it by continuing to scan the queue.
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/sched/wait.c#64" name=64>64</A> */</SPAN>
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/sched/wait.c#65" name=65>65</A><B>static</B> <B>void</B> <A class=xf name=__wake_up_common></A><A class=xf href="http://172.21.12.145:8080/source/s?refs=__wake_up_common&amp;project=linux-4.5">__wake_up_common</A>(<A href="http://172.21.12.145:8080/source/s?defs=wait_queue_head_t&amp;project=linux-4.5">wait_queue_head_t</A> *q, <B>unsigned</B> <B>int</B> <A class=xa name=mode></A><A class=xa href="http://172.21.12.145:8080/source/s?refs=mode&amp;project=linux-4.5">mode</A>,
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/sched/wait.c#66" name=66>66</A>			<B>int</B> <A href="http://172.21.12.145:8080/source/s?defs=nr_exclusive&amp;project=linux-4.5">nr_exclusive</A>, <B>int</B> <A href="http://172.21.12.145:8080/source/s?defs=wake_flags&amp;project=linux-4.5">wake_flags</A>, <B>void</B> *<A href="http://172.21.12.145:8080/source/s?defs=key&amp;project=linux-4.5">key</A>)
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/sched/wait.c#67" name=67>67</A>{
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/sched/wait.c#68" name=68>68</A>	<A href="http://172.21.12.145:8080/source/s?defs=wait_queue_t&amp;project=linux-4.5">wait_queue_t</A> *<A class=xl name=curr></A><A class=xl href="http://172.21.12.145:8080/source/s?refs=curr&amp;project=linux-4.5">curr</A>, *<A class=xl name=next></A><A class=xl href="http://172.21.12.145:8080/source/s?refs=next&amp;project=linux-4.5">next</A>;
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/sched/wait.c#69" name=69>69</A>
<A class=hl href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/sched/wait.c#70" name=70>70</A>	<A href="http://172.21.12.145:8080/source/s?defs=list_for_each_entry_safe&amp;project=linux-4.5">list_for_each_entry_safe</A>(<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/sched/wait.c#curr">curr</A>, <A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/sched/wait.c#next">next</A>, &amp;q-&gt;<A href="http://172.21.12.145:8080/source/s?defs=task_list&amp;project=linux-4.5">task_list</A>, <A href="http://172.21.12.145:8080/source/s?defs=task_list&amp;project=linux-4.5">task_list</A>) {
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/sched/wait.c#71" name=71>71</A>		<B>unsigned</B> <A class=xl name=flags></A><A class=xl href="http://172.21.12.145:8080/source/s?refs=flags&amp;project=linux-4.5">flags</A> = <A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/sched/wait.c#curr">curr</A>-&gt;<A class=xl name=flags></A><A class=xl href="http://172.21.12.145:8080/source/s?refs=flags&amp;project=linux-4.5">flags</A>;
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/sched/wait.c#72" name=72>72</A>
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/sched/wait.c#73" name=73>73</A>		<B>if</B> (<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/sched/wait.c#curr">curr</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=func&amp;project=linux-4.5">func</A>(<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/sched/wait.c#curr">curr</A>, <A href="http://172.21.12.145:8080/source/s?defs=mode&amp;project=linux-4.5">mode</A>, <A href="http://172.21.12.145:8080/source/s?defs=wake_flags&amp;project=linux-4.5">wake_flags</A>, <A href="http://172.21.12.145:8080/source/s?defs=key&amp;project=linux-4.5">key</A>) &amp;&amp;
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/sched/wait.c#74" name=74>74</A>				(<A href="http://172.21.12.145:8080/source/s?defs=flags&amp;project=linux-4.5">flags</A> &amp; <A href="http://172.21.12.145:8080/source/s?defs=WQ_FLAG_EXCLUSIVE&amp;project=linux-4.5">WQ_FLAG_EXCLUSIVE</A>) &amp;&amp; !--<A href="http://172.21.12.145:8080/source/s?defs=nr_exclusive&amp;project=linux-4.5">nr_exclusive</A>)
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/sched/wait.c#75" name=75>75</A>			<B>break</B>;
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/sched/wait.c#76" name=76>76</A>	}
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/sched/wait.c#77" name=77>77</A>}</PRE></PRE></PRE></TT>