<P class=docText>In many cases, therefore, it's easy to decide whether to use a spinlock or a mutex:</P>
<UL>
<LI>
<P class=docList><A name="but to"></A><FONT class=clozed>If the critical section needs to sleep, you have no choice but to use a mutex. It's illegal to schedule, preempt, or sleep on a wait queue after acquiring a spinlock.</FONT></P>
<LI>
<P class=docList><A name="Because mutexes"></A><FONT class=clozed>Because mutexes put the calling thread to sleep in the face of contention, you have no choice but to use spinlocks inside interrupt handlers. (You will learn more about the constraints of the interrupt context in </FONT><A class=docLink href="http://www.embeddedlinux.org.cn/EssentialLinuxDeviceDrivers/final/ch04.html#ch04"><FONT class=clozed>Chapter 4</FONT></A><FONT class=clozed>.)</FONT></P></LI></UL>