<P class=docText><FONT class=extract>The kernel also provides timer APIs to execute a function at a point of time in the future. You can dynamically define a timer using <TT>init_timer()</TT></FONT><A name="statically create"></A><FONT class=extract> or statically create one with <TT>DEFINE_TIMER()</TT>. After this is done, populate a <TT>timer_list</TT> </FONT><A name=iddle1047></A><A name=iddle1487></A><A name=iddle1489></A><A name=iddle1744></A><A name=iddle3021></A><A name=iddle3989></A><A name=iddle4262></A><A name=iddle4264></A><A name="it using"></A><FONT class=extract>with the address and parameters of your handler function, and register it using <TT>add_timer()</TT></FONT>:</P>
<DIV class=docText><PRE>#include <LINUX timer.h="">

<FONT class=clozed>struct timer_list my_timer;

<FONT class=clozed>init_timer(&amp;my_timer);</FONT>            /* Also see setup_timer() */
my_timer.expire = jiffies + n*HZ; /* n is the timeout in number
                                     of seconds */
my_timer.function = timer_func;   /* Function to execute
                                     after n seconds */
my_timer.data = func_parameter;   /* Parameter to be passed
                                     to timer_func */
add_timer(&amp;my_timer);             /* Start the timer */</FONT></PRE><PRE><PRE><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.6/include/linux/timer.h#12" name=12><FONT class=clozed>12</FONT></A><FONT class=clozed><B>struct</B> </FONT><A class=xs name=timer_list></A><A class=xs href="http://172.21.12.145:8080/source/s?refs=timer_list&amp;project=linux-4.6"><FONT class=clozed>timer_list</FONT></A><FONT class=clozed> {
</FONT><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.6/include/linux/timer.h#13" name=13><FONT class=clozed>13</FONT></A><FONT class=clozed>	</FONT><SPAN class=c><FONT class=clozed>/*
</FONT><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.6/include/linux/timer.h#14" name=14><FONT class=clozed>14</FONT></A><FONT class=clozed>	 * All fields that change during normal runtime grouped to the
</FONT><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.6/include/linux/timer.h#15" name=15><FONT class=clozed>15</FONT></A><FONT class=clozed>	 * same cacheline
</FONT><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.6/include/linux/timer.h#16" name=16><FONT class=clozed>16</FONT></A><FONT class=clozed>	 */</FONT></SPAN>
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.6/include/linux/timer.h#17" name=17><FONT class=clozed>17</FONT></A><FONT class=clozed>	<B>struct</B> </FONT><A href="http://172.21.12.145:8080/source/s?defs=hlist_node&amp;project=linux-4.6"><FONT class=clozed>hlist_node</FONT></A><FONT class=clozed>	</FONT><A class=xmb name=entry></A><A class=xmb href="http://172.21.12.145:8080/source/s?refs=entry&amp;project=linux-4.6"><FONT class=clozed>entry</FONT></A><FONT class=clozed>;
</FONT><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.6/include/linux/timer.h#18" name=18><FONT class=clozed>18</FONT></A><FONT class=clozed>	<B>unsigned</B> <B>long</B>		</FONT><A class=xmb name=expires></A><A class=xmb href="http://172.21.12.145:8080/source/s?refs=expires&amp;project=linux-4.6"><FONT class=clozed>expires</FONT></A><FONT class=clozed>;
</FONT><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.6/include/linux/timer.h#19" name=19><FONT class=clozed>19</FONT></A><FONT class=clozed>	<B>void</B>			(*</FONT><A class=xmb name=function></A><A class=xmb href="http://172.21.12.145:8080/source/s?refs=function&amp;project=linux-4.6"><FONT class=clozed>function</FONT></A><FONT class=clozed>)(<B>unsigned</B> <B>long</B>);
</FONT><A class=hl href="http://172.21.12.145:8080/source/xref/linux-4.6/include/linux/timer.h#20" name=20><FONT class=clozed>20</FONT></A><FONT class=clozed>	<B>unsigned</B> <B>long</B>		</FONT><A class=xmb name=data></A><A class=xmb href="http://172.21.12.145:8080/source/s?refs=data&amp;project=linux-4.6"><FONT class=clozed>data</FONT></A><FONT class=clozed>;
</FONT><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.6/include/linux/timer.h#21" name=21><FONT class=clozed>21</FONT></A><FONT class=clozed>	</FONT><A href="http://172.21.12.145:8080/source/s?defs=u32&amp;project=linux-4.6"><FONT class=clozed>u32</FONT></A><FONT class=clozed>			</FONT><A class=xmb name=flags></A><A class=xmb href="http://172.21.12.145:8080/source/s?refs=flags&amp;project=linux-4.6"><FONT class=clozed>flags</FONT></A><FONT class=clozed>;
</FONT><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.6/include/linux/timer.h#22" name=22><FONT class=clozed>22</FONT></A><FONT class=clozed>	<B>int</B>			</FONT><A class=xmb name=slack></A><A class=xmb href="http://172.21.12.145:8080/source/s?refs=slack&amp;project=linux-4.6"><FONT class=clozed>slack</FONT></A><FONT class=clozed>;
</FONT><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.6/include/linux/timer.h#23" name=23><FONT class=clozed>23</FONT></A>
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.6/include/linux/timer.h#24" name=24><FONT class=clozed>24</FONT></A><FONT class=clozed>#<B>ifdef</B> </FONT><A href="http://172.21.12.145:8080/source/s?defs=CONFIG_TIMER_STATS&amp;project=linux-4.6"><FONT class=clozed>CONFIG_TIMER_STATS</FONT></A>
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.6/include/linux/timer.h#25" name=25><FONT class=clozed>25</FONT></A><FONT class=clozed>	<B>int</B>			</FONT><A class=xmb name=start_pid></A><A class=xmb href="http://172.21.12.145:8080/source/s?refs=start_pid&amp;project=linux-4.6"><FONT class=clozed>start_pid</FONT></A><FONT class=clozed>;
</FONT><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.6/include/linux/timer.h#26" name=26><FONT class=clozed>26</FONT></A><FONT class=clozed>	<B>void</B>			*</FONT><A class=xmb name=start_site></A><A class=xmb href="http://172.21.12.145:8080/source/s?refs=start_site&amp;project=linux-4.6"><FONT class=clozed>start_site</FONT></A><FONT class=clozed>;
</FONT><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.6/include/linux/timer.h#27" name=27><FONT class=clozed>27</FONT></A><FONT class=clozed>	<B>char</B>			</FONT><A class=xmb name=start_comm></A><A class=xmb href="http://172.21.12.145:8080/source/s?refs=start_comm&amp;project=linux-4.6"><FONT class=clozed>start_comm</FONT></A><FONT class=clozed>[<SPAN class=n>16</SPAN>];
</FONT><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.6/include/linux/timer.h#28" name=28><FONT class=clozed>28</FONT></A><FONT class=clozed>#<B>endif</B>
</FONT><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.6/include/linux/timer.h#29" name=29><FONT class=clozed>29</FONT></A><FONT class=clozed>#<B>ifdef</B> </FONT><A href="http://172.21.12.145:8080/source/s?defs=CONFIG_LOCKDEP&amp;project=linux-4.6"><FONT class=clozed>CONFIG_LOCKDEP</FONT></A>
<A class=hl href="http://172.21.12.145:8080/source/xref/linux-4.6/include/linux/timer.h#30" name=30><FONT class=clozed>30</FONT></A><FONT class=clozed>	<B>struct</B> </FONT><A class=xmb name=lockdep_map></A><A class=xmb href="http://172.21.12.145:8080/source/s?refs=lockdep_map&amp;project=linux-4.6"><FONT class=clozed>lockdep_map</FONT></A><FONT class=clozed>	</FONT><A class=xmb name=lockdep_map></A><A class=xmb href="http://172.21.12.145:8080/source/s?refs=lockdep_map&amp;project=linux-4.6"><FONT class=clozed>lockdep_map</FONT></A><FONT class=clozed>;
</FONT><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.6/include/linux/timer.h#31" name=31><FONT class=clozed>31</FONT></A><FONT class=clozed>#<B>endif</B>
</FONT><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.6/include/linux/timer.h#32" name=32><FONT class=clozed>32</FONT></A><FONT class=clozed>};</FONT></PRE></PRE></DIV>