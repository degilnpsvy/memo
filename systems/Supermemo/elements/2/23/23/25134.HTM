Note that the "before" in rule 1 is very important.&nbsp; You should never<BR>do something like:</P>
<P>&nbsp;task = kthread_run(more_data_handling, data, "more_data_handling");<BR>&nbsp;if (task == ERR_PTR(-ENOMEM)) {<BR>&nbsp;&nbsp;rv = -ENOMEM;<BR>&nbsp;&nbsp;goto out;<BR>&nbsp;} else<BR>&nbsp;&nbsp;/* BAD BAD BAD - get is after the handoff */<BR>&nbsp;&nbsp;kref_get(&amp;data-&gt;refcount);</P>
<P>Don't assume you know what you are doing and use the above construct.<BR>First of all, you may not know what you are doing.&nbsp; Second, you may<BR>know what you are doing (there are some situations where locking is<BR>involved where the above may be legal) but someone else who doesn't<BR>know what they are doing may change the code or copy the code.&nbsp; It's<BR>bad style.&nbsp; Don't do it.