<P class=docText>Here's the code region from <A class=docLink href="http://www.embeddedlinux.org.cn/EssentialLinuxDeviceDrivers/final/ch03.html#ch03ex01">Listing 3.1</A><A name="waiting for"></A> that puts mykthread to sleep while waiting for events:</P>
<DIV class=docText><PRE><FONT class=clozed>add_wait_queue(&amp;myevent_waitqueue, &amp;wait)</FONT>;
for (;;) {

  /* ... */
  <FONT class=clozed>set_current_state(TASK_INTERRUPTIBLE);
  schedule();    </FONT>/* Relinquish the processor */
  /* Point A */

  /* ... */
}
set_current_state(TASK_RUNNING);
remove_wait_queue(&amp;myevent_waitqueue, &amp;wait);</PRE></DIV>