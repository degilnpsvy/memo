static int get_kobj_path_length(struct kobject *kobj)<BR>{<BR>&nbsp;int length = 1;<BR>&nbsp;struct kobject *parent = kobj;</P>
<P>&nbsp;/* walk up the ancestors until we hit the one pointing to the<BR>&nbsp; * root.<BR>&nbsp; * Add 1 to strlen for leading '/' of each level.<BR>&nbsp; */<BR>&nbsp;do {<BR>&nbsp;&nbsp;if (kobject_name(parent) == NULL)<BR>&nbsp;&nbsp;&nbsp;return 0;<BR>&nbsp;&nbsp;length += strlen(kobject_name(parent)) + 1;<BR>&nbsp;&nbsp;parent = parent-&gt;parent;<BR>&nbsp;} while (parent);<BR>&nbsp;return length;<BR>}