Programming Interface<BR>~~~~~~~~~~~~~~~~~~~~~<BR>The bus driver that discovers the device uses this to register the<BR>device with the core: 
<P></P>
<P><FONT class=extract>int device_register(struct device * dev);</FONT></P>
<P><FONT class=extract>The bus should initialize the following fields:</FONT></P>
<P><FONT class=extract>&nbsp;&nbsp;&nbsp; - parent<BR>&nbsp;&nbsp;&nbsp; - name<BR>&nbsp;&nbsp;&nbsp; - bus_id<BR>&nbsp;&nbsp;&nbsp; - bus</FONT></P>
<P><FONT class=extract>A device is removed from the core when its reference count goes to<BR>0. The reference count can be adjusted using:</FONT></P>
<P><FONT class=extract>struct device * get_device(struct device * dev);<BR>void put_device(struct device * dev);</FONT></P>
<P><FONT class=extract>get_device() will return a pointer to the struct device passed to it<BR>if the reference is not already 0 (if it's in the process of being<BR>removed already).</FONT></P>
<P><FONT class=extract>A driver can access the lock in the device structure using: </FONT></P>
<P><FONT class=extract>void lock_device(struct device * dev);<BR>void unlock_device(struct device * dev);</FONT>