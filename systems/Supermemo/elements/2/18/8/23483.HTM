<B><SPAN lang=EN-US style='FONT-SIZE: 24pt; FONT-FAMILY: "Futura-Bold","sans-serif"; mso-bidi-font-size: 12.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: Futura-Bold; mso-font-kerning: 0pt'>49.7 Anonymous Mappings</SPAN></B></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>An </SPAN><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskervilleEF-RomanIta","sans-serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskervilleEF-RomanIta; mso-font-kerning: 0pt'>anonymous mapping </SPAN><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>is one that doesn&#8217;t have a corresponding file. In this section, we show how to create anonymous mappings, and look at the purposes served by private and shared anonymous mappings.</SPAN></P>
<p><B><SPAN lang=EN-US style="FONT-SIZE: 18pt; FONT-FAMILY: TheSansMonoCondensed-Bold; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: TheSansMonoCondensed-Bold; mso-font-kerning: 0pt"><FONT face=Calibri>MAP_ANONYMOUS </FONT></SPAN></B><B><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "Futura-CondensedBold","sans-serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: Futura-CondensedBold; mso-font-kerning: 0pt'>and </SPAN></B><B><SPAN lang=EN-US style="FONT-SIZE: 18pt; FONT-FAMILY: TheSansMonoCondensed-Bold; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: TheSansMonoCondensed-Bold; mso-font-kerning: 0pt"><FONT face=Calibri>/dev/zero</FONT></SPAN></B></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>On Linux, there are two different, equivalent methods of creating an anonymous mapping with </SPAN><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskervilleEF-RomanIta","sans-serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskervilleEF-RomanIta; mso-font-kerning: 0pt'>mmap()</SPAN><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>:</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: Wingdings; mso-bidi-font-size: 6.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: Wingdings; mso-font-kerning: 0pt">&#56256;&#56442; </SPAN><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>Specify </SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: TheSansMonoCondensed-Plain; mso-bidi-font-size: 8.5pt; mso-bidi-font-family: TheSansMonoCondensed-Plain; mso-font-kerning: 0pt"><FONT face=Calibri>MAP_ANONYMOUS </FONT></SPAN><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>in </SPAN><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskervilleEF-RomanIta","sans-serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskervilleEF-RomanIta; mso-font-kerning: 0pt'>flags </SPAN><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>and specify </SPAN><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskervilleEF-RomanIta","sans-serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskervilleEF-RomanIta; mso-font-kerning: 0pt'>fd </SPAN><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>as &#8211;1. (On Linux, the value of </SPAN><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskervilleEF-RomanIta","sans-serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskervilleEF-RomanIta; mso-font-kerning: 0pt'>fd </SPAN><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>is ignored when </SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: TheSansMonoCondensed-Plain; mso-bidi-font-size: 8.5pt; mso-bidi-font-family: TheSansMonoCondensed-Plain; mso-font-kerning: 0pt"><FONT face=Calibri>MAP_ANONYMOUS </FONT></SPAN><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>is specified. However, some UNIX implementations require </SPAN><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskervilleEF-RomanIta","sans-serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskervilleEF-RomanIta; mso-font-kerning: 0pt'>fd </SPAN><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>to be &#8211;1 when employing </SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: TheSansMonoCondensed-Plain; mso-bidi-font-size: 8.5pt; mso-bidi-font-family: TheSansMonoCondensed-Plain; mso-font-kerning: 0pt"><FONT face=Calibri>MAP_ANONYMOUS</FONT></SPAN><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>, and portable applications should ensure that they do this.)</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 16pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 9.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>We must define either the </SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: TheSansMonoCondensed-Plain; mso-bidi-font-size: 8.0pt; mso-bidi-font-family: TheSansMonoCondensed-Plain; mso-font-kerning: 0pt"><FONT face=Calibri>_BSD_SOURCE </FONT></SPAN><SPAN lang=EN-US style='FONT-SIZE: 16pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 9.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>or the </SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: TheSansMonoCondensed-Plain; mso-bidi-font-size: 8.0pt; mso-bidi-font-family: TheSansMonoCondensed-Plain; mso-font-kerning: 0pt"><FONT face=Calibri>_SVID_SOURCE </FONT></SPAN><SPAN lang=EN-US style='FONT-SIZE: 16pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 9.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>feature test macros to get the definition of </SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: TheSansMonoCondensed-Plain; mso-bidi-font-size: 8.0pt; mso-bidi-font-family: TheSansMonoCondensed-Plain; mso-font-kerning: 0pt"><FONT face=Calibri>MAP_ANONYMOUS </FONT></SPAN><SPAN lang=EN-US style='FONT-SIZE: 16pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 9.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>from </SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: TheSansMonoCondensed-Plain; mso-bidi-font-size: 8.0pt; mso-bidi-font-family: TheSansMonoCondensed-Plain; mso-font-kerning: 0pt"><FONT face=Calibri>&lt;sys/mman.h&gt;</FONT></SPAN><SPAN lang=EN-US style='FONT-SIZE: 16pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 9.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>. Linux provides the constant </SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: TheSansMonoCondensed-Plain; mso-bidi-font-size: 8.0pt; mso-bidi-font-family: TheSansMonoCondensed-Plain; mso-font-kerning: 0pt"><FONT face=Calibri>MAP_ANON </FONT></SPAN><SPAN lang=EN-US style='FONT-SIZE: 16pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 9.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>as a synonym for </SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: TheSansMonoCondensed-Plain; mso-bidi-font-size: 8.0pt; mso-bidi-font-family: TheSansMonoCondensed-Plain; mso-font-kerning: 0pt"><FONT face=Calibri>MAP_ANONYMOUS </FONT></SPAN><SPAN lang=EN-US style='FONT-SIZE: 16pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 9.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>for compatibility with some other UNIX implementations using this alternative name.</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: Wingdings; mso-bidi-font-size: 6.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: Wingdings; mso-font-kerning: 0pt">&#56256;&#56442; </SPAN><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>Open the </SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: TheSansMonoCondensed-Plain; mso-bidi-font-size: 8.5pt; mso-bidi-font-family: TheSansMonoCondensed-Plain; mso-font-kerning: 0pt"><FONT face=Calibri>/dev/zero </FONT></SPAN><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>device file and pass the resulting file descriptor to </SPAN><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskervilleEF-RomanIta","sans-serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskervilleEF-RomanIta; mso-font-kerning: 0pt'>mmap()</SPAN><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>.</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: TheSansMonoCondensed-Plain; mso-bidi-font-size: 8.0pt; mso-bidi-font-family: TheSansMonoCondensed-Plain; mso-font-kerning: 0pt"><FONT face=Calibri>/dev/zero </FONT></SPAN><SPAN lang=EN-US style='FONT-SIZE: 16pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 9.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>is a virtual device that always returns zeros when we read from it. Writes to this device are always discarded. A common use of </SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: TheSansMonoCondensed-Plain; mso-bidi-font-size: 8.0pt; mso-bidi-font-family: TheSansMonoCondensed-Plain; mso-font-kerning: 0pt"><FONT face=Calibri>/dev/zero </FONT></SPAN><SPAN lang=EN-US style='FONT-SIZE: 16pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 9.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>is to populate a file with zeros (e.g., using the </SPAN><SPAN lang=EN-US style='FONT-SIZE: 16pt; FONT-FAMILY: "NewBaskervilleEF-RomanIta","sans-serif"; mso-bidi-font-size: 9.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskervilleEF-RomanIta; mso-font-kerning: 0pt'>dd(1) </SPAN><SPAN lang=EN-US style='FONT-SIZE: 16pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 9.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>command).</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>With both the </SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: TheSansMonoCondensed-Plain; mso-bidi-font-size: 8.5pt; mso-bidi-font-family: TheSansMonoCondensed-Plain; mso-font-kerning: 0pt"><FONT face=Calibri>MAP_ANONYMOUS </FONT></SPAN><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>and the </SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: TheSansMonoCondensed-Plain; mso-bidi-font-size: 8.5pt; mso-bidi-font-family: TheSansMonoCondensed-Plain; mso-font-kerning: 0pt"><FONT face=Calibri>/dev/zero </FONT></SPAN><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>techniques, the bytes of the resulting mapping are initialized to 0. For both techniques, the </SPAN><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskervilleEF-RomanIta","sans-serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskervilleEF-RomanIta; mso-font-kerning: 0pt'>offset </SPAN><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>argument is ignored (since there is no underlying file in which to specify an offset). We show examples of each technique shortly.</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 16pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 9.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>The </SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: TheSansMonoCondensed-Plain; mso-bidi-font-size: 8.0pt; mso-bidi-font-family: TheSansMonoCondensed-Plain; mso-font-kerning: 0pt"><FONT face=Calibri>MAP_ANONYMOUS </FONT></SPAN><SPAN lang=EN-US style='FONT-SIZE: 16pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 9.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>and </SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: TheSansMonoCondensed-Plain; mso-bidi-font-size: 8.0pt; mso-bidi-font-family: TheSansMonoCondensed-Plain; mso-font-kerning: 0pt"><FONT face=Calibri>/dev/zero </FONT></SPAN><SPAN lang=EN-US style='FONT-SIZE: 16pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 9.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>techniques are not specified in SUSv3, although most UNIX implementations support one or both of them. The reason for the existence of two different techniques with the same semantics is that one (</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: TheSansMonoCondensed-Plain; mso-bidi-font-size: 8.0pt; mso-bidi-font-family: TheSansMonoCondensed-Plain; mso-font-kerning: 0pt"><FONT face=Calibri>MAP_ANONYMOUS</FONT></SPAN><SPAN lang=EN-US style='FONT-SIZE: 16pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 9.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>) derives from BSD, while the other (</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: TheSansMonoCondensed-Plain; mso-bidi-font-size: 8.0pt; mso-bidi-font-family: TheSansMonoCondensed-Plain; mso-font-kerning: 0pt"><FONT face=Calibri>/dev/zero</FONT></SPAN><SPAN lang=EN-US style='FONT-SIZE: 16pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 9.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>) derives from System V.</SPAN></P>
<p><B><SPAN lang=EN-US style="FONT-SIZE: 18pt; FONT-FAMILY: TheSansMonoCondensed-Bold; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: TheSansMonoCondensed-Bold; mso-font-kerning: 0pt"><FONT face=Calibri>MAP_PRIVATE </FONT></SPAN></B><B><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "Futura-CondensedBold","sans-serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Bold; mso-bidi-font-family: Futura-CondensedBold; mso-font-kerning: 0pt'>anonymous mappings</SPAN></B></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: TheSansMonoCondensed-Plain; mso-bidi-font-size: 8.5pt; mso-bidi-font-family: TheSansMonoCondensed-Plain; mso-font-kerning: 0pt"><FONT face=Calibri>MAP_PRIVATE </FONT></SPAN><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Bold; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>anonymous mappings are used to allocate blocks of process-private memory initialized to 0. We can use the </SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: TheSansMonoCondensed-Plain; mso-bidi-font-size: 8.5pt; mso-bidi-font-family: TheSansMonoCondensed-Plain; mso-font-kerning: 0pt"><FONT face=Calibri>/dev/zero </FONT></SPAN><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Bold; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>technique to create a </SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: TheSansMonoCondensed-Plain; mso-bidi-font-size: 8.5pt; mso-bidi-font-family: TheSansMonoCondensed-Plain; mso-font-kerning: 0pt"><FONT face=Calibri>MAP_PRIVATE </FONT></SPAN><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Bold; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>anonymous mapping as follows:</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 16pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 9.0pt; mso-fareast-font-family: TheSansMonoCondensed-Bold; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>fd = open("/dev/zero", O_RDWR);</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 16pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 9.0pt; mso-fareast-font-family: TheSansMonoCondensed-Bold; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>if (fd == -1)</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 16pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 9.0pt; mso-fareast-font-family: TheSansMonoCondensed-Bold; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>errExit("open");</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 16pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 9.0pt; mso-fareast-font-family: TheSansMonoCondensed-Bold; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>addr = mmap(NULL, length, PROT_READ | PROT_WRITE, MAP_PRIVATE, fd, 0);</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 16pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 9.0pt; mso-fareast-font-family: TheSansMonoCondensed-Bold; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>if (addr == MAP_FAILED)</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 16pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 9.0pt; mso-fareast-font-family: TheSansMonoCondensed-Bold; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>errExit("mmap");</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 16pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 9.0pt; mso-fareast-font-family: TheSansMonoCondensed-Bold; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>The </SPAN><SPAN lang=EN-US style='FONT-SIZE: 16pt; FONT-FAMILY: "NewBaskervilleEF-RomanIta","sans-serif"; mso-bidi-font-size: 9.0pt; mso-fareast-font-family: TheSansMonoCondensed-Bold; mso-bidi-font-family: NewBaskervilleEF-RomanIta; mso-font-kerning: 0pt'>glibc </SPAN><SPAN lang=EN-US style='FONT-SIZE: 16pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 9.0pt; mso-fareast-font-family: TheSansMonoCondensed-Bold; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>implementation of </SPAN><SPAN lang=EN-US style='FONT-SIZE: 16pt; FONT-FAMILY: "NewBaskervilleEF-RomanIta","sans-serif"; mso-bidi-font-size: 9.0pt; mso-fareast-font-family: TheSansMonoCondensed-Bold; mso-bidi-font-family: NewBaskervilleEF-RomanIta; mso-font-kerning: 0pt'>malloc() </SPAN><SPAN lang=EN-US style='FONT-SIZE: 16pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 9.0pt; mso-fareast-font-family: TheSansMonoCondensed-Bold; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>uses </SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: TheSansMonoCondensed-Plain; mso-bidi-font-size: 8.0pt; mso-bidi-font-family: TheSansMonoCondensed-Plain; mso-font-kerning: 0pt"><FONT face=Calibri>MAP_PRIVATE </FONT></SPAN><SPAN lang=EN-US style='FONT-SIZE: 16pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 9.0pt; mso-fareast-font-family: TheSansMonoCondensed-Bold; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>anonymous mappings to allocate blocks of memory larger than </SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: TheSansMonoCondensed-Plain; mso-bidi-font-size: 8.0pt; mso-bidi-font-family: TheSansMonoCondensed-Plain; mso-font-kerning: 0pt"><FONT face=Calibri>MMAP_THRESHOLD </FONT></SPAN><SPAN lang=EN-US style='FONT-SIZE: 16pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 9.0pt; mso-fareast-font-family: TheSansMonoCondensed-Bold; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>bytes. This makes it possible to efficiently deallocate such blocks (via </SPAN><SPAN lang=EN-US style='FONT-SIZE: 16pt; FONT-FAMILY: "NewBaskervilleEF-RomanIta","sans-serif"; mso-bidi-font-size: 9.0pt; mso-fareast-font-family: TheSansMonoCondensed-Bold; mso-bidi-font-family: NewBaskervilleEF-RomanIta; mso-font-kerning: 0pt'>munmap()</SPAN><SPAN lang=EN-US style='FONT-SIZE: 16pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 9.0pt; mso-fareast-font-family: TheSansMonoCondensed-Bold; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>) if they are later given to </SPAN><SPAN lang=EN-US style='FONT-SIZE: 16pt; FONT-FAMILY: "NewBaskervilleEF-RomanIta","sans-serif"; mso-bidi-font-size: 9.0pt; mso-fareast-font-family: TheSansMonoCondensed-Bold; mso-bidi-font-family: NewBaskervilleEF-RomanIta; mso-font-kerning: 0pt'>free()</SPAN><SPAN lang=EN-US style='FONT-SIZE: 16pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 9.0pt; mso-fareast-font-family: TheSansMonoCondensed-Bold; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>. (It also reduces the possibility of memory fragmentation when repeatedly allocating and deallocating large blocks of memory.) </SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: TheSansMonoCondensed-Plain; mso-bidi-font-size: 8.0pt; mso-bidi-font-family: TheSansMonoCondensed-Plain; mso-font-kerning: 0pt"><FONT face=Calibri>MMAP_THRESHOLD </FONT></SPAN><SPAN lang=EN-US style='FONT-SIZE: 16pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 9.0pt; mso-fareast-font-family: TheSansMonoCondensed-Bold; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>is 128 kB by default, but this parameter is adjustable via the </SPAN><SPAN lang=EN-US style='FONT-SIZE: 16pt; FONT-FAMILY: "NewBaskervilleEF-RomanIta","sans-serif"; mso-bidi-font-size: 9.0pt; mso-fareast-font-family: TheSansMonoCondensed-Bold; mso-bidi-font-family: NewBaskervilleEF-RomanIta; mso-font-kerning: 0pt'>mallopt() </SPAN><SPAN lang=EN-US style='FONT-SIZE: 16pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 9.0pt; mso-fareast-font-family: TheSansMonoCondensed-Bold; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>library function.</SPAN></P>
<p><B><SPAN lang=EN-US style="FONT-SIZE: 18pt; FONT-FAMILY: TheSansMonoCondensed-Bold; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: TheSansMonoCondensed-Bold; mso-font-kerning: 0pt"><FONT face=Calibri>MAP_SHARED </FONT></SPAN></B><B><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "Futura-CondensedBold","sans-serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Bold; mso-bidi-font-family: Futura-CondensedBold; mso-font-kerning: 0pt'>anonymous mappings</SPAN></B></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Bold; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>A </SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: TheSansMonoCondensed-Plain; mso-bidi-font-size: 8.5pt; mso-bidi-font-family: TheSansMonoCondensed-Plain; mso-font-kerning: 0pt"><FONT face=Calibri>MAP_SHARED </FONT></SPAN><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Bold; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>anonymous mapping allows related processes (e.g., parent and child) to share a region of memory without needing a corresponding mapped file.</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: TheSansMonoCondensed-Plain; mso-bidi-font-size: 8.0pt; mso-bidi-font-family: TheSansMonoCondensed-Plain; mso-font-kerning: 0pt"><FONT face=Calibri>MAP_SHARED </FONT></SPAN><SPAN lang=EN-US style='FONT-SIZE: 16pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 9.0pt; mso-fareast-font-family: TheSansMonoCondensed-Bold; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>anonymous mappings are available only with Linux 2.4 and later.</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Bold; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>We can use the </SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: TheSansMonoCondensed-Plain; mso-bidi-font-size: 8.5pt; mso-bidi-font-family: TheSansMonoCondensed-Plain; mso-font-kerning: 0pt"><FONT face=Calibri>MAP_ANONYMOUS </FONT></SPAN><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Bold; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>technique to create a </SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: TheSansMonoCondensed-Plain; mso-bidi-font-size: 8.5pt; mso-bidi-font-family: TheSansMonoCondensed-Plain; mso-font-kerning: 0pt"><FONT face=Calibri>MAP_SHARED </FONT></SPAN><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Bold; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>anonymous mapping as follows:</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Bold; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>addr = mmap(NULL, length, PROT_READ | PROT_WRITE,</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Bold; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>MAP_SHARED | MAP_ANONYMOUS, -1, 0);</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Bold; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>if (addr == MAP_FAILED)</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Bold; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>errExit("mmap");</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Bold; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>If the above code is followed by a call to </SPAN><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskervilleEF-RomanIta","sans-serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Bold; mso-bidi-font-family: NewBaskervilleEF-RomanIta; mso-font-kerning: 0pt'>fork()</SPAN><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Bold; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>, then, because the child produced by </SPAN><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskervilleEF-RomanIta","sans-serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Bold; mso-bidi-font-family: NewBaskervilleEF-RomanIta; mso-font-kerning: 0pt'>fork() </SPAN><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Bold; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>inherits the mapping, both processes share the memory region.</SPAN></P>
<p><B><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "Futura-CondensedBold","sans-serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Bold; mso-bidi-font-family: Futura-CondensedBold; mso-font-kerning: 0pt'>Example program</SPAN></B></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Bold; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>The program in Listing 49-3 demonstrates the use of either </SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: TheSansMonoCondensed-Plain; mso-bidi-font-size: 8.5pt; mso-bidi-font-family: TheSansMonoCondensed-Plain; mso-font-kerning: 0pt"><FONT face=Calibri>MAP_ANONYMOUS </FONT></SPAN><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Bold; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>or </SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: TheSansMonoCondensed-Plain; mso-bidi-font-size: 8.5pt; mso-bidi-font-family: TheSansMonoCondensed-Plain; mso-font-kerning: 0pt"><FONT face=Calibri>/dev/zero </FONT></SPAN><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Bold; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>to share a mapped region between parent and child processes. The choice of technique is determined by whether </SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: TheSansMonoCondensed-Plain; mso-bidi-font-size: 8.5pt; mso-bidi-font-family: TheSansMonoCondensed-Plain; mso-font-kerning: 0pt"><FONT face=Calibri>USE_MAP_ANON </FONT></SPAN><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Bold; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>is defined when compiling the program. The parent initializes an integer in the shared region to 1 prior to calling </SPAN><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskervilleEF-RomanIta","sans-serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Bold; mso-bidi-font-family: NewBaskervilleEF-RomanIta; mso-font-kerning: 0pt'>fork()</SPAN><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskervilleEF-Roman","sans-serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Bold; mso-bidi-font-family: NewBaskervilleEF-Roman; mso-font-kerning: 0pt'>. The child then increments the shared integer and exits, while the parent waits for the child to exit and then prints the value of the integer. When we run this program, we see the following:</SPAN></P>
<p><FONT face=Calibri><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: TheSansMonoCondensed-Plain; mso-bidi-font-size: 8.5pt; mso-bidi-font-family: TheSansMonoCondensed-Plain; mso-font-kerning: 0pt">$ </SPAN><B><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: TheSansMonoCondensed-Bold; mso-bidi-font-size: 8.5pt; mso-bidi-font-family: TheSansMonoCondensed-Bold; mso-font-kerning: 0pt">./anon_mmap</SPAN></B></FONT></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: TheSansMonoCondensed-Plain; mso-bidi-font-size: 8.5pt; mso-bidi-font-family: TheSansMonoCondensed-Plain; mso-font-kerning: 0pt"><FONT face=Calibri>Child started, value = 1</FONT></SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: TheSansMonoCondensed-Plain; mso-bidi-font-size: 8.5pt; mso-bidi-font-family: TheSansMonoCondensed-Plain; mso-font-kerning: 0pt"><FONT face=Calibri>In parent, value = 2</FONT></SPAN></P>
<p><B><SPAN lang=EN-US style='FONT-SIZE: 16pt; FONT-FAMILY: "Futura-Heavy","sans-serif"; mso-bidi-font-size: 9.0pt; mso-bidi-font-family: Futura-Heavy; mso-font-kerning: 0pt'>Listing 49-3: </SPAN></B><SPAN lang=EN-US style='FONT-SIZE: 16pt; FONT-FAMILY: "Futura-Book","sans-serif"; mso-bidi-font-size: 9.0pt; mso-bidi-font-family: Futura-Book; mso-font-kerning: 0pt'>Sharing an anonymous mapping between parent and child processes</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskerville-Roman","serif"; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: NewBaskerville-Roman; mso-font-kerning: 0pt'>&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211; </SPAN><B><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: TheSansMonoCondensed-Bold; mso-bidi-font-size: 8.5pt; mso-bidi-font-family: TheSansMonoCondensed-Bold; mso-font-kerning: 0pt; mso-hansi-font-family: Futura-Heavy"><FONT face=Calibri>mmap/anon_mmap.c</FONT></SPAN></B></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskerville-Roman","serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskerville-Roman; mso-font-kerning: 0pt'>#ifdef USE_MAP_ANON</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskerville-Roman","serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskerville-Roman; mso-font-kerning: 0pt'>#define _BSD_SOURCE /* Get MAP_ANONYMOUS definition */</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskerville-Roman","serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskerville-Roman; mso-font-kerning: 0pt'>#endif</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskerville-Roman","serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskerville-Roman; mso-font-kerning: 0pt'>#include &lt;sys/wait.h&gt;</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskerville-Roman","serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskerville-Roman; mso-font-kerning: 0pt'>#include &lt;sys/mman.h&gt;</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskerville-Roman","serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskerville-Roman; mso-font-kerning: 0pt'>#include &lt;fcntl.h&gt;</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskerville-Roman","serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskerville-Roman; mso-font-kerning: 0pt'>#include "tlpi_hdr.h"</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskerville-Roman","serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskerville-Roman; mso-font-kerning: 0pt'>int</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskerville-Roman","serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskerville-Roman; mso-font-kerning: 0pt'>main(int argc, char *argv[])</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskerville-Roman","serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskerville-Roman; mso-font-kerning: 0pt'>{</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskerville-Roman","serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskerville-Roman; mso-font-kerning: 0pt'><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>int *addr; /* Pointer to shared memory region */</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskerville-Roman","serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskerville-Roman; mso-font-kerning: 0pt'>#ifdef USE_MAP_ANON /* Use MAP_ANONYMOUS */</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskerville-Roman","serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskerville-Roman; mso-font-kerning: 0pt'><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>addr = mmap(NULL, sizeof(int), PROT_READ | PROT_WRITE,</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskerville-Roman","serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskerville-Roman; mso-font-kerning: 0pt'><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>MAP_SHARED | MAP_ANONYMOUS, -1, 0);</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskerville-Roman","serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskerville-Roman; mso-font-kerning: 0pt'><SPAN style="mso-spacerun: yes">&nbsp;</SPAN><SPAN style="mso-spacerun: yes">&nbsp;&nbsp; </SPAN>if (addr == MAP_FAILED)</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskerville-Roman","serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskerville-Roman; mso-font-kerning: 0pt'><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>errExit("mmap");</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskerville-Roman","serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskerville-Roman; mso-font-kerning: 0pt'>#else /* Map /dev/zero */</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskerville-Roman","serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskerville-Roman; mso-font-kerning: 0pt'><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>int fd;</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskerville-Roman","serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskerville-Roman; mso-font-kerning: 0pt'><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>fd = open("/dev/zero", O_RDWR);</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskerville-Roman","serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskerville-Roman; mso-font-kerning: 0pt'><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>if (fd == -1)</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskerville-Roman","serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskerville-Roman; mso-font-kerning: 0pt'><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>errExit("open");</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskerville-Roman","serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskerville-Roman; mso-font-kerning: 0pt'><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>addr = mmap(NULL, sizeof(int), PROT_READ | PROT_WRITE, MAP_SHARED, fd, 0);</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskerville-Roman","serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskerville-Roman; mso-font-kerning: 0pt'><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>if (addr == MAP_FAILED)</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskerville-Roman","serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskerville-Roman; mso-font-kerning: 0pt'><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>errExit("mmap");</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskerville-Roman","serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskerville-Roman; mso-font-kerning: 0pt'><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>if (close(fd) == -1) /* No longer needed */</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskerville-Roman","serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskerville-Roman; mso-font-kerning: 0pt'><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>errExit("close");</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskerville-Roman","serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskerville-Roman; mso-font-kerning: 0pt'>#endif</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskerville-Roman","serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskerville-Roman; mso-font-kerning: 0pt'><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>*addr = 1; /* Initialize integer in mapped region */</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskerville-Roman","serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskerville-Roman; mso-font-kerning: 0pt'><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>switch (fork()) { /* Parent and child share mapping */</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskerville-Roman","serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskerville-Roman; mso-font-kerning: 0pt'><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>case -1:</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskerville-Roman","serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskerville-Roman; mso-font-kerning: 0pt'><SPAN style="mso-spacerun: yes">&nbsp;</SPAN><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>errExit("fork");</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskerville-Roman","serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskerville-Roman; mso-font-kerning: 0pt'><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>case 0: /* Child: increment shared integer and exit */</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskerville-Roman","serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskerville-Roman; mso-font-kerning: 0pt'><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>printf("Child started, value = %d\n", *addr);</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskerville-Roman","serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskerville-Roman; mso-font-kerning: 0pt'><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>(*addr)++;</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskerville-Roman","serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskerville-Roman; mso-font-kerning: 0pt'><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>if (munmap(addr, sizeof(int)) == -1)</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskerville-Roman","serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskerville-Roman; mso-font-kerning: 0pt'><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>errExit("munmap");</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskerville-Roman","serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskerville-Roman; mso-font-kerning: 0pt'><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>exit(EXIT_SUCCESS);</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskerville-Roman","serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskerville-Roman; mso-font-kerning: 0pt'><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>default: /* Parent: wait for child to terminate */</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskerville-Roman","serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskerville-Roman; mso-font-kerning: 0pt'><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>if (wait(NULL) == -1)</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskerville-Roman","serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskerville-Roman; mso-font-kerning: 0pt'><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>errExit("wait");</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskerville-Roman","serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskerville-Roman; mso-font-kerning: 0pt'><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>printf("In parent, value = %d\n", *addr);</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskerville-Roman","serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskerville-Roman; mso-font-kerning: 0pt'><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>if (munmap(addr, sizeof(int)) == -1)</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskerville-Roman","serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskerville-Roman; mso-font-kerning: 0pt'><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>errExit("munmap");</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskerville-Roman","serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskerville-Roman; mso-font-kerning: 0pt'><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>exit(EXIT_SUCCESS);</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskerville-Roman","serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskerville-Roman; mso-font-kerning: 0pt'><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>}</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskerville-Roman","serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskerville-Roman; mso-font-kerning: 0pt'>}</SPAN></P>
<p><SPAN lang=EN-US style='FONT-SIZE: 18pt; FONT-FAMILY: "NewBaskerville-Roman","serif"; mso-bidi-font-size: 10.0pt; mso-fareast-font-family: TheSansMonoCondensed-Plain; mso-bidi-font-family: NewBaskerville-Roman; mso-font-kerning: 0pt'>&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211; </SPAN><B><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: TheSansMonoCondensed-Bold; mso-bidi-font-size: 8.5pt; mso-bidi-font-family: TheSansMonoCondensed-Bold; mso-font-kerning: 0pt"><FONT face=Calibri>mmap/anon_mmap.c</FONT></SPAN></B>