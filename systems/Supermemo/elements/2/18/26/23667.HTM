Device Naming and Driver Binding<BR>~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<BR><FONT class=extract>The platform_device.dev.bus_id is the canonical name for the devices.<BR>It's built from two components: </FONT>
<P></P>
<P><FONT class=extract>&nbsp;&nbsp;&nbsp; * platform_device.name ... which is also used to for driver matching.</FONT></P>
<P><FONT class=extract>&nbsp;&nbsp;&nbsp; * platform_device.id ... the device instance number, or else "-1"<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; to indicate there's only one.</FONT></P>
<P><FONT class=extract>These are concatenated, so name/id "serial"/0 indicates bus_id "serial.0", and<BR>"serial/3" indicates bus_id "serial.3"; both would use the platform_driver<BR>named "serial".&nbsp; While "my_rtc"/-1 would be bus_id "my_rtc" (no instance id)<BR>and use the platform_driver called "my_rtc".</FONT></P>
<P><FONT class=extract>Driver binding is performed automatically by the driver core, invoking<BR>driver probe() after finding a match between device and driver.&nbsp; If the<BR>probe() succeeds, the driver and device are bound as usual.&nbsp; There are<BR>three different ways to find such a match:</FONT></P>
<P><FONT class=extract>&nbsp;&nbsp;&nbsp; - Whenever a device is registered, the drivers for that bus are<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; checked for matches.&nbsp; Platform devices should be registered very<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; early during system boot.</FONT></P>
<P><FONT class=extract>&nbsp;&nbsp;&nbsp; - When a driver is registered using platform_driver_register(), all<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; unbound devices on that bus are checked for matches.&nbsp; Drivers<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; usually register later during booting, or by module loading.</FONT></P>
<P><FONT class=extract>&nbsp;&nbsp;&nbsp; - Registering a driver using platform_driver_probe() works just like<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; using platform_driver_register(), except that the driver won't<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; be probed later if another device registers.&nbsp; (Which is OK, since<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this interface is only for use with non-hotpluggable devices.)</FONT>