<P class=MsoNormal style="BACKGROUND: #000022; MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US style="FONT-SIZE: 13.5pt; FONT-FAMILY: 'Courier New'; COLOR: #aaaaaa">When there's an error with SDL_image, you get error string with IMG_GetError as opposed to SDL_GetError.</SPAN></P>
<P class=MsoNormal style="BACKGROUND: #000044; MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US style="FONT-SIZE: 13.5pt; FONT-FAMILY: 'Courier New'; COLOR: #ddddff">SDL_Surface* loadSurface( std::string path )</SPAN></P>
<P class=MsoNormal style="BACKGROUND: #000044; MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US style="FONT-SIZE: 13.5pt; FONT-FAMILY: 'Courier New'; COLOR: #ddddff">{</SPAN></P>
<P class=MsoNormal style="BACKGROUND: #000044; MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US style="FONT-SIZE: 13.5pt; FONT-FAMILY: 'Courier New'; COLOR: #ddddff"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>//The final optimized image</SPAN></P>
<P class=MsoNormal style="BACKGROUND: #000044; MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US style="FONT-SIZE: 13.5pt; FONT-FAMILY: 'Courier New'; COLOR: #ddddff"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>SDL_Surface* optimizedSurface = NULL;</SPAN></P>
<P class=MsoNormal style="BACKGROUND: #000044; MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US style="FONT-SIZE: 13.5pt; FONT-FAMILY: 'Courier New'; COLOR: #ddddff">&nbsp;</SPAN></P>
<P class=MsoNormal style="BACKGROUND: #000044; MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US style="FONT-SIZE: 13.5pt; FONT-FAMILY: 'Courier New'; COLOR: #ddddff"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>//Load image at specified path</SPAN></P>
<P class=MsoNormal style="BACKGROUND: #000044; MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US style="FONT-SIZE: 13.5pt; FONT-FAMILY: 'Courier New'; COLOR: #ddddff"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>SDL_Surface* loadedSurface = IMG_Load( path.c_str() );</SPAN></P>
<P class=MsoNormal style="BACKGROUND: #000044; MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US style="FONT-SIZE: 13.5pt; FONT-FAMILY: 'Courier New'; COLOR: #ddddff"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>if( loadedSurface == NULL )</SPAN></P>
<P class=MsoNormal style="BACKGROUND: #000044; MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US style="FONT-SIZE: 13.5pt; FONT-FAMILY: 'Courier New'; COLOR: #ddddff"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>{</SPAN></P>
<P class=MsoNormal style="BACKGROUND: #000044; MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US style="FONT-SIZE: 13.5pt; FONT-FAMILY: 'Courier New'; COLOR: #ddddff"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>printf( "Unable to load image %s! SDL_image Error: %s\n", path.c_str(), IMG_GetError() );</SPAN></P>
<P class=MsoNormal style="BACKGROUND: #000044; MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US style="FONT-SIZE: 13.5pt; FONT-FAMILY: 'Courier New'; COLOR: #ddddff"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>}</SPAN></P>
<P class=MsoNormal style="BACKGROUND: #000044; MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US style="FONT-SIZE: 13.5pt; FONT-FAMILY: 'Courier New'; COLOR: #ddddff"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>else</SPAN></P>
<P class=MsoNormal style="BACKGROUND: #000044; MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US style="FONT-SIZE: 13.5pt; FONT-FAMILY: 'Courier New'; COLOR: #ddddff"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>{</SPAN></P>
<P class=MsoNormal style="BACKGROUND: #000044; MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US style="FONT-SIZE: 13.5pt; FONT-FAMILY: 'Courier New'; COLOR: #ddddff"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>//Convert surface to screen format</SPAN></P>
<P class=MsoNormal style="BACKGROUND: #000044; MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US style="FONT-SIZE: 13.5pt; FONT-FAMILY: 'Courier New'; COLOR: #ddddff"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>optimizedSurface = <FONT class=clozed>SDL_ConvertSurface( loadedSurface, gScreenSurface-&gt;format, NULL )</FONT>;</SPAN></P>
<P class=MsoNormal style="BACKGROUND: #000044; MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US style="FONT-SIZE: 13.5pt; FONT-FAMILY: 'Courier New'; COLOR: #ddddff"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>if( optimizedSurface == NULL )</SPAN></P>
<P class=MsoNormal style="BACKGROUND: #000044; MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US style="FONT-SIZE: 13.5pt; FONT-FAMILY: 'Courier New'; COLOR: #ddddff"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>{</SPAN></P>
<P class=MsoNormal style="BACKGROUND: #000044; MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US style="FONT-SIZE: 13.5pt; FONT-FAMILY: 'Courier New'; COLOR: #ddddff"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>printf( "Unable to optimize image %s! SDL Error: %s\n", path.c_str(), SDL_GetError() );</SPAN></P>
<P class=MsoNormal style="BACKGROUND: #000044; MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US style="FONT-SIZE: 13.5pt; FONT-FAMILY: 'Courier New'; COLOR: #ddddff"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>}</SPAN></P>
<P class=MsoNormal style="BACKGROUND: #000044; MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US style="FONT-SIZE: 13.5pt; FONT-FAMILY: 'Courier New'; COLOR: #ddddff">&nbsp;</SPAN></P>
<P class=MsoNormal style="BACKGROUND: #000044; MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US style="FONT-SIZE: 13.5pt; FONT-FAMILY: 'Courier New'; COLOR: #ddddff"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>//Get rid of old loaded surface</SPAN></P>
<P class=MsoNormal style="BACKGROUND: #000044; MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US style="FONT-SIZE: 13.5pt; FONT-FAMILY: 'Courier New'; COLOR: #ddddff"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>SDL_FreeSurface( loadedSurface );</SPAN></P>
<P class=MsoNormal style="BACKGROUND: #000044; MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US style="FONT-SIZE: 13.5pt; FONT-FAMILY: 'Courier New'; COLOR: #ddddff"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>}</SPAN></P>
<P class=MsoNormal style="BACKGROUND: #000044; MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US style="FONT-SIZE: 13.5pt; FONT-FAMILY: 'Courier New'; COLOR: #ddddff">&nbsp;</SPAN></P>
<P class=MsoNormal style="BACKGROUND: #000044; MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US style="FONT-SIZE: 13.5pt; FONT-FAMILY: 'Courier New'; COLOR: #ddddff"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>return optimizedSurface;</SPAN></P>
<P class=MsoNormal style="BACKGROUND: #000044; MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US style="FONT-SIZE: 13.5pt; FONT-FAMILY: 'Courier New'; COLOR: #ddddff">}</SPAN></P>
<P class=MsoNormal style="BACKGROUND: #000022; MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US style="FONT-SIZE: 13.5pt; FONT-FAMILY: 'Courier New'; COLOR: #aaaaaa">Our image loading function is pretty much the same as before, only now it uses IMG_Load as opposed to SDL_LoadBMP. IMG_Load can load many different types of format which you can find out about in the<SPAN class=apple-converted-space>&nbsp;</SPAN><A href="http://www.libsdl.org/projects/SDL_image/"><SPAN style="COLOR: #8888ff">SDL_image documentation</SPAN></A>. Like with IMG_Init, when there's an error with IMG_Load, we call IMG_GetError to get the error string.</SPAN>