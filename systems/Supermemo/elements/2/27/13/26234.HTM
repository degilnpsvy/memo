<P class=MsoNormal style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt; mso-layout-grid-align: none" align=left><SPAN lang=EN-US style="FONT-SIZE: 18pt; FONT-FAMILY: 'Myriad-CnSemibold','sans-serif'; mso-bidi-font-size: 11.0pt; mso-bidi-font-family: Myriad-CnSemibold; mso-font-kerning: 0pt; mso-fareast-font-family: Birka">Disabling a single interrupt</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt; mso-layout-grid-align: none" align=left><FONT face=Calibri><FONT class=extract><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">Sometimes (but rarely!) a driver needs to disable interrupt delivery for a specific interrupt line. The kernel offers three functions for this purpose, all declared in </SPAN><I><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka-Italic; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka-Italic; mso-font-kerning: 0pt">&lt;asm/irq.h&gt;</SPAN></I><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">. These functions are part of the kernel API, so we describe them, but their use is discouraged in most drivers. Among other things, you cannot disable shared interrupt lines, and, on modern systems, shared interrupts are the norm. That said, here they are:</SPAN></FONT></FONT></P>
<P class=MsoNormal style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt; mso-layout-grid-align: none" align=left><SPAN lang=EN-US style="FONT-SIZE: 11pt; FONT-FAMILY: TheSansMonoCondensed-SemiLight; mso-bidi-font-size: 8.0pt; mso-bidi-font-family: TheSansMonoCondensed-SemiLight; mso-font-kerning: 0pt"><FONT class=extract face=Calibri>void disable_irq(int irq);</FONT></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt; mso-layout-grid-align: none" align=left><SPAN lang=EN-US style="FONT-SIZE: 11pt; FONT-FAMILY: TheSansMonoCondensed-SemiLight; mso-bidi-font-size: 8.0pt; mso-bidi-font-family: TheSansMonoCondensed-SemiLight; mso-font-kerning: 0pt"><FONT class=extract face=Calibri>void disable_irq_nosync(int irq);</FONT></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt; mso-layout-grid-align: none" align=left><SPAN lang=EN-US style="FONT-SIZE: 11pt; FONT-FAMILY: TheSansMonoCondensed-SemiLight; mso-bidi-font-size: 8.0pt; mso-bidi-font-family: TheSansMonoCondensed-SemiLight; mso-font-kerning: 0pt"><FONT class=extract face=Calibri>void enable_irq(int irq);</FONT></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt; mso-layout-grid-align: none" align=left><FONT face=Calibri><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">Calling any of these functions may update the mask for the specified </SPAN><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: TheSansMonoCondensed-SemiLight; mso-bidi-font-size: 9.0pt; mso-bidi-font-family: TheSansMonoCondensed-SemiLight; mso-font-kerning: 0pt">irq </SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">in the programmable interrupt controller (PIC), thus disabling or enabling the specified IRQ across all processors. <FONT class=extract>Calls to these functions can be nested</FONT></SPAN><FONT class=extract><SPAN style="FONT-SIZE: 14pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">&#8212;<SPAN lang=EN-US>if </SPAN></SPAN><I><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka-Italic; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka-Italic; mso-font-kerning: 0pt">disable_irq </SPAN></I><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">is called twice in succession, two </SPAN><I><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka-Italic; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka-Italic; mso-font-kerning: 0pt">enable_irq </SPAN></I></FONT><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt"><FONT class=extract>calls are required before the IRQ is truly reenabled.</FONT> <FONT class=extract>It is possible to call these functions from an interrupt handler, but enabling your own IRQ while handling it is not usually good practice.</FONT></SPAN></FONT></P>
<P class=MsoNormal style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt; mso-layout-grid-align: none" align=left><FONT face=Calibri><FONT class=extract><I><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka-Italic; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka-Italic; mso-font-kerning: 0pt">disable_irq </SPAN></I><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">not only disables the given interrupt but also waits for a currently executing interrupt handler, if any, to complete. Be aware that if the thread calling </SPAN><I><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka-Italic; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka-Italic; mso-font-kerning: 0pt">disable_irq </SPAN></I><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">holds any resources (such as spinlocks) that the interrupt handler needs, the system can deadlock. </SPAN><I><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka-Italic; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka-Italic; mso-font-kerning: 0pt">disable_irq_nosync </SPAN></I><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">differs from </SPAN><I><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka-Italic; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka-Italic; mso-font-kerning: 0pt">disable_irq </SPAN></I><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">in that it returns immediately. Thus, using </SPAN><I><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka-Italic; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka-Italic; mso-font-kerning: 0pt">disable_irq_nosync </SPAN></I><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">is a little faster but may leave your driver open to race conditions.</SPAN></FONT></FONT></P>
<P class=MsoNormal style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt; mso-layout-grid-align: none" align=left><FONT face=Calibri><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">But why disable an interrupt? Sticking to the parallel port, let</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt; mso-fareast-font-family: Birka; mso-ascii-font-family: Birka">&#8217;</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">s look at the </SPAN><I><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka-Italic; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka-Italic; mso-font-kerning: 0pt">plip </SPAN></I><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">network interface. A </SPAN><I><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka-Italic; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka-Italic; mso-font-kerning: 0pt">plip </SPAN></I><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">device uses the bare-bones parallel port to transfer data. Since only five bits can be read from the parallel connector, they are interpreted as four data bits and a clock/handshake signal. When the first four bits of a packet are transmitted by the initiator (the interface sending the packet), the clock line is raised, causing the receiving interface to interrupt the processor. The </SPAN><I><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka-Italic; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka-Italic; mso-font-kerning: 0pt">plip </SPAN></I><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">handler is then invoked to deal with newly arrived data.</SPAN></FONT></P>
<P class=MsoNormal style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt; mso-layout-grid-align: none" align=left><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt"><FONT face=Calibri>After the device has been alerted, the data transfer proceeds, using the handshake line to clocknew data to the receiving interface (this might not be the best implementation, but it is necessary for compatibility with other packet drivers using the parallel port). Performance would be unbearable if the receiving interface had to handle two interrupts for every byte received. Therefore, the driver disables the interrupt during the reception of the packet; instead, a poll-and-delay loop is used to bring in the data.</FONT></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt; mso-layout-grid-align: none" align=left><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt"><FONT face=Calibri>Similarly, because the handshake line from the receiver to the transmitter is used to acknowledge data reception, the transmitting interface disables its IRQ line during packet transmission.</FONT></SPAN></P><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt"><PRE><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.3/kernel/irq/manage.c#427" name=427>427</A><B>void</B> <A class=xf name=__disable_irq></A><A class=xf href="http://172.21.12.145:8080/source/s?refs=__disable_irq&amp;project=linux-4.3">__disable_irq</A>(<B>struct</B> <A href="http://172.21.12.145:8080/source/s?defs=irq_desc&amp;project=linux-4.3">irq_desc</A> *<A class=xa name=desc></A><A class=xa href="http://172.21.12.145:8080/source/s?refs=desc&amp;project=linux-4.3">desc</A>)
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.3/kernel/irq/manage.c#428" name=428>428</A>{
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.3/kernel/irq/manage.c#429" name=429>429</A>	<B>if</B> (!<A href="http://172.21.12.145:8080/source/s?defs=desc&amp;project=linux-4.3">desc</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=depth&amp;project=linux-4.3">depth</A>++)
<A class=hl href="http://172.21.12.145:8080/source/xref/linux-4.3/kernel/irq/manage.c#430" name=430>430</A>		<A href="http://172.21.12.145:8080/source/s?defs=irq_disable&amp;project=linux-4.3">irq_disable</A>(<A href="http://172.21.12.145:8080/source/s?defs=desc&amp;project=linux-4.3">desc</A>);
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.3/kernel/irq/manage.c#431" name=431>431</A>}
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.3/kernel/irq/manage.c#432" name=432>432</A>
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.3/kernel/irq/manage.c#433" name=433>433</A><B>static</B> <B>int</B> <A class=xf name=__disable_irq_nosync></A><A class=xf href="http://172.21.12.145:8080/source/s?refs=__disable_irq_nosync&amp;project=linux-4.3">__disable_irq_nosync</A>(<B>unsigned</B> <B>int</B> <A class=xa name=irq></A><A class=xa href="http://172.21.12.145:8080/source/s?refs=irq&amp;project=linux-4.3">irq</A>)
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.3/kernel/irq/manage.c#434" name=434>434</A>{
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.3/kernel/irq/manage.c#435" name=435>435</A>	<B>unsigned</B> <B>long</B> <A class=xl name=flags></A><A class=xl href="http://172.21.12.145:8080/source/s?refs=flags&amp;project=linux-4.3">flags</A>;
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.3/kernel/irq/manage.c#436" name=436>436</A>	<B>struct</B> <A href="http://172.21.12.145:8080/source/s?defs=irq_desc&amp;project=linux-4.3">irq_desc</A> *<A class=xl name=desc></A><A class=xl href="http://172.21.12.145:8080/source/s?refs=desc&amp;project=linux-4.3">desc</A> = <A href="http://172.21.12.145:8080/source/s?defs=irq_get_desc_buslock&amp;project=linux-4.3">irq_get_desc_buslock</A>(<A href="http://172.21.12.145:8080/source/s?defs=irq&amp;project=linux-4.3">irq</A>, &amp;<A href="http://172.21.12.145:8080/source/s?defs=flags&amp;project=linux-4.3">flags</A>, <A href="http://172.21.12.145:8080/source/s?defs=IRQ_GET_DESC_CHECK_GLOBAL&amp;project=linux-4.3">IRQ_GET_DESC_CHECK_GLOBAL</A>);
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.3/kernel/irq/manage.c#437" name=437>437</A>
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.3/kernel/irq/manage.c#438" name=438>438</A>	<B>if</B> (!<A href="http://172.21.12.145:8080/source/s?defs=desc&amp;project=linux-4.3">desc</A>)
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.3/kernel/irq/manage.c#439" name=439>439</A>		<B>return</B> -<A href="http://172.21.12.145:8080/source/s?defs=EINVAL&amp;project=linux-4.3">EINVAL</A>;
<A class=hl href="http://172.21.12.145:8080/source/xref/linux-4.3/kernel/irq/manage.c#440" name=440>440</A>	<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.3/kernel/irq/manage.c#__disable_irq">__disable_irq</A>(<A href="http://172.21.12.145:8080/source/s?defs=desc&amp;project=linux-4.3">desc</A>);
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.3/kernel/irq/manage.c#441" name=441>441</A>	<A href="http://172.21.12.145:8080/source/s?defs=irq_put_desc_busunlock&amp;project=linux-4.3">irq_put_desc_busunlock</A>(<A href="http://172.21.12.145:8080/source/s?defs=desc&amp;project=linux-4.3">desc</A>, <A href="http://172.21.12.145:8080/source/s?defs=flags&amp;project=linux-4.3">flags</A>);
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.3/kernel/irq/manage.c#442" name=442>442</A>	<B>return</B> 0;
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.3/kernel/irq/manage.c#443" name=443>443</A>}
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.3/kernel/irq/manage.c#444" name=444>444</A>
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.3/kernel/irq/manage.c#445" name=445>445</A><SPAN class=c>/**
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.3/kernel/irq/manage.c#446" name=446>446</A> *	disable_irq_nosync - disable an irq without waiting
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.3/kernel/irq/manage.c#447" name=447>447</A> *	@irq: Interrupt to disable
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.3/kernel/irq/manage.c#448" name=448>448</A> *
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.3/kernel/irq/manage.c#449" name=449>449</A> *	Disable the selected interrupt line.  Disables and Enables are
<A class=hl href="http://172.21.12.145:8080/source/xref/linux-4.3/kernel/irq/manage.c#450" name=450>450</A> *	nested.
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.3/kernel/irq/manage.c#451" name=451>451</A> *	Unlike disable_irq(), this function does not ensure existing
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.3/kernel/irq/manage.c#452" name=452>452</A> *	instances of the IRQ handler have completed before returning.
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.3/kernel/irq/manage.c#453" name=453>453</A> *
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.3/kernel/irq/manage.c#454" name=454>454</A> *	This function may be called from IRQ context.
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.3/kernel/irq/manage.c#455" name=455>455</A> */</SPAN>
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.3/kernel/irq/manage.c#456" name=456>456</A><B>void</B> <A class=xf name=disable_irq_nosync></A><A class=xf href="http://172.21.12.145:8080/source/s?refs=disable_irq_nosync&amp;project=linux-4.3">disable_irq_nosync</A>(<B>unsigned</B> <B>int</B> <A class=xa name=irq></A><A class=xa href="http://172.21.12.145:8080/source/s?refs=irq&amp;project=linux-4.3">irq</A>)
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.3/kernel/irq/manage.c#457" name=457>457</A>{
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.3/kernel/irq/manage.c#458" name=458>458</A>	<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.3/kernel/irq/manage.c#__disable_irq_nosync">__disable_irq_nosync</A>(<A href="http://172.21.12.145:8080/source/s?defs=irq&amp;project=linux-4.3">irq</A>);
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.3/kernel/irq/manage.c#459" name=459>459</A>}
<A class=hl href="http://172.21.12.145:8080/source/xref/linux-4.3/kernel/irq/manage.c#460" name=460>460</A><A href="http://172.21.12.145:8080/source/s?defs=EXPORT_SYMBOL&amp;project=linux-4.3">EXPORT_SYMBOL</A>(<A class=xv name=disable_irq_nosync></A><A class=xv href="http://172.21.12.145:8080/source/s?refs=disable_irq_nosync&amp;project=linux-4.3">disable_irq_nosync</A>);
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.3/kernel/irq/manage.c#461" name=461>461</A>
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.3/kernel/irq/manage.c#462" name=462>462</A><SPAN class=c>/**
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.3/kernel/irq/manage.c#463" name=463>463</A> *	disable_irq - disable an irq and wait for completion
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.3/kernel/irq/manage.c#464" name=464>464</A> *	@irq: Interrupt to disable
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.3/kernel/irq/manage.c#465" name=465>465</A> *
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.3/kernel/irq/manage.c#466" name=466>466</A> *	Disable the selected interrupt line.  Enables and Disables are
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.3/kernel/irq/manage.c#467" name=467>467</A> *	nested.
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.3/kernel/irq/manage.c#468" name=468>468</A> *	This function waits for any pending IRQ handlers for this interrupt
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.3/kernel/irq/manage.c#469" name=469>469</A> *	to complete before returning. If you use this function while
<A class=hl href="http://172.21.12.145:8080/source/xref/linux-4.3/kernel/irq/manage.c#470" name=470>470</A> *	holding a resource the IRQ handler may need you will deadlock.
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.3/kernel/irq/manage.c#471" name=471>471</A> *
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.3/kernel/irq/manage.c#472" name=472>472</A> *	This function may be called - with care - from IRQ context.
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.3/kernel/irq/manage.c#473" name=473>473</A> */</SPAN>
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.3/kernel/irq/manage.c#474" name=474>474</A><B>void</B> <A class=xf name=disable_irq></A><A class=xf href="http://172.21.12.145:8080/source/s?refs=disable_irq&amp;project=linux-4.3">disable_irq</A>(<B>unsigned</B> <B>int</B> <A class=xa name=irq></A><A class=xa href="http://172.21.12.145:8080/source/s?refs=irq&amp;project=linux-4.3">irq</A>)
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.3/kernel/irq/manage.c#475" name=475>475</A>{
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.3/kernel/irq/manage.c#476" name=476>476</A>	<B>if</B> (!<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.3/kernel/irq/manage.c#__disable_irq_nosync">__disable_irq_nosync</A>(<A href="http://172.21.12.145:8080/source/s?defs=irq&amp;project=linux-4.3">irq</A>))
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.3/kernel/irq/manage.c#477" name=477>477</A>		<A href="http://172.21.12.145:8080/source/s?defs=synchronize_irq&amp;project=linux-4.3">synchronize_irq</A>(<A href="http://172.21.12.145:8080/source/s?defs=irq&amp;project=linux-4.3">irq</A>);
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.3/kernel/irq/manage.c#478" name=478>478</A>}
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.3/kernel/irq/manage.c#479" name=479>479</A><A href="http://172.21.12.145:8080/source/s?defs=EXPORT_SYMBOL&amp;project=linux-4.3">EXPORT_SYMBOL</A>(<A class=xv name=disable_irq></A><A class=xv href="http://172.21.12.145:8080/source/s?refs=disable_irq&amp;project=linux-4.3">disable_irq</A>);</PRE></SPAN>