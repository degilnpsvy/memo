<SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">it can</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt; mso-fareast-font-family: Birka; mso-ascii-font-family: Birka">&#8217;</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">t play with </SPAN><I><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka-Italic; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka-Italic; mso-font-kerning: 0pt">enable_irq </SPAN></I><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">or </SPAN><I><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka-Italic; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka-Italic; mso-font-kerning: 0pt">disable_irq</SPAN></I><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">. If it does, things might go haywire for other devices sharing the line; disabling another device</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt; mso-fareast-font-family: Birka; mso-ascii-font-family: Birka">&#8217;</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">s interrupts for even a short time may create latencies that are problematic for that device and it</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt; mso-fareast-font-family: Birka; mso-ascii-font-family: Birka">&#8217;</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">s user. Generally, the programmer must remember that his driver doesn</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt; mso-fareast-font-family: Birka; mso-ascii-font-family: Birka">&#8217;</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">t own the IRQ, and its behavior should be more </SPAN><SPAN style="FONT-SIZE: 14pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">&#8220;<SPAN lang=EN-US>social</SPAN>&#8221;<SPAN lang=EN-US> than is necessary if one owns the interrupt line.</SPAN></SPAN></P><SPAN style="FONT-SIZE: 14pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt"><SPAN lang=EN-US><PRE><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/kernel/irq/manage.c#527" name=527>527</A><SPAN class=c>/**
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/kernel/irq/manage.c#528" name=528>528</A> *	enable_irq - enable handling of an irq
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/kernel/irq/manage.c#529" name=529>529</A> *	@irq: Interrupt to enable
<A class=hl href="http://172.29.26.110:8080/source/xref/Linux-v4.6/kernel/irq/manage.c#530" name=530>530</A> *
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/kernel/irq/manage.c#531" name=531>531</A> *	Undoes the effect of one call to disable_irq().  If this
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/kernel/irq/manage.c#532" name=532>532</A> *	matches the last disable, processing of interrupts on this
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/kernel/irq/manage.c#533" name=533>533</A> *	IRQ line is re-enabled.
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/kernel/irq/manage.c#534" name=534>534</A> *
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/kernel/irq/manage.c#535" name=535>535</A> *	This function may be called from IRQ context only when
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/kernel/irq/manage.c#536" name=536>536</A> *	desc-&gt;<A href="http://172.29.26.110:8080/source/s?path=irq_data.c&amp;project=Linux-v4.6">irq_data.c</A>hip-&gt;bus_lock and desc-&gt;chip-&gt;bus_sync_unlock are NULL !
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/kernel/irq/manage.c#537" name=537>537</A> */</SPAN>
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/kernel/irq/manage.c#538" name=538>538</A><B>void</B> <A class=xf name=enable_irq></A><A class=xf href="http://172.29.26.110:8080/source/s?refs=enable_irq&amp;project=Linux-v4.6">enable_irq</A>(<B>unsigned</B> <B>int</B> <A class=xa name=irq></A><A class=xa href="http://172.29.26.110:8080/source/s?refs=irq&amp;project=Linux-v4.6">irq</A>)
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/kernel/irq/manage.c#539" name=539>539</A>{
<A class=hl href="http://172.29.26.110:8080/source/xref/Linux-v4.6/kernel/irq/manage.c#540" name=540>540</A>	<B>unsigned</B> <B>long</B> <A class=xl name=flags></A><A class=xl href="http://172.29.26.110:8080/source/s?refs=flags&amp;project=Linux-v4.6">flags</A>;
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/kernel/irq/manage.c#541" name=541>541</A>	<B>struct</B> <A href="http://172.29.26.110:8080/source/s?defs=irq_desc&amp;project=Linux-v4.6">irq_desc</A> *<A class=xl name=desc></A><A class=xl href="http://172.29.26.110:8080/source/s?refs=desc&amp;project=Linux-v4.6">desc</A> = <A href="http://172.29.26.110:8080/source/s?defs=irq_get_desc_buslock&amp;project=Linux-v4.6">irq_get_desc_buslock</A>(<A href="http://172.29.26.110:8080/source/s?defs=irq&amp;project=Linux-v4.6">irq</A>, &amp;<A href="http://172.29.26.110:8080/source/s?defs=flags&amp;project=Linux-v4.6">flags</A>, <A href="http://172.29.26.110:8080/source/s?defs=IRQ_GET_DESC_CHECK_GLOBAL&amp;project=Linux-v4.6">IRQ_GET_DESC_CHECK_GLOBAL</A>);
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/kernel/irq/manage.c#542" name=542>542</A>
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/kernel/irq/manage.c#543" name=543>543</A>	<B>if</B> (!<A href="http://172.29.26.110:8080/source/s?defs=desc&amp;project=Linux-v4.6">desc</A>)
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/kernel/irq/manage.c#544" name=544>544</A>		<B>return</B>;
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/kernel/irq/manage.c#545" name=545>545</A>	<B>if</B> (<A href="http://172.29.26.110:8080/source/s?defs=WARN&amp;project=Linux-v4.6">WARN</A>(!<A href="http://172.29.26.110:8080/source/s?defs=desc&amp;project=Linux-v4.6">desc</A>-&gt;<A href="http://172.29.26.110:8080/source/s?defs=irq_data&amp;project=Linux-v4.6">irq_data</A>.<A href="http://172.29.26.110:8080/source/s?defs=chip&amp;project=Linux-v4.6">chip</A>,
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/kernel/irq/manage.c#546" name=546>546</A>		 <A href="http://172.29.26.110:8080/source/s?defs=KERN_ERR&amp;project=Linux-v4.6">KERN_ERR</A> <SPAN class=s>"enable_irq before <A href="http://172.29.26.110:8080/source/s?path=setup/">setup</A>/<A href="http://172.29.26.110:8080/source/s?path=setup/request_irq">request_irq</A>: irq %u\n"</SPAN>, <A href="http://172.29.26.110:8080/source/s?defs=irq&amp;project=Linux-v4.6">irq</A>))
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/kernel/irq/manage.c#547" name=547>547</A>		<B>goto</B> <A href="http://172.29.26.110:8080/source/s?defs=out&amp;project=Linux-v4.6">out</A>;
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/kernel/irq/manage.c#548" name=548>548</A>
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/kernel/irq/manage.c#549" name=549>549</A>	<A class=d href="http://172.29.26.110:8080/source/xref/Linux-v4.6/kernel/irq/manage.c#__enable_irq">__enable_irq</A>(<A href="http://172.29.26.110:8080/source/s?defs=desc&amp;project=Linux-v4.6">desc</A>);
<A class=hl href="http://172.29.26.110:8080/source/xref/Linux-v4.6/kernel/irq/manage.c#550" name=550>550</A><A href="http://172.29.26.110:8080/source/s?defs=out&amp;project=Linux-v4.6">out</A>:
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/kernel/irq/manage.c#551" name=551>551</A>	<A href="http://172.29.26.110:8080/source/s?defs=irq_put_desc_busunlock&amp;project=Linux-v4.6">irq_put_desc_busunlock</A>(<A href="http://172.29.26.110:8080/source/s?defs=desc&amp;project=Linux-v4.6">desc</A>, <A href="http://172.29.26.110:8080/source/s?defs=flags&amp;project=Linux-v4.6">flags</A>);
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/kernel/irq/manage.c#552" name=552>552</A>}
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/kernel/irq/manage.c#553" name=553>553</A><A href="http://172.29.26.110:8080/source/s?defs=EXPORT_SYMBOL&amp;project=Linux-v4.6">EXPORT_SYMBOL</A>(<A class=xv name=enable_irq></A><A class=xv href="http://172.29.26.110:8080/source/s?refs=enable_irq&amp;project=Linux-v4.6">enable_irq</A>);</PRE><PRE><PRE><A class=hl href="http://172.29.26.110:8080/source/xref/Linux-v4.6/kernel/irq/manage.c#460" name=460>460</A><SPAN class=c>/**
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/kernel/irq/manage.c#461" name=461>461</A> *	disable_irq - disable an irq and wait for completion
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/kernel/irq/manage.c#462" name=462>462</A> *	@irq: Interrupt to disable
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/kernel/irq/manage.c#463" name=463>463</A> *
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/kernel/irq/manage.c#464" name=464>464</A> *	Disable the selected interrupt line.  Enables and Disables are
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/kernel/irq/manage.c#465" name=465>465</A> *	nested.
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/kernel/irq/manage.c#466" name=466>466</A> *	This function waits for any pending IRQ handlers for this interrupt
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/kernel/irq/manage.c#467" name=467>467</A> *	to complete before returning. If you use this function while
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/kernel/irq/manage.c#468" name=468>468</A> *	holding a resource the IRQ handler may need you will deadlock.
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/kernel/irq/manage.c#469" name=469>469</A> *
<A class=hl href="http://172.29.26.110:8080/source/xref/Linux-v4.6/kernel/irq/manage.c#470" name=470>470</A> *	This function may be called - with care - from IRQ context.
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/kernel/irq/manage.c#471" name=471>471</A> */</SPAN>
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/kernel/irq/manage.c#472" name=472>472</A><B>void</B> <A class=xf name=disable_irq></A><A class=xf href="http://172.29.26.110:8080/source/s?refs=disable_irq&amp;project=Linux-v4.6">disable_irq</A>(<B>unsigned</B> <B>int</B> <A class=xa name=irq></A><A class=xa href="http://172.29.26.110:8080/source/s?refs=irq&amp;project=Linux-v4.6">irq</A>)
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/kernel/irq/manage.c#473" name=473>473</A>{
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/kernel/irq/manage.c#474" name=474>474</A>	<B>if</B> (!<A class=d href="http://172.29.26.110:8080/source/xref/Linux-v4.6/kernel/irq/manage.c#__disable_irq_nosync">__disable_irq_nosync</A>(<A href="http://172.29.26.110:8080/source/s?defs=irq&amp;project=Linux-v4.6">irq</A>))
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/kernel/irq/manage.c#475" name=475>475</A>		<A href="http://172.29.26.110:8080/source/s?defs=synchronize_irq&amp;project=Linux-v4.6">synchronize_irq</A>(<A href="http://172.29.26.110:8080/source/s?defs=irq&amp;project=Linux-v4.6">irq</A>);
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/kernel/irq/manage.c#476" name=476>476</A>}
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/kernel/irq/manage.c#477" name=477>477</A><A href="http://172.29.26.110:8080/source/s?defs=EXPORT_SYMBOL&amp;project=Linux-v4.6">EXPORT_SYMBOL</A>(<A class=xv name=disable_irq></A><A class=xv href="http://172.29.26.110:8080/source/s?refs=disable_irq&amp;project=Linux-v4.6">disable_irq</A>);</PRE></PRE></SPAN></SPAN>