<P class=MsoNormal style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt; mso-layout-grid-align: none" align=left><FONT face=Calibri><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">For what it</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt; mso-ascii-font-family: Birka; mso-fareast-font-family: Birka">&#8217;</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">s worth, the i386 and x86_64 architectures define a function for querying the availability of an interrupt line:</SPAN></FONT></P>
<P class=MsoNormal style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt; mso-layout-grid-align: none" align=left><SPAN lang=EN-US style="FONT-SIZE: 11pt; FONT-FAMILY: TheSansMonoCondensed-SemiLight; mso-bidi-font-size: 8.0pt; mso-bidi-font-family: TheSansMonoCondensed-SemiLight; mso-font-kerning: 0pt"><FONT face=Calibri>int can_request_irq(unsigned int irq, unsigned long flags);</FONT></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt; mso-layout-grid-align: none" align=left><FONT face=Calibri><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">This function returns a nonzero value if an attempt to allocate the given interrupt succeeds. Note, however, <SPAN class=cloze>[...]</SPAN></SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">.</SPAN></FONT></P><FONT face=Calibri><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt"><PRE><A class=l href="http://172.21.12.145:8080/source/xref/linux-4.1/kernel/irq/manage.c#586" name=586>586</A><SPAN class=c>/*
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.1/kernel/irq/manage.c#587" name=587>587</A> * Internal function that tells the architecture code whether a
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.1/kernel/irq/manage.c#588" name=588>588</A> * particular irq has been exclusively allocated or is available
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.1/kernel/irq/manage.c#589" name=589>589</A> * for driver use.
<A class=hl href="http://172.21.12.145:8080/source/xref/linux-4.1/kernel/irq/manage.c#590" name=590>590</A> */</SPAN>
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.1/kernel/irq/manage.c#591" name=591>591</A><B>int</B> <A class=xf name=can_request_irq></A><A class=xf href="http://172.21.12.145:8080/source/s?refs=can_request_irq&amp;project=linux-4.1">can_request_irq</A>(<B>unsigned</B> <B>int</B> <A class=xa name=irq></A><A class=xa href="http://172.21.12.145:8080/source/s?refs=irq&amp;project=linux-4.1">irq</A>, <B>unsigned</B> <B>long</B> <A class=xa name=irqflags></A><A class=xa href="http://172.21.12.145:8080/source/s?refs=irqflags&amp;project=linux-4.1">irqflags</A>)
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.1/kernel/irq/manage.c#592" name=592>592</A>{
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.1/kernel/irq/manage.c#593" name=593>593</A>	<B>unsigned</B> <B>long</B> <A class=xl name=flags></A><A class=xl href="http://172.21.12.145:8080/source/s?refs=flags&amp;project=linux-4.1">flags</A>;
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.1/kernel/irq/manage.c#594" name=594>594</A>	<B>struct</B> <A href="http://172.21.12.145:8080/source/s?defs=irq_desc&amp;project=linux-4.1">irq_desc</A> *<A class=xl name=desc></A><A class=xl href="http://172.21.12.145:8080/source/s?refs=desc&amp;project=linux-4.1">desc</A> = <A href="http://172.21.12.145:8080/source/s?defs=irq_get_desc_lock&amp;project=linux-4.1">irq_get_desc_lock</A>(<A href="http://172.21.12.145:8080/source/s?defs=irq&amp;project=linux-4.1">irq</A>, &amp;<A href="http://172.21.12.145:8080/source/s?defs=flags&amp;project=linux-4.1">flags</A>, 0);
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.1/kernel/irq/manage.c#595" name=595>595</A>	<B>int</B> <A class=xl name=canrequest></A><A class=xl href="http://172.21.12.145:8080/source/s?refs=canrequest&amp;project=linux-4.1">canrequest</A> = 0;
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.1/kernel/irq/manage.c#596" name=596>596</A>
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.1/kernel/irq/manage.c#597" name=597>597</A>	<B>if</B> (!<A href="http://172.21.12.145:8080/source/s?defs=desc&amp;project=linux-4.1">desc</A>)
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.1/kernel/irq/manage.c#598" name=598>598</A>		<B>return</B> 0;
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.1/kernel/irq/manage.c#599" name=599>599</A>
<A class=hl href="http://172.21.12.145:8080/source/xref/linux-4.1/kernel/irq/manage.c#600" name=600>600</A>	<B>if</B> (<A href="http://172.21.12.145:8080/source/s?defs=irq_settings_can_request&amp;project=linux-4.1">irq_settings_can_request</A>(<A href="http://172.21.12.145:8080/source/s?defs=desc&amp;project=linux-4.1">desc</A>)) {
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.1/kernel/irq/manage.c#601" name=601>601</A>		<B>if</B> (!<A href="http://172.21.12.145:8080/source/s?defs=desc&amp;project=linux-4.1">desc</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=action&amp;project=linux-4.1">action</A> ||
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.1/kernel/irq/manage.c#602" name=602>602</A>		    <A href="http://172.21.12.145:8080/source/s?defs=irqflags&amp;project=linux-4.1">irqflags</A> &amp; <A href="http://172.21.12.145:8080/source/s?defs=desc&amp;project=linux-4.1">desc</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=action&amp;project=linux-4.1">action</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=flags&amp;project=linux-4.1">flags</A> &amp; <A href="http://172.21.12.145:8080/source/s?defs=IRQF_SHARED&amp;project=linux-4.1">IRQF_SHARED</A>)
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.1/kernel/irq/manage.c#603" name=603>603</A>			<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.1/kernel/irq/manage.c#canrequest">canrequest</A> = <SPAN class=n>1</SPAN>;
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.1/kernel/irq/manage.c#604" name=604>604</A>	}
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.1/kernel/irq/manage.c#605" name=605>605</A>	<A href="http://172.21.12.145:8080/source/s?defs=irq_put_desc_unlock&amp;project=linux-4.1">irq_put_desc_unlock</A>(<A href="http://172.21.12.145:8080/source/s?defs=desc&amp;project=linux-4.1">desc</A>, <A href="http://172.21.12.145:8080/source/s?defs=flags&amp;project=linux-4.1">flags</A>);
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.1/kernel/irq/manage.c#606" name=606>606</A>	<B>return</B> <A class=d href="http://172.21.12.145:8080/source/xref/linux-4.1/kernel/irq/manage.c#canrequest">canrequest</A>;
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.1/kernel/irq/manage.c#607" name=607>607</A>}</PRE></SPAN></FONT>