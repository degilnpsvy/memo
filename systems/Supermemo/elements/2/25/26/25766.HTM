<P class=MsoNormal style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt; mso-layout-grid-align: none" align=left><SPAN lang=EN-US style="FONT-SIZE: 18pt; FONT-FAMILY: 'Myriad-CnSemibold','sans-serif'; mso-bidi-font-size: 11.0pt; mso-bidi-font-family: Myriad-CnSemibold; mso-font-kerning: 0pt; mso-fareast-font-family: TheSansMonoCondensed-SemiLight">Class interfaces</SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt; mso-layout-grid-align: none" align=left><FONT face=Calibri><FONT class=extract><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">The class subsystem has an additional concept not found in other parts of the Linux device model. This mechanism is called an </SPAN><I><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka-Italic; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka-Italic; mso-font-kerning: 0pt">interface</SPAN></I><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">, but it is, perhaps, best thought of as a sort of trigger mechanism that can be used to get notification when devices enter or leave the class.</SPAN></FONT></FONT></P>
<P class=MsoNormal style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt; mso-layout-grid-align: none" align=left><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt"><FONT face=Calibri>An interface is represented by:</FONT></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt; mso-layout-grid-align: none" align=left><SPAN lang=EN-US style="FONT-SIZE: 11pt; FONT-FAMILY: TheSansMonoCondensed-SemiLight; mso-bidi-font-size: 8.0pt; mso-bidi-font-family: TheSansMonoCondensed-SemiLight; mso-font-kerning: 0pt"><FONT face=Calibri>In Kernel v4.6:</FONT></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt; mso-layout-grid-align: none" align=left><SPAN lang=EN-US style="FONT-SIZE: 11pt; FONT-FAMILY: TheSansMonoCondensed-SemiLight; mso-bidi-font-size: 8.0pt; mso-bidi-font-family: TheSansMonoCondensed-SemiLight; mso-font-kerning: 0pt"></SPAN><SPAN lang=EN-US style="FONT-SIZE: 11pt; FONT-FAMILY: TheSansMonoCondensed-SemiLight; mso-bidi-font-size: 8.0pt; mso-bidi-font-family: TheSansMonoCondensed-SemiLight; mso-font-kerning: 0pt"><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/include/linux/device.h#503" name=503>503</A><B>struct</B> <A class=xs name=class_interface></A><A class=xs href="http://172.29.26.110:8080/source/s?refs=class_interface&amp;project=Linux-v4.6">class_interface</A> {<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/include/linux/device.h#504" name=504>504</A>	<B>struct</B> <A href="http://172.29.26.110:8080/source/s?defs=list_head&amp;project=Linux-v4.6">list_head</A>	<A class=xmb name=node></A><A class=xmb href="http://172.29.26.110:8080/source/s?refs=node&amp;project=Linux-v4.6">node</A>;<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/include/linux/device.h#505" name=505>505</A>	<B>struct</B> <A href="http://172.29.26.110:8080/source/s?defs=class&amp;project=Linux-v4.6">class</A>		*<A href="http://172.29.26.110:8080/source/s?defs=class&amp;project=Linux-v4.6">class</A>;<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/include/linux/device.h#506" name=506>506</A><BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/include/linux/device.h#507" name=507>507</A>	<B>int</B> (*<A class=xmb name=add_dev></A><A class=xmb href="http://172.29.26.110:8080/source/s?refs=add_dev&amp;project=Linux-v4.6">add_dev</A>)		(<B>struct</B> <A class=d href="http://172.29.26.110:8080/source/xref/Linux-v4.6/include/linux/device.h#device">device</A> *, <B>struct</B> <A class=d href="http://172.29.26.110:8080/source/xref/Linux-v4.6/include/linux/device.h#class_interface">class_interface</A> *);<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/include/linux/device.h#508" name=508>508</A>	<B>void</B> (*<A class=xmb name=remove_dev></A><A class=xmb href="http://172.29.26.110:8080/source/s?refs=remove_dev&amp;project=Linux-v4.6">remove_dev</A>)	(<B>struct</B> <A class=d href="http://172.29.26.110:8080/source/xref/Linux-v4.6/include/linux/device.h#device">device</A> *, <B>struct</B> <A class=d href="http://172.29.26.110:8080/source/xref/Linux-v4.6/include/linux/device.h#class_interface">class_interface</A> *);<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/include/linux/device.h#509" name=509>509</A>};</P></SPAN>
<P class=MsoNormal style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt; mso-layout-grid-align: none" align=left><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt"><FONT face=Calibri>Interfaces can be registered and unregistered with:</FONT></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt; mso-layout-grid-align: none" align=left><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt"></SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt"><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/include/linux/device.h#511" name=511>511</A><B>extern</B> <B>int</B> <A href="http://172.29.26.110:8080/source/s?defs=__must_check&amp;project=Linux-v4.6">__must_check</A> <A href="http://172.29.26.110:8080/source/s?defs=class_interface_register&amp;project=Linux-v4.6">class_interface_register</A>(<B>struct</B> <A class=d href="http://172.29.26.110:8080/source/xref/Linux-v4.6/include/linux/device.h#class_interface">class_interface</A> *);<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/include/linux/device.h#512" name=512>512</A><B>extern</B> <B>void</B> <A href="http://172.29.26.110:8080/source/s?defs=class_interface_unregister&amp;project=Linux-v4.6">class_interface_unregister</A>(<B>struct</B> <A class=d href="http://172.29.26.110:8080/source/xref/Linux-v4.6/include/linux/device.h#class_interface">class_interface</A> *);</P></SPAN>
<P class=MsoNormal style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt; mso-layout-grid-align: none" align=left><FONT face=Calibri><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">The functioning of an interface is straightforward. Whenever a class device is added to the </SPAN><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: TheSansMonoCondensed-SemiLight; mso-bidi-font-size: 9.0pt; mso-bidi-font-family: TheSansMonoCondensed-SemiLight; mso-font-kerning: 0pt">class </SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">specified in the </SPAN><SPAN lang=EN-US style="FONT-SIZE: 12pt; FONT-FAMILY: TheSansMonoCondensed-SemiLight; mso-bidi-font-size: 9.0pt; mso-bidi-font-family: TheSansMonoCondensed-SemiLight; mso-font-kerning: 0pt">class_interface </SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">structure, the interface</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt; mso-fareast-font-family: Birka; mso-ascii-font-family: Birka">&#8217;</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">s </SPAN><I><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka-Italic; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka-Italic; mso-font-kerning: 0pt">add </SPAN></I><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">function is called. That function can perform any additional setup required for that device; this setup often takes the form of adding more attributes, but other applications are possible. When the device is removed from the class, the </SPAN><I><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka-Italic; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka-Italic; mso-font-kerning: 0pt">remove </SPAN></I><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt">method is called to perform any required cleanup.</SPAN></FONT></P>
<P class=MsoNormal style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt; mso-layout-grid-align: none" align=left><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt"><FONT face=Calibri>Multiple interfaces can be registered for a class.</FONT></SPAN></P>
<P class=MsoNormal style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt; mso-layout-grid-align: none" align=left><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt"></SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt"><A class=hl href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/class.c#440" name=440>440</A><B>int</B> <A class=xf name=class_interface_register></A><A class=xf href="http://172.29.26.110:8080/source/s?refs=class_interface_register&amp;project=Linux-v4.6">class_interface_register</A>(<B>struct</B> <A href="http://172.29.26.110:8080/source/s?defs=class_interface&amp;project=Linux-v4.6">class_interface</A> *<A class=xa name=class_intf></A><A class=xa href="http://172.29.26.110:8080/source/s?refs=class_intf&amp;project=Linux-v4.6">class_intf</A>)<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/class.c#441" name=441>441</A>{<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/class.c#442" name=442>442</A>	<B>struct</B> <A href="http://172.29.26.110:8080/source/s?defs=class&amp;project=Linux-v4.6">class</A> *<A class=xl name=parent></A><A class=xl href="http://172.29.26.110:8080/source/s?refs=parent&amp;project=Linux-v4.6">parent</A>;<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/class.c#443" name=443>443</A>	<B>struct</B> <A href="http://172.29.26.110:8080/source/s?defs=class_dev_iter&amp;project=Linux-v4.6">class_dev_iter</A> <A class=xl name=iter></A><A class=xl href="http://172.29.26.110:8080/source/s?refs=iter&amp;project=Linux-v4.6">iter</A>;<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/class.c#444" name=444>444</A>	<B>struct</B> <A href="http://172.29.26.110:8080/source/s?defs=device&amp;project=Linux-v4.6">device</A> *<A class=xl name=dev></A><A class=xl href="http://172.29.26.110:8080/source/s?refs=dev&amp;project=Linux-v4.6">dev</A>;<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/class.c#445" name=445>445</A><BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/class.c#446" name=446>446</A>	<B>if</B> (!<A href="http://172.29.26.110:8080/source/s?defs=class_intf&amp;project=Linux-v4.6">class_intf</A> || !<A href="http://172.29.26.110:8080/source/s?defs=class_intf&amp;project=Linux-v4.6">class_intf</A>-&gt;<A href="http://172.29.26.110:8080/source/s?defs=class&amp;project=Linux-v4.6">class</A>)<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/class.c#447" name=447>447</A>		<B>return</B> -<A href="http://172.29.26.110:8080/source/s?defs=ENODEV&amp;project=Linux-v4.6">ENODEV</A>;<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/class.c#448" name=448>448</A><BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/class.c#449" name=449>449</A>	<A href="http://172.29.26.110:8080/source/s?defs=parent&amp;project=Linux-v4.6">parent</A> = <A class=d href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/class.c#class_get">class_get</A>(<A href="http://172.29.26.110:8080/source/s?defs=class_intf&amp;project=Linux-v4.6">class_intf</A>-&gt;<A href="http://172.29.26.110:8080/source/s?defs=class&amp;project=Linux-v4.6">class</A>);<BR><A class=hl href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/class.c#450" name=450>450</A>	<B>if</B> (!<A href="http://172.29.26.110:8080/source/s?defs=parent&amp;project=Linux-v4.6">parent</A>)<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/class.c#451" name=451>451</A>		<B>return</B> -<A href="http://172.29.26.110:8080/source/s?defs=EINVAL&amp;project=Linux-v4.6">EINVAL</A>;<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/class.c#452" name=452>452</A><BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/class.c#453" name=453>453</A>	<A href="http://172.29.26.110:8080/source/s?defs=mutex_lock&amp;project=Linux-v4.6">mutex_lock</A>(&amp;<A href="http://172.29.26.110:8080/source/s?defs=parent&amp;project=Linux-v4.6">parent</A>-&gt;p-&gt;<A href="http://172.29.26.110:8080/source/s?defs=mutex&amp;project=Linux-v4.6">mutex</A>);<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/class.c#454" name=454>454</A>	<A href="http://172.29.26.110:8080/source/s?defs=list_add_tail&amp;project=Linux-v4.6">list_add_tail</A>(&amp;<A href="http://172.29.26.110:8080/source/s?defs=class_intf&amp;project=Linux-v4.6">class_intf</A>-&gt;<A href="http://172.29.26.110:8080/source/s?defs=node&amp;project=Linux-v4.6">node</A>, &amp;<A href="http://172.29.26.110:8080/source/s?defs=parent&amp;project=Linux-v4.6">parent</A>-&gt;p-&gt;<A href="http://172.29.26.110:8080/source/s?defs=interfaces&amp;project=Linux-v4.6">interfaces</A>);<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/class.c#455" name=455>455</A>	<B>if</B> (<A href="http://172.29.26.110:8080/source/s?defs=class_intf&amp;project=Linux-v4.6">class_intf</A>-&gt;<A href="http://172.29.26.110:8080/source/s?defs=add_dev&amp;project=Linux-v4.6">add_dev</A>) {<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/class.c#456" name=456>456</A>		<A href="http://172.29.26.110:8080/source/s?defs=class_dev_iter_init&amp;project=Linux-v4.6">class_dev_iter_init</A>(&amp;<A href="http://172.29.26.110:8080/source/s?defs=iter&amp;project=Linux-v4.6">iter</A>, <A href="http://172.29.26.110:8080/source/s?defs=parent&amp;project=Linux-v4.6">parent</A>, <A href="http://172.29.26.110:8080/source/s?defs=NULL&amp;project=Linux-v4.6">NULL</A>, <A href="http://172.29.26.110:8080/source/s?defs=NULL&amp;project=Linux-v4.6">NULL</A>);<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/class.c#457" name=457>457</A>		<B>while</B> ((<A href="http://172.29.26.110:8080/source/s?defs=dev&amp;project=Linux-v4.6">dev</A> = <A href="http://172.29.26.110:8080/source/s?defs=class_dev_iter_next&amp;project=Linux-v4.6">class_dev_iter_next</A>(&amp;<A href="http://172.29.26.110:8080/source/s?defs=iter&amp;project=Linux-v4.6">iter</A>)))<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/class.c#458" name=458>458</A>			<A href="http://172.29.26.110:8080/source/s?defs=class_intf&amp;project=Linux-v4.6">class_intf</A>-&gt;<A href="http://172.29.26.110:8080/source/s?defs=add_dev&amp;project=Linux-v4.6">add_dev</A>(<A href="http://172.29.26.110:8080/source/s?defs=dev&amp;project=Linux-v4.6">dev</A>, <A href="http://172.29.26.110:8080/source/s?defs=class_intf&amp;project=Linux-v4.6">class_intf</A>);<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/class.c#459" name=459>459</A>		<A href="http://172.29.26.110:8080/source/s?defs=class_dev_iter_exit&amp;project=Linux-v4.6">class_dev_iter_exit</A>(&amp;<A href="http://172.29.26.110:8080/source/s?defs=iter&amp;project=Linux-v4.6">iter</A>);<BR><A class=hl href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/class.c#460" name=460>460</A>	}<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/class.c#461" name=461>461</A>	<A href="http://172.29.26.110:8080/source/s?defs=mutex_unlock&amp;project=Linux-v4.6">mutex_unlock</A>(&amp;<A href="http://172.29.26.110:8080/source/s?defs=parent&amp;project=Linux-v4.6">parent</A>-&gt;p-&gt;<A href="http://172.29.26.110:8080/source/s?defs=mutex&amp;project=Linux-v4.6">mutex</A>);<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/class.c#462" name=462>462</A><BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/class.c#463" name=463>463</A>	<B>return</B> 0;<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/class.c#464" name=464>464</A>}<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/class.c#465" name=465>465</A><BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/class.c#466" name=466>466</A><B>void</B> <A class=xf name=class_interface_unregister></A><A class=xf href="http://172.29.26.110:8080/source/s?refs=class_interface_unregister&amp;project=Linux-v4.6">class_interface_unregister</A>(<B>struct</B> <A href="http://172.29.26.110:8080/source/s?defs=class_interface&amp;project=Linux-v4.6">class_interface</A> *<A class=xa name=class_intf></A><A class=xa href="http://172.29.26.110:8080/source/s?refs=class_intf&amp;project=Linux-v4.6">class_intf</A>)<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/class.c#467" name=467>467</A>{<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/class.c#468" name=468>468</A>	<B>struct</B> <A href="http://172.29.26.110:8080/source/s?defs=class&amp;project=Linux-v4.6">class</A> *<A class=xl name=parent></A><A class=xl href="http://172.29.26.110:8080/source/s?refs=parent&amp;project=Linux-v4.6">parent</A> = <A href="http://172.29.26.110:8080/source/s?defs=class_intf&amp;project=Linux-v4.6">class_intf</A>-&gt;<A href="http://172.29.26.110:8080/source/s?defs=class&amp;project=Linux-v4.6">class</A>;<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/class.c#469" name=469>469</A>	<B>struct</B> <A href="http://172.29.26.110:8080/source/s?defs=class_dev_iter&amp;project=Linux-v4.6">class_dev_iter</A> <A class=xl name=iter></A><A class=xl href="http://172.29.26.110:8080/source/s?refs=iter&amp;project=Linux-v4.6">iter</A>;<BR><A class=hl href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/class.c#470" name=470>470</A>	<B>struct</B> <A href="http://172.29.26.110:8080/source/s?defs=device&amp;project=Linux-v4.6">device</A> *<A class=xl name=dev></A><A class=xl href="http://172.29.26.110:8080/source/s?refs=dev&amp;project=Linux-v4.6">dev</A>;<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/class.c#471" name=471>471</A><BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/class.c#472" name=472>472</A>	<B>if</B> (!<A href="http://172.29.26.110:8080/source/s?defs=parent&amp;project=Linux-v4.6">parent</A>)<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/class.c#473" name=473>473</A>		<B>return</B>;<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/class.c#474" name=474>474</A><BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/class.c#475" name=475>475</A>	<A href="http://172.29.26.110:8080/source/s?defs=mutex_lock&amp;project=Linux-v4.6">mutex_lock</A>(&amp;<A href="http://172.29.26.110:8080/source/s?defs=parent&amp;project=Linux-v4.6">parent</A>-&gt;p-&gt;<A href="http://172.29.26.110:8080/source/s?defs=mutex&amp;project=Linux-v4.6">mutex</A>);<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/class.c#476" name=476>476</A>	<A href="http://172.29.26.110:8080/source/s?defs=list_del_init&amp;project=Linux-v4.6">list_del_init</A>(&amp;<A href="http://172.29.26.110:8080/source/s?defs=class_intf&amp;project=Linux-v4.6">class_intf</A>-&gt;<A href="http://172.29.26.110:8080/source/s?defs=node&amp;project=Linux-v4.6">node</A>);<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/class.c#477" name=477>477</A>	<B>if</B> (<A href="http://172.29.26.110:8080/source/s?defs=class_intf&amp;project=Linux-v4.6">class_intf</A>-&gt;<A href="http://172.29.26.110:8080/source/s?defs=remove_dev&amp;project=Linux-v4.6">remove_dev</A>) {<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/class.c#478" name=478>478</A>		<A href="http://172.29.26.110:8080/source/s?defs=class_dev_iter_init&amp;project=Linux-v4.6">class_dev_iter_init</A>(&amp;<A href="http://172.29.26.110:8080/source/s?defs=iter&amp;project=Linux-v4.6">iter</A>, <A href="http://172.29.26.110:8080/source/s?defs=parent&amp;project=Linux-v4.6">parent</A>, <A href="http://172.29.26.110:8080/source/s?defs=NULL&amp;project=Linux-v4.6">NULL</A>, <A href="http://172.29.26.110:8080/source/s?defs=NULL&amp;project=Linux-v4.6">NULL</A>);<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/class.c#479" name=479>479</A>		<B>while</B> ((<A href="http://172.29.26.110:8080/source/s?defs=dev&amp;project=Linux-v4.6">dev</A> = <A href="http://172.29.26.110:8080/source/s?defs=class_dev_iter_next&amp;project=Linux-v4.6">class_dev_iter_next</A>(&amp;<A href="http://172.29.26.110:8080/source/s?defs=iter&amp;project=Linux-v4.6">iter</A>)))<BR><A class=hl href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/class.c#480" name=480>480</A>			<A href="http://172.29.26.110:8080/source/s?defs=class_intf&amp;project=Linux-v4.6">class_intf</A>-&gt;<A href="http://172.29.26.110:8080/source/s?defs=remove_dev&amp;project=Linux-v4.6">remove_dev</A>(<A href="http://172.29.26.110:8080/source/s?defs=dev&amp;project=Linux-v4.6">dev</A>, <A href="http://172.29.26.110:8080/source/s?defs=class_intf&amp;project=Linux-v4.6">class_intf</A>);<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/class.c#481" name=481>481</A>		<A href="http://172.29.26.110:8080/source/s?defs=class_dev_iter_exit&amp;project=Linux-v4.6">class_dev_iter_exit</A>(&amp;<A href="http://172.29.26.110:8080/source/s?defs=iter&amp;project=Linux-v4.6">iter</A>);<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/class.c#482" name=482>482</A>	}<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/class.c#483" name=483>483</A>	<A href="http://172.29.26.110:8080/source/s?defs=mutex_unlock&amp;project=Linux-v4.6">mutex_unlock</A>(&amp;<A href="http://172.29.26.110:8080/source/s?defs=parent&amp;project=Linux-v4.6">parent</A>-&gt;p-&gt;<A href="http://172.29.26.110:8080/source/s?defs=mutex&amp;project=Linux-v4.6">mutex</A>);<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/class.c#484" name=484>484</A><BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/class.c#485" name=485>485</A>	<A class=d href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/class.c#class_put">class_put</A>(<A href="http://172.29.26.110:8080/source/s?defs=parent&amp;project=Linux-v4.6">parent</A>);<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/class.c#486" name=486>486</A>}</P></SPAN>