<P class=line867 style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); FONT: 16px sans-serif; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><BIG><STRONG>Reading events from the event queue</STRONG></BIG><SPAN id=line-49 class=anchor></SPAN><SPAN id=line-50 class=anchor></SPAN></P>
<P class=line862 style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); FONT: 16px sans-serif; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">Reading events from the event queue is done with either<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="TEXT-DECORATION: none; BORDER-TOP: 0px; BORDER-RIGHT: 0px; BORDER-BOTTOM: 0px; COLOR: purple; BORDER-LEFT: 0px" href="http://wiki.libsdl.org/SDL_PollEvent">SDL_PollEvent</A>() or<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="TEXT-DECORATION: none; BORDER-TOP: 0px; BORDER-RIGHT: 0px; BORDER-BOTTOM: 0px; COLOR: purple; BORDER-LEFT: 0px" href="http://wiki.libsdl.org/SDL_PeepEvents">SDL_PeepEvents</A>(). We'll use<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="TEXT-DECORATION: none; BORDER-TOP: 0px; BORDER-RIGHT: 0px; BORDER-BOTTOM: 0px; COLOR: purple; BORDER-LEFT: 0px" href="http://wiki.libsdl.org/SDL_PollEvent">SDL_PollEvent</A>() and step through an example.<SPAN id=line-51 class=anchor></SPAN><SPAN id=line-52 class=anchor></SPAN></P>
<P class=line862 style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); FONT: 16px sans-serif; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">First off, we create an empty<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="TEXT-DECORATION: none; BORDER-TOP: 0px; BORDER-RIGHT: 0px; BORDER-BOTTOM: 0px; COLOR: purple; BORDER-LEFT: 0px" href="http://wiki.libsdl.org/SDL_Event">SDL_Event</A><SPAN class=Apple-converted-space>&nbsp;</SPAN>structure.<SPAN id=line-53 class=anchor></SPAN><SPAN id=line-54 class=anchor></SPAN><SPAN id=line-55 class=anchor></SPAN></P>
<DIV lang=en class=codearea style="BORDER-TOP: rgb(174,189,204) 1pt solid; BORDER-RIGHT: rgb(174,189,204) 1pt solid; WHITE-SPACE: normal; WORD-SPACING: 0px; BORDER-BOTTOM: rgb(174,189,204) 1pt solid; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; FONT: 16px sans-serif; PADDING-LEFT: 0px; MARGIN: 0.5em 0px; BORDER-LEFT: rgb(174,189,204) 1pt solid; LETTER-SPACING: normal; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(243,245,247); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px" dir=ltr><A class=codenumbers style="FONT-SIZE: 0.85em; TEXT-DECORATION: none; BORDER-TOP: 0px; BORDER-RIGHT: 0px; BORDER-BOTTOM: 0px; COLOR: purple; MARGIN: 0px 10pt; BORDER-LEFT: 0px" href="http://wiki.libsdl.org/SDL_Event?highlight=%28%5CbCategoryStruct%5Cb%29%7C%28CategoryEvents%29#" 1);? 1, ?return togglenumber(?CA-pygments_1169?,>&#20999;&#25442;&#34892;&#21495;&#26174;&#31034;</A><PRE lang=en id=CA-pygments_1169 style="WORD-WRAP: break-word; BORDER-TOP: medium none; FONT-FAMILY: courier, monospace; BORDER-RIGHT: medium none; WHITE-SPACE: pre-wrap; BORDER-BOTTOM: medium none; PADDING-BOTTOM: 10pt; PADDING-TOP: 10pt; PADDING-LEFT: 10pt; CLEAR: both; MARGIN: 0px; BORDER-LEFT: medium none; PADDING-RIGHT: 10pt; BACKGROUND-COLOR: rgb(243,245,247)" dir=ltr><SPAN class=line><SPAN class=n>SDL_Event</SPAN> <SPAN class=n>test_event</SPAN><SPAN class=p>;</SPAN>
</SPAN></PRE></DIV><SPAN id=line-56 class=anchor style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); FONT: 16px sans-serif; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"></SPAN>
<P class=line867 style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); FONT: 16px sans-serif; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><A style="TEXT-DECORATION: none; BORDER-TOP: 0px; BORDER-RIGHT: 0px; BORDER-BOTTOM: 0px; COLOR: purple; BORDER-LEFT: 0px" href="http://wiki.libsdl.org/SDL_PollEvent">SDL_PollEvent</A>() removes the next event from the event queue. If there are no events on the queue it returns 0, otherwise it returns 1. We use a<SPAN class=Apple-converted-space>&nbsp;</SPAN><TT>while</TT><SPAN class=Apple-converted-space>&nbsp;</SPAN>loop to process each event in turn.<SPAN id=line-57 class=anchor></SPAN><SPAN id=line-58 class=anchor></SPAN><SPAN id=line-59 class=anchor></SPAN></P>
<DIV lang=en class=codearea style="BORDER-TOP: rgb(174,189,204) 1pt solid; BORDER-RIGHT: rgb(174,189,204) 1pt solid; WHITE-SPACE: normal; WORD-SPACING: 0px; BORDER-BOTTOM: rgb(174,189,204) 1pt solid; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; FONT: 16px sans-serif; PADDING-LEFT: 0px; MARGIN: 0.5em 0px; BORDER-LEFT: rgb(174,189,204) 1pt solid; LETTER-SPACING: normal; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(243,245,247); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px" dir=ltr><A class=codenumbers style="FONT-SIZE: 0.85em; TEXT-DECORATION: none; BORDER-TOP: 0px; BORDER-RIGHT: 0px; BORDER-BOTTOM: 0px; COLOR: purple; MARGIN: 0px 10pt; BORDER-LEFT: 0px" href="http://wiki.libsdl.org/SDL_Event?highlight=%28%5CbCategoryStruct%5Cb%29%7C%28CategoryEvents%29#" 1);? 1, ?return togglenumber(?CA-pygments_1170?,>&#20999;&#25442;&#34892;&#21495;&#26174;&#31034;</A><PRE lang=en id=CA-pygments_1170 style="WORD-WRAP: break-word; BORDER-TOP: medium none; FONT-FAMILY: courier, monospace; BORDER-RIGHT: medium none; WHITE-SPACE: pre-wrap; BORDER-BOTTOM: medium none; PADDING-BOTTOM: 10pt; PADDING-TOP: 10pt; PADDING-LEFT: 10pt; CLEAR: both; MARGIN: 0px; BORDER-LEFT: medium none; PADDING-RIGHT: 10pt; BACKGROUND-COLOR: rgb(243,245,247)" dir=ltr><SPAN class=line><SPAN class=k style="COLOR: rgb(0,0,170)">while</SPAN> <SPAN class=p>(</SPAN><SPAN class=n>SDL_PollEvent</SPAN><SPAN class=p>(</SPAN><SPAN class=o>&amp;</SPAN><SPAN class=n>test_event</SPAN><SPAN class=p>))</SPAN> <SPAN class=p>{</SPAN>
</SPAN></PRE></DIV><SPAN id=line-60 class=anchor style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); FONT: 16px sans-serif; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"></SPAN>
<P class=line862 style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); FONT: 16px sans-serif; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">The<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="TEXT-DECORATION: none; BORDER-TOP: 0px; BORDER-RIGHT: 0px; BORDER-BOTTOM: 0px; COLOR: purple; BORDER-LEFT: 0px" href="http://wiki.libsdl.org/SDL_PollEvent">SDL_PollEvent</A>() function takes a pointer to an<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="TEXT-DECORATION: none; BORDER-TOP: 0px; BORDER-RIGHT: 0px; BORDER-BOTTOM: 0px; COLOR: purple; BORDER-LEFT: 0px" href="http://wiki.libsdl.org/SDL_Event">SDL_Event</A><SPAN class=Apple-converted-space>&nbsp;</SPAN>structure that is to be filled with event information. We know that if<A style="TEXT-DECORATION: none; BORDER-TOP: 0px; BORDER-RIGHT: 0px; BORDER-BOTTOM: 0px; COLOR: purple; BORDER-LEFT: 0px" href="http://wiki.libsdl.org/SDL_PollEvent">SDL_PollEvent</A>() removes an event from the queue then the event information will be placed in our test_event structure, but we also know that the type of event will be placed in the<SPAN class=Apple-converted-space>&nbsp;</SPAN><STRONG>type</STRONG><SPAN class=Apple-converted-space>&nbsp;</SPAN>member of test_event. So to handle each event type separately we use a<SPAN class=Apple-converted-space>&nbsp;</SPAN><TT>switch</TT><SPAN class=Apple-converted-space>&nbsp;</SPAN>statement.<SPAN id=line-61 class=anchor></SPAN><SPAN id=line-62 class=anchor></SPAN><SPAN id=line-63 class=anchor></SPAN></P>
<DIV lang=en class=codearea style="BORDER-TOP: rgb(174,189,204) 1pt solid; BORDER-RIGHT: rgb(174,189,204) 1pt solid; WHITE-SPACE: normal; WORD-SPACING: 0px; BORDER-BOTTOM: rgb(174,189,204) 1pt solid; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; FONT: 16px sans-serif; PADDING-LEFT: 0px; MARGIN: 0.5em 0px; BORDER-LEFT: rgb(174,189,204) 1pt solid; LETTER-SPACING: normal; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(243,245,247); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px" dir=ltr><A class=codenumbers style="FONT-SIZE: 0.85em; TEXT-DECORATION: none; BORDER-TOP: 0px; BORDER-RIGHT: 0px; BORDER-BOTTOM: 0px; COLOR: purple; MARGIN: 0px 10pt; BORDER-LEFT: 0px" href="http://wiki.libsdl.org/SDL_Event?highlight=%28%5CbCategoryStruct%5Cb%29%7C%28CategoryEvents%29#" 1);? 1, ?return togglenumber(?CA-pygments_1171?,>&#20999;&#25442;&#34892;&#21495;&#26174;&#31034;</A><PRE lang=en id=CA-pygments_1171 style="WORD-WRAP: break-word; BORDER-TOP: medium none; FONT-FAMILY: courier, monospace; BORDER-RIGHT: medium none; WHITE-SPACE: pre-wrap; BORDER-BOTTOM: medium none; PADDING-BOTTOM: 10pt; PADDING-TOP: 10pt; PADDING-LEFT: 10pt; CLEAR: both; MARGIN: 0px; BORDER-LEFT: medium none; PADDING-RIGHT: 10pt; BACKGROUND-COLOR: rgb(243,245,247)" dir=ltr><SPAN class=line>  <SPAN class=k style="COLOR: rgb(0,0,170)">switch</SPAN> <SPAN class=p>(</SPAN><SPAN class=n>test_event</SPAN><SPAN class=p>.</SPAN><SPAN class=n>type</SPAN><SPAN class=p>)</SPAN> <SPAN class=p>{</SPAN>
</SPAN></PRE></DIV><SPAN id=line-64 class=anchor style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); FONT: 16px sans-serif; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"></SPAN>
<P class=line862 style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); FONT: 16px sans-serif; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">We need to know what kind of events we're looking for and the event types of those events. So let's assume we want to detect where the user is moving the mouse pointer within our application. We look through our event types and notice that SDL_MOUSEMOTION is, more than likely, the event we're looking for. Looking at the<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="TEXT-DECORATION: none; BORDER-TOP: 0px; BORDER-RIGHT: 0px; BORDER-BOTTOM: 0px; COLOR: purple; BORDER-LEFT: 0px" href="http://wiki.libsdl.org/SDL_Event#table">table</A><SPAN class=Apple-converted-space>&nbsp;</SPAN>below tells us that SDL_MOUSEMOTION events are handled within the<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="TEXT-DECORATION: none; BORDER-TOP: 0px; BORDER-RIGHT: 0px; BORDER-BOTTOM: 0px; COLOR: purple; BORDER-LEFT: 0px" href="http://wiki.libsdl.org/SDL_MouseMotionEvent">SDL_MouseMotionEvent</A>structure which is the<SPAN class=Apple-converted-space>&nbsp;</SPAN><STRONG>motion</STRONG><SPAN class=Apple-converted-space>&nbsp;</SPAN>member of<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="TEXT-DECORATION: none; BORDER-TOP: 0px; BORDER-RIGHT: 0px; BORDER-BOTTOM: 0px; COLOR: purple; BORDER-LEFT: 0px" href="http://wiki.libsdl.org/SDL_Event">SDL_Event</A>. We can check for the SDL_MOUSEMOTION event<SPAN class=Apple-converted-space>&nbsp;</SPAN><STRONG>type</STRONG><SPAN class=Apple-converted-space>&nbsp;</SPAN>within our<SPAN class=Apple-converted-space>&nbsp;</SPAN><TT>switch</TT><SPAN class=Apple-converted-space>&nbsp;</SPAN>statement like so:<SPAN id=line-65 class=anchor></SPAN><SPAN id=line-66 class=anchor></SPAN><SPAN id=line-67 class=anchor></SPAN></P>
<DIV lang=en class=codearea style="BORDER-TOP: rgb(174,189,204) 1pt solid; BORDER-RIGHT: rgb(174,189,204) 1pt solid; WHITE-SPACE: normal; WORD-SPACING: 0px; BORDER-BOTTOM: rgb(174,189,204) 1pt solid; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; FONT: 16px sans-serif; PADDING-LEFT: 0px; MARGIN: 0.5em 0px; BORDER-LEFT: rgb(174,189,204) 1pt solid; LETTER-SPACING: normal; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(243,245,247); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px" dir=ltr><A class=codenumbers style="FONT-SIZE: 0.85em; TEXT-DECORATION: none; BORDER-TOP: 0px; BORDER-RIGHT: 0px; BORDER-BOTTOM: 0px; COLOR: purple; MARGIN: 0px 10pt; BORDER-LEFT: 0px" href="http://wiki.libsdl.org/SDL_Event?highlight=%28%5CbCategoryStruct%5Cb%29%7C%28CategoryEvents%29#" 1);? 1, ?return togglenumber(?CA-pygments_1172?,>&#20999;&#25442;&#34892;&#21495;&#26174;&#31034;</A><PRE lang=en id=CA-pygments_1172 style="WORD-WRAP: break-word; BORDER-TOP: medium none; FONT-FAMILY: courier, monospace; BORDER-RIGHT: medium none; WHITE-SPACE: pre-wrap; BORDER-BOTTOM: medium none; PADDING-BOTTOM: 10pt; PADDING-TOP: 10pt; PADDING-LEFT: 10pt; CLEAR: both; MARGIN: 0px; BORDER-LEFT: medium none; PADDING-RIGHT: 10pt; BACKGROUND-COLOR: rgb(243,245,247)" dir=ltr><SPAN class=line>    <SPAN class=k style="COLOR: rgb(0,0,170)">case</SPAN> <SPAN class=n>SDL_MOUSEMOTION</SPAN>:
</SPAN></PRE></DIV><SPAN id=line-68 class=anchor style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); FONT: 16px sans-serif; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"></SPAN>
<P class=line862 style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); FONT: 16px sans-serif; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">All we need do now is read the information out of the<SPAN class=Apple-converted-space>&nbsp;</SPAN><STRONG>motion</STRONG><SPAN class=Apple-converted-space>&nbsp;</SPAN>member of test_event.<SPAN id=line-69 class=anchor></SPAN><SPAN id=line-70 class=anchor></SPAN><SPAN id=line-71 class=anchor></SPAN><SPAN id=line-72 class=anchor></SPAN><SPAN id=line-73 class=anchor></SPAN><SPAN id=line-74 class=anchor></SPAN><SPAN id=line-75 class=anchor></SPAN><SPAN id=line-76 class=anchor></SPAN><SPAN id=line-77 class=anchor></SPAN><SPAN id=line-78 class=anchor></SPAN><SPAN id=line-79 class=anchor></SPAN></P>
<DIV lang=en class=codearea style="BORDER-TOP: rgb(174,189,204) 1pt solid; BORDER-RIGHT: rgb(174,189,204) 1pt solid; WHITE-SPACE: normal; WORD-SPACING: 0px; BORDER-BOTTOM: rgb(174,189,204) 1pt solid; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; FONT: 16px sans-serif; PADDING-LEFT: 0px; MARGIN: 0.5em 0px; BORDER-LEFT: rgb(174,189,204) 1pt solid; LETTER-SPACING: normal; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(243,245,247); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px" dir=ltr><A class=codenumbers style="FONT-SIZE: 0.85em; TEXT-DECORATION: none; BORDER-TOP: 0px; BORDER-RIGHT: 0px; BORDER-BOTTOM: 0px; COLOR: purple; MARGIN: 0px 10pt; BORDER-LEFT: 0px" href="http://wiki.libsdl.org/SDL_Event?highlight=%28%5CbCategoryStruct%5Cb%29%7C%28CategoryEvents%29#" 1);? 1, ?return togglenumber(?CA-pygments_1173?,>&#20999;&#25442;&#34892;&#21495;&#26174;&#31034;</A><PRE lang=en id=CA-pygments_1173 style="WORD-WRAP: break-word; BORDER-TOP: medium none; FONT-FAMILY: courier, monospace; BORDER-RIGHT: medium none; WHITE-SPACE: pre-wrap; BORDER-BOTTOM: medium none; PADDING-BOTTOM: 10pt; PADDING-TOP: 10pt; PADDING-LEFT: 10pt; CLEAR: both; MARGIN: 0px; BORDER-LEFT: medium none; PADDING-RIGHT: 10pt; BACKGROUND-COLOR: rgb(243,245,247)" dir=ltr><SPAN class=line>      <SPAN class=n>printf</SPAN><SPAN class=p>(</SPAN><SPAN class=s style="COLOR: rgb(170,85,0)">"We got a motion event.</SPAN><SPAN class=se style="COLOR: rgb(170,85,0)">\n</SPAN><SPAN class=s style="COLOR: rgb(170,85,0)">"</SPAN><SPAN class=p>);</SPAN>
</SPAN><SPAN class=line>      <SPAN class=n>printf</SPAN><SPAN class=p>(</SPAN><SPAN class=s style="COLOR: rgb(170,85,0)">"Current mouse position is: (%d, %d)</SPAN><SPAN class=se style="COLOR: rgb(170,85,0)">\n</SPAN><SPAN class=s style="COLOR: rgb(170,85,0)">"</SPAN><SPAN class=p>,</SPAN> <SPAN class=n>test_event</SPAN><SPAN class=p>.</SPAN><SPAN class=n>motion</SPAN><SPAN class=p>.</SPAN><SPAN class=n>x</SPAN><SPAN class=p>,</SPAN> <SPAN class=n>test_event</SPAN><SPAN class=p>.</SPAN><SPAN class=n>motion</SPAN><SPAN class=p>.</SPAN><SPAN class=n>y</SPAN><SPAN class=p>);</SPAN>
</SPAN><SPAN class=line>      <SPAN class=k style="COLOR: rgb(0,0,170)">break</SPAN><SPAN class=p>;</SPAN>
</SPAN><SPAN class=line>    <SPAN class=nl>default:</SPAN>
</SPAN><SPAN class=line>      <SPAN class=n>printf</SPAN><SPAN class=p>(</SPAN><SPAN class=s style="COLOR: rgb(170,85,0)">"Unhandled Event!</SPAN><SPAN class=se style="COLOR: rgb(170,85,0)">\n</SPAN><SPAN class=s style="COLOR: rgb(170,85,0)">"</SPAN><SPAN class=p>);</SPAN>
</SPAN><SPAN class=line>      <SPAN class=k style="COLOR: rgb(0,0,170)">break</SPAN><SPAN class=p>;</SPAN>
</SPAN><SPAN class=line>  <SPAN class=p>}</SPAN>
</SPAN><SPAN class=line><SPAN class=p>}</SPAN>
</SPAN><SPAN class=line><SPAN class=n>printf</SPAN><SPAN class=p>(</SPAN><SPAN class=s style="COLOR: rgb(170,85,0)">"Event queue empty.</SPAN><SPAN class=se style="COLOR: rgb(170,85,0)">\n</SPAN><SPAN class=s style="COLOR: rgb(170,85,0)">"</SPAN><SPAN class=p>);</SPAN>
</SPAN></PRE></DIV>