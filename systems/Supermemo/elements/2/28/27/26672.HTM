<HEADER class=entry-header>&nbsp;
<H1 class=entry-title>_GNU_SOURCE&#21644;__USE_GNU&#30340;&#24046;&#21035;</H1>
<DIV class=entry-meta><SPAN class=sep>&#21457;&#34920;&#20110; </SPAN><A title="&#19978;&#21320; 10:19" href="http://mnstory.net/2015/03/_gnu_source-vs-__use_gnu/" rel=bookmark><TIME class=entry-date datetime="2015-03-08T10:19:39+00:00">2015 &#24180; 3 &#26376; 8 &#26085;</TIME></A> </DIV></HEADER>
<DIV class=entry-content>
<P>c-cpp.c&#65306;</P>
<DIV id=crayon-5698982d49636389017533 class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" style="FONT-SIZE: 14px !important; HEIGHT: auto; LINE-HEIGHT: 15px !important" data-settings=" minimize scroll-mouseover">
<DIV class=crayon-plain-wrap></DIV>
<DIV class=crayon-main style="OVERFLOW: hidden; POSITION: relative; Z-INDEX: 1">
<TABLE class=crayon-table>
<TBODY>
<TR class=crayon-row>
<TD class="crayon-nums " data-settings="show">
<DIV class=crayon-nums-content style="FONT-SIZE: 14px !important; LINE-HEIGHT: 15px !important">
<DIV class=crayon-num data-line="crayon-5698982d49636389017533-1">1</DIV>
<DIV class="crayon-num crayon-striped-num" data-line="crayon-5698982d49636389017533-2">2</DIV>
<DIV class=crayon-num data-line="crayon-5698982d49636389017533-3">3</DIV>
<DIV class="crayon-num crayon-striped-num" data-line="crayon-5698982d49636389017533-4">4</DIV>
<DIV class=crayon-num data-line="crayon-5698982d49636389017533-5">5</DIV>
<DIV class="crayon-num crayon-striped-num" data-line="crayon-5698982d49636389017533-6">6</DIV>
<DIV class=crayon-num data-line="crayon-5698982d49636389017533-7">7</DIV>
<DIV class="crayon-num crayon-striped-num" data-line="crayon-5698982d49636389017533-8">8</DIV>
<DIV class=crayon-num data-line="crayon-5698982d49636389017533-9">9</DIV>
<DIV class="crayon-num crayon-striped-num" data-line="crayon-5698982d49636389017533-10">10</DIV>
<DIV class=crayon-num data-line="crayon-5698982d49636389017533-11">11</DIV>
<DIV class="crayon-num crayon-striped-num" data-line="crayon-5698982d49636389017533-12">12</DIV>
<DIV class=crayon-num data-line="crayon-5698982d49636389017533-13">13</DIV>
<DIV class="crayon-num crayon-striped-num" data-line="crayon-5698982d49636389017533-14">14</DIV></DIV></TD>
<TD class=crayon-code>
<DIV class=crayon-pre style="FONT-SIZE: 14px !important; LINE-HEIGHT: 15px !important; -moz-tab-size: 4; -o-tab-size: 4; -webkit-tab-size: 4; tab-size: 4">
<DIV id=crayon-5698982d49636389017533-1 class=crayon-line><SPAN class=crayon-p>#include &lt;stdio.h&gt;</SPAN></DIV>
<DIV id=crayon-5698982d49636389017533-2 class="crayon-line crayon-striped-line"><SPAN class=crayon-p>#include &lt;signal.h&gt; //&#25918;&#36825;&#37324;&#23601;&#32534;&#35793;&#19981;&#36807;</SPAN></DIV>
<DIV id=crayon-5698982d49636389017533-3 class=crayon-line>&nbsp;</DIV>
<DIV id=crayon-5698982d49636389017533-4 class="crayon-line crayon-striped-line"><SPAN class=crayon-c>/* get REG_RIP from ucontext.h */</SPAN></DIV>
<DIV id=crayon-5698982d49636389017533-5 class=crayon-line><SPAN class=crayon-p>#ifndef __USE_GNU</SPAN></DIV>
<DIV id=crayon-5698982d49636389017533-6 class="crayon-line crayon-striped-line"><SPAN class=crayon-p># define __USE_GNU</SPAN></DIV>
<DIV id=crayon-5698982d49636389017533-7 class=crayon-line><SPAN class=crayon-p>#endif</SPAN></DIV>
<DIV id=crayon-5698982d49636389017533-8 class="crayon-line crayon-striped-line"><SPAN class=crayon-p>#include &lt;ucontext.h&gt;</SPAN></DIV>
<DIV id=crayon-5698982d49636389017533-9 class=crayon-line>&nbsp;</DIV>
<DIV id=crayon-5698982d49636389017533-10 class="crayon-line crayon-striped-line"><SPAN class=crayon-t>int</SPAN><SPAN class=crayon-h> </SPAN><SPAN class=crayon-e>main</SPAN><SPAN class=crayon-sy>(</SPAN><SPAN class=crayon-t>int</SPAN><SPAN class=crayon-h> </SPAN><SPAN class=crayon-v>argc</SPAN><SPAN class=crayon-sy>,</SPAN><SPAN class=crayon-h> </SPAN><SPAN class=crayon-t>char</SPAN><SPAN class=crayon-o>*</SPAN><SPAN class=crayon-h> </SPAN><SPAN class=crayon-v>argv</SPAN><SPAN class=crayon-sy>[</SPAN><SPAN class=crayon-sy>]</SPAN><SPAN class=crayon-sy>)</SPAN></DIV>
<DIV id=crayon-5698982d49636389017533-11 class=crayon-line><SPAN class=crayon-sy>{</SPAN></DIV>
<DIV id=crayon-5698982d49636389017533-12 class="crayon-line crayon-striped-line"><SPAN class=crayon-h></SPAN><SPAN class=crayon-r>printf</SPAN><SPAN class=crayon-sy>(</SPAN><SPAN class=crayon-s>"%dn"</SPAN><SPAN class=crayon-sy>,</SPAN><SPAN class=crayon-h> </SPAN><SPAN class=crayon-v>REG_R8</SPAN><SPAN class=crayon-sy>)</SPAN><SPAN class=crayon-sy>;</SPAN></DIV>
<DIV id=crayon-5698982d49636389017533-13 class=crayon-line><SPAN class=crayon-h></SPAN><SPAN class=crayon-st>return</SPAN><SPAN class=crayon-h> </SPAN><SPAN class=crayon-cn>0</SPAN><SPAN class=crayon-sy>;</SPAN></DIV>
<DIV id=crayon-5698982d49636389017533-14 class="crayon-line crayon-striped-line"><SPAN class=crayon-sy>}</SPAN></DIV></DIV></TD></TR></TBODY></TABLE></DIV></DIV>
<P></P>
<P>&#29992;gcc&#32534;&#35793;&#19981;&#36807;&#65292;&#29992;g++&#21487;&#20197;&#65306;<BR>$ g++ c-cpp.c<BR>$ gcc c-cpp.c<BR>c-cpp.c: In function &#8216;main&#8217;:<BR>c-cpp.c:12:17: error: &#8216;REG_R8&#8217; undeclared (first use in this function)<BR>c-cpp.c:12:17: note: each undeclared identifier is reported only once for each function it appears in<BR><SPAN id=more-371></SPAN><BR>&#20854;&#39044;&#22788;&#29702;&#19978;&#26377;&#24046;&#21035;&#65306;<BR>$ gcc siginfo.c -E &gt;gcc.c<BR>$ g++ siginfo.c -E &gt;g++.c</P>
<P>&#22312;/usr/include/x86_64-linux-gnu/sys/ucontext.h &#25991;&#20214;&#37324;&#65292;&#23450;&#20041;&#20102;&#65306;</P>
<DIV id=crayon-5698982d49649978555380 class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" style="FONT-SIZE: 14px !important; HEIGHT: auto; LINE-HEIGHT: 15px !important" data-settings=" minimize scroll-mouseover">
<DIV class=crayon-plain-wrap></DIV>
<DIV class=crayon-main style="OVERFLOW: hidden; POSITION: relative; Z-INDEX: 1">
<TABLE class=crayon-table>
<TBODY>
<TR class=crayon-row>
<TD class="crayon-nums " data-settings="show">
<DIV class=crayon-nums-content style="FONT-SIZE: 14px !important; LINE-HEIGHT: 15px !important">
<DIV class=crayon-num data-line="crayon-5698982d49649978555380-1">1</DIV>
<DIV class="crayon-num crayon-striped-num" data-line="crayon-5698982d49649978555380-2">2</DIV>
<DIV class=crayon-num data-line="crayon-5698982d49649978555380-3">3</DIV>
<DIV class="crayon-num crayon-striped-num" data-line="crayon-5698982d49649978555380-4">4</DIV>
<DIV class=crayon-num data-line="crayon-5698982d49649978555380-5">5</DIV>
<DIV class="crayon-num crayon-striped-num" data-line="crayon-5698982d49649978555380-6">6</DIV>
<DIV class=crayon-num data-line="crayon-5698982d49649978555380-7">7</DIV>
<DIV class="crayon-num crayon-striped-num" data-line="crayon-5698982d49649978555380-8">8</DIV>
<DIV class=crayon-num data-line="crayon-5698982d49649978555380-9">9</DIV>
<DIV class="crayon-num crayon-striped-num" data-line="crayon-5698982d49649978555380-10">10</DIV>
<DIV class=crayon-num data-line="crayon-5698982d49649978555380-11">11</DIV>
<DIV class="crayon-num crayon-striped-num" data-line="crayon-5698982d49649978555380-12">12</DIV>
<DIV class=crayon-num data-line="crayon-5698982d49649978555380-13">13</DIV>
<DIV class="crayon-num crayon-striped-num" data-line="crayon-5698982d49649978555380-14">14</DIV></DIV></TD>
<TD class=crayon-code>
<DIV class=crayon-pre style="FONT-SIZE: 14px !important; LINE-HEIGHT: 15px !important; -moz-tab-size: 4; -o-tab-size: 4; -webkit-tab-size: 4; tab-size: 4">
<DIV id=crayon-5698982d49649978555380-1 class=crayon-line><SPAN class=crayon-h></SPAN><SPAN class=crayon-c>/* Container for all general registers.&nbsp;&nbsp;*/</SPAN></DIV>
<DIV id=crayon-5698982d49649978555380-2 class="crayon-line crayon-striped-line"><SPAN class=crayon-h></SPAN><SPAN class=crayon-r>typedef</SPAN><SPAN class=crayon-h> </SPAN><SPAN class=crayon-e>greg_t </SPAN><SPAN class=crayon-v>gregset_t</SPAN><SPAN class=crayon-sy>[</SPAN><SPAN class=crayon-v>NGREG</SPAN><SPAN class=crayon-sy>]</SPAN><SPAN class=crayon-sy>;</SPAN></DIV>
<DIV id=crayon-5698982d49649978555380-3 class=crayon-line>&nbsp;</DIV>
<DIV id=crayon-5698982d49649978555380-4 class="crayon-line crayon-striped-line"><SPAN class=crayon-h></SPAN><SPAN class=crayon-p>#ifdef __USE_GNU</SPAN></DIV>
<DIV id=crayon-5698982d49649978555380-5 class=crayon-line><SPAN class=crayon-h></SPAN><SPAN class=crayon-c>/* Number of each register in the `gregset_t' array.&nbsp;&nbsp;*/</SPAN></DIV>
<DIV id=crayon-5698982d49649978555380-6 class="crayon-line crayon-striped-line"><SPAN class=crayon-h></SPAN><SPAN class=crayon-t>enum</SPAN></DIV>
<DIV id=crayon-5698982d49649978555380-7 class=crayon-line><SPAN class=crayon-h></SPAN><SPAN class=crayon-sy>{</SPAN></DIV>
<DIV id=crayon-5698982d49649978555380-8 class="crayon-line crayon-striped-line"><SPAN class=crayon-h>&nbsp;&nbsp;</SPAN><SPAN class=crayon-v>REG_R8</SPAN><SPAN class=crayon-h> </SPAN><SPAN class=crayon-o>=</SPAN><SPAN class=crayon-h> </SPAN><SPAN class=crayon-cn>0</SPAN><SPAN class=crayon-sy>,</SPAN></DIV>
<DIV id=crayon-5698982d49649978555380-9 class=crayon-line><SPAN class=crayon-h></SPAN><SPAN class=crayon-p># define REG_R8 REG_R8</SPAN></DIV>
<DIV id=crayon-5698982d49649978555380-10 class="crayon-line crayon-striped-line"><SPAN class=crayon-h>&nbsp;&nbsp;</SPAN><SPAN class=crayon-v>REG_R9</SPAN><SPAN class=crayon-sy>,</SPAN></DIV>
<DIV id=crayon-5698982d49649978555380-11 class=crayon-line><SPAN class=crayon-h></SPAN><SPAN class=crayon-p># define REG_R9 REG_R9</SPAN></DIV>
<DIV id=crayon-5698982d49649978555380-12 class="crayon-line crayon-striped-line"><SPAN class=crayon-h>&nbsp;&nbsp;</SPAN><SPAN class=crayon-sy>.</SPAN><SPAN class=crayon-sy>.</SPAN><SPAN class=crayon-sy>.</SPAN></DIV>
<DIV id=crayon-5698982d49649978555380-13 class=crayon-line><SPAN class=crayon-h></SPAN><SPAN class=crayon-p>#endif</SPAN></DIV>
<DIV id=crayon-5698982d49649978555380-14 class="crayon-line crayon-striped-line"><SPAN class=crayon-h></SPAN><SPAN class=crayon-t>struct</SPAN><SPAN class=crayon-h> </SPAN><SPAN class=crayon-v>_libc_fpxreg</SPAN></DIV></DIV></TD></TR></TBODY></TABLE></DIV></DIV>
<P>&#32463;&#36807;&#39044;&#22788;&#29702;&#65292;gcc.c&#26174;&#31034;&#20026;&#65306;</P>
<DIV id=crayon-5698982d49651362003144 class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" style="FONT-SIZE: 14px !important; HEIGHT: auto; LINE-HEIGHT: 15px !important" data-settings=" minimize scroll-mouseover">
<DIV class=crayon-plain-wrap></DIV>
<DIV class=crayon-main style="OVERFLOW: hidden; POSITION: relative; Z-INDEX: 1">
<TABLE class=crayon-table>
<TBODY>
<TR class=crayon-row>
<TD class="crayon-nums " data-settings="show">
<DIV class=crayon-nums-content style="FONT-SIZE: 14px !important; LINE-HEIGHT: 15px !important">
<DIV class=crayon-num data-line="crayon-5698982d49651362003144-1">1</DIV>
<DIV class="crayon-num crayon-striped-num" data-line="crayon-5698982d49651362003144-2">2</DIV>
<DIV class=crayon-num data-line="crayon-5698982d49651362003144-3">3</DIV></DIV></TD>
<TD class=crayon-code>
<DIV class=crayon-pre style="FONT-SIZE: 14px !important; LINE-HEIGHT: 15px !important; -moz-tab-size: 4; -o-tab-size: 4; -webkit-tab-size: 4; tab-size: 4">
<DIV id=crayon-5698982d49651362003144-1 class=crayon-line><SPAN class=crayon-h></SPAN><SPAN class=crayon-r>typedef</SPAN><SPAN class=crayon-h> </SPAN><SPAN class=crayon-e>greg_t </SPAN><SPAN class=crayon-v>gregset_t</SPAN><SPAN class=crayon-sy>[</SPAN><SPAN class=crayon-cn>23</SPAN><SPAN class=crayon-sy>]</SPAN><SPAN class=crayon-sy>;</SPAN></DIV>
<DIV id=crayon-5698982d49651362003144-2 class="crayon-line crayon-striped-line"><SPAN class=crayon-h></SPAN><SPAN class=crayon-p># 94 "/usr/include/x86_64-linux-gnu/sys/ucontext.h" 3 4</SPAN></DIV>
<DIV id=crayon-5698982d49651362003144-3 class=crayon-line><SPAN class=crayon-h></SPAN><SPAN class=crayon-t>struct</SPAN><SPAN class=crayon-h> </SPAN><SPAN class=crayon-v>_libc_fpxreg</SPAN></DIV></DIV></TD></TR></TBODY></TABLE></DIV></DIV>
<P>g++.c&#26174;&#31034;&#20026;&#65306;</P>
<DIV id=crayon-5698982d49658320061813 class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" style="FONT-SIZE: 14px !important; HEIGHT: auto; LINE-HEIGHT: 15px !important" data-settings=" minimize scroll-mouseover">
<DIV class=crayon-plain-wrap></DIV>
<DIV class=crayon-main style="OVERFLOW: hidden; POSITION: relative; Z-INDEX: 1">
<TABLE class=crayon-table>
<TBODY>
<TR class=crayon-row>
<TD class="crayon-nums " data-settings="show">
<DIV class=crayon-nums-content style="FONT-SIZE: 14px !important; LINE-HEIGHT: 15px !important">
<DIV class=crayon-num data-line="crayon-5698982d49658320061813-1">1</DIV>
<DIV class="crayon-num crayon-striped-num" data-line="crayon-5698982d49658320061813-2">2</DIV>
<DIV class=crayon-num data-line="crayon-5698982d49658320061813-3">3</DIV>
<DIV class="crayon-num crayon-striped-num" data-line="crayon-5698982d49658320061813-4">4</DIV>
<DIV class=crayon-num data-line="crayon-5698982d49658320061813-5">5</DIV>
<DIV class="crayon-num crayon-striped-num" data-line="crayon-5698982d49658320061813-6">6</DIV>
<DIV class=crayon-num data-line="crayon-5698982d49658320061813-7">7</DIV>
<DIV class="crayon-num crayon-striped-num" data-line="crayon-5698982d49658320061813-8">8</DIV></DIV></TD>
<TD class=crayon-code>
<DIV class=crayon-pre style="FONT-SIZE: 14px !important; LINE-HEIGHT: 15px !important; -moz-tab-size: 4; -o-tab-size: 4; -webkit-tab-size: 4; tab-size: 4">
<DIV id=crayon-5698982d49658320061813-1 class=crayon-line><SPAN class=crayon-h></SPAN><SPAN class=crayon-r>typedef</SPAN><SPAN class=crayon-h> </SPAN><SPAN class=crayon-e>greg_t </SPAN><SPAN class=crayon-v>gregset_t</SPAN><SPAN class=crayon-sy>[</SPAN><SPAN class=crayon-cn>23</SPAN><SPAN class=crayon-sy>]</SPAN><SPAN class=crayon-sy>;</SPAN></DIV>
<DIV id=crayon-5698982d49658320061813-2 class="crayon-line crayon-striped-line"><SPAN class=crayon-h></SPAN><SPAN class=crayon-t>enum</SPAN></DIV>
<DIV id=crayon-5698982d49658320061813-3 class=crayon-line><SPAN class=crayon-h></SPAN><SPAN class=crayon-sy>{</SPAN></DIV>
<DIV id=crayon-5698982d49658320061813-4 class="crayon-line crayon-striped-line"><SPAN class=crayon-h>&nbsp;&nbsp;</SPAN><SPAN class=crayon-v>REG_R8</SPAN><SPAN class=crayon-h> </SPAN><SPAN class=crayon-o>=</SPAN><SPAN class=crayon-h> </SPAN><SPAN class=crayon-cn>0</SPAN><SPAN class=crayon-sy>,</SPAN></DIV>
<DIV id=crayon-5698982d49658320061813-5 class=crayon-line><SPAN class=crayon-h>&nbsp;&nbsp;</SPAN><SPAN class=crayon-v>REG_R9</SPAN><SPAN class=crayon-sy>,</SPAN></DIV>
<DIV id=crayon-5698982d49658320061813-6 class="crayon-line crayon-striped-line"><SPAN class=crayon-h>&nbsp;&nbsp;</SPAN><SPAN class=crayon-sy>.</SPAN><SPAN class=crayon-sy>.</SPAN><SPAN class=crayon-sy>.</SPAN></DIV>
<DIV id=crayon-5698982d49658320061813-7 class=crayon-line><SPAN class=crayon-h></SPAN><SPAN class=crayon-sy>}</SPAN><SPAN class=crayon-sy>;</SPAN></DIV>
<DIV id=crayon-5698982d49658320061813-8 class="crayon-line crayon-striped-line"><SPAN class=crayon-h></SPAN><SPAN class=crayon-t>struct</SPAN><SPAN class=crayon-h> </SPAN><SPAN class=crayon-v>_libc_fpxreg</SPAN></DIV></DIV></TD></TR></TBODY></TABLE></DIV></DIV>
<P>&#24456;&#26126;&#26174;&#65292;gcc&#29256;&#26412;&#30340;&#65292;&#27809;&#26377;enum&#65292;&#25152;&#26377;gcc&#32534;&#35793;&#19981;&#36807;&#12290;</P>
<P>&#25442;&#19968;&#19979;&#65306;</P>
<DIV id=crayon-5698982d4965e310527986 class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" style="FONT-SIZE: 14px !important; HEIGHT: auto; LINE-HEIGHT: 15px !important" data-settings=" minimize scroll-mouseover">
<DIV class=crayon-plain-wrap></DIV>
<DIV class=crayon-main style="OVERFLOW: hidden; POSITION: relative; Z-INDEX: 1">
<TABLE class=crayon-table>
<TBODY>
<TR class=crayon-row>
<TD class="crayon-nums " data-settings="show">
<DIV class=crayon-nums-content style="FONT-SIZE: 14px !important; LINE-HEIGHT: 15px !important">
<DIV class=crayon-num data-line="crayon-5698982d4965e310527986-1">1</DIV>
<DIV class="crayon-num crayon-striped-num" data-line="crayon-5698982d4965e310527986-2">2</DIV>
<DIV class=crayon-num data-line="crayon-5698982d4965e310527986-3">3</DIV>
<DIV class="crayon-num crayon-striped-num" data-line="crayon-5698982d4965e310527986-4">4</DIV>
<DIV class=crayon-num data-line="crayon-5698982d4965e310527986-5">5</DIV>
<DIV class="crayon-num crayon-striped-num" data-line="crayon-5698982d4965e310527986-6">6</DIV>
<DIV class=crayon-num data-line="crayon-5698982d4965e310527986-7">7</DIV>
<DIV class="crayon-num crayon-striped-num" data-line="crayon-5698982d4965e310527986-8">8</DIV>
<DIV class=crayon-num data-line="crayon-5698982d4965e310527986-9">9</DIV>
<DIV class="crayon-num crayon-striped-num" data-line="crayon-5698982d4965e310527986-10">10</DIV>
<DIV class=crayon-num data-line="crayon-5698982d4965e310527986-11">11</DIV>
<DIV class="crayon-num crayon-striped-num" data-line="crayon-5698982d4965e310527986-12">12</DIV>
<DIV class=crayon-num data-line="crayon-5698982d4965e310527986-13">13</DIV>
<DIV class="crayon-num crayon-striped-num" data-line="crayon-5698982d4965e310527986-14">14</DIV></DIV></TD>
<TD class=crayon-code>
<DIV class=crayon-pre style="FONT-SIZE: 14px !important; LINE-HEIGHT: 15px !important; -moz-tab-size: 4; -o-tab-size: 4; -webkit-tab-size: 4; tab-size: 4">
<DIV id=crayon-5698982d4965e310527986-1 class=crayon-line><SPAN class=crayon-p>#include &lt;stdio.h&gt;</SPAN></DIV>
<DIV id=crayon-5698982d4965e310527986-2 class="crayon-line crayon-striped-line">&nbsp;</DIV>
<DIV id=crayon-5698982d4965e310527986-3 class=crayon-line><SPAN class=crayon-c>/* get REG_RIP from ucontext.h */</SPAN></DIV>
<DIV id=crayon-5698982d4965e310527986-4 class="crayon-line crayon-striped-line"><SPAN class=crayon-p>#ifndef __USE_GNU</SPAN></DIV>
<DIV id=crayon-5698982d4965e310527986-5 class=crayon-line><SPAN class=crayon-p># define __USE_GNU</SPAN></DIV>
<DIV id=crayon-5698982d4965e310527986-6 class="crayon-line crayon-striped-line"><SPAN class=crayon-p>#endif</SPAN></DIV>
<DIV id=crayon-5698982d4965e310527986-7 class=crayon-line><SPAN class=crayon-p>#include &lt;signal.h&gt; //&#25918;&#36825;&#37324;&#23601;&#21487;&#20197;</SPAN></DIV>
<DIV id=crayon-5698982d4965e310527986-8 class="crayon-line crayon-striped-line"><SPAN class=crayon-p>#include &lt;ucontext.h&gt;</SPAN></DIV>
<DIV id=crayon-5698982d4965e310527986-9 class=crayon-line>&nbsp;</DIV>
<DIV id=crayon-5698982d4965e310527986-10 class="crayon-line crayon-striped-line"><SPAN class=crayon-t>int</SPAN><SPAN class=crayon-h> </SPAN><SPAN class=crayon-e>main</SPAN><SPAN class=crayon-sy>(</SPAN><SPAN class=crayon-t>int</SPAN><SPAN class=crayon-h> </SPAN><SPAN class=crayon-v>argc</SPAN><SPAN class=crayon-sy>,</SPAN><SPAN class=crayon-h> </SPAN><SPAN class=crayon-t>char</SPAN><SPAN class=crayon-o>*</SPAN><SPAN class=crayon-h> </SPAN><SPAN class=crayon-v>argv</SPAN><SPAN class=crayon-sy>[</SPAN><SPAN class=crayon-sy>]</SPAN><SPAN class=crayon-sy>)</SPAN></DIV>
<DIV id=crayon-5698982d4965e310527986-11 class=crayon-line><SPAN class=crayon-sy>{</SPAN></DIV>
<DIV id=crayon-5698982d4965e310527986-12 class="crayon-line crayon-striped-line"><SPAN class=crayon-h></SPAN><SPAN class=crayon-r>printf</SPAN><SPAN class=crayon-sy>(</SPAN><SPAN class=crayon-s>"%dn"</SPAN><SPAN class=crayon-sy>,</SPAN><SPAN class=crayon-h> </SPAN><SPAN class=crayon-v>REG_R8</SPAN><SPAN class=crayon-sy>)</SPAN><SPAN class=crayon-sy>;</SPAN></DIV>
<DIV id=crayon-5698982d4965e310527986-13 class=crayon-line><SPAN class=crayon-h></SPAN><SPAN class=crayon-st>return</SPAN><SPAN class=crayon-h> </SPAN><SPAN class=crayon-cn>0</SPAN><SPAN class=crayon-sy>;</SPAN></DIV>
<DIV id=crayon-5698982d4965e310527986-14 class="crayon-line crayon-striped-line"><SPAN class=crayon-sy>}</SPAN></DIV></DIV></TD></TR></TBODY></TABLE></DIV></DIV>
<P>&#30475;&#19979;&#22312;gcc&#19979;&#65292;&#20004;&#32773;&#30340;&#39044;&#22788;&#29702;&#24046;&#21035;&#65306;<BR>/usr/include/features.h &#37324;&#38754;&#65292;&#39318;&#20808;&#20250;:</P>
<DIV id=crayon-5698982d49664231506663 class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" style="FONT-SIZE: 14px !important; HEIGHT: auto; LINE-HEIGHT: 15px !important" data-settings=" minimize scroll-mouseover">
<DIV class=crayon-plain-wrap></DIV>
<DIV class=crayon-main style="OVERFLOW: hidden; POSITION: relative; Z-INDEX: 1">
<TABLE class=crayon-table>
<TBODY>
<TR class=crayon-row>
<TD class="crayon-nums " data-settings="show">
<DIV class=crayon-nums-content style="FONT-SIZE: 14px !important; LINE-HEIGHT: 15px !important">
<DIV class=crayon-num data-line="crayon-5698982d49664231506663-1">1</DIV></DIV></TD>
<TD class=crayon-code>
<DIV class=crayon-pre style="FONT-SIZE: 14px !important; LINE-HEIGHT: 15px !important; -moz-tab-size: 4; -o-tab-size: 4; -webkit-tab-size: 4; tab-size: 4">
<DIV id=crayon-5698982d49664231506663-1 class=crayon-line><SPAN class=crayon-p>#undef __USE_GNU</SPAN></DIV></DIV></TD></TR></TBODY></TABLE></DIV></DIV>
<P>&#28982;&#21518;&#26681;&#25454;_GNU_SOURCE&#26469;&#23450;&#20041;&#65306;</P>
<DIV id=crayon-5698982d4966a538894695 class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" style="FONT-SIZE: 14px !important; HEIGHT: auto; LINE-HEIGHT: 15px !important" data-settings=" minimize scroll-mouseover">
<DIV class=crayon-plain-wrap></DIV>
<DIV class=crayon-main style="OVERFLOW: hidden; POSITION: relative; Z-INDEX: 1">
<TABLE class=crayon-table>
<TBODY>
<TR class=crayon-row>
<TD class="crayon-nums " data-settings="show">
<DIV class=crayon-nums-content style="FONT-SIZE: 14px !important; LINE-HEIGHT: 15px !important">
<DIV class=crayon-num data-line="crayon-5698982d4966a538894695-1">1</DIV>
<DIV class="crayon-num crayon-striped-num" data-line="crayon-5698982d4966a538894695-2">2</DIV>
<DIV class=crayon-num data-line="crayon-5698982d4966a538894695-3">3</DIV></DIV></TD>
<TD class=crayon-code>
<DIV class=crayon-pre style="FONT-SIZE: 14px !important; LINE-HEIGHT: 15px !important; -moz-tab-size: 4; -o-tab-size: 4; -webkit-tab-size: 4; tab-size: 4">
<DIV id=crayon-5698982d4966a538894695-1 class=crayon-line><SPAN class=crayon-p>#ifdef _GNU_SOURCE</SPAN></DIV>
<DIV id=crayon-5698982d4966a538894695-2 class="crayon-line crayon-striped-line"><SPAN class=crayon-p># define __USE_GNU 1</SPAN></DIV>
<DIV id=crayon-5698982d4966a538894695-3 class=crayon-line><SPAN class=crayon-p>#endif</SPAN></DIV></DIV></TD></TR></TBODY></TABLE></DIV></DIV>
<P></P>
<P>__USE_GNU &#19981;&#26159;&#24320;&#25918;&#32473;&#29992;&#25143;&#29992;&#30340;&#65292;features.h&#37324;&#38754;&#20250;&#20462;&#25913;&#65292;&#20294; _GNU_SOURCE &#19981;&#20250;&#65292;&#23427;&#25165;&#26159;&#32473;&#29992;&#25143;&#29992;&#30340;<BR>&#30475;features.h&#37324;&#30340;&#27880;&#37322;&#65306;<BR>These are defined by the user (or the compiler) to specify the desired environment:<BR>_GNU_SOURCE All of the above, plus GNU extensions.</P>
<P>These are defined by this file and are used by the header files to decide what to declare or define:<BR>__USE_GNU Define GNU extensions.</P>
<P>&#20462;&#25913;&#26041;&#27861;&#65292;&#22312;&#20195;&#30721;&#26368;&#24320;&#22987;&#65292;&#28155;&#21152;&#65306;</P>
<DIV id=crayon-5698982d49670916158129 class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" style="FONT-SIZE: 14px !important; HEIGHT: auto; LINE-HEIGHT: 15px !important" data-settings=" minimize scroll-mouseover">
<DIV class=crayon-plain-wrap></DIV>
<DIV class=crayon-main style="OVERFLOW: hidden; POSITION: relative; Z-INDEX: 1">
<TABLE class=crayon-table>
<TBODY>
<TR class=crayon-row>
<TD class="crayon-nums " data-settings="show">
<DIV class=crayon-nums-content style="FONT-SIZE: 14px !important; LINE-HEIGHT: 15px !important">
<DIV class=crayon-num data-line="crayon-5698982d49670916158129-1">1</DIV>
<DIV class="crayon-num crayon-striped-num" data-line="crayon-5698982d49670916158129-2">2</DIV>
<DIV class=crayon-num data-line="crayon-5698982d49670916158129-3">3</DIV></DIV></TD>
<TD class=crayon-code>
<DIV class=crayon-pre style="FONT-SIZE: 14px !important; LINE-HEIGHT: 15px !important; -moz-tab-size: 4; -o-tab-size: 4; -webkit-tab-size: 4; tab-size: 4">
<DIV id=crayon-5698982d49670916158129-1 class=crayon-line><SPAN class=crayon-p>#ifdef _GNU_SOURCE</SPAN></DIV>
<DIV id=crayon-5698982d49670916158129-2 class="crayon-line crayon-striped-line"><SPAN class=crayon-p># define _GNU_SOURCE</SPAN></DIV>
<DIV id=crayon-5698982d49670916158129-3 class=crayon-line><SPAN class=crayon-p>#endif</SPAN></DIV></DIV></TD></TR></TBODY></TABLE></DIV></DIV>
<P>&#25110;&#32773;&#65292;&#30452;&#25509;&#22312;&#32534;&#35793;&#36873;&#39033;&#37324;&#23450;&#20041;&#12290;<BR>&#32780;gcc&#21644;g++&#30340;&#40664;&#35748;&#23450;&#20041;&#20063;&#26377;&#21306;&#21035;&#65292;&#22240;&#20026;g++&#40664;&#35748;&#23450;&#20041;&#20102;_GNU_SOURCE&#65292;&#25152;&#20197;g++&#21487;&#20197;&#32534;&#35793;&#36807;&#32780;gcc&#32534;&#35793;&#19981;&#36807;&#12290;</P>
<P>&#22312;&#36825;&#37324; <A href="http://stackoverflow.com/questions/5679267/how-to-resolve-reg-eip-undeclared-first-use-in-this-function-error-on-linux-3">http://stackoverflow.com/questions/5679267/how-to-resolve-reg-eip-undeclared-first-use-in-this-function-error-on-linux-3</A> &#20063;&#25628;&#32034;&#21040;&#31572;&#26696;&#65292;&#20294;&#26159;&#20043;&#21069;&#27809;&#26377;&#22826;&#30041;&#24847;&#12290;<BR>I believe you should either have #define _GNU_SOURCE as the first line of your source file, or better put -D_GNU_SOURCE in your CFLAGS (on the command line). Then make sure you include <SIGNAL.H>and <UCONTEXT.H>.</UCONTEXT.H></SIGNAL.H></P>
<P><A href="http://mnstory.net/wp-content/uploads/2015/03/_GNU_SOURCE-vs-__USE_GNU/_GNU_SOURCE-vs-__USE_GNU.pdf" target=_bank>PDF&#19979;&#36733;</A></P></DIV>