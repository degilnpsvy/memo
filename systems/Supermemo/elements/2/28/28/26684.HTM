&nbsp; 
<H1 class=entry-title>LINUX&#30913;&#30424;&#20998;&#21306;</H1>
<DIV class=entry-meta><SPAN class=sep>&#21457;&#34920;&#20110; </SPAN><A title="&#19979;&#21320; 8:36" href="http://mnstory.net/2013/03/linux-disk-partition/" rel=bookmark><TIME class=entry-date datetime="2013-03-27T20:36:46+00:00">2013 &#24180; 3 &#26376; 27 &#26085;</TIME></A> </DIV></HEADER>
<DIV class=entry-content>
<P><SPAN style="COLOR: black">&#19968;&#22359;&#30913;&#30424;(disk)&#65292;&#22312;linux&#20013;&#20197;/dev/sdx,&nbsp;/dev/hdx&#20195;&#34920;&#65292;&#20854;&#20013;x&#20026;a-z&#30340;&#23383;&#27597;</SPAN></P>
<P><SPAN style="COLOR: black">&#27599;&#20010;&#30913;&#30424;&#19979;&#65292;&#21487;&#20197;&#21010;&#20998;&#20026;&#22810;&#20010;&#20998;&#21306;(partition)&#65292;&#27604;&#22914;/dev/sdx1&#34920;&#31034;sdx&#36825;&#22359;&#30913;&#30424;&#19979;&#30340;&#31532;&#19968;&#20010;&#20998;&#21306;&#12290;<BR></SPAN></P>
<H2>&#20998;&#21306;x</H2>
<H3>&#26597;&#30475;&#30913;&#30424;&#20998;&#21306;&#22823;&#23567;</H3>
<P><SPAN style="COLOR: #a600c4"><STRONG>sfdisk -s $[disk|partition]</STRONG><SPAN style="COLOR: black"><BR></SPAN></SPAN></P>
<P><SPAN style="COLOR: black">&#25353;block&#20026;&#21333;&#20301;&#26597;&#30475;&#30913;&#30424;&#25110;&#20998;&#21306;&#22823;&#23567;&#65292;&#27604;&#22914;&#65292;&#19968;&#20010;block&#20026;1KB&#65292;&#21017;1024&#34920;&#31034;1MB<BR></SPAN></P>
<P><SPAN style="FONT-FAMILY: Consolas; COLOR: black">root/node-000c297b124e /sf #&nbsp;<SPAN style="COLOR: #de5700">sfdisk -s /dev/sdb<SPAN style="COLOR: black"><BR>167772160<BR>root/node-000c297b124e /sf #&nbsp;<SPAN style="COLOR: #de5700">sfdisk -s /dev/sdb1<SPAN style="COLOR: black"><BR>4200997</SPAN><BR></SPAN></SPAN></SPAN></SPAN><BR><SPAN id=more-101></SPAN><BR><SPAN style="FONT-FAMILY: Consolas; COLOR: black">root/node-000c297b124e /sf # <SPAN style="COLOR: #de5700">sfdisk -s<SPAN style="COLOR: black"><BR>/dev/sda:&nbsp;&nbsp; 6291456<BR>/dev/sdb: 167772160<BR>/dev/sdc:&nbsp; 20971520<BR>/dev/sdd:&nbsp; 34603008<BR>/dev/sde:&nbsp; 15728640<BR>/dev/mapper/vglocal-lvlocal: 131465216<BR>total: 376832000 blocks<BR></SPAN></SPAN></SPAN></P>
<H3>&#26597;&#30475;&#30913;&#30424;&#30340;&#20998;&#21306;&#32467;&#26500;<SPAN style="COLOR: black"><BR></SPAN></H3>
<P><SPAN style="COLOR: #a600c4"><STRONG>sfdisk -l $[disk]</STRONG><SPAN style="COLOR: black"><BR></SPAN></SPAN></P>
<P><SPAN style="COLOR: black"><SPAN style="FONT-FAMILY: Consolas">root/node-000c297b124e /sf #&nbsp;<SPAN style="COLOR: #de5700">sfdisk -l /dev/sda</SPAN></SPAN></SPAN></P>
<P>Disk /dev/sda: 783 cylinders, 255 heads, 63 sectors/track</P>
<P>sfdisk: ERROR: sector 0 does not have an msdos signature<BR>/dev/sda: unrecognized partition table type<BR>No partitions found<BR>root/node-000c297b124e /sf #&nbsp;<SPAN style="COLOR: #de5700">sfdisk -l /dev/sdb</SPAN></P>
<P>Disk /dev/sdb: 20886 cylinders, 255 heads, 63 sectors/track<BR>Units = cylinders of 8225280 bytes, blocks of 1024 bytes, counting from 0</P>
<P>Device Boot Start&nbsp;&nbsp;&nbsp;&nbsp; End&nbsp;&nbsp; #cyls&nbsp;&nbsp;&nbsp; #blocks&nbsp;&nbsp; Id&nbsp; System<BR><STRONG>/dev/sdb1&nbsp;&nbsp; *&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0+&nbsp;&nbsp;&nbsp; 522&nbsp;&nbsp;&nbsp;&nbsp; 523-&nbsp;&nbsp; 4200997&nbsp;&nbsp; 83&nbsp; Linux &nbsp;&nbsp;<SPAN style="COLOR: #41ad1c">&nbsp;</SPAN></STRONG><SPAN>&#24102;</SPAN><SPAN style="COLOR: #41ad1c"><SPAN style="FONT-FAMILY: Consolas">*</SPAN><SPAN>&#30340;&#34920;&#31034;&#21487;&#24341;&#23548;&#20998;&#21306;</SPAN><SPAN style="FONT-FAMILY: Consolas; COLOR: black"><STRONG><BR></STRONG>/dev/sdb2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 523&nbsp;&nbsp;&nbsp; 1567&nbsp;&nbsp;&nbsp; 1045&nbsp;&nbsp;&nbsp; 8393962+&nbsp; 83&nbsp; Linux<BR>/dev/sdb3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1568&nbsp;&nbsp;&nbsp; 3656&nbsp;&nbsp;&nbsp; 2089&nbsp;&nbsp; 16779892+&nbsp; 82&nbsp; Linux swap / Solaris<BR>/dev/sdb4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3657&nbsp;&nbsp; 20885&nbsp;&nbsp; 17229&nbsp; 138391942+&nbsp; 83&nbsp; Linux<BR></SPAN></SPAN></P>
<H3>&#21487;&#20197;&#26597;&#30475;$(disk)&#26159;&#21542;&#20998;&#21306;&#27491;&#30830;<SPAN style="COLOR: black"><BR></SPAN></H3>
<P><SPAN style="COLOR: #a600c4"><STRONG>sfdisk $(disk) -V</STRONG><SPAN style="COLOR: black"><BR></SPAN></SPAN></P>
<P><SPAN style="FONT-FAMILY: Consolas; COLOR: black">root/node-000c297b124e /sf #&nbsp;<SPAN style="COLOR: #de5700">sfdisk /dev/sdb -V<SPAN style="COLOR: black"><BR>/dev/sdb: OK<BR>root/node-000c297b124e /sf #&nbsp;<SPAN style="COLOR: #de5700">echo $?<SPAN style="COLOR: black"><BR>0<BR>root/node-000c297b124e /sf #&nbsp;<SPAN style="COLOR: #de5700">sfdisk /dev/sda -V</SPAN></SPAN></SPAN></SPAN></SPAN></SPAN></P>
<P>sfdisk: ERROR: sector 0 does not have an msdos signature<BR>/dev/sda: unrecognized partition table type</P>
<P>sfdisk: no partition table present.<BR>root/node-000c297b124e /sf #&nbsp;<SPAN style="COLOR: #de5700">echo $?<SPAN style="COLOR: black"><BR>1<BR></SPAN></SPAN></P>
<H3>&#37325;&#26032;&#23545;&#30913;&#30424;&#36827;&#34892;&#20998;&#21306;&#65288;&#20174;&#26631;&#20934;&#36755;&#20837;&#20013;&#33719;&#21462;&#20998;&#21306;&#34920;&#20449;&#24687;&#65289;<SPAN style="COLOR: black"><BR></SPAN></H3>
<P><SPAN style="COLOR: #a600c4"><STRONG>sfdisk $STDIN $disk</STRONG><SPAN style="COLOR: black"><BR></SPAN></SPAN></P>
<P><SPAN style="FONT-FAMILY: Consolas; COLOR: black">root/node-000c297b124e /sf #&nbsp;<SPAN style="COLOR: #de5700">sfdisk --force -uM /dev/sda &lt;&lt;EOF<BR>&gt; ,4096,L,*<BR>&gt; ,800,S<BR>&gt; ,,L<BR>&gt; EOF<BR></SPAN></SPAN></P>
<P><SPAN style="COLOR: #41ad1c"><SPAN style="FONT-FAMILY: Consolas">#</SPAN><SPAN>&#19978;&#38754;&#36825;&#20010;&#65292;&#23558;</SPAN><SPAN style="FONT-FAMILY: Consolas">disk&nbsp;/dev/sda </SPAN><SPAN>&#21010;&#20998;&#20026;</SPAN><SPAN style="FONT-FAMILY: Consolas">3</SPAN><SPAN>&#20010;&#20998;&#21306;&#65292;&#31532;&#19968;&#20010;</SPAN><SPAN style="FONT-FAMILY: Consolas">4G</SPAN><SPAN>&#30340;&#21487;&#24341;&#23548;&#20998;&#21306;&#65292;&#31532;&#20108;&#20010;</SPAN><SPAN style="FONT-FAMILY: Consolas">800MB</SPAN><SPAN>&#30340;</SPAN><SPAN style="FONT-FAMILY: Consolas">SWAP</SPAN><SPAN>&#20998;&#21306;&#65292;&#21097;&#20313;&#30340;&#20026;&#31532;&#19977;&#20010;</SPAN><SPAN style="FONT-FAMILY: Consolas"><BR></SPAN></SPAN></P>
<P><SPAN style="COLOR: #41ad1c"><SPAN style="FONT-FAMILY: Consolas">#-u</SPAN><SPAN>&#34920;&#31034;</SPAN><SPAN style="FONT-FAMILY: Consolas">unit</SPAN><SPAN>&#65292;&#21333;&#20301;&#65292;&#21487;&#21462;</SPAN><SPAN style="FONT-FAMILY: Consolas">S, C, B or M</SPAN><SPAN>&#20998;&#21035;&#34920;&#31034;</SPAN><SPAN style="FONT-FAMILY: Consolas">Sectors, Cylinders, Blocks Megabytes<SPAN style="COLOR: black"><BR></SPAN></SPAN></SPAN></P>
<P><SPAN style="FONT-FAMILY: Consolas; COLOR: black">Checking that no-one is using this disk right now ...<BR></SPAN></P>
<P><SPAN style="FONT-FAMILY: Consolas; COLOR: black">OK</SPAN></P>
<P>Disk /dev/sda: 783 cylinders, 255 heads, 63 sectors/track</P>
<P>sfdisk: ERROR: sector 0 does not have an msdos signature<BR>/dev/sda: unrecognized partition table type<BR>Old situation:<BR>No partitions found<BR>New situation:<BR>Units = mebibytes of 1048576 bytes, blocks of 1024 bytes, counting from 0</P>
<P>Device Boot Start&nbsp;&nbsp; End&nbsp;&nbsp;&nbsp; MiB&nbsp;&nbsp;&nbsp; #blocks&nbsp;&nbsp; Id&nbsp; System<BR>/dev/sda1&nbsp;&nbsp; *&nbsp;&nbsp;&nbsp;&nbsp; 0+&nbsp; 4102-&nbsp; 4103-&nbsp;&nbsp; 4200997&nbsp;&nbsp; 83&nbsp; Linux<BR>/dev/sda2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4102+&nbsp; 4902-&nbsp;&nbsp; 801-&nbsp;&nbsp;&nbsp; 819315&nbsp;&nbsp; 82&nbsp; Linux swap / Solaris<BR>/dev/sda3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4902+&nbsp; 6142-&nbsp; 1240-&nbsp;&nbsp; 1269135&nbsp;&nbsp; 83&nbsp; Linux<BR>/dev/sda4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp; 0&nbsp; Empty<BR>Successfully wrote the new partition table</P>
<P>Re-reading the partition table ...</P>
<P>If you created or changed a DOS partition, /dev/foo7, say, then use dd(1)<BR>to zero the first 512 bytes:&nbsp; dd if=/dev/zero of=/dev/foo7 bs=512 count=1<BR>(See fdisk(8).)</P>
<P><SPAN style="FONT-FAMILY: Consolas; COLOR: black">root/node-000c297b124e /sf #&nbsp;<SPAN style="COLOR: #de5700">sfdisk /dev/sda -V<SPAN style="COLOR: black"><BR>/dev/sda: OK<BR></SPAN></SPAN></SPAN></P>
<P><SPAN style="FONT-FAMILY: Consolas; COLOR: black">root/node-000c297b124e /sf #&nbsp;<SPAN style="COLOR: #de5700">sfdisk /dev/sda -l</SPAN></SPAN></P>
<P>Disk /dev/sda: 783 cylinders, 255 heads, 63 sectors/track<BR>Units = cylinders of 8225280 bytes, blocks of 1024 bytes, counting from 0</P>
<P>Device Boot Start&nbsp;&nbsp;&nbsp;&nbsp; End&nbsp;&nbsp; #cyls&nbsp;&nbsp;&nbsp; #blocks&nbsp;&nbsp; Id&nbsp; System<BR>/dev/sda1&nbsp;&nbsp; *&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0+&nbsp;&nbsp;&nbsp; 522&nbsp;&nbsp;&nbsp;&nbsp; 523-&nbsp;&nbsp; 4200997&nbsp;&nbsp; 83&nbsp; Linux<BR>/dev/sda2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 523&nbsp;&nbsp;&nbsp;&nbsp; 624&nbsp;&nbsp;&nbsp;&nbsp; 102&nbsp;&nbsp;&nbsp;&nbsp; 819315&nbsp;&nbsp; 82&nbsp; Linux swap / Solaris<BR>/dev/sda3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 625&nbsp;&nbsp;&nbsp;&nbsp; 782&nbsp;&nbsp;&nbsp;&nbsp; 158&nbsp;&nbsp;&nbsp; 1269135&nbsp;&nbsp; 83&nbsp; Linux<BR>/dev/sda4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp; 0&nbsp; Empty</P>
<P><SPAN style="COLOR: #41ad1c"><SPAN>&#22914;&#26524;&#20570;</SPAN><SPAN style="FONT-FAMILY: Consolas">DOS</SPAN><SPAN>&#20998;&#21306;&#65292;&#36824;&#38656;&#35201;&#28165;&#31354;&#20998;&#20986;&#26469;&#30340;</SPAN><SPAN style="FONT-FAMILY: Consolas">sdxN</SPAN><SPAN>&#21021;&#22987;&#30340;</SPAN><SPAN style="FONT-FAMILY: Consolas">512</SPAN><SPAN>&#23383;&#33410;</SPAN><SPAN style="FONT-FAMILY: Consolas"><BR></SPAN></SPAN></P>
<P><SPAN style="COLOR: #a600c4"><STRONG>dd if=/dev/zero of="/dev/sdxN" bs=512 count=1<BR></STRONG></SPAN></P>
<P><SPAN style="FONT-FAMILY: Consolas; COLOR: black">root/node-000c297b124e /sf #&nbsp;<SPAN style="COLOR: #de5700">dd if=/dev/zero of="/dev/sda1" bs=512 count=1<SPAN style="COLOR: black"><BR>1+0 records in<BR>1+0 records out<BR>512 bytes (512 B) copied, 0.00265797 s, 193 kB/s<BR></SPAN></SPAN></SPAN></P>
<H2>&#25991;&#20214;&#31995;&#32479;</H2>
<H3>&#29983;&#25104;&#25991;&#20214;&#31995;&#32479;</H3>
<P><SPAN style="COLOR: #a600c4"><STRONG>mkfs.*<BR></STRONG></SPAN></P>
<P><SPAN style="FONT-FAMILY: Consolas; COLOR: black">root/node-000c297b124e /sf # <SPAN style="COLOR: #de5700">mkfs.<BR><SPAN style="COLOR: black">mkfs.bfs&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mkfs.ext2&nbsp;&nbsp;&nbsp;&nbsp; mkfs.ext4&nbsp;&nbsp;&nbsp;&nbsp; mkfs.gfs&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mkfs.minix&nbsp;&nbsp;&nbsp; mkfs.ntfs&nbsp;&nbsp;&nbsp;&nbsp; mkfs.xfs<BR>mkfs.cramfs&nbsp;&nbsp; mkfs.ext3&nbsp;&nbsp;&nbsp;&nbsp; mkfs.ext4dev&nbsp; mkfs.gfs2&nbsp;&nbsp;&nbsp;&nbsp; mkfs.msdos&nbsp;&nbsp;&nbsp; mkfs.vfat<BR></SPAN></SPAN></SPAN></P>
<P><SPAN style="FONT-FAMILY: Consolas; COLOR: black">root/node-000c297b124e /sf # <SPAN style="COLOR: #de5700">ll /sbin/mkfs.ext3<BR><SPAN style="COLOR: black">lrwxrwxrwx 1 root root 6 Dec 10 01:42 /sbin/mkfs.ext3 -&gt; mke2fs*<BR></SPAN></SPAN></SPAN></P>
<P><SPAN style="FONT-FAMILY: Consolas; COLOR: black">root/node-000c297b124e /sf # <SPAN style="COLOR: #de5700">ll /sbin/mkfs.ntfs<BR><SPAN style="COLOR: black">lrwxrwxrwx 1 root root 6 Dec 10 01:42 /sbin/mkfs.ntfs -&gt; mkntfs*<BR>root/node-000c297b124e /sf # <SPAN style="COLOR: #de5700">ll /sbin/mkfs.vfat<BR><SPAN style="COLOR: black">lrwxrwxrwx 1 root root 7 Dec 10 01:42 /sbin/mkfs.vfat -&gt; mkdosfs*<BR></SPAN></SPAN></SPAN></SPAN></SPAN></P>
<P><SPAN style="COLOR: #41ad1c"><SPAN>&#27599;&#27425;</SPAN><SPAN style="FONT-FAMILY: Consolas">mkfs</SPAN><SPAN>&#30340;&#26102;&#20505;&#20250;&#25226;&#25968;&#25454;&#25273;&#25481;&#65292;&#32780;&#19988;&#38656;&#35201;</SPAN><SPAN style="FONT-FAMILY: Consolas">umount</SPAN><SPAN>&#29366;&#24577;&#25165;&#33021;</SPAN><SPAN style="FONT-FAMILY: Consolas">mkfs<BR></SPAN></SPAN></P>
<P><SPAN style="COLOR: #41ad1c"><SPAN style="FONT-FAMILY: Consolas">-L </SPAN><SPAN>&#25351;&#23450;</SPAN><SPAN style="FONT-FAMILY: Consolas">label</SPAN><SPAN>&#65292;&#20294;&#36825;&#20010;</SPAN><SPAN style="FONT-FAMILY: Consolas">label</SPAN><SPAN>&#21482;&#26159;&#19968;&#20010;</SPAN><SPAN style="FONT-FAMILY: Consolas">/dev/disk/by-label/</SPAN><SPAN>&#19979;&#30340;&#36719;&#38142;&#25509;&#65292;&#23601;&#26159;&#24050;&#32463;&#34987;&#20854;&#20182;</SPAN><SPAN style="FONT-FAMILY: Consolas">mount</SPAN><SPAN>&#21518;&#30340;</SPAN><SPAN style="FONT-FAMILY: Consolas">partition</SPAN><SPAN>&#21344;&#29992;&#65292;&#37117;&#21487;&#20197;&#34987;&#25250;&#21344;&#65292;&#20063;&#21487;&#20197;&#20351;&#29992;</SPAN><SPAN style="FONT-FAMILY: Consolas">e2label /dev/disk/by-label/oldlabel newlabel </SPAN><SPAN>&#20462;&#25913;</SPAN><SPAN style="FONT-FAMILY: Consolas">label<BR></SPAN></SPAN></P>
<P><SPAN style="FONT-FAMILY: Consolas; COLOR: black">root/node-000c297b124e /sf #&nbsp;<SPAN style="COLOR: #de5700">mkfs.ext3 -F -L mylabel /dev/sda1<SPAN style="COLOR: black"><BR>mke2fs 1.42.5 (29-Jul-2012)<BR>/dev/sda1 is mounted; will not make a filesystem here!<BR>root/node-000c297b124e /sf #&nbsp;<SPAN style="COLOR: #de5700">umount /dev/sda1<SPAN style="COLOR: black"><BR>root/node-000c297b124e /sf #&nbsp;<SPAN style="COLOR: #de5700">mkfs.ext3 -F -L mylabel /dev/sda1<SPAN style="COLOR: black"><BR>mke2fs 1.42.5 (29-Jul-2012)<BR>Filesystem label=mylabel<BR>OS type: Linux<BR>Block size=4096 (log=2)<BR>Fragment size=4096 (log=2)<BR>Stride=0 blocks, Stripe width=0 blocks<BR>262944 inodes, 1050249 blocks<BR>52512 blocks (5.00%) reserved for the super user<BR>First data block=0<BR>Maximum filesystem blocks=1077936128<BR>33 block groups<BR>32768 blocks per group, 32768 fragments per group<BR>7968 inodes per group<BR>Superblock backups stored on blocks:<BR>32768, 98304, 163840, 229376, 294912, 819200, 884736</SPAN></SPAN></SPAN></SPAN></SPAN></SPAN></SPAN></P>
<P>Allocating group tables: done<BR>Writing inode tables: done<BR>Creating journal (32768 blocks): done<BR>Writing superblocks and filesystem accounting information: done</P>
<H3>swap&#20998;&#21306;</H3>
<P><SPAN style="COLOR: #41ad1c"><SPAN>&#26597;&#30475;&#24403;&#21069;&#30340;</SPAN><SPAN style="FONT-FAMILY: Consolas">swap</SPAN><SPAN>&#20998;&#21306;&#20449;&#24687;</SPAN><SPAN style="FONT-FAMILY: Consolas"><BR></SPAN></SPAN></P>
<P><SPAN style="FONT-FAMILY: Consolas; COLOR: black">obaobao@ubuntu:~/code/update$ <SPAN style="COLOR: #de5700">swapon -s<SPAN style="COLOR: black"><BR>Filename&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Type&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Size&nbsp;&nbsp;&nbsp;&nbsp; Used&nbsp;&nbsp;&nbsp;&nbsp; Priority<BR>/dev/sdb5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; partition&nbsp;&nbsp;&nbsp;&nbsp; 1046524&nbsp;&nbsp;&nbsp;&nbsp; 11032&nbsp;&nbsp;&nbsp;&nbsp; -1<BR></SPAN></SPAN></SPAN></P>
<P><SPAN style="COLOR: #41ad1c"><SPAN>&#23558;</SPAN><SPAN style="FONT-FAMILY: Consolas">/dev/vtpgroup/vtpswap</SPAN><SPAN>&#26684;&#24335;&#21270;&#20026;</SPAN><SPAN style="FONT-FAMILY: Consolas">swap</SPAN><SPAN>&#20998;&#21306;</SPAN><SPAN style="FONT-FAMILY: Consolas"><BR></SPAN></SPAN></P>
<P><SPAN style="FONT-FAMILY: Consolas; COLOR: black">obaobao@ubuntu:~/code/update$ <SPAN style="COLOR: #de5700">mkswap -f -L myswap "/dev/vtpgroup/vtpswap" 2&gt;&amp;1<BR></SPAN></SPAN></P>
<P><SPAN style="COLOR: #41ad1c"><SPAN>&#24320;&#21551;</SPAN><SPAN style="FONT-FAMILY: Consolas">myswap</SPAN><SPAN>&#20026;</SPAN><SPAN style="FONT-FAMILY: Consolas">swap</SPAN><SPAN>&#20998;&#21306;</SPAN><SPAN style="FONT-FAMILY: Consolas"><BR></SPAN></SPAN></P>
<P><SPAN style="FONT-FAMILY: Consolas; COLOR: black">obaobao@ubuntu:~/code/update$ <SPAN style="COLOR: #de5700">sudo swapon -L myswap<SPAN style="COLOR: black"><BR></SPAN></SPAN></SPAN></P>
<P><SPAN style="COLOR: #41ad1c"><SPAN>&#29616;&#22312;&#23601;&#26377;&#20004;&#20010;</SPAN><SPAN style="FONT-FAMILY: Consolas">swap</SPAN><SPAN>&#20998;&#21306;&#20102;</SPAN><SPAN style="FONT-FAMILY: Consolas; COLOR: black"><BR>obaobao@ubuntu:~/code/update$ <SPAN style="COLOR: #de5700">swapon -s<SPAN style="COLOR: black"><BR>Filename&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Type&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Size&nbsp;&nbsp;&nbsp;&nbsp; Used&nbsp;&nbsp;&nbsp;&nbsp; Priority<BR>/dev/sdb5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; partition&nbsp;&nbsp;&nbsp;&nbsp; 1046524&nbsp;&nbsp;&nbsp;&nbsp; 11032&nbsp;&nbsp;&nbsp;&nbsp; -1<BR>/dev/mapper/vtpgroup-vtpswap&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; partition&nbsp;&nbsp;&nbsp;&nbsp; 8388604&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; -2<BR></SPAN></SPAN></SPAN></SPAN></P>
<P><SPAN style="COLOR: #41ad1c"><SPAN>&#20851;&#38381;</SPAN><SPAN style="FONT-FAMILY: Consolas">swap</SPAN><SPAN>&#20998;&#21306;</SPAN><SPAN style="FONT-FAMILY: Consolas; COLOR: black"><BR>obaobao@ubuntu:~/code/update$ <SPAN style="COLOR: #de5700">sudo swapoff -L myswap<SPAN style="COLOR: black"><BR></SPAN></SPAN></SPAN></SPAN></P>
<P><SPAN style="COLOR: #41ad1c"><SPAN>&#29616;&#22312;&#22238;&#21040;&#20043;&#21069;&#30340;&#19968;&#20010;</SPAN><SPAN style="FONT-FAMILY: Consolas">swap</SPAN><SPAN>&#20998;&#21306;&#29366;&#24577;</SPAN><SPAN style="FONT-FAMILY: Consolas"><BR></SPAN></SPAN></P>
<P><SPAN style="FONT-FAMILY: Consolas; COLOR: black">obaobao@ubuntu:~/code/update$ <SPAN style="COLOR: #de5700">swapon -s<SPAN style="COLOR: black"><BR>Filename&nbsp;&nbsp;Type&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Size&nbsp;&nbsp;&nbsp;&nbsp; Used&nbsp;&nbsp;&nbsp;&nbsp; Priority<BR>/dev/sdb5&nbsp;partition&nbsp;&nbsp;&nbsp;&nbsp; 1046524&nbsp;&nbsp;&nbsp;&nbsp; 11032&nbsp;&nbsp;&nbsp;&nbsp; -1<BR></SPAN></SPAN></SPAN></P>
<H2>&#21367;</H2>
<P><SPAN style="COLOR: black">&#21367;&#21644;&#21367;&#32452;&#26159;&#36923;&#36753;&#27010;&#24565;&#65307;&#20998;&#21306;&#21644;&#30913;&#30424;&#26159;&#29289;&#29702;&#27010;&#24565;<BR></SPAN></P>
<P><SPAN style="COLOR: black">/dev/sda &#26159;&#29289;&#29702;&#30913;&#30424;&#65307;/dev/sda1 &#26159;&#29289;&#29702;&#20998;&#21306;<BR></SPAN></P>
<H3>&#23558;&#20998;&#21306;&#36716;&#25442;&#20026;&#21367;</H3>
<P><SPAN style="COLOR: #a600c4"><STRONG>pvcreate $(partition)+<BR></STRONG></SPAN></P>
<P><SPAN style="COLOR: #41ad1c"><SPAN style="FONT-FAMILY: Consolas">pvcreate</SPAN><SPAN>&#25351;&#20196;&#29992;&#20110;&#23558;&#29289;&#29702;&#30828;&#30424;&#20998;&#21306;&#21021;&#22987;&#21270;&#20026;&#29289;&#29702;&#21367;&#65292;&#20197;&#20415;&#34987;</SPAN><SPAN style="FONT-FAMILY: Consolas">LVM</SPAN><SPAN>&#20351;&#29992;&#12290;</SPAN><SPAN style="FONT-FAMILY: Consolas"><BR></SPAN></SPAN></P>
<P><SPAN style="COLOR: black"><SPAN style="FONT-FAMILY: Consolas">root/node-000c297b124e /sf #&nbsp;<SPAN style="COLOR: #de5700">pvcreate /dev/sda3<SPAN style="COLOR: black"><BR>Writing physical volume data to disk "/dev/sda3"<BR>Physical volume "/dev/sda3" successfully created<BR>root/node-000c297b124e /sf #&nbsp;<SPAN style="COLOR: #de5700">mount /dev/sda3 /sda1<SPAN style="COLOR: black">&nbsp;<SPAN style="COLOR: #41ad1c">#</SPAN></SPAN></SPAN></SPAN></SPAN></SPAN><SPAN>&#19981;&#33021;&#30452;&#25509;&#25346;&#36733;</SPAN><SPAN style="FONT-FAMILY: Consolas; COLOR: #41ad1c"><BR></SPAN></SPAN></P>
<P><SPAN style="FONT-FAMILY: Consolas; COLOR: black">mount: unknown filesystem type 'LVM2_member'<BR></SPAN></P>
<H3>&#21019;&#24314;&#21367;&#32452;</H3>
<P><SPAN style="COLOR: #a600c4"><SPAN><STRONG>vgcreate $(groupname) $(volumn1)+<SPAN style="COLOR: black"><BR></SPAN></STRONG><SPAN style="COLOR: #41ad1c">&#21019;&#24314;&#21367;&#32452;&#30340;&#26102;&#20505;&#65292;&#33267;&#23569;&#38656;&#35201;&#19968;&#20010;&#21367;&#32452;&#21517;&#23383;&#65292;&#21644;&#33267;&#23569;&#19968;&#20010;&#36923;&#36753;&#21367;</SPAN></SPAN><SPAN style="FONT-FAMILY: Consolas"><BR></SPAN></SPAN></P>
<P><SPAN style="COLOR: black"><SPAN style="FONT-FAMILY: Consolas">root/node-000c297b124e /sf #&nbsp;<SPAN style="COLOR: #de5700">vgcreate mygroup /dev/sda3<SPAN style="COLOR: black"><BR>Volume group "mygroup" successfully created<BR></SPAN></SPAN></SPAN><SPAN style="COLOR: #41ad1c"><SPAN>&#23558;&#21367;&#32452;&#35774;&#32622;&#20026;&#27963;&#21160;</SPAN><SPAN style="FONT-FAMILY: Consolas">(vgchange -ay $(groupname) )</SPAN><SPAN>&#25110;&#38750;&#27963;&#21160;</SPAN><SPAN style="FONT-FAMILY: Consolas">(vgchange -an $(groupname))</SPAN><SPAN>&#29366;&#24577;</SPAN><SPAN style="FONT-FAMILY: Consolas"><BR></SPAN></SPAN></SPAN></P>
<P><SPAN style="FONT-FAMILY: Consolas; COLOR: black">root/node-000c297b124e /sf #&nbsp;<SPAN style="COLOR: #de5700">vgchange -ay mygroup<SPAN style="COLOR: black"><BR>0 logical volume(s) in volume group "mygroup" now active<BR></SPAN></SPAN></SPAN></P>
<H3>&#21019;&#24314;&#21367;</H3>
<P><SPAN style="COLOR: #a600c4"><STRONG>lvcreate $(size) -n $(volumn name) $(volumn group name)<BR></STRONG></SPAN></P>
<P><SPAN style="FONT-FAMILY: Consolas; COLOR: black">root/node-000c297b124e /sf #&nbsp;<SPAN style="COLOR: #de5700">lvcreate -L1G -n myvolumn mygroup<SPAN style="COLOR: black"><BR>Logical volume "myvolumn" created<BR>root/node-000c297b124e /sf #&nbsp;<SPAN style="COLOR: #de5700">ls /dev/mygroup/myvolumn -l<SPAN style="COLOR: black"><BR>lrwxrwxrwx 1 root root 7 Jan 30 21:12 /dev/mygroup/myvolumn -&gt; ../dm-1<BR>root/node-000c297b124e /sf #&nbsp;<SPAN style="COLOR: #de5700">mount /dev/mygroup/myvolumn<SPAN style="COLOR: black"><BR>mount: can't find /dev/mygroup/myvolumn in /etc/fstab or /etc/mtab<BR></SPAN></SPAN></SPAN></SPAN></SPAN></SPAN></SPAN></P>
<P><SPAN style="COLOR: #41ad1c"><SPAN style="FONT-FAMILY: Consolas">#</SPAN><SPAN>&#36923;&#36753;&#21367;&#21644;&#20998;&#21306;&#19968;&#26679;&#65292;&#20063;&#26159;&#38656;&#35201;&#24314;&#31435;&#25991;&#20214;&#31995;&#32479;&#25165;&#33021;&#20351;&#29992;&#30340;</SPAN><SPAN style="FONT-FAMILY: Consolas"><BR></SPAN></SPAN></P>
<P><SPAN style="FONT-FAMILY: Consolas; COLOR: black">root/node-000c297b124e /sf #&nbsp;<SPAN style="COLOR: #de5700">mkfs.ext4 -F -b 4096 -L myvolumnlabel /dev/mygroup/myvolumn<SPAN style="COLOR: black"><BR>mke2fs 1.42.5 (29-Jul-2012)<BR>Filesystem label=myvolumnlabel<BR>OS type: Linux<BR>Block size=4096 (log=2)<BR>Fragment size=4096 (log=2)<BR>Stride=0 blocks, Stripe width=0 blocks<BR>65536 inodes, 262144 blocks<BR>13107 blocks (5.00%) reserved for the super user<BR>First data block=0<BR>Maximum filesystem blocks=268435456<BR>8 block groups<BR>32768 blocks per group, 32768 fragments per group<BR>8192 inodes per group<BR>Superblock backups stored on blocks:<BR>32768, 98304, 163840, 229376</SPAN></SPAN></SPAN></P>
<P>Allocating group tables: done<BR>Writing inode tables: done<BR>Creating journal (8192 blocks): done<BR>Writing superblocks and filesystem accounting information: done<BR>root/node-000c297b124e /sf #&nbsp;<SPAN style="COLOR: #de5700">mkdir /myvolumnmountp<SPAN style="COLOR: black"><BR>root/node-000c297b124e /sf #&nbsp;<SPAN style="COLOR: #de5700">mount /dev/mygroup/myvolumn /myvolumnmountp<SPAN style="COLOR: black"><BR>root/node-000c297b124e /sf #&nbsp;<SPAN style="COLOR: #de5700">ll /myvolumnmountp<SPAN style="COLOR: black"><BR>total 16<BR>drwx------ 2 root root 16384 Jan 30 21:14 lost+found/<BR>root/node-000c297b124e /sf #&nbsp;<SPAN style="COLOR: #de5700">vgremove mygroup<SPAN style="COLOR: black"><BR>Do you really want to remove volume group "mygroup" containing 1 logical volumes? [y/n]: ^C<BR>Volume group "mygroup" not removed<BR>root/node-000c297b124e /sf #&nbsp;<SPAN style="COLOR: #de5700">vgremove mygroup -f<SPAN style="COLOR: black"><BR>Logical volume mygroup/myvolumn contains a filesystem in use.<BR>root/node-000c297b124e /sf #&nbsp;<SPAN style="COLOR: #de5700">echo $?<SPAN style="COLOR: black"><BR>5<BR>root/node-000c297b124e /sf #&nbsp;<SPAN style="COLOR: #de5700">umount /dev/mygroup/myvolumn<SPAN style="COLOR: black"><BR>root/node-000c297b124e /sf #&nbsp;<SPAN style="COLOR: #de5700">vgremove mygroup -f<SPAN style="COLOR: black"><BR>Logical volume "myvolumn" successfully removed<BR>Volume group "mygroup" successfully removed<BR></SPAN></SPAN></SPAN></SPAN></SPAN></SPAN></SPAN></SPAN></SPAN></SPAN></SPAN></SPAN></SPAN></SPAN></SPAN></SPAN></P>
<H3>&#36923;&#36753;&#21367;&#38382;&#39064;</H3>
<P><SPAN style="COLOR: #41ad1c"><SPAN>&#26377;&#26102;&#20250;&#36935;&#21040;&#33707;&#21517;&#20854;&#22937;&#34987;&#21344;&#29992;&#65292;</SPAN><SPAN style="FONT-FAMILY: Consolas">mount df</SPAN><SPAN>&#37117;&#30475;&#19981;&#20986;&#26469;&#36923;&#36753;&#21367;&#34987;&#21344;&#29992;&#20102;&#65292;&#23548;&#33268;&#26080;&#27861;</SPAN><SPAN style="FONT-FAMILY: Consolas">mkfs<BR></SPAN></SPAN></P>
<P><SPAN style="FONT-FAMILY: Consolas; COLOR: black">root/node-000c29b2f2fa / # <SPAN style="COLOR: #de5700">mkfs.ext3 -F -L vtpboot "/dev/sda1"<SPAN style="COLOR: black"><BR>mke2fs 1.42.5 (29-Jul-2012)<BR>/dev/sda1 is apparently in use by the system; will not make a filesystem here!<BR></SPAN></SPAN></SPAN></P>
<P><SPAN style="COLOR: #41ad1c"><SPAN>&#21407;&#22240;&#26159;&#34987;&#36825;&#19996;&#35199;&#21344;&#29992;&#20102;</SPAN><SPAN style="FONT-FAMILY: Consolas"><BR></SPAN></SPAN></P>
<P><SPAN style="FONT-FAMILY: Consolas; COLOR: black">root/node-000c29b2f2fa / # <SPAN style="COLOR: #de5700">dmsetup ls<SPAN style="COLOR: black"><BR>mpatha&nbsp;&nbsp;&nbsp;&nbsp; (254:0)<BR>mpatha-part2&nbsp;&nbsp;&nbsp;&nbsp; (254:2)<BR>mpatha-part1&nbsp;&nbsp;&nbsp;&nbsp; (254:1)<BR></SPAN></SPAN></SPAN></P>
<P><SPAN style="COLOR: #41ad1c"><SPAN>&#21024;&#38500;&#65292;&#19968;&#20010;&#19968;&#20010;&#30340;&#26469;</SPAN><SPAN style="FONT-FAMILY: Consolas; COLOR: black"><BR>root/node-000c29b2f2fa / # <SPAN style="COLOR: #de5700">dmsetup remove mpatha<SPAN style="COLOR: black"><BR>device-mapper: remove ioctl on mpatha failed: Device or resource busy<BR>Command failed<BR>root/node-000c29b2f2fa / # <SPAN style="COLOR: #de5700">dmsetup remove mpatha-part1<SPAN style="COLOR: black"><BR>root/node-000c29b2f2fa / # <SPAN style="COLOR: #de5700">dmsetup remove mpatha-part2<SPAN style="COLOR: black"><BR>root/node-000c29b2f2fa / # <SPAN style="COLOR: #de5700">dmsetup remove mpatha<SPAN style="COLOR: black"><BR>root/node-000c29b2f2fa / #<BR>root/node-000c29b2f2fa / # <SPAN style="COLOR: #de5700">dmsetup ls<SPAN style="COLOR: black"><BR>No devices found<BR>root/node-000c29b2f2fa / #<BR>root/node-000c29b2f2fa / # <SPAN style="COLOR: #de5700">mkfs.ext3 -F -L vtpboot "/dev/sda1"<SPAN style="COLOR: black"><BR>mke2fs 1.42.5 (29-Jul-2012)<BR>Filesystem label=vtpboot<BR>OS type: Linux<SPAN style="COLOR: #41ad1c"><BR></SPAN></SPAN></SPAN></SPAN></SPAN></SPAN></SPAN></SPAN></SPAN></SPAN></SPAN></SPAN></SPAN></SPAN></SPAN></P>
<P><SPAN style="FONT-FAMILY: Consolas; COLOR: black">dmsetup&nbsp; ls<BR></SPAN></P>
<P><SPAN style="FONT-FAMILY: Consolas; COLOR: black">dmsetup remove mpatha-part1<BR></SPAN></P>
<P><SPAN style="FONT-FAMILY: Consolas; COLOR: black">dmsetup remove mpatha-part2<BR></SPAN></P>
<P><SPAN style="FONT-FAMILY: Consolas; COLOR: black">dmsetup remove mpatha<BR></SPAN></P>
<P><SPAN style="FONT-FAMILY: Consolas; COLOR: black">dmsetup remove&nbsp;vtpgroup-vtplog<BR></SPAN></P>
<P><SPAN style="FONT-FAMILY: Consolas; COLOR: black">dmsetup remove&nbsp;vtpgroup-vtplocal<BR></SPAN></P>
<P><SPAN style="FONT-FAMILY: Consolas; COLOR: black">dmsetup remove&nbsp;vtpgroup-vtpresvered<BR></SPAN></P>
<P><SPAN style="COLOR: #41ad1c">&#21024;&#38500;&#65292;&#20063;&#21487;&#20197;&#19968;&#36215;&#26469;<SPAN style="COLOR: black"><BR></SPAN></SPAN></P>
<P><SPAN style="FONT-FAMILY: Consolas; COLOR: black">root/node-000c29b2f2fa / # <SPAN style="COLOR: #de5700">dmsetup remove_all &#8211;f</SPAN></SPAN></P></DIV>