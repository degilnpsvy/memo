<H2 id=title-ID0ECMOM class=docChapterTitle>Chapter 4. Laying the Groundwork</H2><A name=ch04fe01></A>
<P>
<TABLE cellSpacing=0 cellPadding=5 rules=none width="98%" border=1>
<TBODY>
<TR>
<TD>
<H4 id=title-ID0EHMOM class=docSection2Title><A name="In This"></A><FONT size=5>In This Chapter</FONT></H4></TD></TR>
<TR>
<TD>
<P>
<TABLE cellSpacing=0 cellPadding=5 rules=none frame=void>
<COLGROUP span=2 align=left><FONT size=5>
<COL width=400>
<COL width=50></FONT></COLGROUP>
<THEAD><FONT size=5></FONT></THEAD>
<TBODY>
<TR>
<TD class=docTableCell vAlign=top align=left>
<UL>
<LI>
<P class=docList><A class=docLink href="http://www.embeddedlinux.org.cn/EssentialLinuxDeviceDrivers/final/ch04lev1sec1.html#ch04lev1sec1"><FONT size=5>Introducing Devices and Drivers</FONT></A></P></LI></UL></TD>
<TD class=docTableCell vAlign=top align=left><A class=docLink href="http://www.embeddedlinux.org.cn/EssentialLinuxDeviceDrivers/final/ch04lev1sec1.html#ch04lev1sec1"><FONT size=5>90</FONT></A></TD></TR>
<TR>
<TD class=docTableCell vAlign=top align=left>
<UL>
<LI>
<P class=docList><A class=docLink href="http://www.embeddedlinux.org.cn/EssentialLinuxDeviceDrivers/final/ch04lev1sec2.html#ch04lev1sec2"><FONT size=5>Interrupt Handling</FONT></A></P></LI></UL></TD>
<TD class=docTableCell vAlign=top align=left><A class=docLink href="http://www.embeddedlinux.org.cn/EssentialLinuxDeviceDrivers/final/ch04lev1sec2.html#ch04lev1sec2"><FONT size=5>92</FONT></A></TD></TR>
<TR>
<TD class=docTableCell vAlign=top align=left>
<UL>
<LI>
<P class=docList><A class=docLink href="http://www.embeddedlinux.org.cn/EssentialLinuxDeviceDrivers/final/ch04lev1sec3.html#ch04lev1sec3"><FONT size=5>The Linux Device Model</FONT></A></P></LI></UL></TD>
<TD class=docTableCell vAlign=top align=left><A class=docLink href="http://www.embeddedlinux.org.cn/EssentialLinuxDeviceDrivers/final/ch04lev1sec3.html#ch04lev1sec3"><FONT size=5>103</FONT></A></TD></TR>
<TR>
<TD class=docTableCell vAlign=top align=left>
<UL>
<LI>
<P class=docList><A class=docLink href="http://www.embeddedlinux.org.cn/EssentialLinuxDeviceDrivers/final/ch04lev1sec4.html#ch04lev1sec4"><FONT size=5>Memory Barriers</FONT></A></P></LI></UL></TD>
<TD class=docTableCell vAlign=top align=left><A class=docLink href="http://www.embeddedlinux.org.cn/EssentialLinuxDeviceDrivers/final/ch04lev1sec4.html#ch04lev1sec4"><FONT size=5>114</FONT></A></TD></TR>
<TR>
<TD class=docTableCell vAlign=top align=left>
<UL>
<LI>
<P class=docList><A class=docLink href="http://www.embeddedlinux.org.cn/EssentialLinuxDeviceDrivers/final/ch04lev1sec5.html#ch04lev1sec5"><FONT size=5>Power Management</FONT></A></P></LI></UL></TD>
<TD class=docTableCell vAlign=top align=left><A class=docLink href="http://www.embeddedlinux.org.cn/EssentialLinuxDeviceDrivers/final/ch04lev1sec5.html#ch04lev1sec5"><FONT size=5>114</FONT></A></TD></TR>
<TR>
<TD class=docTableCell vAlign=top align=left>
<UL>
<LI>
<P class=docList><A class=docLink href="http://www.embeddedlinux.org.cn/EssentialLinuxDeviceDrivers/final/ch04lev1sec6.html#ch04lev1sec6"><FONT size=5>Looking at the Sources</FONT></A></P></LI></UL></TD>
<TD class=docTableCell vAlign=top align=left><A class=docLink href="http://www.embeddedlinux.org.cn/EssentialLinuxDeviceDrivers/final/ch04lev1sec6.html#ch04lev1sec6"><FONT size=5>115</FONT></A></TD></TR></TBODY></TABLE></P><BR></TD></TR></TBODY></TABLE></P>
<P class=docText><FONT size=5></FONT></P><A name=ch04sb01></A>
<P>
<TABLE cellSpacing=0 cellPadding=5 width="90%" border=1>
<TBODY>
<TR>
<TD>
<P class=docText><A name="now within"></A><FONT size=5>We are now within whispering distance of writing a device driver. Before doing that, however, let's equip ourselves with some driver concepts. We start the chapter by getting an idea of the book's problem statement; we will look at the typical devices and I/O interfaces present on PC-compatible systems and embedded computers. Interrupt handling is an integral part of most drivers, so we next cover the art of writing interrupt handlers. We then turn our attention to the new device model introduced in the 2.6 kernel. The new model is built around abstractions such as <SPAN class=docEmphasis>sysfs</SPAN>, <SPAN class=docEmphasis>kobjects</SPAN>, <SPAN class=docEmphasis>device classes</SPAN>, and <SPAN class=docEmphasis>udev</SPAN></FONT><A name="distill commonalities"></A><FONT size=5>, which distill commonalities from device drivers. The new device model also weeds policies out of kernel space and pushes them to user space, resulting in a total revamp of features such as <SPAN class=docEmphasis>/dev</SPAN> node management, hotplug, coldplug, module autoload, and firmware download.</FONT></P></TD></TR></TBODY></TABLE>