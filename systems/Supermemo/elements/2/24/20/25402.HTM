extern void flush_workqueue(struct workqueue_struct *wq);<BR>extern void drain_workqueue(struct workqueue_struct *wq); 
<P></P>
<P><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/kernel/workqueue.c#2459" name=2459><FONT class=clozed size=4>2459</FONT></A><SPAN class=c style="COLOR: rgb(102,102,102)"><FONT class=clozed size=4>/**<BR></FONT><A class=hl style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(0,0,0); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/kernel/workqueue.c#2460" name=2460><FONT class=clozed size=4>2460</FONT></A><FONT class=clozed size=4> * flush_workqueue - ensure that any scheduled work has run to completion.<BR></FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/kernel/workqueue.c#2461" name=2461><FONT class=clozed size=4>2461</FONT></A><FONT class=clozed size=4> * @wq: workqueue to flush<BR></FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/kernel/workqueue.c#2462" name=2462><FONT class=clozed size=4>2462</FONT></A><FONT class=clozed size=4> *<BR></FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/kernel/workqueue.c#2463" name=2463><FONT class=clozed size=4>2463</FONT></A><FONT class=clozed size=4> * This function sleeps until all work items which were queued on entry<BR></FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/kernel/workqueue.c#2464" name=2464><FONT class=clozed size=4>2464</FONT></A><FONT class=clozed size=4> * have finished execution, but it is not livelocked by new incoming ones.<BR></FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/kernel/workqueue.c#2465" name=2465><FONT class=clozed size=4>2465</FONT></A><FONT class=clozed size=4> */</FONT></SPAN></P>
<P><FONT class=clozed>&nbsp;</FONT></P>
<P><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/kernel/workqueue.c#2612" name=2612><FONT class=clozed size=4>2612</FONT></A><SPAN class=c style="COLOR: rgb(102,102,102)"><FONT class=clozed size=4>/**<BR></FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/kernel/workqueue.c#2613" name=2613><FONT class=clozed size=4>2613</FONT></A><FONT class=clozed size=4> * drain_workqueue - drain a workqueue<BR></FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/kernel/workqueue.c#2614" name=2614><FONT class=clozed size=4>2614</FONT></A><FONT class=clozed size=4> * @wq: workqueue to drain<BR></FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/kernel/workqueue.c#2615" name=2615><FONT class=clozed size=4>2615</FONT></A><FONT class=clozed size=4> *<BR></FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/kernel/workqueue.c#2616" name=2616><FONT class=clozed size=4>2616</FONT></A><FONT class=clozed size=4> * Wait until the workqueue becomes empty.&nbsp; While draining is in progress,<BR></FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/kernel/workqueue.c#2617" name=2617><FONT class=clozed size=4>2617</FONT></A><FONT class=clozed size=4> * only chain queueing is allowed.&nbsp; IOW, only currently pending or running<BR></FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/kernel/workqueue.c#2618" name=2618><FONT class=clozed size=4>2618</FONT></A><FONT class=clozed size=4> * work items on @wq can queue further work items on it.&nbsp; @wq is flushed<BR></FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/kernel/workqueue.c#2619" name=2619><FONT class=clozed size=4>2619</FONT></A><FONT class=clozed size=4> * repeatedly until it becomes empty.&nbsp; The number of flushing is detemined<BR></FONT><A class=hl style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(0,0,0); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/kernel/workqueue.c#2620" name=2620><FONT class=clozed size=4>2620</FONT></A><FONT class=clozed size=4> * by the depth of chaining and should be relatively short.&nbsp; Whine if it<BR></FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/kernel/workqueue.c#2621" name=2621><FONT class=clozed size=4>2621</FONT></A><FONT class=clozed size=4> * takes too long.<BR></FONT><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.21.12.145:8080/source/xref/linux-4.1/kernel/workqueue.c#2622" name=2622><FONT class=clozed size=4>2622</FONT></A><FONT class=clozed size=4> */</FONT></SPAN></P>
<P>&nbsp;