/**<BR>&nbsp;* kobject_action_type - translate action string to numeric type<BR>&nbsp;*<BR>&nbsp;* @buf: buffer containing the action string, newline is ignored<BR>&nbsp;* @len: length of buffer<BR>&nbsp;* @type: pointer to the location to store the action type<BR>&nbsp;*<BR>&nbsp;* Returns 0 if the action string was recognized.<BR>&nbsp;*/<BR>int kobject_action_type(const char *buf, size_t count,<BR>&nbsp;&nbsp;&nbsp;enum kobject_action *type)<BR>{<BR>&nbsp;enum kobject_action action;<BR>&nbsp;int ret = -EINVAL;
<P></P>
<P>&nbsp;if (count &amp;&amp; (buf[count-1] == '\n' || buf[count-1] == '\0'))<BR>&nbsp;&nbsp;count--;</P>
<P>&nbsp;if (!count)<BR>&nbsp;&nbsp;goto out;</P>
<P>&nbsp;for (action = 0; action &lt; ARRAY_SIZE(kobject_actions); action++) {<BR>&nbsp;&nbsp;if (strncmp(kobject_actions[action], buf, count) != 0)<BR>&nbsp;&nbsp;&nbsp;continue;<BR>&nbsp;&nbsp;if (kobject_actions[action][count] != '\0')<BR>&nbsp;&nbsp;&nbsp;continue;<BR>&nbsp;&nbsp;*type = action;<BR>&nbsp;&nbsp;ret = 0;<BR>&nbsp;&nbsp;break;<BR>&nbsp;}<BR>out:<BR>&nbsp;return ret;<BR>}
<P>&nbsp;<PRE><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/lib/kobject_uevent.c#46" name=46>46</A><B>static</B> <B>const</B> <B>char</B> *<A class=xv name=kobject_actions></A><A class=xv href="http://172.29.26.110:8080/source/s?refs=kobject_actions&amp;project=Linux-v4.6">kobject_actions</A>[] = {
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/lib/kobject_uevent.c#47" name=47>47</A>	[<A href="http://172.29.26.110:8080/source/s?defs=KOBJ_ADD&amp;project=Linux-v4.6">KOBJ_ADD</A>] =		<SPAN class=s>"add"</SPAN>,
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/lib/kobject_uevent.c#48" name=48>48</A>	[<A href="http://172.29.26.110:8080/source/s?defs=KOBJ_REMOVE&amp;project=Linux-v4.6">KOBJ_REMOVE</A>] =		<SPAN class=s>"remove"</SPAN>,
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/lib/kobject_uevent.c#49" name=49>49</A>	[<A href="http://172.29.26.110:8080/source/s?defs=KOBJ_CHANGE&amp;project=Linux-v4.6">KOBJ_CHANGE</A>] =		<SPAN class=s>"change"</SPAN>,
<A class=hl href="http://172.29.26.110:8080/source/xref/Linux-v4.6/lib/kobject_uevent.c#50" name=50>50</A>	[<A href="http://172.29.26.110:8080/source/s?defs=KOBJ_MOVE&amp;project=Linux-v4.6">KOBJ_MOVE</A>] =		<SPAN class=s>"move"</SPAN>,
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/lib/kobject_uevent.c#51" name=51>51</A>	[<A href="http://172.29.26.110:8080/source/s?defs=KOBJ_ONLINE&amp;project=Linux-v4.6">KOBJ_ONLINE</A>] =		<SPAN class=s>"online"</SPAN>,
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/lib/kobject_uevent.c#52" name=52>52</A>	[<A href="http://172.29.26.110:8080/source/s?defs=KOBJ_OFFLINE&amp;project=Linux-v4.6">KOBJ_OFFLINE</A>] =	<SPAN class=s>"offline"</SPAN>,
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/lib/kobject_uevent.c#53" name=53>53</A>};</PRE>