/*<BR>&nbsp;*&nbsp;Notifier chain core routines.&nbsp; The exported routines below<BR>&nbsp;*&nbsp;are layered on top of these, with appropriate locking added.<BR>&nbsp;*/ 
<P></P>
<P>static int notifier_chain_register(struct notifier_block **nl,<BR>&nbsp;&nbsp;struct notifier_block *n)<BR>{<BR>&nbsp;while ((*nl) != NULL) {<BR>&nbsp;&nbsp;if (n-&gt;priority &gt; (*nl)-&gt;priority)<BR>&nbsp;&nbsp;&nbsp;break;<BR>&nbsp;&nbsp;nl = &amp;((*nl)-&gt;next);<BR>&nbsp;}<BR>&nbsp;n-&gt;next = *nl;<BR>&nbsp;rcu_assign_pointer(*nl, n);<BR>&nbsp;return 0;<BR>}</P>
<P>static int notifier_chain_cond_register(struct notifier_block **nl,<BR>&nbsp;&nbsp;struct notifier_block *n)<BR>{<BR>&nbsp;while ((*nl) != NULL) {<BR>&nbsp;&nbsp;if ((*nl) == n)<BR>&nbsp;&nbsp;&nbsp;return 0;<BR>&nbsp;&nbsp;if (n-&gt;priority &gt; (*nl)-&gt;priority)<BR>&nbsp;&nbsp;&nbsp;break;<BR>&nbsp;&nbsp;nl = &amp;((*nl)-&gt;next);<BR>&nbsp;}<BR>&nbsp;n-&gt;next = *nl;<BR>&nbsp;rcu_assign_pointer(*nl, n);<BR>&nbsp;return 0;<BR>}</P>
<P>static int notifier_chain_unregister(struct notifier_block **nl,<BR>&nbsp;&nbsp;struct notifier_block *n)<BR>{<BR>&nbsp;while ((*nl) != NULL) {<BR>&nbsp;&nbsp;if ((*nl) == n) {<BR>&nbsp;&nbsp;&nbsp;rcu_assign_pointer(*nl, n-&gt;next);<BR>&nbsp;&nbsp;&nbsp;return 0;<BR>&nbsp;&nbsp;}<BR>&nbsp;&nbsp;nl = &amp;((*nl)-&gt;next);<BR>&nbsp;}<BR>&nbsp;return -ENOENT;<BR>}