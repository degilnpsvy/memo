<P class=docText>Here's the code region from <A class=docLink href="http://www.embeddedlinux.org.cn/EssentialLinuxDeviceDrivers/final/ch03.html#ch03ex01">Listing 3.1</A><A name="waiting for"></A> that puts mykthread to sleep while waiting for events:</P>
<DIV class=docText><PRE><FONT class=clozed>add_wait_queue(&amp;myevent_waitqueue, &amp;wait)</FONT>;
for (;;) {

  /* ... */
  <SPAN class=cloze>[...]</SPAN>/* Relinquish the processor */
  /* Point A */

  /* ... */
}
set_current_state(TASK_RUNNING);
remove_wait_queue(&amp;myevent_waitqueue, &amp;wait);</PRE></DIV><BR>
<P class=docText><A name=iddle1676></A><A name=iddle2031></A><A name=iddle2032></A><A name=iddle2444></A><A name=iddle3794></A><A name=iddle3867></A><A name=iddle3985></A><A name=iddle4153></A><A name=iddle4212></A><A name=iddle4213></A><A name=iddle4214></A><A name=iddle4215></A><A name=iddle4216></A><A name=iddle4293></A><A name=iddle4389></A><A name=iddle4622></A><A name=iddle4677></A><A name="on two"></A>The operation of the preceding snippet is based on two concepts: <SPAN class=docEmphasis>wait queues</SPAN> and <SPAN class=docEmphasis>process states</SPAN>. 
<P class=docText>&nbsp;