<H2 id=title-ID0ERSAO class=docChapterTitle>Chapter 21. Debugging Device Drivers</H2><A name=ch21fe01></A>
<P>
<TABLE cellSpacing=0 cellPadding=5 rules=none width="98%" border=1>
<TBODY>
<TR>
<TD>
<H4 id=title-ID0EWSAO class=docSection2Title><A name="In This"></A><FONT size=5>In This Chapter</FONT></H4></TD></TR>
<TR>
<TD>
<P>
<TABLE cellSpacing=0 cellPadding=5 rules=none frame=void>
<COLGROUP span=2 align=left><FONT size=5>
<COL width=400>
<COL width=50></FONT></COLGROUP>
<THEAD><FONT size=5></FONT></THEAD>
<TBODY>
<TR>
<TD class=docTableCell vAlign=top align=left>
<UL>
<LI>
<P class=docList><A class=docLink href="http://www.embeddedlinux.org.cn/EssentialLinuxDeviceDrivers/final/ch21lev1sec1.html#ch21lev1sec1"><FONT size=5>Kernel Debuggers</FONT></A></P></LI></UL></TD>
<TD class=docTableCell vAlign=top align=left><A class=docLink href="http://www.embeddedlinux.org.cn/EssentialLinuxDeviceDrivers/final/ch21lev1sec1.html#ch21lev1sec1"><FONT size=5>596</FONT></A></TD></TR>
<TR>
<TD class=docTableCell vAlign=top align=left>
<UL>
<LI>
<P class=docList><A class=docLink href="http://www.embeddedlinux.org.cn/EssentialLinuxDeviceDrivers/final/ch21lev1sec2.html#ch21lev1sec2"><FONT size=5>Kernel Probes</FONT></A></P></LI></UL></TD>
<TD class=docTableCell vAlign=top align=left><A class=docLink href="http://www.embeddedlinux.org.cn/EssentialLinuxDeviceDrivers/final/ch21lev1sec2.html#ch21lev1sec2"><FONT size=5>609</FONT></A></TD></TR>
<TR>
<TD class=docTableCell vAlign=top align=left>
<UL>
<LI>
<P class=docList><A class=docLink href="http://www.embeddedlinux.org.cn/EssentialLinuxDeviceDrivers/final/ch21lev1sec3.html#ch21lev1sec3"><FONT size=5>Kexec and Kdump</FONT></A></P></LI></UL></TD>
<TD class=docTableCell vAlign=top align=left><A class=docLink href="http://www.embeddedlinux.org.cn/EssentialLinuxDeviceDrivers/final/ch21lev1sec3.html#ch21lev1sec3"><FONT size=5>620</FONT></A></TD></TR>
<TR>
<TD class=docTableCell vAlign=top align=left>
<UL>
<LI>
<P class=docList><A class=docLink href="http://www.embeddedlinux.org.cn/EssentialLinuxDeviceDrivers/final/ch21lev1sec4.html#ch21lev1sec4"><FONT size=5>Profiling</FONT></A></P></LI></UL></TD>
<TD class=docTableCell vAlign=top align=left><A class=docLink href="http://www.embeddedlinux.org.cn/EssentialLinuxDeviceDrivers/final/ch21lev1sec4.html#ch21lev1sec4"><FONT size=5>629</FONT></A></TD></TR>
<TR>
<TD class=docTableCell vAlign=top align=left>
<UL>
<LI>
<P class=docList><A class=docLink href="http://www.embeddedlinux.org.cn/EssentialLinuxDeviceDrivers/final/ch21lev1sec5.html#ch21lev1sec5"><FONT size=5>Tracing</FONT></A></P></LI></UL></TD>
<TD class=docTableCell vAlign=top align=left><A class=docLink href="http://www.embeddedlinux.org.cn/EssentialLinuxDeviceDrivers/final/ch21lev1sec5.html#ch21lev1sec5"><FONT size=5>634</FONT></A></TD></TR>
<TR>
<TD class=docTableCell vAlign=top align=left>
<UL>
<LI>
<P class=docList><A class=docLink href="http://www.embeddedlinux.org.cn/EssentialLinuxDeviceDrivers/final/ch21lev1sec6.html#ch21lev1sec6"><FONT size=5>Linux Test Project</FONT></A></P></LI></UL></TD>
<TD class=docTableCell vAlign=top align=left><A class=docLink href="http://www.embeddedlinux.org.cn/EssentialLinuxDeviceDrivers/final/ch21lev1sec6.html#ch21lev1sec6"><FONT size=5>638</FONT></A></TD></TR>
<TR>
<TD class=docTableCell vAlign=top align=left>
<UL>
<LI>
<P class=docList><A class=docLink href="http://www.embeddedlinux.org.cn/EssentialLinuxDeviceDrivers/final/ch21lev1sec7.html#ch21lev1sec7"><FONT size=5>User Mode Linux</FONT></A></P></LI></UL></TD>
<TD class=docTableCell vAlign=top align=left><A class=docLink href="http://www.embeddedlinux.org.cn/EssentialLinuxDeviceDrivers/final/ch21lev1sec7.html#ch21lev1sec7"><FONT size=5>638</FONT></A></TD></TR>
<TR>
<TD class=docTableCell vAlign=top align=left>
<UL>
<LI>
<P class=docList><A class=docLink href="http://www.embeddedlinux.org.cn/EssentialLinuxDeviceDrivers/final/ch21lev1sec8.html#ch21lev1sec8"><FONT size=5>Diagnostic Tools</FONT></A></P></LI></UL></TD>
<TD class=docTableCell vAlign=top align=left><A class=docLink href="http://www.embeddedlinux.org.cn/EssentialLinuxDeviceDrivers/final/ch21lev1sec8.html#ch21lev1sec8"><FONT size=5>638</FONT></A></TD></TR>
<TR>
<TD class=docTableCell vAlign=top align=left>
<UL>
<LI>
<P class=docList><A class=docLink href="http://www.embeddedlinux.org.cn/EssentialLinuxDeviceDrivers/final/ch21lev1sec9.html#ch21lev1sec9"><FONT size=5>Kernel Hacking Config Options</FONT></A></P></LI></UL></TD>
<TD class=docTableCell vAlign=top align=left><A class=docLink href="http://www.embeddedlinux.org.cn/EssentialLinuxDeviceDrivers/final/ch21lev1sec9.html#ch21lev1sec9"><FONT size=5>639</FONT></A></TD></TR>
<TR>
<TD class=docTableCell vAlign=top align=left>
<UL>
<LI>
<P class=docList><A class=docLink href="http://www.embeddedlinux.org.cn/EssentialLinuxDeviceDrivers/final/ch21lev1sec10.html#ch21lev1sec10"><FONT size=5>Test Equipment</FONT></A></P></LI></UL></TD>
<TD class=docTableCell vAlign=top align=left><A class=docLink href="http://www.embeddedlinux.org.cn/EssentialLinuxDeviceDrivers/final/ch21lev1sec10.html#ch21lev1sec10"><FONT size=5>640</FONT></A></TD></TR></TBODY></TABLE></P><BR></TD></TR></TBODY></TABLE></P>
<P class=docText><FONT size=5></FONT></P><A name=ch21sb01></A>
<P>
<TABLE cellSpacing=0 cellPadding=5 width="90%" border=1>
<TBODY>
<TR>
<TD>
<P class=docText><A name=iddle1703></A><A name=iddle1724></A><A name=iddle1730></A><A name=iddle2167></A><A name=iddle2218></A><A name=iddle2532></A><A name=iddle2567></A><A name=iddle2797></A><A name=iddle2866></A><A name=iddle3337></A><A name=iddle3717></A><A name=iddle3791></A><A name="we have"></A><FONT size=5>Now that we have learned how to implement diverse classes of device drivers, let's take a step back and explore some debugging techniques. Investing time in logic design and software engineering before code development and staring hard at the code after development can minimize or even eliminate bugs. But because that is easier said than done, and because we are all humans, developers need debugging tools. In this chapter, let's look at a variety of methods to debug kernel code.</FONT></P></TD></TR></TBODY></TABLE></P><BR><A name=ch21sb02></A>
<P>
<TABLE cellSpacing=0 cellPadding=5 width="90%" border=1>
<TBODY>
<TR>
<TD>
<H2 class=docSidebarTitle>Reliability, Availability, Serviceability</H2>
<P class=docText><A name="have a"></A><FONT size=5>Many systems, especially mission critical ones, have a need for reliability, availability, and serviceability (RAS). The Linux RAS effort has resulted in the development of several powerful tools. Exercisers such as the Linux Test Project (LTP) measure the reliability and robustness of your kernel port. CPU hotplugging and the Linux High Availability (HA) project can be seen in the context of availability. Kernel debuggers, Kprobes, Kdump, EDAC, and the Linux Trace Toolkit (LTT) come under the ambit of serviceability. The line dividing these classifications is sometimes thin; you can use any or a combination of these methods to suit your debugging needs. For example, output from a kernel profiler such as <SPAN class=docEmphasis>OProfile</SPAN></FONT><A name="either to"></A><FONT size=5> can be used either to search for potential code bottlenecks (reliability) or to debug a field problem (serviceability).</FONT></P></TD></TR></TBODY></TABLE>