<H3 id=-100000 class=docSection1Title>ISA Network Drivers</H3>
<P class=docText><A name="now take"></A>Let's now take a peek at an ISA NIC. The CS8900 is a 10Mbps Ethernet controller chip from Crystal Semiconductor (now Cirrus Logic). This chip is commonly used to Ethernet-enable embedded devices, especially for debug purposes. <A class=docLink href="http://www.embeddedlinux.org.cn/EssentialLinuxDeviceDrivers/final/ch15lev1sec5.html#ch15fig02">Figure 15.2</A><A name="connection diagram"></A> shows a connection diagram surrounding a CS8900. Depending on the processor on your board and the chip-select used to drive the chip, the CS8900 registers map to different regions in the CPU's I/O address space. The device driver for this controller is an ISA-type driver (look at the section "<A class=docLink href="http://www.embeddedlinux.org.cn/EssentialLinuxDeviceDrivers/final/ch20lev1sec5.html#ch20lev1sec5">ISA and MCA</A>" in <A class=docLink href="http://www.embeddedlinux.org.cn/EssentialLinuxDeviceDrivers/final/ch20.html#ch20">Chapter 20</A><A name="and Drivers"></A>, "More Devices and Drivers") that probes candidate address regions to detect the controller's presence. The ISA probe method elicits the controller's I/O base address by looking for a signature such as the chip ID.</P><A name=ch15fig02></A>
<P>
<CENTER>
<H5 class=docFigureTitle>Figure 15.2. Connection diagram surrounding a CS8900 Ethernet controller.</H5>
<P class=docText>
<DIV class=st1><A href="http://www.embeddedlinux.org.cn/EssentialLinuxDeviceDrivers/final/images/ZTVyMWQ5OHB0Z2lzMC8vbWMzNWE5NC9yMzZnMjdhZy5wX2xjc2kwMXQvMjVoZmlnaWFm.jpg" target=_blank>[View full size image]</A></DIV><IMG border=0 alt="" src="http://www.embeddedlinux.org.cn/EssentialLinuxDeviceDrivers/final/images/ZTVyMWQ5OHB0Z2lzMC8vbWMzNWE5NC9yMzZnMjdhZ3AuaWNzaTAxLzJmNWhpZ2Y-.jpg" width=500 height=163>
<P></P></CENTER>
<P></P><BR>
<P class=docText>Look at <SPAN class=docEmphasis>drivers/net/cs89x0.c</SPAN> for the source code of the CS8900 driver. <TT>cs89x0_probe1()</TT><A name="the current"></A> probes I/O address ranges to sense a CS8900. It then reads the current configuration of the chip. During this step, it accesses the CS8900's companion EEPROM <A name=iddle1140></A><A name=iddle1144></A><A name=iddle2715></A><A name=iddle3270></A><A name=iddle3562></A><A name=iddle3689></A><A name=iddle3691></A><A name=iddle3693></A><A name=iddle4178></A><A name=iddle4182></A><A name=iddle4573></A><A name=iddle4591></A><A name=iddle4598></A><A name=iddle4610></A><A name="the driver"></A>and gleans the controller's MAC address. Like the driver in <A class=docLink href="http://www.embeddedlinux.org.cn/EssentialLinuxDeviceDrivers/final/ch15lev1sec4.html#ch15ex01">Listing 15.1</A>, <SPAN class=docEmphasis>cs89x0.c</SPAN> is also built using <TT>netif_*()</TT> and <TT>skb_*()</TT> interface routines.</P>
<P class=docText><A name="do not"></A>Some platforms that use the CS8900 allow DMA. ISA devices, unlike PCI cards, do not have DMA mastering capabilities, so they need an external DMA controller to transfer data.