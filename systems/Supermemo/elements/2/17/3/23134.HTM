<H3 id=-100000 class=docSection1Title>MTD-Utils</H3>
<P class=docText><A name="The MTD"></A>The MTD-utils package, downloadable from ftp://ftp.infradead.org/pub/mtd-utils/, contains several useful tools that work on top of MTD-enabled flash memory. Examples of included utilities are <SPAN class=docEmphasis>flash_eraseall</SPAN>, <SPAN class=docEmphasis>nanddump</SPAN>, <SPAN class=docEmphasis>nandwrite</SPAN>, and <SPAN class=docEmphasis>sumtool</SPAN>.</P>
<P class=docText><A name=iddle1578></A><A name=iddle2079></A><A name=iddle2080></A><A name=iddle2793></A><A name=iddle2974></A><A name=iddle3082></A><A name=iddle3083></A><A name="the second"></A>To erase the second flash partition (on NOR or NAND devices), use flash_eraseall as follows:</P>
<DIV class=docText><PRE><SPAN class=docEmphStrong>bash&gt; flash_eraseall &#37413;&#25604; /dev/mtd/2</SPAN></PRE></DIV><BR>
<P class=docText><A name="contain bad"></A>Because NAND chips may contain bad blocks, use ECC-aware programs such as nandwrite and nanddump to copy raw data, instead of general-purpose utilities, such as dd. To store the JFFS2 image that you created previously, on to the second NAND partition, do this:</P>
<DIV class=docText><PRE><SPAN class=docEmphStrong>bash&gt; nandwrite /dev/mtd/2 jffs2.img</SPAN></PRE></DIV><BR>
<P class=docText><A name="mount times"></A>You can reduce JFFS2 mount times by inserting summary information into a JFFS2 image using sumtool and turning on <TT>CONFIG_JFFS2_SUMMARY</TT><A name="previous NAND"></A> while configuring your kernel. To write a summarized JFFS2 image to the previous NAND flash, do this:</P>
<DIV class=docText><PRE><SPAN class=docEmphStrong>bash&gt; sumtool &#37413;&#25594; 256KiB &#37413;&#25603; jffs2.img &#37413;&#25610; jffs2.summary.img</SPAN>
<SPAN class=docEmphStrong>bash&gt; nandwrite /dev/mtd/2 jffs2.summary.img</SPAN>
<SPAN class=docEmphStrong>bash&gt; mount &#37413;&#25621; jffs2 /dev/mtdblock/2 /mnt</SPAN></PRE></DIV>