<DIV class=navheader>
<TABLE summary="Navigation header" width="100%">
<TBODY>
<TR>
<TH colSpan=3 align=middle><SPAN class=phrase>device_add</SPAN></TH></TR>
<TR>
<TD width="20%" align=left><A accessKey=p href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-dev-set-name.html">Prev</A>&nbsp;</TD>
<TH width="60%" align=middle>Device Drivers Base</TH>
<TD width="20%" align=right>&nbsp;<A accessKey=n href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-device-register.html">Next</A></TD></TR></TBODY></TABLE>
<HR>
</DIV>
<DIV class=refentry><A name=API-device-add></A>
<DIV class=titlepage></DIV>
<DIV class=refnamediv>
<H2>Name</H2>
<P>device_add &#8212; add device to device hierarchy. </P></DIV>
<DIV class=refsynopsisdiv>
<H2>Synopsis</H2>
<DIV class=funcsynopsis>
<TABLE style="cellspacing: 0; cellpadding: 0" class=funcprototype-table border=0 summary="Function synopsis">
<TBODY>
<TR>
<TD><CODE class=funcdef>int <B class=fsfunc>device_add </B>(</CODE></TD>
<TD>struct device * <VAR class=pdparam>dev</VAR><CODE>)</CODE>;</TD></TR></TBODY></TABLE>
<DIV class=funcprototype-spacer>&nbsp;</DIV></DIV></DIV>
<DIV class=refsect1><A name=idp43842428></A>
<H2>Arguments</H2>
<DIV class=variablelist>
<DL class=variablelist>
<DT><SPAN class=term><EM class=parameter><CODE>dev</CODE></EM></SPAN> 
<DD>
<P>device. </P></DD></DL></DIV></DIV>
<DIV class=refsect1><A name=idp43844012></A>
<H2>Description</H2>
<P>This is part 2 of <CODE class=function>device_register</CODE>, though may be called separately _iff_ <CODE class=function>device_initialize</CODE> has been called separately. </P>
<P>This adds <EM class=parameter><CODE>dev</CODE></EM> to the kobject hierarchy via <CODE class=function>kobject_add</CODE>, adds it to the global and sibling lists for the device, then adds it to the other relevant subsystems of the driver model. </P>
<P>Do not call this routine or <CODE class=function>device_register</CODE> more than once for any device structure. The driver model core is not designed to work with devices that get unregistered and then spring back to life. (Among other things, it's very hard to guarantee that all references to the previous incarnation of <EM class=parameter><CODE>dev</CODE></EM> have been dropped.) Allocate and register a fresh new struct device instead. </P></DIV>
<DIV class=refsect1><A name=idp43847644></A>
<H2>NOTE</H2>
<P>_Never_ directly free <EM class=parameter><CODE>dev</CODE></EM> after calling this function, even if it returned an error! Always use <CODE class=function>put_device</CODE> to give up your reference instead. </P></DIV></DIV>
<DIV class=navfooter>
<HR>

<TABLE summary="Navigation footer" width="100%">
<TBODY>
<TR>
<TD width="40%" align=left><A accessKey=p href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-dev-set-name.html">Prev</A>&nbsp;</TD>
<TD width="20%" align=middle><A accessKey=u href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/ch02s02.html">Up</A></TD>
<TD width="40%" align=right>&nbsp;<A accessKey=n href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-device-register.html">Next</A></TD></TR>
<TR>
<TD vAlign=top width="40%" align=left><SPAN class=phrase>dev_set_name</SPAN>&nbsp;</TD>
<TD width="20%" align=middle><A accessKey=h href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/index.html">Home</A></TD>
<TD vAlign=top width="40%" align=right>&nbsp;<SPAN class=phrase>device_register</SPAN></TD></TR></TBODY></TABLE></DIV>