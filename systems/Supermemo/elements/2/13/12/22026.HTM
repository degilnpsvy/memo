<DIV class=navheader>
<TABLE summary="Navigation header" width="100%">
<TBODY>
<TR>
<TH colSpan=3 align=middle><SPAN class=phrase>printk</SPAN></TH></TR>
<TR>
<TD width="20%" align=left><A accessKey=p href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-container-of.html">Prev</A>&nbsp;</TD>
<TH width="60%" align=middle>Kernel utility functions</TH>
<TD width="20%" align=right>&nbsp;<A accessKey=n href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-console-lock.html">Next</A></TD></TR></TBODY></TABLE>
<HR>
</DIV>
<DIV class=refentry><A name=API-printk></A>
<DIV class=titlepage></DIV>
<DIV class=refnamediv>
<H2>Name</H2>
<P>printk &#8212; print a kernel message </P></DIV>
<DIV class=refsynopsisdiv>
<H2>Synopsis</H2>
<DIV class=funcsynopsis>
<TABLE style="cellspacing: 0; cellpadding: 0" class=funcprototype-table border=0 summary="Function synopsis">
<TBODY>
<TR>
<TD><CODE class=funcdef>__visible int <B class=fsfunc>printk </B>(</CODE></TD>
<TD>const char * <VAR class=pdparam>fmt</VAR>, </TD></TR>
<TR>
<TD>&nbsp;</TD>
<TD><VAR class=pdparam>...</VAR><CODE>)</CODE>;</TD></TR></TBODY></TABLE>
<DIV class=funcprototype-spacer>&nbsp;</DIV></DIV></DIV>
<DIV class=refsect1><A name=idp42972716></A>
<H2>Arguments</H2>
<DIV class=variablelist>
<DL class=variablelist>
<DT><SPAN class=term><EM class=parameter><CODE>fmt</CODE></EM></SPAN> 
<DD>
<P>format string </P>
<DT><SPAN class=term><EM class=parameter><CODE>...</CODE></EM></SPAN> 
<DD>
<P>variable arguments </P></DD></DL></DIV></DIV>
<DIV class=refsect1><A name=idp42975316></A>
<H2>Description</H2>
<P>This is <CODE class=function>printk</CODE>. It can be called from any context. We want it to work. </P>
<P>We try to grab the console_lock. If we succeed, it's easy - we log the output and call the console drivers. If we fail to get the semaphore, we place the output into the log buffer and return. The current holder of the console_sem will notice the new output in <CODE class=function>console_unlock</CODE>; and will send it to the consoles before releasing the lock. </P>
<P>One effect of this deferred printing is that code which calls <CODE class=function>printk</CODE> and then changes console_loglevel may break. This is because console_loglevel is inspected when the actual printing occurs. </P></DIV>
<DIV class=refsect1><A name=idp42977876></A>
<H2>See also</H2>
<P>printf(3) </P>
<P>See the <CODE class=function>vsnprintf</CODE> documentation for format string extensions over C99. </P></DIV></DIV>
<DIV class=navfooter>
<HR>

<TABLE summary="Navigation footer" width="100%">
<TBODY>
<TR>
<TD width="40%" align=left><A accessKey=p href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-container-of.html">Prev</A>&nbsp;</TD>
<TD width="20%" align=middle><A accessKey=u href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/ch01s09.html">Up</A></TD>
<TD width="40%" align=right>&nbsp;<A accessKey=n href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-console-lock.html">Next</A></TD></TR>
<TR>
<TD vAlign=top width="40%" align=left><SPAN class=phrase>container_of</SPAN>&nbsp;</TD>
<TD width="20%" align=middle><A accessKey=h href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/index.html">Home</A></TD>
<TD vAlign=top width="40%" align=right>&nbsp;<SPAN class=phrase>console_lock</SPAN></TD></TR></TBODY></TABLE></DIV>