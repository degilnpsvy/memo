<DIV class=navheader>
<TABLE summary="Navigation header" width="100%">
<TBODY>
<TR>
<TH colSpan=3 align=middle><SPAN class=phrase>kobject_add</SPAN></TH></TR>
<TR>
<TD width="20%" align=left><A accessKey=p href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-kobject-init.html">Prev</A>&nbsp;</TD>
<TH width="60%" align=middle>Kernel objects manipulation</TH>
<TD width="20%" align=right>&nbsp;<A accessKey=n href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-kobject-init-and-add.html">Next</A></TD></TR></TBODY></TABLE>
<HR>
</DIV>
<DIV class=refentry><A name=API-kobject-add></A>
<DIV class=titlepage></DIV>
<DIV class=refnamediv>
<H2>Name</H2>
<P>kobject_add &#8212; the main kobject add function </P></DIV>
<DIV class=refsynopsisdiv>
<H2>Synopsis</H2>
<DIV class=funcsynopsis>
<TABLE style="cellspacing: 0; cellpadding: 0" class=funcprototype-table border=0 summary="Function synopsis">
<TBODY>
<TR>
<TD><CODE class=funcdef>int <B class=fsfunc>kobject_add </B>(</CODE></TD>
<TD>struct kobject * <VAR class=pdparam>kobj</VAR>, </TD></TR>
<TR>
<TD>&nbsp;</TD>
<TD>struct kobject * <VAR class=pdparam>parent</VAR>, </TD></TR>
<TR>
<TD>&nbsp;</TD>
<TD>const char * <VAR class=pdparam>fmt</VAR>, </TD></TR>
<TR>
<TD>&nbsp;</TD>
<TD><VAR class=pdparam>...</VAR><CODE>)</CODE>;</TD></TR></TBODY></TABLE>
<DIV class=funcprototype-spacer>&nbsp;</DIV></DIV></DIV>
<DIV class=refsect1><A name=idp42760484></A>
<H2>Arguments</H2>
<DIV class=variablelist>
<DL class=variablelist>
<DT><SPAN class=term><EM class=parameter><CODE>kobj</CODE></EM></SPAN> 
<DD>
<P>the kobject to add </P>
<DT><SPAN class=term><EM class=parameter><CODE>parent</CODE></EM></SPAN> 
<DD>
<P>pointer to the parent of the kobject. </P>
<DT><SPAN class=term><EM class=parameter><CODE>fmt</CODE></EM></SPAN> 
<DD>
<P>format to name the kobject with. </P>
<DT><SPAN class=term><EM class=parameter><CODE>...</CODE></EM></SPAN> 
<DD>
<P>variable arguments </P></DD></DL></DIV></DIV>
<DIV class=refsect1><A name=idp42765164></A>
<H2>Description</H2>
<P>The kobject name is set and added to the kobject hierarchy in this function. </P>
<P>If <EM class=parameter><CODE>parent</CODE></EM> is set, then the parent of the <EM class=parameter><CODE>kobj</CODE></EM> will be set to it. If <EM class=parameter><CODE>parent</CODE></EM> is NULL, then the parent of the <EM class=parameter><CODE>kobj</CODE></EM> will be set to the kobject associated with the kset assigned to this kobject. If no kset is assigned to the kobject, then the kobject will be located in the root of the sysfs tree. </P>
<P>If this function returns an error, <CODE class=function>kobject_put</CODE> must be called to properly clean up the memory associated with the object. Under no instance should the kobject that is passed to this function be directly freed with a call to <CODE class=function>kfree</CODE>, that can leak memory. </P>
<P>Note, no <SPAN class=quote>&#8220;<SPAN class=quote>add</SPAN>&#8221;</SPAN> uevent will be created with this call, the caller should set up all of the necessary sysfs files for the object and then call <CODE class=function>kobject_uevent</CODE> with the UEVENT_ADD parameter to ensure that userspace is properly notified of this kobject's creation. </P></DIV></DIV>
<DIV class=navfooter>
<HR>

<TABLE summary="Navigation footer" width="100%">
<TBODY>
<TR>
<TD width="40%" align=left><A accessKey=p href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-kobject-init.html">Prev</A>&nbsp;</TD>
<TD width="20%" align=middle><A accessKey=u href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/ch01s08.html">Up</A></TD>
<TD width="40%" align=right>&nbsp;<A accessKey=n href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-kobject-init-and-add.html">Next</A></TD></TR>
<TR>
<TD vAlign=top width="40%" align=left><SPAN class=phrase>kobject_init</SPAN>&nbsp;</TD>
<TD width="20%" align=middle><A accessKey=h href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/index.html">Home</A></TD>
<TD vAlign=top width="40%" align=right>&nbsp;<SPAN class=phrase>kobject_init_and_add</SPAN></TD></TR></TBODY></TABLE></DIV>