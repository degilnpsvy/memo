<DIV class=navheader>
<TABLE summary="Navigation header" width="100%">
<TBODY>
<TR>
<TH colSpan=3 align=middle>Kernel utility functions</TH></TR>
<TR>
<TD width="20%" align=left><A accessKey=p href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-kset-create-and-add.html">Prev</A>&nbsp;</TD>
<TH width="60%" align=middle>Chapter&nbsp;1.&nbsp;Driver Basics</TH>
<TD width="20%" align=right>&nbsp;<A accessKey=n href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-upper-32-bits.html">Next</A></TD></TR></TBODY></TABLE>
<HR>
</DIV>
<DIV class=sect1>
<DIV class=titlepage>
<DIV>
<DIV>
<H2 style="CLEAR: both" class=title><A name=idp42845332></A>Kernel utility functions</H2></DIV></DIV></DIV>
<DIV class=toc>
<DL class=toc>
<DT><SPAN class=refentrytitle><A href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-upper-32-bits.html"><SPAN class=phrase>upper_32_bits</SPAN></A></SPAN><SPAN class=refpurpose> &#8212; return bits 32-63 of a number </SPAN>
<DT><SPAN class=refentrytitle><A href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-lower-32-bits.html"><SPAN class=phrase>lower_32_bits</SPAN></A></SPAN><SPAN class=refpurpose> &#8212; return bits 0-31 of a number </SPAN>
<DT><SPAN class=refentrytitle><A href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-might-sleep.html"><SPAN class=phrase>might_sleep</SPAN></A></SPAN><SPAN class=refpurpose> &#8212; annotation for functions that can sleep </SPAN>
<DT><SPAN class=refentrytitle><A href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-reciprocal-scale.html"><SPAN class=phrase>reciprocal_scale</SPAN></A></SPAN><SPAN class=refpurpose> &#8212; "scale" a value into range [0, ep_ro) </SPAN>
<DT><SPAN class=refentrytitle><A href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-kstrtoul.html"><SPAN class=phrase>kstrtoul</SPAN></A></SPAN><SPAN class=refpurpose> &#8212; convert a string to an unsigned long </SPAN>
<DT><SPAN class=refentrytitle><A href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-kstrtol.html"><SPAN class=phrase>kstrtol</SPAN></A></SPAN><SPAN class=refpurpose> &#8212; convert a string to a long </SPAN>
<DT><SPAN class=refentrytitle><A href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-trace-printk.html"><SPAN class=phrase>trace_printk</SPAN></A></SPAN><SPAN class=refpurpose> &#8212; printf formatting in the ftrace buffer </SPAN>
<DT><SPAN class=refentrytitle><A href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-trace-puts.html"><SPAN class=phrase>trace_puts</SPAN></A></SPAN><SPAN class=refpurpose> &#8212; write a string into the ftrace buffer </SPAN>
<DT><SPAN class=refentrytitle><A href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-min-not-zero.html"><SPAN class=phrase>min_not_zero</SPAN></A></SPAN><SPAN class=refpurpose> &#8212; return the minimum that is _not_ zero, unless both are zero </SPAN>
<DT><SPAN class=refentrytitle><A href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-clamp.html"><SPAN class=phrase>clamp</SPAN></A></SPAN><SPAN class=refpurpose> &#8212; return a value clamped to a given range with strict typechecking </SPAN>
<DT><SPAN class=refentrytitle><A href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-clamp-t.html"><SPAN class=phrase>clamp_t</SPAN></A></SPAN><SPAN class=refpurpose> &#8212; return a value clamped to a given range using a given type </SPAN>
<DT><SPAN class=refentrytitle><A href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-clamp-val.html"><SPAN class=phrase>clamp_val</SPAN></A></SPAN><SPAN class=refpurpose> &#8212; return a value clamped to a given range using val's type </SPAN>
<DT><SPAN class=refentrytitle><A href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-container-of.html"><SPAN class=phrase>container_of</SPAN></A></SPAN><SPAN class=refpurpose> &#8212; cast a member of a structure out to the containing structure </SPAN>
<DT><SPAN class=refentrytitle><A href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-printk.html"><SPAN class=phrase>printk</SPAN></A></SPAN><SPAN class=refpurpose> &#8212; print a kernel message </SPAN>
<DT><SPAN class=refentrytitle><A href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-console-lock.html"><SPAN class=phrase>console_lock</SPAN></A></SPAN><SPAN class=refpurpose> &#8212; lock the console system for exclusive use. </SPAN>
<DT><SPAN class=refentrytitle><A href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-console-trylock.html"><SPAN class=phrase>console_trylock</SPAN></A></SPAN><SPAN class=refpurpose> &#8212; try to lock the console system for exclusive use. </SPAN>
<DT><SPAN class=refentrytitle><A href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-console-unlock.html"><SPAN class=phrase>console_unlock</SPAN></A></SPAN><SPAN class=refpurpose> &#8212; unlock the console system </SPAN>
<DT><SPAN class=refentrytitle><A href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-console-conditional-schedule.html"><SPAN class=phrase>console_conditional_schedule</SPAN></A></SPAN><SPAN class=refpurpose> &#8212; yield the CPU if required </SPAN>
<DT><SPAN class=refentrytitle><A href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-printk-timed-ratelimit.html"><SPAN class=phrase>printk_timed_ratelimit</SPAN></A></SPAN><SPAN class=refpurpose> &#8212; caller-controlled printk ratelimiting </SPAN>
<DT><SPAN class=refentrytitle><A href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-kmsg-dump-register.html"><SPAN class=phrase>kmsg_dump_register</SPAN></A></SPAN><SPAN class=refpurpose> &#8212; register a kernel log dumper. </SPAN>
<DT><SPAN class=refentrytitle><A href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-kmsg-dump-unregister.html"><SPAN class=phrase>kmsg_dump_unregister</SPAN></A></SPAN><SPAN class=refpurpose> &#8212; unregister a kmsg dumper. </SPAN>
<DT><SPAN class=refentrytitle><A href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-kmsg-dump-get-line.html"><SPAN class=phrase>kmsg_dump_get_line</SPAN></A></SPAN><SPAN class=refpurpose> &#8212; retrieve one kmsg log line </SPAN>
<DT><SPAN class=refentrytitle><A href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-kmsg-dump-get-buffer.html"><SPAN class=phrase>kmsg_dump_get_buffer</SPAN></A></SPAN><SPAN class=refpurpose> &#8212; copy kmsg log lines </SPAN>
<DT><SPAN class=refentrytitle><A href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-kmsg-dump-rewind.html"><SPAN class=phrase>kmsg_dump_rewind</SPAN></A></SPAN><SPAN class=refpurpose> &#8212; reset the interator </SPAN>
<DT><SPAN class=refentrytitle><A href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-panic.html"><SPAN class=phrase>panic</SPAN></A></SPAN><SPAN class=refpurpose> &#8212; halt the system </SPAN>
<DT><SPAN class=refentrytitle><A href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-add-taint.html"><SPAN class=phrase>add_taint</SPAN></A></SPAN><SPAN class=refpurpose> &#8212; </SPAN>
<DT><SPAN class=refentrytitle><A href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/re213.html">.//kernel/sys.c </A></SPAN><SPAN class=refpurpose>&#8212; Document generation inconsistency </SPAN>
<DT><SPAN class=refentrytitle><A href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-init-srcu-struct.html"><SPAN class=phrase>init_srcu_struct</SPAN></A></SPAN><SPAN class=refpurpose> &#8212; initialize a sleep-RCU structure </SPAN>
<DT><SPAN class=refentrytitle><A href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-cleanup-srcu-struct.html"><SPAN class=phrase>cleanup_srcu_struct</SPAN></A></SPAN><SPAN class=refpurpose> &#8212; deconstruct a sleep-RCU structure </SPAN>
<DT><SPAN class=refentrytitle><A href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-synchronize-srcu.html"><SPAN class=phrase>synchronize_srcu</SPAN></A></SPAN><SPAN class=refpurpose> &#8212; wait for prior SRCU read-side critical-section completion </SPAN>
<DT><SPAN class=refentrytitle><A href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-synchronize-srcu-expedited.html"><SPAN class=phrase>synchronize_srcu_expedited</SPAN></A></SPAN><SPAN class=refpurpose> &#8212; Brute-force SRCU grace period </SPAN>
<DT><SPAN class=refentrytitle><A href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-srcu-barrier.html"><SPAN class=phrase>srcu_barrier</SPAN></A></SPAN><SPAN class=refpurpose> &#8212; Wait until all in-flight <CODE class=function>call_srcu</CODE> callbacks complete. </SPAN>
<DT><SPAN class=refentrytitle><A href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-srcu-batches-completed.html"><SPAN class=phrase>srcu_batches_completed</SPAN></A></SPAN><SPAN class=refpurpose> &#8212; return batches completed. </SPAN>
<DT><SPAN class=refentrytitle><A href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-rcu-idle-enter.html"><SPAN class=phrase>rcu_idle_enter</SPAN></A></SPAN><SPAN class=refpurpose> &#8212; inform RCU that current CPU is entering idle </SPAN>
<DT><SPAN class=refentrytitle><A href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-rcu-idle-exit.html"><SPAN class=phrase>rcu_idle_exit</SPAN></A></SPAN><SPAN class=refpurpose> &#8212; inform RCU that current CPU is leaving idle </SPAN>
<DT><SPAN class=refentrytitle><A href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-rcu-is-watching.html"><SPAN class=phrase>rcu_is_watching</SPAN></A></SPAN><SPAN class=refpurpose> &#8212; see if RCU thinks that the current CPU is idle </SPAN>
<DT><SPAN class=refentrytitle><A href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-synchronize-sched.html"><SPAN class=phrase>synchronize_sched</SPAN></A></SPAN><SPAN class=refpurpose> &#8212; wait until an rcu-sched grace period has elapsed. </SPAN>
<DT><SPAN class=refentrytitle><A href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-synchronize-rcu-bh.html"><SPAN class=phrase>synchronize_rcu_bh</SPAN></A></SPAN><SPAN class=refpurpose> &#8212; wait until an rcu_bh grace period has elapsed. </SPAN>
<DT><SPAN class=refentrytitle><A href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-get-state-synchronize-rcu.html"><SPAN class=phrase>get_state_synchronize_rcu</SPAN></A></SPAN><SPAN class=refpurpose> &#8212; Snapshot current RCU state </SPAN>
<DT><SPAN class=refentrytitle><A href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-cond-synchronize-rcu.html"><SPAN class=phrase>cond_synchronize_rcu</SPAN></A></SPAN><SPAN class=refpurpose> &#8212; Conditionally wait for an RCU grace period </SPAN>
<DT><SPAN class=refentrytitle><A href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-synchronize-sched-expedited.html"><SPAN class=phrase>synchronize_sched_expedited</SPAN></A></SPAN><SPAN class=refpurpose> &#8212; Brute-force RCU-sched grace period </SPAN>
<DT><SPAN class=refentrytitle><A href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-rcu-barrier-bh.html"><SPAN class=phrase>rcu_barrier_bh</SPAN></A></SPAN><SPAN class=refpurpose> &#8212; Wait until all in-flight <CODE class=function>call_rcu_bh</CODE> callbacks complete. </SPAN>
<DT><SPAN class=refentrytitle><A href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-rcu-barrier-sched.html"><SPAN class=phrase>rcu_barrier_sched</SPAN></A></SPAN><SPAN class=refpurpose> &#8212; Wait for in-flight <CODE class=function>call_rcu_sched</CODE> callbacks. </SPAN>
<DT><SPAN class=refentrytitle><A href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-synchronize-rcu.html"><SPAN class=phrase>synchronize_rcu</SPAN></A></SPAN><SPAN class=refpurpose> &#8212; wait until a grace period has elapsed. </SPAN>
<DT><SPAN class=refentrytitle><A href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-synchronize-rcu-expedited.html"><SPAN class=phrase>synchronize_rcu_expedited</SPAN></A></SPAN><SPAN class=refpurpose> &#8212; Brute-force RCU grace period </SPAN>
<DT><SPAN class=refentrytitle><A href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-rcu-barrier.html"><SPAN class=phrase>rcu_barrier</SPAN></A></SPAN><SPAN class=refpurpose> &#8212; Wait until all in-flight <CODE class=function>call_rcu</CODE> callbacks complete. </SPAN>
<DT><SPAN class=refentrytitle><A href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-rcu-read-lock-held.html"><SPAN class=phrase>rcu_read_lock_held</SPAN></A></SPAN><SPAN class=refpurpose> &#8212; might we be in RCU read-side critical section? </SPAN>
<DT><SPAN class=refentrytitle><A href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-rcu-read-lock-bh-held.html"><SPAN class=phrase>rcu_read_lock_bh_held</SPAN></A></SPAN><SPAN class=refpurpose> &#8212; might we be in RCU-bh read-side critical section? </SPAN>
<DT><SPAN class=refentrytitle><A href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-init-rcu-head-on-stack.html"><SPAN class=phrase>init_rcu_head_on_stack</SPAN></A></SPAN><SPAN class=refpurpose> &#8212; initialize on-stack rcu_head for debugobjects </SPAN>
<DT><SPAN class=refentrytitle><A href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-destroy-rcu-head-on-stack.html"><SPAN class=phrase>destroy_rcu_head_on_stack</SPAN></A></SPAN><SPAN class=refpurpose> &#8212; destroy on-stack rcu_head for debugobjects </SPAN>
<DT><SPAN class=refentrytitle><A href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-synchronize-rcu-tasks.html"><SPAN class=phrase>synchronize_rcu_tasks</SPAN></A></SPAN><SPAN class=refpurpose> &#8212; wait until an rcu-tasks grace period has elapsed. </SPAN>
<DT><SPAN class=refentrytitle><A href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-rcu-barrier-tasks.html"><SPAN class=phrase>rcu_barrier_tasks</SPAN></A></SPAN><SPAN class=refpurpose> &#8212; Wait for in-flight <CODE class=function>call_rcu_tasks</CODE> callbacks. </SPAN></DT></DL></DIV></DIV>
<DIV class=navfooter>
<HR>

<TABLE summary="Navigation footer" width="100%">
<TBODY>
<TR>
<TD width="40%" align=left><A accessKey=p href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-kset-create-and-add.html">Prev</A>&nbsp;</TD>
<TD width="20%" align=middle><A accessKey=u href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/Basics.html">Up</A></TD>
<TD width="40%" align=right>&nbsp;<A accessKey=n href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-upper-32-bits.html">Next</A></TD></TR>
<TR>
<TD vAlign=top width="40%" align=left><SPAN class=phrase>kset_create_and_add</SPAN>&nbsp;</TD>
<TD width="20%" align=middle><A accessKey=h href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/index.html">Home</A></TD>
<TD vAlign=top width="40%" align=right>&nbsp;<SPAN class=phrase>upper_32_bits</SPAN></TD></TR></TBODY></TABLE></DIV>