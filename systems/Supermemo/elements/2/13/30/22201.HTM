<DIV class=navheader>
<TABLE summary="Navigation header" width="100%">
<TBODY>
<TR>
<TH colSpan=3 align=middle><SPAN class=phrase>bus_for_each_drv</SPAN></TH></TR>
<TR>
<TD width="20%" align=left><A accessKey=p href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-subsys-find-device-by-id.html">Prev</A>&nbsp;</TD>
<TH width="60%" align=middle>Device Drivers Base</TH>
<TD width="20%" align=right>&nbsp;<A accessKey=n href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-bus-rescan-devices.html">Next</A></TD></TR></TBODY></TABLE>
<HR>
</DIV>
<DIV class=refentry><A name=API-bus-for-each-drv></A>
<DIV class=titlepage></DIV>
<DIV class=refnamediv>
<H2>Name</H2>
<P>bus_for_each_drv &#8212; driver iterator </P></DIV>
<DIV class=refsynopsisdiv>
<H2>Synopsis</H2>
<DIV class=funcsynopsis>
<TABLE style="cellspacing: 0; cellpadding: 0" class=funcprototype-table border=0 summary="Function synopsis">
<TBODY>
<TR>
<TD><CODE class=funcdef>int <B class=fsfunc>bus_for_each_drv </B>(</CODE></TD>
<TD>struct bus_type * <VAR class=pdparam>bus</VAR>, </TD></TR>
<TR>
<TD>&nbsp;</TD>
<TD>struct device_driver * <VAR class=pdparam>start</VAR>, </TD></TR>
<TR>
<TD>&nbsp;</TD>
<TD>void * <VAR class=pdparam>data</VAR>, </TD></TR>
<TR>
<TD>&nbsp;</TD>
<TD>int (*<VAR class=pdparam>fn</VAR>) <CODE>(</CODE>struct device_driver *, void *<CODE>)</CODE><CODE>)</CODE>;</TD></TR></TBODY></TABLE>
<DIV class=funcprototype-spacer>&nbsp;</DIV></DIV></DIV>
<DIV class=refsect1><A name=idp44576860></A>
<H2>Arguments</H2>
<DIV class=variablelist>
<DL class=variablelist>
<DT><SPAN class=term><EM class=parameter><CODE>bus</CODE></EM></SPAN> 
<DD>
<P>bus we're dealing with. </P>
<DT><SPAN class=term><EM class=parameter><CODE>start</CODE></EM></SPAN> 
<DD>
<P>driver to start iterating on. </P>
<DT><SPAN class=term><EM class=parameter><CODE>data</CODE></EM></SPAN> 
<DD>
<P>data to pass to the callback. </P>
<DT><SPAN class=term><EM class=parameter><CODE>fn</CODE></EM></SPAN> 
<DD>
<P>function to call for each driver. </P></DD></DL></DIV></DIV>
<DIV class=refsect1><A name=idp44581548></A>
<H2>Description</H2>
<P>This is nearly identical to the device iterator above. We iterate over each driver that belongs to <EM class=parameter><CODE>bus</CODE></EM>, and call <EM class=parameter><CODE>fn</CODE></EM> for each. If <EM class=parameter><CODE>fn</CODE></EM> returns anything but 0, we break out and return it. If <EM class=parameter><CODE>start</CODE></EM> is not NULL, we use it as the head of the list. </P></DIV>
<DIV class=refsect1><A name=idp44583756></A>
<H2>NOTE</H2>
<P>we don't return the driver that returns a non-zero value, nor do we leave the reference count incremented for that driver. If the caller needs to know that info, it must set it in the callback. It must also be sure to increment the refcount so it doesn't disappear before returning to the caller. </P></DIV></DIV>
<DIV class=navfooter>
<HR>

<TABLE summary="Navigation footer" width="100%">
<TBODY>
<TR>
<TD width="40%" align=left><A accessKey=p href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-subsys-find-device-by-id.html">Prev</A>&nbsp;</TD>
<TD width="20%" align=middle><A accessKey=u href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/ch02s02.html">Up</A></TD>
<TD width="40%" align=right>&nbsp;<A accessKey=n href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/API-bus-rescan-devices.html">Next</A></TD></TR>
<TR>
<TD vAlign=top width="40%" align=left><SPAN class=phrase>subsys_find_device_by_id</SPAN>&nbsp;</TD>
<TD width="20%" align=middle><A accessKey=h href="file:///C:/Users/donpope_tang/Documents/docbook/device-drivers/index.html">Home</A></TD>
<TD vAlign=top width="40%" align=right>&nbsp;<SPAN class=phrase>bus_rescan_devices</SPAN></TD></TR></TBODY></TABLE></DIV>