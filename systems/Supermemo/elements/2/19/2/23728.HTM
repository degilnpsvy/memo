The LDM core provides helper functions for iterating over each list. 
<P><FONT class=clozed></FONT></P>
<P><FONT class=clozed>int bus_for_each_dev(struct bus_type * bus, struct device * start, void * data,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int (*fn)(struct device *, void *))</FONT>;</P>
<P><FONT class=clozed>int bus_for_each_drv(struct bus_type * bus, struct device_driver * start, <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; void * data, int (*fn)(struct device_driver *, void *));</FONT></P>
<P>These helpers iterate over the respective list, and call the callback<BR>for each device or driver in the list. All list accesses are<BR>synchronized by taking the bus's lock (read currently). The reference<BR>count on each object in the list is incremented before the callback is<BR>called; it is decremented after the next object has been obtained. The<BR>lock is not held when calling the callback.