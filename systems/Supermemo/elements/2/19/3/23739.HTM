Bus-specific drivers should include a generic struct device_driver in<BR>the definition of the bus-specific driver. Like this: 
<P><FONT class=clozed></FONT></P>
<P><FONT class=clozed>struct pci_driver {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; const struct pci_device_id *id_table;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; struct device_driver&nbsp;&nbsp; driver;<BR>}</FONT>;</P>
<P>A definition that included bus-specific fields would look like<BR>(using the eepro100 driver again):</P>
<P><FONT class=clozed>static struct pci_driver eepro100_driver = {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .id_table&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = eepro100_pci_tbl,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .driver&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = {<BR>&nbsp;&nbsp;.name&nbsp;&nbsp;= "eepro100",<BR>&nbsp;&nbsp;.bus&nbsp;&nbsp;= &amp;pci_bus_type,<BR>&nbsp;&nbsp;.probe&nbsp;&nbsp;= eepro100_probe,<BR>&nbsp;&nbsp;.remove&nbsp;&nbsp;= eepro100_remove,<BR>&nbsp;&nbsp;.suspend&nbsp;= eepro100_suspend,<BR>&nbsp;&nbsp;.resume&nbsp;&nbsp;= eepro100_resume,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; },<BR>};</FONT></P>
<P>Some may find the syntax of embedded struct initialization awkward or<BR>even a bit ugly. So far, it's the best way we've found to do what we want...