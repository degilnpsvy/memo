<FONT class=clozed>unsigned long</FONT> timeout = jiffies + (3*<FONT class=clozed>HZ</FONT>); 
<P></P>
<P>while (hwgroup-&gt;busy) </P>
<P>{ </P>
<P>/* ... */ </P>
<P>if (<FONT class=clozed>time_after</FONT>(jiffies, timeout)) </P>
<P>{ return -EBUSY; } </P>
<P>/* ... */ </P>
<P>} </P>
<P>return SUCCESS;