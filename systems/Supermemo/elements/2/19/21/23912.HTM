unsigned long timeout = jiffies + (3*HZ); 
<P></P>
<P>while (hwgroup-&gt;busy) </P>
<P>{ </P>
<P>/* ... */ </P>
<P>if (<SPAN class=cloze>[...]</SPAN>(jiffies, timeout)) </P>
<P>{ return -EBUSY; } </P>
<P>/* ... */ </P>
<P>} </P>
<P>return SUCCESS;