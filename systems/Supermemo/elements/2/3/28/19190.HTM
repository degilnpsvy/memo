<H1 style="BOX-SIZING: border-box; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 500 72px/1.1 'Helvetica Neue', Helvetica, Arial, sans-serif; MARGIN: 20px 0px 10px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">Lesson 4: Handling Events<SPAN class=Apple-converted-space>&nbsp;</SPAN><SMALL style="BOX-SIZING: border-box; FONT-SIZE: 46px; FONT-WEIGHT: normal; COLOR: rgb(153,153,153); LINE-HEIGHT: 1">Interacting with the User</SMALL></H1>
<H1 style="BOX-SIZING: border-box; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 500 72px/1.1 'Helvetica Neue', Helvetica, Arial, sans-serif; MARGIN: 20px 0px 10px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><SMALL style="BOX-SIZING: border-box; FONT-SIZE: 46px; FONT-WEIGHT: normal; COLOR: rgb(153,153,153); LINE-HEIGHT: 1">
<P style="BOX-SIZING: border-box; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 28px/40px 'Helvetica Neue', Helvetica, Arial, sans-serif; MARGIN: 0px 0px 10px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">In this lesson we&#8217;ll learn the basics of reading user input with SDL, in this simple example we&#8217;ll interpret any input as the user wanting to quit our application. To read events SDL provides the<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BOX-SIZING: border-box; TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(66,139,202)" href="http://wiki.libsdl.org/SDL_Event"><CODE style="BOX-SIZING: border-box; FONT-SIZE: 26px; BORDER-TOP: medium none; FONT-FAMILY: Menlo, Monaco, Consolas, 'Courier New', monospace; BORDER-RIGHT: medium none; WHITE-SPACE: nowrap; BORDER-BOTTOM: medium none; COLOR: rgb(42,100,150); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; BORDER-LEFT: medium none; PADDING-RIGHT: 0px; BACKGROUND-COLOR: transparent; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px">SDL_Event</CODE></A><SPAN class=Apple-converted-space>&nbsp;</SPAN>structure and functions to get events from the queue such as<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BOX-SIZING: border-box; TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(66,139,202)" href="http://wiki.libsdl.org/SDL_PollEvent"><CODE style="BOX-SIZING: border-box; FONT-SIZE: 26px; BORDER-TOP: medium none; FONT-FAMILY: Menlo, Monaco, Consolas, 'Courier New', monospace; BORDER-RIGHT: medium none; WHITE-SPACE: nowrap; BORDER-BOTTOM: medium none; COLOR: rgb(42,100,150); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; BORDER-LEFT: medium none; PADDING-RIGHT: 0px; BACKGROUND-COLOR: transparent; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px">SDL_PollEvent</CODE></A>. The code for this lesson is built off of the lesson 3 code, if you need that code to start from grab it on<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BOX-SIZING: border-box; TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(66,139,202)" href="https://github.com/Twinklebear/TwinklebearDev-Lessons/tree/master/Lesson3">Github</A><SPAN class=Apple-converted-space>&nbsp;</SPAN>and let&#8217;s get started!</P>
<P style="BOX-SIZING: border-box; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 28px/40px 'Helvetica Neue', Helvetica, Arial, sans-serif; MARGIN: 0px 0px 10px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">The first change we need to make is to load our new image to display a prompt for input. Grab it below and use our<CODE style="BOX-SIZING: border-box; FONT-SIZE: 26px; BORDER-TOP: medium none; FONT-FAMILY: Menlo, Monaco, Consolas, 'Courier New', monospace; BORDER-RIGHT: medium none; WHITE-SPACE: nowrap; BORDER-BOTTOM: medium none; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; BORDER-LEFT: medium none; PADDING-RIGHT: 0px; BACKGROUND-COLOR: transparent; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px">loadTexture</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>function to load it up as we did previously.</P>
<P style="BOX-SIZING: border-box; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 28px/40px 'Helvetica Neue', Helvetica, Arial, sans-serif; MARGIN: 0px 0px 10px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><A style="BOX-SIZING: border-box; TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(66,139,202)" href="https://github.com/Twinklebear/TwinklebearDev-Lessons/raw/master/res/Lesson4/image.png"><IMG class=centered style="BOX-SIZING: border-box; BORDER-TOP: 0px; BORDER-RIGHT: 0px; VERTICAL-ALIGN: middle; BORDER-BOTTOM: 0px; MARGIN: 0px auto; BORDER-LEFT: 0px; DISPLAY: block" src="https://github.com/Twinklebear/TwinklebearDev-Lessons/raw/master/res/Lesson4/image.png" width=500></A></P>
<H2 id=a-basic-main-loop style="BOX-SIZING: border-box; MARGIN-BOTTOM: 10px; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 500 60px/1.1 'Helvetica Neue', Helvetica, Arial, sans-serif; MARGIN-TOP: 20px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">A Basic Main Loop</H2>
<P style="BOX-SIZING: border-box; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 28px/40px 'Helvetica Neue', Helvetica, Arial, sans-serif; MARGIN: 0px 0px 10px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">We&#8217;ll be adding a main loop to keep the program running until the user quits so that they can use it as long as they want to, instead of for some fixed delay period. The structure of this loop will be very basic.</P>
<DIV class=highlight style="BOX-SIZING: border-box; WORD-WRAP: break-word; BORDER-TOP: 1px solid; BORDER-RIGHT: 1px solid; WHITE-SPACE: pre-wrap; WORD-SPACING: 0px; BORDER-BOTTOM: 1px solid; TEXT-TRANSFORM: none; COLOR: rgb(248,248,242); PADDING-BOTTOM: 8px; PADDING-TOP: 8px; FONT: 24px/42px Monaco, 'Andale Mono', 'Courier New', monospace; PADDING-LEFT: 8px; MARGIN: 0px 2px 2px 0px; BORDER-LEFT: 1px solid; DISPLAY: block; LETTER-SPACING: normal; PADDING-RIGHT: 8px; BACKGROUND-COLOR: rgb(73,72,62); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px"><PRE style="BOX-SIZING: border-box; WORD-WRAP: break-word; FONT-SIZE: 1em; BORDER-TOP: medium none; FONT-FAMILY: Menlo, Monaco, Consolas, 'Courier New', monospace; BORDER-RIGHT: medium none; WHITE-SPACE: pre-wrap; BORDER-BOTTOM: medium none; WORD-BREAK: break-all; COLOR: white; PADDING-BOTTOM: 9px; PADDING-TOP: 9px; PADDING-LEFT: 9px; MARGIN: 0px; BORDER-LEFT: medium none; DISPLAY: block; LINE-HEIGHT: 1.4285; PADDING-RIGHT: 9px; BACKGROUND-COLOR: transparent; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px"><CODE class=language-c-- style="BOX-SIZING: border-box; WORD-WRAP: break-word; FONT-SIZE: 1em; BORDER-TOP: medium none; FONT-FAMILY: Menlo, Monaco, Consolas, 'Courier New', monospace; BORDER-RIGHT: medium none; WHITE-SPACE: pre-wrap; BORDER-BOTTOM: medium none; WORD-BREAK: break-all; COLOR: white; PADDING-BOTTOM: 9px; PADDING-TOP: 9px; PADDING-LEFT: 9px; MARGIN: 0px; BORDER-LEFT: medium none; DISPLAY: block; LINE-HEIGHT: 1.4285; PADDING-RIGHT: 9px; BACKGROUND-COLOR: transparent; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px" data-lang="c++"><SPAN class=k style="BOX-SIZING: border-box; COLOR: rgb(102,217,239)">while</SPAN> <SPAN class=p style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">(</SPAN><SPAN class=o style="BOX-SIZING: border-box; COLOR: rgb(249,38,114)">!</SPAN><SPAN class=n style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">quit</SPAN><SPAN class=p style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">){</SPAN>
	<SPAN class=c1 style="BOX-SIZING: border-box; COLOR: rgb(166,166,166)">//Read user input &amp; handle it</SPAN>
	<SPAN class=c1 style="BOX-SIZING: border-box; COLOR: rgb(166,166,166)">//Render our scene</SPAN>
<SPAN class=p style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">}</SPAN></CODE></PRE></DIV>
<P style="BOX-SIZING: border-box; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 28px/40px 'Helvetica Neue', Helvetica, Arial, sans-serif; MARGIN: 0px 0px 10px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><BR style="BOX-SIZING: border-box"></P>
<H2 id=the-sdl-event-queue style="BOX-SIZING: border-box; MARGIN-BOTTOM: 10px; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 500 60px/1.1 'Helvetica Neue', Helvetica, Arial, sans-serif; MARGIN-TOP: 20px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">The SDL Event Queue</H2>
<P style="BOX-SIZING: border-box; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 28px/40px 'Helvetica Neue', Helvetica, Arial, sans-serif; MARGIN: 0px 0px 10px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">To properly use SDL&#8217;s event system we&#8217;ll need at least some understanding of how SDL handles events. When SDL receives an event it&#8217;s pushed onto the back of a queue of all the other events that have been received but haven&#8217;t been polled yet. If we were to start our program and then resize the window, click the mouse and press a key the event queue would look like this.</P>
<P style="BOX-SIZING: border-box; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 28px/40px 'Helvetica Neue', Helvetica, Arial, sans-serif; MARGIN: 0px 0px 10px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><IMG class=centered style="BOX-SIZING: border-box; BORDER-TOP: 0px; BORDER-RIGHT: 0px; VERTICAL-ALIGN: middle; BORDER-BOTTOM: 0px; MARGIN: 0px auto; BORDER-LEFT: 0px; DISPLAY: block" src="http://www.willusher.io/assets/img/lesson_4/evntqueue.png" width=600></P>
<P style="BOX-SIZING: border-box; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 28px/40px 'Helvetica Neue', Helvetica, Arial, sans-serif; MARGIN: 0px 0px 10px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">When we call<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE style="BOX-SIZING: border-box; FONT-SIZE: 26px; BORDER-TOP: medium none; FONT-FAMILY: Menlo, Monaco, Consolas, 'Courier New', monospace; BORDER-RIGHT: medium none; WHITE-SPACE: nowrap; BORDER-BOTTOM: medium none; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; BORDER-LEFT: medium none; PADDING-RIGHT: 0px; BACKGROUND-COLOR: transparent; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px">SDL_PollEvent</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>we get the event at the front of the queue, which corresponds to the oldest event since we last polled. Polling an event removes it from the queue, if we wanted to retrieve some events without removing them we could use<A style="BOX-SIZING: border-box; TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(66,139,202)" href="http://wiki.libsdl.org/SDL_PeepEvents"><CODE style="BOX-SIZING: border-box; FONT-SIZE: 26px; BORDER-TOP: medium none; FONT-FAMILY: Menlo, Monaco, Consolas, 'Courier New', monospace; BORDER-RIGHT: medium none; WHITE-SPACE: nowrap; BORDER-BOTTOM: medium none; COLOR: rgb(42,100,150); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; BORDER-LEFT: medium none; PADDING-RIGHT: 0px; BACKGROUND-COLOR: transparent; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px">SDL_PeepEvents</CODE></A><SPAN class=Apple-converted-space>&nbsp;</SPAN>with the<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE style="BOX-SIZING: border-box; FONT-SIZE: 26px; BORDER-TOP: medium none; FONT-FAMILY: Menlo, Monaco, Consolas, 'Courier New', monospace; BORDER-RIGHT: medium none; WHITE-SPACE: nowrap; BORDER-BOTTOM: medium none; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; BORDER-LEFT: medium none; PADDING-RIGHT: 0px; BACKGROUND-COLOR: transparent; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px">SDL_PEEKEVENT</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>flag, but that&#8217;s beyond the scope of this introduction. I encourage you to read the docs and check it out later!</P>
<H2 id=processing-the-events style="BOX-SIZING: border-box; MARGIN-BOTTOM: 10px; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 500 60px/1.1 'Helvetica Neue', Helvetica, Arial, sans-serif; MARGIN-TOP: 20px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">Processing the Events</H2>
<P style="BOX-SIZING: border-box; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 28px/40px 'Helvetica Neue', Helvetica, Arial, sans-serif; MARGIN: 0px 0px 10px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">In our main loop we&#8217;ll want to read in every event that&#8217;s occurred since the previous frame and handle them, we can do this by putting<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BOX-SIZING: border-box; TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(66,139,202)" href="http://wiki.libsdl.org/SDL_PollEvent"><CODE style="BOX-SIZING: border-box; FONT-SIZE: 26px; BORDER-TOP: medium none; FONT-FAMILY: Menlo, Monaco, Consolas, 'Courier New', monospace; BORDER-RIGHT: medium none; WHITE-SPACE: nowrap; BORDER-BOTTOM: medium none; COLOR: rgb(42,100,150); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; BORDER-LEFT: medium none; PADDING-RIGHT: 0px; BACKGROUND-COLOR: transparent; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px">SDL_PollEvent</CODE></A><SPAN class=Apple-converted-space>&nbsp;</SPAN>in a while loop, since the function will return 1 if an event was read in and 0 if not. Since all we&#8217;ll do is quit the program when we get an event we&#8217;ll set a quit bool to track whether the main loop should exit or not. So our event processing loop could look like this.</P>
<DIV class=highlight style="BOX-SIZING: border-box; WORD-WRAP: break-word; BORDER-TOP: 1px solid; BORDER-RIGHT: 1px solid; WHITE-SPACE: pre-wrap; WORD-SPACING: 0px; BORDER-BOTTOM: 1px solid; TEXT-TRANSFORM: none; COLOR: rgb(248,248,242); PADDING-BOTTOM: 8px; PADDING-TOP: 8px; FONT: 24px/42px Monaco, 'Andale Mono', 'Courier New', monospace; PADDING-LEFT: 8px; MARGIN: 0px 2px 2px 0px; BORDER-LEFT: 1px solid; DISPLAY: block; LETTER-SPACING: normal; PADDING-RIGHT: 8px; BACKGROUND-COLOR: rgb(73,72,62); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px"><PRE style="BOX-SIZING: border-box; WORD-WRAP: break-word; FONT-SIZE: 1em; BORDER-TOP: medium none; FONT-FAMILY: Menlo, Monaco, Consolas, 'Courier New', monospace; BORDER-RIGHT: medium none; WHITE-SPACE: pre-wrap; BORDER-BOTTOM: medium none; WORD-BREAK: break-all; COLOR: white; PADDING-BOTTOM: 9px; PADDING-TOP: 9px; PADDING-LEFT: 9px; MARGIN: 0px; BORDER-LEFT: medium none; DISPLAY: block; LINE-HEIGHT: 1.4285; PADDING-RIGHT: 9px; BACKGROUND-COLOR: transparent; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px"><CODE class=language-c-- style="BOX-SIZING: border-box; WORD-WRAP: break-word; FONT-SIZE: 1em; BORDER-TOP: medium none; FONT-FAMILY: Menlo, Monaco, Consolas, 'Courier New', monospace; BORDER-RIGHT: medium none; WHITE-SPACE: pre-wrap; BORDER-BOTTOM: medium none; WORD-BREAK: break-all; COLOR: white; PADDING-BOTTOM: 9px; PADDING-TOP: 9px; PADDING-LEFT: 9px; MARGIN: 0px; BORDER-LEFT: medium none; DISPLAY: block; LINE-HEIGHT: 1.4285; PADDING-RIGHT: 9px; BACKGROUND-COLOR: transparent; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px" data-lang="c++"><SPAN class=c1 style="BOX-SIZING: border-box; COLOR: rgb(166,166,166)">//e is an SDL_Event variable we've declared before entering the main loop</SPAN>
<SPAN class=k style="BOX-SIZING: border-box; COLOR: rgb(102,217,239)">while</SPAN> <SPAN class=p style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">(</SPAN><SPAN class=n style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">SDL_PollEvent</SPAN><SPAN class=p style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">(</SPAN><SPAN class=o style="BOX-SIZING: border-box; COLOR: rgb(249,38,114)">&amp;</SPAN><SPAN class=n style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">e</SPAN><SPAN class=p style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">)){</SPAN>
	<SPAN class=c1 style="BOX-SIZING: border-box; COLOR: rgb(166,166,166)">//If user closes the window</SPAN>
	<SPAN class=k style="BOX-SIZING: border-box; COLOR: rgb(102,217,239)">if</SPAN> <SPAN class=p style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">(</SPAN><SPAN class=n style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">e</SPAN><SPAN class=p style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">.</SPAN><SPAN class=n style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">type</SPAN> <SPAN class=o style="BOX-SIZING: border-box; COLOR: rgb(249,38,114)">==</SPAN> <SPAN class=n style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">SDL_QUIT</SPAN><SPAN class=p style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">){</SPAN>
		<SPAN class=n style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">quit</SPAN> <SPAN class=o style="BOX-SIZING: border-box; COLOR: rgb(249,38,114)">=</SPAN> <SPAN class=nb style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">true</SPAN><SPAN class=p style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">;</SPAN>
	<SPAN class=p style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">}</SPAN>
	<SPAN class=c1 style="BOX-SIZING: border-box; COLOR: rgb(166,166,166)">//If user presses any key</SPAN>
	<SPAN class=k style="BOX-SIZING: border-box; COLOR: rgb(102,217,239)">if</SPAN> <SPAN class=p style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">(</SPAN><SPAN class=n style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">e</SPAN><SPAN class=p style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">.</SPAN><SPAN class=n style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">type</SPAN> <SPAN class=o style="BOX-SIZING: border-box; COLOR: rgb(249,38,114)">==</SPAN> <SPAN class=n style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">SDL_KEYDOWN</SPAN><SPAN class=p style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">){</SPAN>
		<SPAN class=n style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">quit</SPAN> <SPAN class=o style="BOX-SIZING: border-box; COLOR: rgb(249,38,114)">=</SPAN> <SPAN class=nb style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">true</SPAN><SPAN class=p style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">;</SPAN>
	<SPAN class=p style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">}</SPAN>
	<SPAN class=c1 style="BOX-SIZING: border-box; COLOR: rgb(166,166,166)">//If user clicks the mouse</SPAN>
	<SPAN class=k style="BOX-SIZING: border-box; COLOR: rgb(102,217,239)">if</SPAN> <SPAN class=p style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">(</SPAN><SPAN class=n style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">e</SPAN><SPAN class=p style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">.</SPAN><SPAN class=n style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">type</SPAN> <SPAN class=o style="BOX-SIZING: border-box; COLOR: rgb(249,38,114)">==</SPAN> <SPAN class=n style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">SDL_MOUSEBUTTONDOWN</SPAN><SPAN class=p style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">){</SPAN>
		<SPAN class=n style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">quit</SPAN> <SPAN class=o style="BOX-SIZING: border-box; COLOR: rgb(249,38,114)">=</SPAN> <SPAN class=nb style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">true</SPAN><SPAN class=p style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">;</SPAN>
	<SPAN class=p style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">}</SPAN>
<SPAN class=p style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">}</SPAN></CODE></PRE></DIV>
<P style="BOX-SIZING: border-box; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 28px/40px 'Helvetica Neue', Helvetica, Arial, sans-serif; MARGIN: 0px 0px 10px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><BR style="BOX-SIZING: border-box"></P>
<P style="BOX-SIZING: border-box; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 28px/40px 'Helvetica Neue', Helvetica, Arial, sans-serif; MARGIN: 0px 0px 10px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">The<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE style="BOX-SIZING: border-box; FONT-SIZE: 26px; BORDER-TOP: medium none; FONT-FAMILY: Menlo, Monaco, Consolas, 'Courier New', monospace; BORDER-RIGHT: medium none; WHITE-SPACE: nowrap; BORDER-BOTTOM: medium none; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; BORDER-LEFT: medium none; PADDING-RIGHT: 0px; BACKGROUND-COLOR: transparent; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px">SDL_QUIT</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>event occurs when the user closes our window,<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE style="BOX-SIZING: border-box; FONT-SIZE: 26px; BORDER-TOP: medium none; FONT-FAMILY: Menlo, Monaco, Consolas, 'Courier New', monospace; BORDER-RIGHT: medium none; WHITE-SPACE: nowrap; BORDER-BOTTOM: medium none; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; BORDER-LEFT: medium none; PADDING-RIGHT: 0px; BACKGROUND-COLOR: transparent; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px">SDL_KEYDOWN</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>occurs when a key is pressed and<CODE style="BOX-SIZING: border-box; FONT-SIZE: 26px; BORDER-TOP: medium none; FONT-FAMILY: Menlo, Monaco, Consolas, 'Courier New', monospace; BORDER-RIGHT: medium none; WHITE-SPACE: nowrap; BORDER-BOTTOM: medium none; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; BORDER-LEFT: medium none; PADDING-RIGHT: 0px; BACKGROUND-COLOR: transparent; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px">SDL_MOUSEBUTTONDOWN</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>occurs if a mouse button is pressed. These are just a few of the wide variety of events that we can receive and I strongly recommend reading up about the other types in the<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BOX-SIZING: border-box; TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(66,139,202)" href="http://wiki.libsdl.org/SDL_Event"><CODE style="BOX-SIZING: border-box; FONT-SIZE: 26px; BORDER-TOP: medium none; FONT-FAMILY: Menlo, Monaco, Consolas, 'Courier New', monospace; BORDER-RIGHT: medium none; WHITE-SPACE: nowrap; BORDER-BOTTOM: medium none; COLOR: rgb(42,100,150); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; BORDER-LEFT: medium none; PADDING-RIGHT: 0px; BACKGROUND-COLOR: transparent; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px">SDL_Event</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>documentation</A>.</P>
<H2 id=completing-the-main-loop style="BOX-SIZING: border-box; MARGIN-BOTTOM: 10px; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 500 60px/1.1 'Helvetica Neue', Helvetica, Arial, sans-serif; MARGIN-TOP: 20px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">Completing the Main Loop</H2>
<P style="BOX-SIZING: border-box; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 28px/40px 'Helvetica Neue', Helvetica, Arial, sans-serif; MARGIN: 0px 0px 10px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">The final part of our main loop will take care of rendering our scene using the same methods as before. When we combine this with our event handling code our basic main loop becomes:</P>
<DIV class=highlight style="BOX-SIZING: border-box; WORD-WRAP: break-word; BORDER-TOP: 1px solid; BORDER-RIGHT: 1px solid; WHITE-SPACE: pre-wrap; WORD-SPACING: 0px; BORDER-BOTTOM: 1px solid; TEXT-TRANSFORM: none; COLOR: rgb(248,248,242); PADDING-BOTTOM: 8px; PADDING-TOP: 8px; FONT: 24px/42px Monaco, 'Andale Mono', 'Courier New', monospace; PADDING-LEFT: 8px; MARGIN: 0px 2px 2px 0px; BORDER-LEFT: 1px solid; DISPLAY: block; LETTER-SPACING: normal; PADDING-RIGHT: 8px; BACKGROUND-COLOR: rgb(73,72,62); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px"><PRE style="BOX-SIZING: border-box; WORD-WRAP: break-word; FONT-SIZE: 1em; BORDER-TOP: medium none; FONT-FAMILY: Menlo, Monaco, Consolas, 'Courier New', monospace; BORDER-RIGHT: medium none; WHITE-SPACE: pre-wrap; BORDER-BOTTOM: medium none; WORD-BREAK: break-all; COLOR: white; PADDING-BOTTOM: 9px; PADDING-TOP: 9px; PADDING-LEFT: 9px; MARGIN: 0px; BORDER-LEFT: medium none; DISPLAY: block; LINE-HEIGHT: 1.4285; PADDING-RIGHT: 9px; BACKGROUND-COLOR: transparent; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px"><CODE class=language-c-- style="BOX-SIZING: border-box; WORD-WRAP: break-word; FONT-SIZE: 1em; BORDER-TOP: medium none; FONT-FAMILY: Menlo, Monaco, Consolas, 'Courier New', monospace; BORDER-RIGHT: medium none; WHITE-SPACE: pre-wrap; BORDER-BOTTOM: medium none; WORD-BREAK: break-all; COLOR: white; PADDING-BOTTOM: 9px; PADDING-TOP: 9px; PADDING-LEFT: 9px; MARGIN: 0px; BORDER-LEFT: medium none; DISPLAY: block; LINE-HEIGHT: 1.4285; PADDING-RIGHT: 9px; BACKGROUND-COLOR: transparent; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px" data-lang="c++"><SPAN class=c1 style="BOX-SIZING: border-box; COLOR: rgb(166,166,166)">//Our event structure</SPAN>
<SPAN class=n style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">SDL_Event</SPAN> <SPAN class=n style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">e</SPAN><SPAN class=p style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">;</SPAN>
<SPAN class=kt style="BOX-SIZING: border-box; COLOR: rgb(102,217,239)">bool</SPAN> <SPAN class=n style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">quit</SPAN> <SPAN class=o style="BOX-SIZING: border-box; COLOR: rgb(249,38,114)">=</SPAN> <SPAN class=nb style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">false</SPAN><SPAN class=p style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">;</SPAN>
<SPAN class=k style="BOX-SIZING: border-box; COLOR: rgb(102,217,239)">while</SPAN> <SPAN class=p style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">(</SPAN><SPAN class=o style="BOX-SIZING: border-box; COLOR: rgb(249,38,114)">!</SPAN><SPAN class=n style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">quit</SPAN><SPAN class=p style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">){</SPAN>
	<SPAN class=k style="BOX-SIZING: border-box; COLOR: rgb(102,217,239)">while</SPAN> <SPAN class=p style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">(</SPAN><SPAN class=n style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">SDL_PollEvent</SPAN><SPAN class=p style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">(</SPAN><SPAN class=o style="BOX-SIZING: border-box; COLOR: rgb(249,38,114)">&amp;</SPAN><SPAN class=n style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">e</SPAN><SPAN class=p style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">)){</SPAN>
		<SPAN class=k style="BOX-SIZING: border-box; COLOR: rgb(102,217,239)">if</SPAN> <SPAN class=p style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">(</SPAN><SPAN class=n style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">e</SPAN><SPAN class=p style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">.</SPAN><SPAN class=n style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">type</SPAN> <SPAN class=o style="BOX-SIZING: border-box; COLOR: rgb(249,38,114)">==</SPAN> <SPAN class=n style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">SDL_QUIT</SPAN><SPAN class=p style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">){</SPAN>
			<SPAN class=n style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">quit</SPAN> <SPAN class=o style="BOX-SIZING: border-box; COLOR: rgb(249,38,114)">=</SPAN> <SPAN class=nb style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">true</SPAN><SPAN class=p style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">;</SPAN>
		<SPAN class=p style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">}</SPAN>
		<SPAN class=k style="BOX-SIZING: border-box; COLOR: rgb(102,217,239)">if</SPAN> <SPAN class=p style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">(</SPAN><SPAN class=n style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">e</SPAN><SPAN class=p style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">.</SPAN><SPAN class=n style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">type</SPAN> <SPAN class=o style="BOX-SIZING: border-box; COLOR: rgb(249,38,114)">==</SPAN> <SPAN class=n style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">SDL_KEYDOWN</SPAN><SPAN class=p style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">){</SPAN>
			<SPAN class=n style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">quit</SPAN> <SPAN class=o style="BOX-SIZING: border-box; COLOR: rgb(249,38,114)">=</SPAN> <SPAN class=nb style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">true</SPAN><SPAN class=p style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">;</SPAN>
		<SPAN class=p style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">}</SPAN>
		<SPAN class=k style="BOX-SIZING: border-box; COLOR: rgb(102,217,239)">if</SPAN> <SPAN class=p style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">(</SPAN><SPAN class=n style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">e</SPAN><SPAN class=p style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">.</SPAN><SPAN class=n style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">type</SPAN> <SPAN class=o style="BOX-SIZING: border-box; COLOR: rgb(249,38,114)">==</SPAN> <SPAN class=n style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">SDL_MOUSEBUTTONDOWN</SPAN><SPAN class=p style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">){</SPAN>
			<SPAN class=n style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">quit</SPAN> <SPAN class=o style="BOX-SIZING: border-box; COLOR: rgb(249,38,114)">=</SPAN> <SPAN class=nb style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">true</SPAN><SPAN class=p style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">;</SPAN>
		<SPAN class=p style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">}</SPAN>
	<SPAN class=p style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">}</SPAN>
	<SPAN class=c1 style="BOX-SIZING: border-box; COLOR: rgb(166,166,166)">//Render the scene</SPAN>
	<SPAN class=n style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">SDL_RenderClear</SPAN><SPAN class=p style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">(</SPAN><SPAN class=n style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">renderer</SPAN><SPAN class=p style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">);</SPAN>
	<SPAN class=n style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">renderTexture</SPAN><SPAN class=p style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">(</SPAN><SPAN class=n style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">image</SPAN><SPAN class=p style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">,</SPAN> <SPAN class=n style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">renderer</SPAN><SPAN class=p style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">,</SPAN> <SPAN class=n style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">x</SPAN><SPAN class=p style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">,</SPAN> <SPAN class=n style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">y</SPAN><SPAN class=p style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">);</SPAN>
	<SPAN class=n style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">SDL_RenderPresent</SPAN><SPAN class=p style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">(</SPAN><SPAN class=n style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">renderer</SPAN><SPAN class=p style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">);</SPAN>
<SPAN class=p style="BOX-SIZING: border-box; COLOR: rgb(248,248,242)">}</SPAN></CODE></PRE></DIV>
<P style="BOX-SIZING: border-box; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 28px/40px 'Helvetica Neue', Helvetica, Arial, sans-serif; MARGIN: 0px 0px 10px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><BR style="BOX-SIZING: border-box">Our program will repeat until the user asks to exit and will re-draw our image each time.</P>
<H2 id=end-of-lesson-4 style="BOX-SIZING: border-box; MARGIN-BOTTOM: 10px; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 500 60px/1.1 'Helvetica Neue', Helvetica, Arial, sans-serif; MARGIN-TOP: 20px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">End of Lesson 4</H2>
<P style="BOX-SIZING: border-box; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 28px/40px 'Helvetica Neue', Helvetica, Arial, sans-serif; MARGIN: 0px 0px 10px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">When you run the program you should be able to quit by closing the window, pressing any key or clicking the mouse. If you have any issues double check your code and/or post your question below.</P>
<P style="BOX-SIZING: border-box; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 28px/40px 'Helvetica Neue', Helvetica, Arial, sans-serif; MARGIN: 0px 0px 10px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><STRONG style="BOX-SIZING: border-box; FONT-WEIGHT: bold">Extra Fun:</STRONG><SPAN class=Apple-converted-space>&nbsp;</SPAN>How could we move the image around? What about moving based on key input?</P>
<P style="BOX-SIZING: border-box; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 28px/40px 'Helvetica Neue', Helvetica, Arial, sans-serif; MARGIN: 0px 0px 10px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">I&#8217;ll see you again soon in<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BOX-SIZING: border-box; TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(66,139,202)" href="http://www.willusher.io/sdl2%20tutorials/2013/08/27/lesson-5-clipping-sprite-sheets">Lesson 5: Clipping Sprite Sheets!</A></P></SMALL></H1>