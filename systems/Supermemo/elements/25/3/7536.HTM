<SPAN class=docEmphBold>In Emacs Shell buffer, M-p</SPAN> (for <SPAN class=docEmphBold>comint-previous-input</SPAN>) retrieves the command, but doesn't execute it; you can edit the command before pressing <SPAN class=docEmphBold>Enter</SPAN>. To find subsequent commands, type <SPAN class=cloze>[...]</SPAN>.