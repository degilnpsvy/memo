tb_find_fast(...){/cpu-exec.c} : Function tb_find_fast calls cpu_get_tb_cpu_state() which gets the program counter (PC) form CPUState (env) this PC value is passed to a hash function to get the index of the TB in tb_jmp_cache[] (a hash table). Using this index the next TB is found from tb_jmp_cache.<BR>: 200 <BR>tb = env-&gt;b_jmp_cache[tb_jmp_cache_hash_func(pc)] <BR>:<BR>Thus it can be found that once a TB (for a particular PC value) is found it is stored in tb_jmp_cache so that it can be later reused from tb_jmp_cache using its index found using the hash function (tb_jmp_cache_hash_func(pc)). The code then follows to check the validity of the found TB, if the TB found is invalid then a call is made to tb_find_slow().</P>
<P>&nbsp;</P>
<P>tb_find_slow(...){/cpu-exec.c}: Function tb_find_slow is used when tb_find_fast() fails. This time an attempt to find a TB is made using physical memory mapping. <BR>:142 <BR>phys_pc=get_page_addr_code (env, pc) <BR>:<BR>phys_pc should be the physical memory address of the Guest OS&#8217;s PC, and it is used to find the next TB through a hash function. <BR>:147<BR>h=tb_phys_hash_func(phys_pc) <BR>ptb1 = &amp;tb_phys_hash[h]; <BR>: <BR>The above ptb1 is supposed to be the next TB but its validity is checked in the code that follows. If no valid TB is found then new TB is generated through tb_gen_code() else if a valid TB was found then its quickly added to tb_jmp_cache at an index found by tb_jmp_cache_hash_func(). <BR>:181 <BR>env-&gt;tb_jmp_cache[tb_jmp_cache_hash_func(pc)] = tb; <BR>: </P>
<P>&nbsp;</P>
<P></P>
<P><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; BACKGROUND: orange; COLOR: yellow; TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#312" name=312>312</A><B>static</B> <B>inline</B> <A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=TranslationBlock&amp;project=qemu-latest">TranslationBlock</A> *<A class=xf style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,0,255)" name=tb_find></A><A class=xf style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(0,0,255)" href="http://172.29.26.110:8080/source/s?refs=tb_find&amp;project=qemu-latest">tb_find</A>(<A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=CPUState&amp;project=qemu-latest">CPUState</A> *<A class=xa style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(102,0,204)" name=cpu></A><A class=xa style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(102,0,204)" href="http://172.29.26.110:8080/source/s?refs=cpu&amp;project=qemu-latest">cpu</A>,<BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#313" name=313>313</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=TranslationBlock&amp;project=qemu-latest">TranslationBlock</A> *<A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=last_tb&amp;project=qemu-latest">last_tb</A>,<BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#314" name=314>314</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>int</B> <A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=tb_exit&amp;project=qemu-latest">tb_exit</A>)<BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#315" name=315>315</A>{<BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#316" name=316>316</A>&nbsp;&nbsp;&nbsp; <A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=CPUArchState&amp;project=qemu-latest">CPUArchState</A> *<A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" name=env></A><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" href="http://172.29.26.110:8080/source/s?refs=env&amp;project=qemu-latest">env</A> = (<A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=CPUArchState&amp;project=qemu-latest">CPUArchState</A> *)<A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=cpu&amp;project=qemu-latest">cpu</A>-&gt;<A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=env_ptr&amp;project=qemu-latest">env_ptr</A>;<BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#317" name=317>317</A>&nbsp;&nbsp;&nbsp; <A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=TranslationBlock&amp;project=qemu-latest">TranslationBlock</A> *<A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" name=tb></A><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" href="http://172.29.26.110:8080/source/s?refs=tb&amp;project=qemu-latest">tb</A>;<BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#318" name=318>318</A>&nbsp;&nbsp;&nbsp; <A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=target_ulong&amp;project=qemu-latest">target_ulong</A> <A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" name=cs_base></A><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" href="http://172.29.26.110:8080/source/s?refs=cs_base&amp;project=qemu-latest">cs_base</A>, <A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" name=pc></A><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" href="http://172.29.26.110:8080/source/s?refs=pc&amp;project=qemu-latest">pc</A>;<BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#319" name=319>319</A>&nbsp;&nbsp;&nbsp; <A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=uint32_t&amp;project=qemu-latest">uint32_t</A> <A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" name=flags></A><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" href="http://172.29.26.110:8080/source/s?refs=flags&amp;project=qemu-latest">flags</A>;<BR><A class=hl style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(0,0,0); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#320" name=320>320</A>&nbsp;&nbsp;&nbsp; <B>bool</B> <A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" name=have_tb_lock></A><A class=xl style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,102,51)" href="http://172.29.26.110:8080/source/s?refs=have_tb_lock&amp;project=qemu-latest">have_tb_lock</A> = <B>false</B>;<BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#321" name=321>321</A><BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#322" name=322>322</A>&nbsp;&nbsp;&nbsp; <SPAN class=c style="COLOR: rgb(102,102,102)">/* we record a subset of the CPU state. It will<BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#323" name=323>323</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; always be the same before a given translated block<BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#324" name=324>324</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; is executed. */</SPAN><BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#325" name=325>325</A>&nbsp;&nbsp;&nbsp; <A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=cpu_get_tb_cpu_state&amp;project=qemu-latest">cpu_get_tb_cpu_state</A>(<A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=env&amp;project=qemu-latest">env</A>, &amp;<A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=pc&amp;project=qemu-latest">pc</A>, &amp;<A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=cs_base&amp;project=qemu-latest">cs_base</A>, &amp;<A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=flags&amp;project=qemu-latest">flags</A>);<BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#326" name=326>326</A>&nbsp;&nbsp;&nbsp; <A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=tb&amp;project=qemu-latest">tb</A> = <A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=atomic_rcu_read&amp;project=qemu-latest">atomic_rcu_read</A>(&amp;<A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=cpu&amp;project=qemu-latest">cpu</A>-&gt;<A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=tb_jmp_cache&amp;project=qemu-latest">tb_jmp_cache</A>[<A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=tb_jmp_cache_hash_func&amp;project=qemu-latest">tb_jmp_cache_hash_func</A>(<A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=pc&amp;project=qemu-latest">pc</A>)]);<BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#327" name=327>327</A>&nbsp;&nbsp;&nbsp; <B>if</B> (<A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=unlikely&amp;project=qemu-latest">unlikely</A>(!<A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=tb&amp;project=qemu-latest">tb</A> || <A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=tb&amp;project=qemu-latest">tb</A>-&gt;<A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=pc&amp;project=qemu-latest">pc</A> != <A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=pc&amp;project=qemu-latest">pc</A> || <A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=tb&amp;project=qemu-latest">tb</A>-&gt;<A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=cs_base&amp;project=qemu-latest">cs_base</A> != <A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=cs_base&amp;project=qemu-latest">cs_base</A> ||<BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#328" name=328>328</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=tb&amp;project=qemu-latest">tb</A>-&gt;<A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=flags&amp;project=qemu-latest">flags</A> != <A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=flags&amp;project=qemu-latest">flags</A>)) {<BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#329" name=329>329</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=tb&amp;project=qemu-latest">tb</A> = <A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#tb_htable_lookup">tb_htable_lookup</A>(<A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=cpu&amp;project=qemu-latest">cpu</A>, <A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=pc&amp;project=qemu-latest">pc</A>, <A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=cs_base&amp;project=qemu-latest">cs_base</A>, <A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=flags&amp;project=qemu-latest">flags</A>);<BR><A class=hl style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(0,0,0); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#330" name=330>330</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>if</B> (!<A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=tb&amp;project=qemu-latest">tb</A>) {<BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#331" name=331>331</A><BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#332" name=332>332</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <SPAN class=c style="COLOR: rgb(102,102,102)">/* mmap_lock is needed by tb_gen_code, and mmap_lock must be<BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#333" name=333>333</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; * taken outside tb_lock. As system emulation is currently<BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#334" name=334>334</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; * single threaded the locks are NOPs.<BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#335" name=335>335</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; */</SPAN><BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#336" name=336>336</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=mmap_lock&amp;project=qemu-latest">mmap_lock</A>();<BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#337" name=337>337</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=tb_lock&amp;project=qemu-latest">tb_lock</A>();<BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#338" name=338>338</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#have_tb_lock">have_tb_lock</A> = <B>true</B>;<BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#339" name=339>339</A><BR><A class=hl style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(0,0,0); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#340" name=340>340</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <SPAN class=c style="COLOR: rgb(102,102,102)">/* There's a chance that our desired tb has been translated while<BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#341" name=341>341</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; * taking the locks so we check again inside the lock.<BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#342" name=342>342</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; */</SPAN><BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#343" name=343>343</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=tb&amp;project=qemu-latest">tb</A> = <A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#tb_htable_lookup">tb_htable_lookup</A>(<A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=cpu&amp;project=qemu-latest">cpu</A>, <A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=pc&amp;project=qemu-latest">pc</A>, <A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=cs_base&amp;project=qemu-latest">cs_base</A>, <A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=flags&amp;project=qemu-latest">flags</A>);<BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#344" name=344>344</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>if</B> (!<A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=tb&amp;project=qemu-latest">tb</A>) {<BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#345" name=345>345</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <SPAN class=c style="COLOR: rgb(102,102,102)">/* if no translated code available, then translate it now */</SPAN><BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#346" name=346>346</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=tb&amp;project=qemu-latest">tb</A> = <A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=tb_gen_code&amp;project=qemu-latest">tb_gen_code</A>(<A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=cpu&amp;project=qemu-latest">cpu</A>, <A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=pc&amp;project=qemu-latest">pc</A>, <A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=cs_base&amp;project=qemu-latest">cs_base</A>, <A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=flags&amp;project=qemu-latest">flags</A>, 0);<BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#347" name=347>347</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#348" name=348>348</A><BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#349" name=349>349</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=mmap_unlock&amp;project=qemu-latest">mmap_unlock</A>();<BR><A class=hl style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(0,0,0); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#350" name=350>350</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#351" name=351>351</A><BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#352" name=352>352</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <SPAN class=c style="COLOR: rgb(102,102,102)">/* We add the TB in the virtual pc hash table for the fast lookup */</SPAN><BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#353" name=353>353</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=atomic_set&amp;project=qemu-latest">atomic_set</A>(&amp;<A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=cpu&amp;project=qemu-latest">cpu</A>-&gt;<A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=tb_jmp_cache&amp;project=qemu-latest">tb_jmp_cache</A>[<A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=tb_jmp_cache_hash_func&amp;project=qemu-latest">tb_jmp_cache_hash_func</A>(<A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=pc&amp;project=qemu-latest">pc</A>)], <A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=tb&amp;project=qemu-latest">tb</A>);<BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#354" name=354>354</A>&nbsp;&nbsp;&nbsp; }<BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#355" name=355>355</A>#<B>ifndef</B> <A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=CONFIG_USER_ONLY&amp;project=qemu-latest">CONFIG_USER_ONLY</A><BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#356" name=356>356</A>&nbsp;&nbsp;&nbsp; <SPAN class=c style="COLOR: rgb(102,102,102)">/* We don't take care of direct jumps when address mapping changes in<BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#357" name=357>357</A> * system emulation. So it's not safe to make a direct jump to a TB</P><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#358" name=358>358</A>&nbsp;&nbsp;&nbsp;&nbsp; * spanning two pages because the mapping for the second page can change.<BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#359" name=359>359</A>&nbsp;&nbsp;&nbsp;&nbsp; */</SPAN><BR><A class=hl style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(0,0,0); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#360" name=360>360</A>&nbsp;&nbsp;&nbsp; <B>if</B> (<A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=tb&amp;project=qemu-latest">tb</A>-&gt;<A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=page_addr&amp;project=qemu-latest">page_addr</A>[<SPAN class=n style="COLOR: rgb(165,42,42)">1</SPAN>] != -<SPAN class=n style="COLOR: rgb(165,42,42)">1</SPAN>) {<BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#361" name=361>361</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=last_tb&amp;project=qemu-latest">last_tb</A> = <A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=NULL&amp;project=qemu-latest">NULL</A>;<BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#362" name=362>362</A>&nbsp;&nbsp;&nbsp; }<BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#363" name=363>363</A>#<B>endif</B><BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#364" name=364>364</A>&nbsp;&nbsp;&nbsp; <SPAN class=c style="COLOR: rgb(102,102,102)">/* See if we can patch the calling TB. */</SPAN><BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#365" name=365>365</A>&nbsp;&nbsp;&nbsp; <B>if</B> (<A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=last_tb&amp;project=qemu-latest">last_tb</A> &amp;&amp; !<A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=qemu_loglevel_mask&amp;project=qemu-latest">qemu_loglevel_mask</A>(<A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=CPU_LOG_TB_NOCHAIN&amp;project=qemu-latest">CPU_LOG_TB_NOCHAIN</A>)) {<BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#366" name=366>366</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>if</B> (!<A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#have_tb_lock">have_tb_lock</A>) {<BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#367" name=367>367</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=tb_lock&amp;project=qemu-latest">tb_lock</A>();<BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#368" name=368>368</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#have_tb_lock">have_tb_lock</A> = <B>true</B>;<BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#369" name=369>369</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<BR><A class=hl style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(0,0,0); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#370" name=370>370</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <B>if</B> (!<A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=tb&amp;project=qemu-latest">tb</A>-&gt;<A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=invalid&amp;project=qemu-latest">invalid</A>) {<BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#371" name=371>371</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=tb_add_jump&amp;project=qemu-latest">tb_add_jump</A>(<A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=last_tb&amp;project=qemu-latest">last_tb</A>, <A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=tb_exit&amp;project=qemu-latest">tb_exit</A>, <A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=tb&amp;project=qemu-latest">tb</A>);<BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#372" name=372>372</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#373" name=373>373</A>&nbsp;&nbsp;&nbsp; }<BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#374" name=374>374</A>&nbsp;&nbsp;&nbsp; <B>if</B> (<A class=d style="TEXT-DECORATION: none; FONT-WEIGHT: bold; COLOR: rgb(153,0,153)" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#have_tb_lock">have_tb_lock</A>) {<BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#375" name=375>375</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=tb_unlock&amp;project=qemu-latest">tb_unlock</A>();<BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#376" name=376>376</A>&nbsp;&nbsp;&nbsp; }<BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#377" name=377>377</A>&nbsp;&nbsp;&nbsp; <B>return</B> <A style="TEXT-DECORATION: none; COLOR: rgb(32,32,98)" href="http://172.29.26.110:8080/source/s?defs=tb&amp;project=qemu-latest">tb</A>;<BR><A class=l style="TEXT-DECORATION: none; WIDTH: 6ex; COLOR: rgb(102,102,102); TEXT-ALIGN: right; DISPLAY: inline-block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(221,221,221); MARGIN-RIGHT: 0.5ex" href="http://172.29.26.110:8080/source/xref/qemu-latest/cpu-exec.c#378" name=378>378</A>}