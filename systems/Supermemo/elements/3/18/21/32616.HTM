<DIV class=article_title>
<H1><SPAN class=link_title><A href="http://blog.csdn.net/lulu901130/article/details/47022951">QEMU-System mode emulation&#20998;&#26512;(2) </A></SPAN></H1></DIV>
<DIV class="article_manage clearfix">
<DIV class=article_r><SPAN class=link_postdate>2015-07-23 22:10</SPAN> <SPAN title=&#38405;&#35835;&#27425;&#25968; class=link_view>362&#20154;&#38405;&#35835;</SPAN> <SPAN title=&#35780;&#35770;&#27425;&#25968; class=link_comments><A href="http://blog.csdn.net/lulu901130/article/details/47022951#comments" ?blog_articles_pinglun?])? ?onclick?, ?_gaq.push([?_trackEvent?,?function?,>&#35780;&#35770;</A>(0)</SPAN> <SPAN class="link_collect tracking-ad" data-mod="popu_171"><A title=&#25910;&#34255; target=_blank void(0);? false;? ?javascript:collectArticle(?QEMU-System+mode+emulation%e5%88%86%e6%9e%90(2)?,?47022951?);return>&#25910;&#34255;</A></SPAN> <SPAN class=link_report><A title=&#20030;&#25253; href="http://blog.csdn.net/lulu901130/article/details/47022951#report" false;? ?javascript:report(47022951,2);return>&#20030;&#25253;</A></SPAN> </DIV></DIV>
<DIV class="category clearfix">
<DIV class=category_l><IMG src="http://static.blog.csdn.net/images/category_icon.jpg"> <SPAN>&#20998;&#31867;&#65306;</SPAN> </DIV>
<DIV class=category_r><LABEL ?GetCategoryArticles(?3058457?,?lulu901130?,?top?,?47022951?);?><SPAN ?onclick?, ?_gaq.push([?_trackEvent?,?function?, ?blog_articles_fenlei?]);?>qemu<EM>&#65288;2&#65289;</EM></SPAN> <IMG class=arrow-down style="DISPLAY: inline" src="http://static.blog.csdn.net/images/arrow_triangle%20_down.jpg"> </LABEL></DIV></DIV>
<DIV class=bog_copyright>
<P class=copyright_p>&#29256;&#26435;&#22768;&#26126;&#65306;&#26412;&#25991;&#20026;&#21338;&#20027;&#21407;&#21019;&#25991;&#31456;&#65292;&#26410;&#32463;&#21338;&#20027;&#20801;&#35768;&#19981;&#24471;&#36716;&#36733;&#12290;</P></DIV>
<DIV style="CLEAR: both"></DIV>
<DIV style="BORDER-TOP: #ccc 1px solid; BORDER-RIGHT: #ccc 1px solid; BACKGROUND: #eee; MIN-WIDTH: 200px; BORDER-BOTTOM: #ccc 1px solid; FLOAT: left; PADDING-BOTTOM: 4px; PADDING-TOP: 4px; PADDING-LEFT: 10px; BORDER-LEFT: #ccc 1px solid; PADDING-RIGHT: 10px">
<P style="TEXT-ALIGN: right; MARGIN: 0px"><SPAN style="FLOAT: left">&#30446;&#24405;<A title=&#31995;&#32479;&#26681;&#25454;&#25991;&#31456;&#20013;H1&#21040;H6&#26631;&#31614;&#33258;&#21160;&#29983;&#25104;&#25991;&#31456;&#30446;&#24405; href="http://blog.csdn.net/lulu901130/article/details/47022951#">(?)</A></SPAN><A title=&#23637;&#24320; href="http://blog.csdn.net/lulu901130/article/details/47022951#" openct(this);? ?javascript:return>[+]</A></P></DIV>
<DIV style="CLEAR: both"></DIV>
<DIV id=article_content class=article_content>
<H1><A name=t0></A>2. System mode&#19979;&#30340;&#26426;&#22120;&#65288;machine&#65289;&#31649;&#29702;</H1>
<P><SPAN style="WHITE-SPACE: pre"></SPAN><SPAN style="WHITE-SPACE: pre"></SPAN>QEMU Sytem mode&#27169;&#25311;&#30340;&#25972;&#20010;&#30828;&#20214;&#24179;&#21488;&#65292;&#30828;&#20214;&#24179;&#21488;&#26368;&#26680;&#24515;&#30340;&#26159;&#25105;&#20204;&#24120;&#35828;&#30340;&#26495;&#23376;&#65292;PC&#19978;&#24120;&#35828;&#26159;&#20027;&#26495;&#65292;&#20854;&#20013;&#21253;&#25324;&#20102;&#20027;&#35201;&#30340;&#20803;&#32032;&#22914;CPU&#12289;ROM&#31354;&#38388;&#12289;RAM&#31354;&#38388;&#31561;&#65292;&#32780;&#36825;&#37324;&#25152;&#35828;&#30340;machine&#23601;&#26159;&#23545;&#36825;&#20010;&#26426;&#22120;&#23618;&#27425;&#30340;&#27169;&#25311;&#12290;</P>
<P><BR></P>
<H2><A name=t1></A><SPAN style="WHITE-SPACE: pre"></SPAN>2.1 machine&#25968;&#25454;&#32467;&#26500;</H2>
<P><SPAN style="WHITE-SPACE: pre"></SPAN></P>
<P><SPAN style="WHITE-SPACE: pre"></SPAN><SPAN style="WHITE-SPACE: pre">qemu&#25552;&#20379;&#20102;&#36890;&#29992;&#30340;QEMUMachine&#32467;&#26500;&#29992;&#26469;&#25551;&#36848;machine&#65292;&#26032;&#22686;&#19968;&#20010;machine&#26102;&#21482;&#38656;&#22312;machine&#33258;&#24049;&#30340;&#25991;&#20214;&#20013;&#23454;&#20363;&#21270;&#35813;&#25968;&#25454;&#32467;&#26500;&#12290;&#23454;&#20363;&#21270;&#26102;&#26368;&#37325;&#35201;&#30340;&#26159;&#23558;&#33258;&#24049;&#30340;&#21021;&#22987;&#21270;&#20989;&#25968;&#27880;&#20876;&#22312;&#35813;&#25968;&#25454;&#32467;&#26500;&#20013;&#12290;</SPAN></P>
<P><SPAN style="WHITE-SPACE: pre"><SPAN style="WHITE-SPACE: pre"></SPAN>1) &#36890;&#29992;&#25509;&#21475;</SPAN></P>
<P><SPAN style="WHITE-SPACE: pre"><SPAN style="WHITE-SPACE: pre"></SPAN></SPAN><SPAN style="WHITE-SPACE: pre">&#20301;&#32622;&#65306;hw/boards.h</SPAN><SPAN style="WHITE-SPACE: pre"></SPAN></P>
<P><SPAN style="WHITE-SPACE: pre"><SPAN style="WHITE-SPACE: pre"></SPAN></SPAN></P>
<DIV class="dp-highlighter bg_cpp">
<DIV class=bar>
<DIV class=tools><B>[cpp]</B> <A title="view plain" class=ViewSource href="http://blog.csdn.net/lulu901130/article/details/47022951#" false;? ?dp.sh.Toolbar.Command(?ViewSource?,this);return>view plain</A><SPAN data-mod="popu_168"> <A title=copy class=CopyToClipboard href="http://blog.csdn.net/lulu901130/article/details/47022951#" false;? ?dp.sh.Toolbar.Command(?CopyToClipboard?,this);return>copy</A> 
<DIV style="HEIGHT: 18px; WIDTH: 18px; POSITION: absolute; LEFT: 465px; Z-INDEX: 99; TOP: 836px"></DIV></SPAN><SPAN data-mod="popu_169"></SPAN></DIV></DIV>
<OL class=dp-cpp>
<LI class=alt><SPAN><SPAN class=keyword>typedef</SPAN><SPAN>&nbsp;</SPAN><SPAN class=keyword>struct</SPAN><SPAN>&nbsp;QEMUMachine&nbsp;{&nbsp;&nbsp;</SPAN></SPAN> 
<LI><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;<SPAN class=keyword>const</SPAN><SPAN>&nbsp;</SPAN><SPAN class=datatypes>char</SPAN><SPAN>&nbsp;*name;&nbsp;&nbsp;</SPAN></SPAN> 
<LI class=alt><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;<SPAN class=keyword>const</SPAN><SPAN>&nbsp;</SPAN><SPAN class=datatypes>char</SPAN><SPAN>&nbsp;*alias;&nbsp;&nbsp;</SPAN></SPAN> 
<LI><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;<SPAN class=keyword>const</SPAN><SPAN>&nbsp;</SPAN><SPAN class=datatypes>char</SPAN><SPAN>&nbsp;*desc;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN class=comment>//description</SPAN><SPAN>&nbsp;&nbsp;</SPAN></SPAN> 
<LI class=alt><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;QEMUMachineInitFunc&nbsp;*init;&nbsp;&nbsp;&nbsp;<SPAN class=comment>//machine&nbsp;init&nbsp;function&#65292;[board]_init</SPAN><SPAN>&nbsp;&nbsp;</SPAN></SPAN> 
<LI><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;<SPAN class=datatypes>int</SPAN><SPAN>&nbsp;use_scsi;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN class=comment>//use&nbsp;scsi&nbsp;standard</SPAN><SPAN>&nbsp;&nbsp;</SPAN></SPAN> 
<LI class=alt><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;<SPAN class=datatypes>int</SPAN><SPAN>&nbsp;max_cpus;&nbsp;&nbsp;</SPAN></SPAN> 
<LI><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;<SPAN class=datatypes>int</SPAN><SPAN>&nbsp;no_serial:1,&nbsp;&nbsp;</SPAN></SPAN> 
<LI class=alt><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;no_parallel:1,&nbsp;&nbsp;</SPAN> 
<LI><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_virtcon:1,&nbsp;&nbsp;</SPAN> 
<LI class=alt><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;no_vga:1,&nbsp;&nbsp;</SPAN> 
<LI><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;no_floppy:1,&nbsp;&nbsp;</SPAN> 
<LI class=alt><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;no_cdrom:1,&nbsp;&nbsp;</SPAN> 
<LI><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;no_sdcard:1;&nbsp;&nbsp;</SPAN> 
<LI class=alt><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;<SPAN class=datatypes>int</SPAN><SPAN>&nbsp;is_default;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN class=comment>//mark&nbsp;as&nbsp;default&nbsp;machine</SPAN><SPAN>&nbsp;&nbsp;</SPAN></SPAN> 
<LI><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;GlobalProperty&nbsp;*compat_props;&nbsp;&nbsp;</SPAN> 
<LI class=alt><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;<SPAN class=keyword>struct</SPAN><SPAN>&nbsp;QEMUMachine&nbsp;*next;&nbsp;&nbsp;</SPAN><SPAN class=comment>//&#25351;&#21521;machine&#21015;&#34920;&#20013;&#19979;&#19968;&#20010;machine</SPAN><SPAN>&nbsp;&nbsp;</SPAN></SPAN> 
<LI><SPAN>}&nbsp;QEMUMachine;&nbsp;&nbsp;</SPAN></LI></OL></DIV><BR>
<P></P>
<P><SPAN style="WHITE-SPACE: pre"><SPAN style="WHITE-SPACE: pre"><SPAN style="WHITE-SPACE: pre"></SPAN>2</SPAN>&#65289; &#25509;&#21475;&#23454;&#20363;&#21270;</SPAN></P>
<P><SPAN style="WHITE-SPACE: pre"><SPAN style="WHITE-SPACE: pre"></SPAN>&#20363;&#22914;arm&#30340;&#19968;&#26495;&#23376;&#20570;&#22914;&#19979;&#23454;&#20363;&#21270;&#65306;</SPAN></P>
<P><SPAN style="WHITE-SPACE: pre"><SPAN style="WHITE-SPACE: pre"></SPAN></SPAN></P>
<DIV class="dp-highlighter bg_cpp">
<DIV class=bar>
<DIV class=tools><B>[cpp]</B> <A title="view plain" class=ViewSource href="http://blog.csdn.net/lulu901130/article/details/47022951#" false;? ?dp.sh.Toolbar.Command(?ViewSource?,this);return>view plain</A><SPAN data-mod="popu_168"> <A title=copy class=CopyToClipboard href="http://blog.csdn.net/lulu901130/article/details/47022951#" false;? ?dp.sh.Toolbar.Command(?CopyToClipboard?,this);return>copy</A> 
<DIV style="HEIGHT: 18px; WIDTH: 18px; POSITION: absolute; LEFT: 465px; Z-INDEX: 99; TOP: 1335px"></DIV></SPAN><SPAN data-mod="popu_169"></SPAN></DIV></DIV>
<OL class=dp-cpp>
<LI class=alt><SPAN><SPAN class=keyword>static</SPAN><SPAN>&nbsp;QEMUMachine&nbsp;integratorcp_machine&nbsp;=&nbsp;{&nbsp;&nbsp;</SPAN></SPAN> 
<LI><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;.name&nbsp;=&nbsp;<SPAN class=string>"integratorcp"</SPAN><SPAN>,&nbsp;&nbsp;</SPAN></SPAN> 
<LI class=alt><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;.desc&nbsp;=&nbsp;<SPAN class=string>"ARM&nbsp;Integrator/CP&nbsp;(ARM926EJ-S)"</SPAN><SPAN>,&nbsp;&nbsp;</SPAN></SPAN> 
<LI><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;.init&nbsp;=&nbsp;integratorcp_init,&nbsp;&nbsp;</SPAN> 
<LI class=alt><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;.is_default&nbsp;=&nbsp;1,&nbsp;&nbsp;</SPAN> 
<LI><SPAN>};&nbsp;&nbsp;</SPAN></LI></OL></DIV><BR>
<P></P>
<H2><A name=t2></A><SPAN style="WHITE-SPACE: pre"><SPAN style="WHITE-SPACE: pre">2</SPAN>.2 machine&#30456;&#20851;&#25509;&#21475;</SPAN></H2>
<DIV><SPAN style="WHITE-SPACE: pre"><SPAN style="WHITE-SPACE: pre"></SPAN>1&#65289;&#38656;&#35201;&#23454;&#29616;&#30340;&#25509;&#21475;</SPAN></DIV>
<DIV><SPAN style="WHITE-SPACE: pre"></SPAN>
<TABLE>
<TBODY>
<TR>
<TD vAlign=top>
<P>QEMUMachine&nbsp;[board]_machine</P></TD>
<TD vAlign=top>
<P>&#25551;&#36848;machine&#30340;&#25968;&#25454;&#32467;&#26500;</P></TD></TR>
<TR>
<TD vAlign=top>
<P>&#23439;machine_init([board]_machine_init)</P></TD>
<TD vAlign=top>
<P>main&#20043;&#21069;&#27880;&#20876;[board]_machine_init&#20989;&#25968;</P></TD></TR>
<TR>
<TD vAlign=top>
<P>[board]_machine_init</P></TD>
<TD vAlign=top>
<P>machine&#27880;&#20876;&#20989;&#25968;</P></TD></TR>
<TR>
<TD vAlign=top>
<P>[board]_init</P></TD>
<TD vAlign=top>
<P>machine&#21021;&#22987;&#21270;&#20989;&#25968;</P></TD></TR></TBODY></TABLE><BR></DIV>
<DIV><SPAN style="WHITE-SPACE: pre"><BR></SPAN></DIV>
<DIV><SPAN style="WHITE-SPACE: pre"><BR></SPAN></DIV>
<P><SPAN style="WHITE-SPACE: pre"><SPAN style="WHITE-SPACE: pre"><SPAN style="WHITE-SPACE: pre"></SPAN>2</SPAN>&#65289;&#35843;&#29992;&#30340;&#36890;&#29992;&#25509;&#21475;</SPAN></P>
<P><SPAN style="WHITE-SPACE: pre"></SPAN></P>
<TABLE>
<TBODY>
<TR>
<TD vAlign=top>
<P>int&nbsp;qemu_register_machine(QEMUMachine&nbsp;*m)</P></TD>
<TD vAlign=top>
<P>&#23558;&#24403;&#21069;machine&#27880;&#20876;&#21040;machine&#21015;&#34920;&#20013;</P></TD></TR>
<TR>
<TD vAlign=top>
<P>cpu_init&nbsp;(const&nbsp;char&nbsp;*cpu_model)</P></TD>
<TD vAlign=top>
<P>cpu&#21021;&#22987;&#21270;</P></TD></TR>
<TR>
<TD vAlign=top>
<P>am_addr_t&nbsp;qemu_ram_alloc(DeviceState&nbsp;*dev,&nbsp;const&nbsp;char&nbsp;*name,&nbsp;ram_addr_t&nbsp;size)</P></TD>
<TD vAlign=top>
<P>&#30003;&#35831;ram&#31354;&#38388;</P></TD></TR>
<TR>
<TD vAlign=top>
<P>staticinline&nbsp;void&nbsp;cpu_register_physical_memory(target_phys_addr_tstart_addr, ram_addr_tsize, &nbsp;ram_addr_t&nbsp;phys_offset</P></TD>
<TD vAlign=top>
<P>&#23545;&#30003;&#35831;&#30340;&#20869;&#23384;&#31354;&#38388;&#20998;&#39029;</P></TD></TR>
<TR>
<TD vAlign=top>
<P>DeviceState&nbsp;*qdev_create(BusState&nbsp;*bus,&nbsp;const&nbsp;char&nbsp;*name)</P></TD>
<TD vAlign=top>
<P>&#21019;&#24314;&#35774;&#22791;</P></TD></TR>
<TR>
<TD vAlign=top>
<P>void&nbsp;qdev_init_nofail(DeviceState&nbsp;*dev)</P></TD>
<TD vAlign=top>
<P>&#35774;&#22791;&#21021;&#22987;&#21270;&#36890;&#36807;hw_error()&#32467;&#26463;&#31243;&#24207;</P></TD></TR>
<TR>
<TD vAlign=top>
<P>int&nbsp;qdev_init(DeviceState&nbsp;*dev)</P></TD>
<TD vAlign=top>
<P>&#35774;&#22791;&#21021;&#22987;&#21270;&#65292;&#34987;qdev_init_nofail&#35843;&#29992;</P></TD></TR>
<TR>
<TD vAlign=top>
<P>void&nbsp;qdev_prop_set(DeviceState&nbsp;*dev,&nbsp;const&nbsp;char&nbsp;*name,&nbsp;void&nbsp;*src,&nbsp;enum&nbsp;PropertyType&nbsp;type)</P></TD>
<TD vAlign=top>
<P>&#35774;&#22791;&#23646;&#24615;&#35774;&#32622;</P></TD></TR>
<TR>
<TD vAlign=top>
<P>void&nbsp;sysbus_mmio_map(SysBusDevice&nbsp;*dev,&nbsp;int&nbsp;n,&nbsp;target_phys_addr_t&nbsp;addr)</P></TD>
<TD vAlign=top>
<P>io&#22320;&#22336;&#26144;&#23556;</P></TD></TR>
<TR>
<TD vAlign=top>
<P>DeviceState&nbsp;*sysbus_create_varargs(const&nbsp;char&nbsp;*name, target_phys_addr_t&nbsp;addr,&nbsp;...)</P></TD>
<TD vAlign=top>
<P>&#22312;&#24635;&#32447;&#19978;&#25346;&#25509;&#35774;&#22791;&#65292;&#24182;&#23436;&#25104;&#35774;&#22791;&#30340;&#21019;&#24314;&#65292;&#21021;&#22987;&#21270;&#65292;&#22320;&#22336;&#26144;&#23556;&#20197;&#21450;&#20013;&#26029;&#21021;&#22987;&#21270;&#31561;&#25805;&#20316;</P></TD></TR>
<TR>
<TD vAlign=top>
<P>static&nbsp;inline&nbsp;DeviceState&nbsp;*sysbus_create_simple(const&nbsp;char&nbsp;*name,&nbsp;<SPAN style="WHITE-SPACE: pre">&nbsp;target_phys_addr_taddr,&nbsp;</SPAN></P>
<P><SPAN style="WHITE-SPACE: pre">qemu_irq&nbsp;irq)</SPAN></P></TD>
<TD vAlign=top>
<P>sysbus_create_varargs&#30340;&#24555;&#25463;&#26041;&#24335;&#65292;&#24403;&#35774;&#22791;&#21482;&#26377;&#19968;&#20010;&#23545;&#24212;&#30340;&#20013;&#26029;&#21495;&#35843;&#29992;&#27492;&#20989;&#25968;</P></TD></TR>
<TR>
<TD vAlign=top>
<P>qemu_irq&nbsp;qdev_get_gpio_in(DeviceState&nbsp;*dev,&nbsp;int&nbsp;n)</P></TD>
<TD vAlign=top>
<P></P></TD></TR></TBODY></TABLE><BR>
<P></P>
<P><SPAN style="WHITE-SPACE: pre"></SPAN></P>
<H2><A name=t3></A><SPAN style="WHITE-SPACE: pre"></SPAN>2.3 machine&#27880;&#20876;</H2>
<DIV><SPAN style="WHITE-SPACE: pre"><IMG alt="" src="http://img.blog.csdn.net/20150723214303731?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center"></SPAN></DIV>
<DIV><SPAN style="WHITE-SPACE: pre"><SPAN style="WHITE-SPACE: pre"></SPAN></SPAN>
<P><SPAN style="WHITE-SPACE: pre"></SPAN>&#30001;&#19978;&#22270;&#21487;&#30693;&#65292;&#22312;qemu&#20013;&#65292;&#19982;machine&#30456;&#20851;&#30340;&#26377;&#20004;&#20010;&#38142;&#34920;&#65292;&#20998;&#21035;&#20026;init_type_list[MODULE_INIT_MACHINE]&#21644;machine&#38142;&#34920;&#12290;</P>
<P><SPAN style="WHITE-SPACE: pre"></SPAN>1)&nbsp; &#30001;init_type_list[MODULE_INIT_MACHINE]&#25351;&#31034;&#30340;&#38142;&#34920;&#35760;&#24405;&#20102;machine&#30340;&#27880;&#20876;&#20989;&#25968;&#65292;&#20854;&#25968;&#25454;&#32467;&#26500;&#22914;&#19979;&#65306;</P>
<P><SPAN style="WHITE-SPACE: pre"></SPAN>&#25991;&#20214;&#65306;module.c</P>
<P><SPAN style="WHITE-SPACE: pre"></SPAN></P>
<DIV class="dp-highlighter bg_cpp">
<DIV class=bar>
<DIV class=tools><B>[cpp]</B> <A title="view plain" class=ViewSource href="http://blog.csdn.net/lulu901130/article/details/47022951#" false;? ?dp.sh.Toolbar.Command(?ViewSource?,this);return>view plain</A><SPAN data-mod="popu_168"> <A title=copy class=CopyToClipboard href="http://blog.csdn.net/lulu901130/article/details/47022951#" false;? ?dp.sh.Toolbar.Command(?CopyToClipboard?,this);return>copy</A> 
<DIV style="HEIGHT: 18px; WIDTH: 18px; POSITION: absolute; LEFT: 465px; Z-INDEX: 99; TOP: 3544px"></DIV></SPAN><SPAN data-mod="popu_169"></SPAN></DIV></DIV>
<OL class=dp-cpp>
<LI class=alt><SPAN><SPAN class=keyword>static</SPAN><SPAN>&nbsp;ModuleTypeList&nbsp;init_type_list[MODULE_INIT_MAX];&nbsp;&nbsp;</SPAN></SPAN> 
<LI><SPAN>&nbsp;&nbsp;</SPAN> 
<LI class=alt><SPAN><SPAN class=keyword>typedef</SPAN><SPAN>&nbsp;</SPAN><SPAN class=keyword>struct</SPAN><SPAN>&nbsp;ModuleEntry&nbsp;&nbsp;</SPAN></SPAN> 
<LI><SPAN>{&nbsp;&nbsp;</SPAN> 
<LI class=alt><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;module_init_type&nbsp;type;&nbsp;&nbsp;&nbsp;&nbsp;<SPAN class=comment>//&#38142;&#34920;&#31867;&#22411;</SPAN><SPAN>&nbsp;&nbsp;</SPAN></SPAN> 
<LI><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;<SPAN class=keyword>void</SPAN><SPAN>&nbsp;(*init)(</SPAN><SPAN class=keyword>void</SPAN><SPAN>);&nbsp;&nbsp;&nbsp;</SPAN><SPAN class=comment>//machine&#30340;&#27880;&#20876;&#20989;&#25968;</SPAN><SPAN>&nbsp;&nbsp;</SPAN></SPAN> 
<LI class=alt><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;QTAILQ_ENTRY(ModuleEntry)&nbsp;node;&nbsp;&nbsp;</SPAN> 
<LI><SPAN>}&nbsp;ModuleEntry;&nbsp;&nbsp;</SPAN> 
<LI class=alt><SPAN>&nbsp;&nbsp;</SPAN> 
<LI><SPAN>module.h&nbsp;&nbsp;&nbsp;</SPAN> 
<LI class=alt><SPAN><SPAN class=keyword>typedef</SPAN><SPAN>&nbsp;</SPAN><SPAN class=keyword>enum</SPAN><SPAN>&nbsp;{&nbsp;&nbsp;</SPAN></SPAN> 
<LI><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;MODULE_INIT_BLOCK,&nbsp;&nbsp;</SPAN> 
<LI class=alt><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;MODULE_INIT_DEVICE,&nbsp;&nbsp;</SPAN> 
<LI><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;MODULE_INIT_MACHINE,&nbsp;&nbsp;</SPAN> 
<LI class=alt><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;MODULE_INIT_MAX&nbsp;&nbsp;</SPAN> 
<LI><SPAN>}&nbsp;module_init_type;&nbsp;&nbsp;</SPAN></LI></OL></DIV><BR>
<P></P>
<P><SPAN style="WHITE-SPACE: pre"><SPAN style="WHITE-SPACE: pre"></SPAN></SPAN></P>
<P><SPAN style="WHITE-SPACE: pre"></SPAN>&#38142;&#34920;&#24418;&#25104;&#21518;&#22914;&#22270;&#25152;&#31034;&#65306;</P>
<P><SPAN style="WHITE-SPACE: pre"><IMG alt="" src="http://img.blog.csdn.net/20150723215108059?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center"></SPAN></P>
<P><SPAN style="WHITE-SPACE: pre"><SPAN style="WHITE-SPACE: pre"></SPAN>2</SPAN>&#65289; machine&#38142;&#34920;</P>
<P><SPAN style="WHITE-SPACE: pre"><IMG alt="" src="http://img.blog.csdn.net/20150723215155219?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center"></SPAN></P>
<P><SPAN style="WHITE-SPACE: pre"><SPAN style="WHITE-SPACE: pre"></SPAN></SPAN></P>
<P><SPAN style="WHITE-SPACE: pre"></SPAN>machine&#38142;&#34920;&#32467;&#26500;&#22914;&#19978;&#22270;&#25152;&#31034;&#65292;&#33410;&#28857;&#25968;&#25454;&#32467;&#26500;&#20026;QEMUMachine&#65292;&#20854;&#20013;&#30340;init&#25104;&#21592;&#35760;&#24405;&#20102;machine&#30340;&#21021;&#22987;&#21270;&#20989;&#25968;&#65292;next&#25104;&#21592;&#25351;&#21521;&#19979;&#19968;&#20010;machine&#12290;</P>
<P></P>
<P><SPAN style="WHITE-SPACE: pre"></SPAN>&#19979;&#38754;&#20998;&#21035;&#20171;&#32461;&#20004;&#20010;&#38142;&#34920;&#30340;&#21019;&#24314;&#36807;&#31243;&#12290;</P><SPAN style="WHITE-SPACE: pre"></SPAN>
<P><SPAN style="WHITE-SPACE: pre"></SPAN>2.3.1 init_type_list[MODULE_INIT_MACHINE]&#29983;&#25104;</P>
<P><SPAN style="WHITE-SPACE: pre"></SPAN></P>
<P><SPAN style="WHITE-SPACE: pre"></SPAN>machine&#20013;&#38656;&#35201;&#23454;&#29616;&#23439;&#25509;&#21475;machine_init(func)&#65292;func&#20026;machine&#30340;&#27880;&#20876;&#20989;&#25968;&#12290;machine_init(func)&#30340;&#22788;&#29702;&#27969;&#31243;&#22914;&#19979;&#65306;</P>
<P style="TEXT-ALIGN: center"><IMG style="HEIGHT: 542px; WIDTH: 602px" alt="" src="http://img.blog.csdn.net/20150723220126487?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" width=447 height=400><BR></P>
<P style="TEXT-ALIGN: left"></P>
<P><BR></P>
<P><SPAN style="WHITE-SPACE: pre"></SPAN>&#32534;&#35793;&#22120;&#23545;&#25152;&#26377;&#30340;machine_init&#36827;&#34892;&#22788;&#29702;&#65292;&#20415;&#29983;&#25104;&#20102;&#30001;init_type_list[MODULE_INIT_MACHINE]&#25351;&#31034;&#30340;&#38142;&#34920;&#12290;</P>
<P><SPAN style="WHITE-SPACE: pre"></SPAN></P>
<H3><A name=t4></A><SPAN style="WHITE-SPACE: pre"></SPAN>2.3.2 machine&#38142;&#34920;&#29983;&#25104;</H3>
<DIV><SPAN style="WHITE-SPACE: pre"></SPAN>
<P><SPAN style="WHITE-SPACE: pre"></SPAN>main&#20989;&#25968;&#36890;&#36807;module_call_init(MODULE_INIT_MACHINE)&#26469;&#35843;&#29992;init_type_list[MODULE_INIT_MACHINE]&#20013;&#27599;&#20010;&#33410;&#28857;&#30340;&#21021;&#22987;&#21270;&#20989;&#25968;[board]_machine_init&#26469;&#27880;&#20876;&#27599;&#20010;&#33410;&#28857;&#23545;&#24212;&#30340;machine&#30340;&#25968;&#25454;&#32467;&#26500;&#21040;machine&#38431;&#21015;&#20013;&#12290;&#20854;&#36807;&#31243;&#22914;&#19979;&#22270;&#25152;&#31034;&#12290;</P></DIV>
<DIV style="TEXT-ALIGN: center"><IMG style="HEIGHT: 527px; WIDTH: 332px" alt="" src="http://img.blog.csdn.net/20150723220442607?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" width=210 height=352></DIV>
<P style="TEXT-ALIGN: left"></P>
<P><SPAN style="WHITE-SPACE: pre"></SPAN>&#36890;&#36807;&#19978;&#22270;&#25152;&#31034;&#36807;&#31243;&#65292;qemu&#20013;&#20415;&#29983;&#25104;&#20102;machine&#38142;&#34920;&#65292;&#35760;&#24405;&#20102;&#27599;&#20010;machine&#30340;&#22522;&#26412;&#20449;&#24687;&#12290;</P>
<P><SPAN style="WHITE-SPACE: pre"></SPAN>&#25317;&#26377;&#20102;&#27599;&#20010;machine&#30340;&#22522;&#26412;&#20449;&#24687;&#65292;&#22312;&#36816;&#34892;&#26102;&#23601;&#21487;&#26681;&#25454;-machine&#21442;&#25968;&#25214;&#21040;&#25351;&#23450;&#30340;machine&#36827;&#34892;&#21021;&#22987;&#21270;&#12290;&#19981;&#23384;&#22312;-machine&#21442;&#25968;&#26102;&#65292;&#23558;&#40664;&#35748;machine&#20316;&#20026;&#35201;&#36816;&#34892;&#30340;&#24320;&#21457;&#26495;&#12290;&#20043;&#21518;&#20877;&#35843;&#29992;&#36873;&#23450;machine&#30340;&#21021;&#22987;&#21270;&#20989;&#25968;&#12290;machine&#30340;&#21021;&#22987;&#21270;&#36807;&#31243;&#22312;&#19979;&#33410;&#20013;&#20171;&#32461;&#12290;</P>
<DIV style="TEXT-ALIGN: center"><IMG style="HEIGHT: 382px; WIDTH: 153px" alt="" src="http://img.blog.csdn.net/20150723220610805?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" width=97 height=219></DIV>
<P style="TEXT-ALIGN: left"><BR></P>
<H2 style="TEXT-ALIGN: left"><A name=t5></A><SPAN style="WHITE-SPACE: pre"></SPAN>2.4 machine&#21021;&#22987;&#21270;</H2>
<P style="TEXT-ALIGN: left"><SPAN style="WHITE-SPACE: pre"></SPAN></P>
<P><SPAN style="WHITE-SPACE: pre"></SPAN>&#27492;&#22788;&#20197;arm&#30340;integrator/CP&#24320;&#21457;&#26495;&#20026;&#20363;&#20171;&#32461;machine&#30340;&#21021;&#22987;&#21270;&#36807;&#31243;&#12290;</P>
<P style="TEXT-ALIGN: center"><IMG style="HEIGHT: 692px; WIDTH: 512px" alt="" src="http://img.blog.csdn.net/20150723220916388?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" width=381 height=560><BR></P>
<P><BR></P>
<P></P>
<P><SPAN style="WHITE-SPACE: pre"></SPAN>&#19981;&#35770;&#26159;&#24635;&#32447;&#36824;&#26159;&#20013;&#26029;&#25511;&#21046;&#22120;&#37117;&#21487;&#30475;&#20570;&#35774;&#22791;&#65292;&#35774;&#22791;&#21019;&#24314;&#36807;&#31243;&#20197;&#21450;&#35774;&#22791;&#22914;&#20309;&#36830;&#25509;&#24635;&#32447;&#23558;&#22312;&#35774;&#22791;&#26426;&#21046;&#20013;&#20171;&#32461;&#12290;</P></DIV></DIV>