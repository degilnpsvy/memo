# qemu:include/exec/tb-context.h 
<P></P>
<P>&nbsp;</P>
<P>/*<BR>&nbsp;* Internal structs that QEMU exports to TCG<BR>&nbsp;*<BR>&nbsp;*&nbsp; Copyright (c) 2003 Fabrice Bellard<BR>&nbsp;*<BR>&nbsp;* This library is free software; you can redistribute it and/or<BR>&nbsp;* modify it under the terms of the GNU Lesser General Public<BR>&nbsp;* License as published by the Free Software Foundation; either<BR>&nbsp;* version 2 of the License, or (at your option) any later version.<BR>&nbsp;*<BR>&nbsp;* This library is distributed in the hope that it will be useful,<BR>&nbsp;* but WITHOUT ANY WARRANTY; without even the implied warranty of<BR>&nbsp;* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.&nbsp; See the GNU<BR>&nbsp;* Lesser General Public License for more details.<BR>&nbsp;*<BR>&nbsp;* You should have received a copy of the GNU Lesser General Public<BR>&nbsp;* License along with this library; if not, see &lt;<A href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</A>&gt;.<BR>&nbsp;*/</P>
<P></P>
<P>#ifndef QEMU_TB_CONTEXT_H<BR>#define QEMU_TB_CONTEXT_H</P>
<P>#include "qemu/thread.h"<BR>#include "qemu/qht.h"</P>
<P>#define CODE_GEN_HTABLE_BITS&nbsp;&nbsp;&nbsp;&nbsp; 15<BR>#define CODE_GEN_HTABLE_SIZE&nbsp;&nbsp;&nbsp;&nbsp; (1 &lt;&lt; CODE_GEN_HTABLE_BITS)</P>
<P>typedef struct TranslationBlock TranslationBlock;<BR>typedef struct TBContext TBContext;</P>
<P>struct TBContext {</P>
<P>&nbsp;&nbsp;&nbsp; TranslationBlock *tbs;<BR>&nbsp;&nbsp;&nbsp; struct qht htable;<BR>&nbsp;&nbsp;&nbsp; int nb_tbs;<BR>&nbsp;&nbsp;&nbsp; /* any access to the tbs or the page table must use this lock */<BR>&nbsp;&nbsp;&nbsp; QemuMutex tb_lock;</P>
<P>&nbsp;&nbsp;&nbsp; /* statistics */<BR>&nbsp;&nbsp;&nbsp; unsigned tb_flush_count;<BR>&nbsp;&nbsp;&nbsp; int tb_phys_invalidate_count;<BR>};</P>
<P>#endif