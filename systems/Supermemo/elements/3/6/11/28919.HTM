<A href="http://172.21.12.145:8080/source/xref/linux-4.5/include/linux/workqueue.h#queue_work"><FONT color=#0000ff size=5 face=Calibri>queue_work</FONT></A><FONT size=5 face=Calibri>(</FONT><A href="http://172.21.12.145:8080/source/s?defs=system_wq&amp;project=linux-4.5"><FONT color=#0000ff size=5 face=Calibri>system_wq</FONT></A><FONT size=5 face=Calibri>, </FONT><A href="http://172.21.12.145:8080/source/s?defs=work&amp;project=linux-4.5"><FONT color=#0000ff size=5 face=Calibri>work</FONT></A><FONT size=5 face=Calibri>)</FONT> 
<P></P>
<P><FONT size=5 face=Calibri></FONT>&nbsp;</P>
<P><A name=460></A><A href="http://172.21.12.145:8080/source/xref/linux-4.5/include/linux/workqueue.h#460"><FONT color=#0000ff><FONT face=Calibri><FONT size=5><SPAN style="mso-bookmark: 460"><SPAN lang=EN-US>460</SPAN></SPAN><SPAN style="mso-bookmark: 460"></SPAN></FONT></FONT></FONT></A><SPAN style="mso-bookmark: 460"></SPAN><SPAN lang=EN-US><FONT size=5 face=Calibri>/**</FONT></SPAN></P>
<P><A name=461></A><A href="http://172.21.12.145:8080/source/xref/linux-4.5/include/linux/workqueue.h#461"><FONT color=#0000ff><FONT face=Calibri><FONT size=5><SPAN style="mso-bookmark: 461"><SPAN lang=EN-US>461</SPAN></SPAN><SPAN style="mso-bookmark: 461"></SPAN></FONT></FONT></FONT></A><SPAN style="mso-bookmark: 461"></SPAN><SPAN lang=EN-US><FONT size=5 face=Calibri> * queue_work - queue work on a workqueue</FONT></SPAN></P>
<P><A name=462></A><A href="http://172.21.12.145:8080/source/xref/linux-4.5/include/linux/workqueue.h#462"><FONT color=#0000ff><FONT face=Calibri><FONT size=5><SPAN style="mso-bookmark: 462"><SPAN lang=EN-US>462</SPAN></SPAN><SPAN style="mso-bookmark: 462"></SPAN></FONT></FONT></FONT></A><SPAN style="mso-bookmark: 462"></SPAN><SPAN lang=EN-US><FONT size=5 face=Calibri> * @wq: workqueue to use</FONT></SPAN></P>
<P><A name=463></A><A href="http://172.21.12.145:8080/source/xref/linux-4.5/include/linux/workqueue.h#463"><FONT color=#0000ff><FONT face=Calibri><FONT size=5><SPAN style="mso-bookmark: 463"><SPAN lang=EN-US>463</SPAN></SPAN><SPAN style="mso-bookmark: 463"></SPAN></FONT></FONT></FONT></A><SPAN style="mso-bookmark: 463"></SPAN><SPAN lang=EN-US><FONT size=5 face=Calibri> * @work: work to queue</FONT></SPAN></P>
<P><A name=464></A><A href="http://172.21.12.145:8080/source/xref/linux-4.5/include/linux/workqueue.h#464"><FONT color=#0000ff><FONT face=Calibri><FONT size=5><SPAN style="mso-bookmark: 464"><SPAN lang=EN-US>464</SPAN></SPAN><SPAN style="mso-bookmark: 464"></SPAN></FONT></FONT></FONT></A><SPAN style="mso-bookmark: 464"></SPAN><SPAN lang=EN-US><FONT size=5 face=Calibri> *</FONT></SPAN></P>
<P><A name=465></A><A href="http://172.21.12.145:8080/source/xref/linux-4.5/include/linux/workqueue.h#465"><FONT color=#0000ff><FONT face=Calibri><FONT size=5><SPAN style="mso-bookmark: 465"><SPAN lang=EN-US>465</SPAN></SPAN><SPAN style="mso-bookmark: 465"></SPAN></FONT></FONT></FONT></A><SPAN style="mso-bookmark: 465"></SPAN><SPAN lang=EN-US><FONT size=5 face=Calibri> * Returns %false if @work was already on a queue, %true otherwise.</FONT></SPAN></P>
<P><A name=466></A><A href="http://172.21.12.145:8080/source/xref/linux-4.5/include/linux/workqueue.h#466"><FONT color=#0000ff><FONT face=Calibri><FONT size=5><SPAN style="mso-bookmark: 466"><SPAN lang=EN-US>466</SPAN></SPAN><SPAN style="mso-bookmark: 466"></SPAN></FONT></FONT></FONT></A><SPAN style="mso-bookmark: 466"></SPAN><SPAN lang=EN-US><FONT size=5 face=Calibri> *</FONT></SPAN></P>
<P><A name=467></A><A href="http://172.21.12.145:8080/source/xref/linux-4.5/include/linux/workqueue.h#467"><FONT color=#0000ff><FONT face=Calibri><FONT size=5><SPAN style="mso-bookmark: 467"><SPAN lang=EN-US>467</SPAN></SPAN><SPAN style="mso-bookmark: 467"></SPAN></FONT></FONT></FONT></A><SPAN style="mso-bookmark: 467"></SPAN><SPAN lang=EN-US><FONT size=5 face=Calibri> * We queue the work to the CPU on which it was submitted, but if the CPU dies</FONT></SPAN></P>
<P><A name=468></A><A href="http://172.21.12.145:8080/source/xref/linux-4.5/include/linux/workqueue.h#468"><FONT color=#0000ff><FONT face=Calibri><FONT size=5><SPAN style="mso-bookmark: 468"><SPAN lang=EN-US>468</SPAN></SPAN><SPAN style="mso-bookmark: 468"></SPAN></FONT></FONT></FONT></A><SPAN style="mso-bookmark: 468"></SPAN><SPAN lang=EN-US><FONT size=5 face=Calibri> * it can be processed by another CPU.</FONT></SPAN></P>
<P><A name=469></A><A href="http://172.21.12.145:8080/source/xref/linux-4.5/include/linux/workqueue.h#469"><FONT color=#0000ff><FONT face=Calibri><FONT size=5><SPAN style="mso-bookmark: 469"><SPAN lang=EN-US>469</SPAN></SPAN><SPAN style="mso-bookmark: 469"></SPAN></FONT></FONT></FONT></A><SPAN style="mso-bookmark: 469"></SPAN><SPAN lang=EN-US><FONT size=5 face=Calibri> */</FONT></SPAN></P>
<P><A name=470></A><A href="http://172.21.12.145:8080/source/xref/linux-4.5/include/linux/workqueue.h#470"><FONT color=#0000ff><FONT face=Calibri><FONT size=5><SPAN style="mso-bookmark: 470"><SPAN lang=EN-US>470</SPAN></SPAN><SPAN style="mso-bookmark: 470"></SPAN></FONT></FONT></FONT></A><SPAN style="mso-bookmark: 470"></SPAN><FONT face=Calibri><FONT size=5><B><SPAN lang=EN-US>static</SPAN></B><SPAN lang=EN-US> <B>inline</B> <B>bool</B> <A name=queue_work></A><A href="http://172.21.12.145:8080/source/s?refs=queue_work&amp;project=linux-4.5"><FONT color=#0000ff>queue_work</FONT></A>(<B>struct</B> <A href="http://172.21.12.145:8080/source/s?defs=workqueue_struct&amp;project=linux-4.5"><FONT color=#0000ff>workqueue_struct</FONT></A> *<A href="http://172.21.12.145:8080/source/s?refs=wq&amp;project=linux-4.5"><FONT color=#0000ff>wq</FONT></A>,</SPAN></FONT></FONT></P>
<P><A name=471></A><A href="http://172.21.12.145:8080/source/xref/linux-4.5/include/linux/workqueue.h#471"><FONT color=#0000ff><FONT face=Calibri><FONT size=5><SPAN style="mso-bookmark: 471"><SPAN lang=EN-US>471</SPAN></SPAN><SPAN style="mso-bookmark: 471"></SPAN></FONT></FONT></FONT></A><SPAN style="mso-bookmark: 471"></SPAN><SPAN lang=EN-US><FONT face=Calibri><FONT size=5><SPAN style="mso-tab-count: 3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN><B>struct</B> </FONT></FONT><A href="http://172.21.12.145:8080/source/xref/linux-4.5/include/linux/workqueue.h#work_struct"><FONT color=#0000ff size=5 face=Calibri>work_struct</FONT></A><FONT size=5 face=Calibri> *</FONT><A href="http://172.21.12.145:8080/source/s?defs=work&amp;project=linux-4.5"><FONT color=#0000ff size=5 face=Calibri>work</FONT></A><FONT size=5 face=Calibri>)</FONT></SPAN></P>
<P><A name=472></A><A href="http://172.21.12.145:8080/source/xref/linux-4.5/include/linux/workqueue.h#472"><FONT color=#0000ff><FONT face=Calibri><FONT size=5><SPAN style="mso-bookmark: 472"><SPAN lang=EN-US>472</SPAN></SPAN><SPAN style="mso-bookmark: 472"></SPAN></FONT></FONT></FONT></A><SPAN style="mso-bookmark: 472"></SPAN><SPAN lang=EN-US><FONT size=5 face=Calibri>{</FONT></SPAN></P>
<P><A name=473></A><A href="http://172.21.12.145:8080/source/xref/linux-4.5/include/linux/workqueue.h#473"><FONT color=#0000ff><FONT face=Calibri><FONT size=5><SPAN style="mso-bookmark: 473"><SPAN lang=EN-US>473</SPAN></SPAN><SPAN style="mso-bookmark: 473"></SPAN></FONT></FONT></FONT></A><SPAN style="mso-bookmark: 473"></SPAN><SPAN lang=EN-US><FONT face=Calibri><FONT size=5><SPAN style="mso-tab-count: 1">&nbsp; </SPAN><B>return</B> </FONT></FONT><A href="http://172.21.12.145:8080/source/s?defs=queue_work_on&amp;project=linux-4.5"><FONT color=#0000ff size=5 face=Calibri>queue_work_on</FONT></A><FONT size=5 face=Calibri>(</FONT><A href="http://172.21.12.145:8080/source/xref/linux-4.5/include/linux/workqueue.h#WORK_CPU_UNBOUND"><FONT color=#0000ff size=5 face=Calibri>WORK_CPU_UNBOUND</FONT></A><FONT size=5 face=Calibri>, </FONT><A href="http://172.21.12.145:8080/source/s?defs=wq&amp;project=linux-4.5"><FONT color=#0000ff size=5 face=Calibri>wq</FONT></A><FONT size=5 face=Calibri>, </FONT><A href="http://172.21.12.145:8080/source/s?defs=work&amp;project=linux-4.5"><FONT color=#0000ff size=5 face=Calibri>work</FONT></A><FONT size=5 face=Calibri>);</FONT></SPAN></P>
<P><A name=474></A><A href="http://172.21.12.145:8080/source/xref/linux-4.5/include/linux/workqueue.h#474"><FONT color=#0000ff><FONT face=Calibri><FONT size=5><SPAN style="mso-bookmark: 474"><SPAN lang=EN-US>474</SPAN></SPAN><SPAN style="mso-bookmark: 474"></SPAN></FONT></FONT></FONT></A><SPAN style="mso-bookmark: 474"></SPAN><SPAN lang=EN-US><FONT size=5 face=Calibri>}</FONT></SPAN></P>
<P><SPAN lang=EN-US><FONT size=5 face=Calibri>&nbsp;</FONT></SPAN></P>
<P><SPAN lang=EN-US><A href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1463"><FONT color=#0000ff size=5 face=Calibri>1463</FONT></A><FONT size=5 face=Calibri>/**</FONT></SPAN></P>
<P><SPAN lang=EN-US><A href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1464"><FONT color=#0000ff size=5 face=Calibri>1464</FONT></A><FONT size=5 face=Calibri> * queue_work_on - queue work on specific cpu</FONT></SPAN></P>
<P><SPAN lang=EN-US><A href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1465"><FONT color=#0000ff size=5 face=Calibri>1465</FONT></A><FONT size=5 face=Calibri> * @cpu: CPU number to execute work on</FONT></SPAN></P>
<P><SPAN lang=EN-US><A href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1466"><FONT color=#0000ff size=5 face=Calibri>1466</FONT></A><FONT size=5 face=Calibri> * @wq: workqueue to use</FONT></SPAN></P>
<P><SPAN lang=EN-US><A href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1467"><FONT color=#0000ff size=5 face=Calibri>1467</FONT></A><FONT size=5 face=Calibri> * @work: work to queue</FONT></SPAN></P>
<P><SPAN lang=EN-US><A href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1468"><FONT color=#0000ff size=5 face=Calibri>1468</FONT></A><FONT size=5 face=Calibri> *</FONT></SPAN></P>
<P><SPAN lang=EN-US><A href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1469"><FONT color=#0000ff size=5 face=Calibri>1469</FONT></A><FONT size=5 face=Calibri> * We queue the work to a specific CPU, the caller must ensure it</FONT></SPAN></P>
<P><SPAN lang=EN-US><A href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1470"><FONT color=#0000ff size=5 face=Calibri>1470</FONT></A><FONT size=5 face=Calibri> * can't go away.</FONT></SPAN></P>
<P><SPAN lang=EN-US><A href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1471"><FONT color=#0000ff size=5 face=Calibri>1471</FONT></A><FONT size=5 face=Calibri> *</FONT></SPAN></P>
<P><SPAN lang=EN-US><A href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1472"><FONT color=#0000ff size=5 face=Calibri>1472</FONT></A><FONT size=5 face=Calibri> * Return: %false if @work was already on a queue, %true otherwise.</FONT></SPAN></P>
<P><SPAN lang=EN-US><A href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1473"><FONT color=#0000ff size=5 face=Calibri>1473</FONT></A><FONT size=5 face=Calibri> */</FONT></SPAN></P>
<P><SPAN lang=EN-US><A href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1474"><FONT color=#0000ff size=5 face=Calibri>1474</FONT></A><FONT face=Calibri><FONT size=5><B>bool</B> </FONT></FONT><A href="http://172.21.12.145:8080/source/s?refs=queue_work_on&amp;project=linux-4.5"><FONT color=#0000ff size=5 face=Calibri>queue_work_on</FONT></A><FONT size=5 face=Calibri>(<B>int</B> </FONT><A href="http://172.21.12.145:8080/source/s?refs=cpu&amp;project=linux-4.5"><FONT color=#0000ff size=5 face=Calibri>cpu</FONT></A><FONT size=5 face=Calibri>, <B>struct</B> </FONT><A href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#workqueue_struct"><FONT color=#0000ff size=5 face=Calibri>workqueue_struct</FONT></A><FONT size=5 face=Calibri> *</FONT><A href="http://172.21.12.145:8080/source/s?refs=wq&amp;project=linux-4.5"><FONT color=#0000ff size=5 face=Calibri>wq</FONT></A><FONT size=5 face=Calibri>,</FONT></SPAN></P>
<P><SPAN lang=EN-US><A href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1475"><FONT color=#0000ff size=5 face=Calibri>1475</FONT></A><FONT face=Calibri><FONT size=5><SPAN style="mso-tab-count: 2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN><SPAN style="mso-spacerun: yes">&nbsp;&nbsp; </SPAN><B>struct</B> </FONT></FONT><A href="http://172.21.12.145:8080/source/s?defs=work_struct&amp;project=linux-4.5"><FONT color=#0000ff size=5 face=Calibri>work_struct</FONT></A><FONT size=5 face=Calibri> *</FONT><A href="http://172.21.12.145:8080/source/s?defs=work&amp;project=linux-4.5"><FONT color=#0000ff size=5 face=Calibri>work</FONT></A><FONT size=5 face=Calibri>)</FONT></SPAN></P>
<P><SPAN lang=EN-US><A href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1476"><FONT color=#0000ff size=5 face=Calibri>1476</FONT></A><FONT size=5 face=Calibri>{</FONT></SPAN></P>
<P><SPAN lang=EN-US><A href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1477"><FONT color=#0000ff size=5 face=Calibri>1477</FONT></A><FONT face=Calibri><FONT size=5><SPAN style="mso-tab-count: 1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN><B>bool</B> </FONT></FONT><A href="http://172.21.12.145:8080/source/s?refs=ret&amp;project=linux-4.5"><FONT color=#0000ff size=5 face=Calibri>ret</FONT></A><FONT size=5 face=Calibri> = <B>false</B>;</FONT></SPAN></P>
<P><SPAN lang=EN-US><A href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1478"><FONT color=#0000ff size=5 face=Calibri>1478</FONT></A><FONT face=Calibri><FONT size=5><SPAN style="mso-tab-count: 1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN><B>unsigned</B> <B>long</B> </FONT></FONT><A href="http://172.21.12.145:8080/source/s?refs=flags&amp;project=linux-4.5"><FONT color=#0000ff size=5 face=Calibri>flags</FONT></A><FONT size=5 face=Calibri>;</FONT></SPAN></P>
<P><SPAN lang=EN-US><A href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1479"><FONT color=#0000ff size=5 face=Calibri>1479</FONT></A></SPAN></P>
<P><SPAN lang=EN-US><A href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1480"><FONT color=#0000ff size=5 face=Calibri>1480</FONT></A><SPAN style="mso-tab-count: 1"><FONT size=5 face=Calibri>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </FONT></SPAN><A href="http://172.21.12.145:8080/source/s?defs=local_irq_save&amp;project=linux-4.5"><FONT color=#0000ff size=5 face=Calibri>local_irq_save</FONT></A><FONT size=5 face=Calibri>(</FONT><A href="http://172.21.12.145:8080/source/s?defs=flags&amp;project=linux-4.5"><FONT color=#0000ff size=5 face=Calibri>flags</FONT></A><FONT size=5 face=Calibri>);</FONT></SPAN></P>
<P><SPAN lang=EN-US><A href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1481"><FONT color=#0000ff size=5 face=Calibri>1481</FONT></A></SPAN></P>
<P><SPAN lang=EN-US><A href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1482"><FONT color=#0000ff size=5 face=Calibri>1482</FONT></A><FONT face=Calibri><FONT size=5><SPAN style="mso-tab-count: 1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN><B>if</B> (!</FONT></FONT><A href="http://172.21.12.145:8080/source/s?defs=test_and_set_bit&amp;project=linux-4.5"><FONT color=#0000ff size=5 face=Calibri>test_and_set_bit</FONT></A><FONT size=5 face=Calibri>(</FONT><A href="http://172.21.12.145:8080/source/s?defs=WORK_STRUCT_PENDING_BIT&amp;project=linux-4.5"><FONT color=#0000ff size=5 face=Calibri>WORK_STRUCT_PENDING_BIT</FONT></A><FONT size=5 face=Calibri>, </FONT><A href="http://172.21.12.145:8080/source/s?defs=work_data_bits&amp;project=linux-4.5"><FONT color=#0000ff size=5 face=Calibri>work_data_bits</FONT></A><FONT size=5 face=Calibri>(</FONT><A href="http://172.21.12.145:8080/source/s?defs=work&amp;project=linux-4.5"><FONT color=#0000ff size=5 face=Calibri>work</FONT></A><FONT size=5 face=Calibri>))) {</FONT></SPAN></P>
<P><SPAN lang=EN-US><A href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1483"><FONT color=#0000ff size=5 face=Calibri>1483</FONT></A><SPAN style="mso-tab-count: 2"><FONT size=5 face=Calibri>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </FONT></SPAN><A href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#__queue_work"><FONT color=#0000ff size=5 face=Calibri>__queue_work</FONT></A><FONT size=5 face=Calibri>(</FONT><A href="http://172.21.12.145:8080/source/s?defs=cpu&amp;project=linux-4.5"><FONT color=#0000ff size=5 face=Calibri>cpu</FONT></A><FONT size=5 face=Calibri>, </FONT><A href="http://172.21.12.145:8080/source/s?defs=wq&amp;project=linux-4.5"><FONT color=#0000ff size=5 face=Calibri>wq</FONT></A><FONT size=5 face=Calibri>, </FONT><A href="http://172.21.12.145:8080/source/s?defs=work&amp;project=linux-4.5"><FONT color=#0000ff size=5 face=Calibri>work</FONT></A><FONT size=5 face=Calibri>);</FONT></SPAN></P>
<P><SPAN lang=EN-US><A href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1484"><FONT color=#0000ff size=5 face=Calibri>1484</FONT></A><SPAN style="mso-tab-count: 2"><FONT size=5 face=Calibri>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </FONT></SPAN><A href="http://172.21.12.145:8080/source/s?defs=ret&amp;project=linux-4.5"><FONT color=#0000ff size=5 face=Calibri>ret</FONT></A><FONT size=5 face=Calibri> = <B>true</B>;</FONT></SPAN></P>
<P><SPAN lang=EN-US><A href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1485"><FONT color=#0000ff size=5 face=Calibri>1485</FONT></A><FONT face=Calibri><FONT size=5><SPAN style="mso-tab-count: 1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>}</FONT></FONT></SPAN></P>
<P><SPAN lang=EN-US><A href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1486"><FONT color=#0000ff size=5 face=Calibri>1486</FONT></A></SPAN></P>
<P><SPAN lang=EN-US><A href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1487"><FONT color=#0000ff size=5 face=Calibri>1487</FONT></A><SPAN style="mso-tab-count: 1"><FONT size=5 face=Calibri>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </FONT></SPAN><A href="http://172.21.12.145:8080/source/s?defs=local_irq_restore&amp;project=linux-4.5"><FONT color=#0000ff size=5 face=Calibri>local_irq_restore</FONT></A><FONT size=5 face=Calibri>(</FONT><A href="http://172.21.12.145:8080/source/s?defs=flags&amp;project=linux-4.5"><FONT color=#0000ff size=5 face=Calibri>flags</FONT></A><FONT size=5 face=Calibri>);</FONT></SPAN></P>
<P><SPAN lang=EN-US><A href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1488"><FONT color=#0000ff size=5 face=Calibri>1488</FONT></A><FONT face=Calibri><FONT size=5><SPAN style="mso-tab-count: 1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN><B>return</B> </FONT></FONT><A href="http://172.21.12.145:8080/source/s?defs=ret&amp;project=linux-4.5"><FONT color=#0000ff size=5 face=Calibri>ret</FONT></A><FONT size=5 face=Calibri>;</FONT></SPAN></P>
<P><SPAN lang=EN-US><A href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1489"><FONT color=#0000ff size=5 face=Calibri>1489</FONT></A><FONT size=5 face=Calibri>}</FONT></SPAN></P>
<P><SPAN lang=EN-US><A href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1490"><FONT color=#0000ff size=5 face=Calibri>1490</FONT></A><A href="http://172.21.12.145:8080/source/s?defs=EXPORT_SYMBOL&amp;project=linux-4.5"><FONT color=#0000ff size=5 face=Calibri>EXPORT_SYMBOL</FONT></A><FONT size=5 face=Calibri>(</FONT><A href="http://172.21.12.145:8080/source/s?refs=queue_work_on&amp;project=linux-4.5"><FONT color=#0000ff size=5 face=Calibri>queue_work_on</FONT></A><FONT size=5 face=Calibri>);</FONT></SPAN></P>
<P><FONT face=Calibri><FONT size=5><SPAN lang=EN-US></SPAN></FONT></FONT>&nbsp;<PRE><A class=hl href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1360" name=1360>1360</A><B>static</B> <B>void</B> <A class=xf name=__queue_work></A><A class=xf href="http://172.21.12.145:8080/source/s?refs=__queue_work&amp;project=linux-4.5">__queue_work</A>(<B>int</B> <A class=xa name=cpu></A><A class=xa href="http://172.21.12.145:8080/source/s?refs=cpu&amp;project=linux-4.5">cpu</A>, <B>struct</B> <A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#workqueue_struct">workqueue_struct</A> *<A class=xa name=wq></A><A class=xa href="http://172.21.12.145:8080/source/s?refs=wq&amp;project=linux-4.5">wq</A>,
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1361" name=1361>1361</A>			 <B>struct</B> <A href="http://172.21.12.145:8080/source/s?defs=work_struct&amp;project=linux-4.5">work_struct</A> *<A href="http://172.21.12.145:8080/source/s?defs=work&amp;project=linux-4.5">work</A>)
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1362" name=1362>1362</A>{
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1363" name=1363>1363</A>	<B>struct</B> <A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#pool_workqueue">pool_workqueue</A> *<A class=xl name=pwq></A><A class=xl href="http://172.21.12.145:8080/source/s?refs=pwq&amp;project=linux-4.5">pwq</A>;
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1364" name=1364>1364</A>	<B>struct</B> <A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#worker_pool">worker_pool</A> *<A class=xl name=last_pool></A><A class=xl href="http://172.21.12.145:8080/source/s?refs=last_pool&amp;project=linux-4.5">last_pool</A>;
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1365" name=1365>1365</A>	<B>struct</B> <A href="http://172.21.12.145:8080/source/s?defs=list_head&amp;project=linux-4.5">list_head</A> *<A class=xl name=worklist></A><A class=xl href="http://172.21.12.145:8080/source/s?refs=worklist&amp;project=linux-4.5">worklist</A>;
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1366" name=1366>1366</A>	<B>unsigned</B> <B>int</B> <A class=xl name=work_flags></A><A class=xl href="http://172.21.12.145:8080/source/s?refs=work_flags&amp;project=linux-4.5">work_flags</A>;
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1367" name=1367>1367</A>	<B>unsigned</B> <B>int</B> <A class=xl name=req_cpu></A><A class=xl href="http://172.21.12.145:8080/source/s?refs=req_cpu&amp;project=linux-4.5">req_cpu</A> = <A href="http://172.21.12.145:8080/source/s?defs=cpu&amp;project=linux-4.5">cpu</A>;
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1368" name=1368>1368</A>
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1369" name=1369>1369</A>	<SPAN class=c>/*
<A class=hl href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1370" name=1370>1370</A>	 * While a work item is PENDING &amp;&amp; off queue, a task trying to
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1371" name=1371>1371</A>	 * steal the PENDING will busy-loop waiting for it to either get
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1372" name=1372>1372</A>	 * queued or lose PENDING.  Grabbing PENDING and queueing should
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1373" name=1373>1373</A>	 * happen with IRQ disabled.
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1374" name=1374>1374</A>	 */</SPAN>
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1375" name=1375>1375</A>	<A href="http://172.21.12.145:8080/source/s?defs=WARN_ON_ONCE&amp;project=linux-4.5">WARN_ON_ONCE</A>(!<A href="http://172.21.12.145:8080/source/s?defs=irqs_disabled&amp;project=linux-4.5">irqs_disabled</A>());
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1376" name=1376>1376</A>
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1377" name=1377>1377</A>	<A href="http://172.21.12.145:8080/source/s?defs=debug_work_activate&amp;project=linux-4.5">debug_work_activate</A>(<A href="http://172.21.12.145:8080/source/s?defs=work&amp;project=linux-4.5">work</A>);
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1378" name=1378>1378</A>
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1379" name=1379>1379</A>	<SPAN class=c>/* if draining, only works from the same workqueue are allowed */</SPAN>
<A class=hl href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1380" name=1380>1380</A>	<B>if</B> (<A href="http://172.21.12.145:8080/source/s?defs=unlikely&amp;project=linux-4.5">unlikely</A>(<A href="http://172.21.12.145:8080/source/s?defs=wq&amp;project=linux-4.5">wq</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=flags&amp;project=linux-4.5">flags</A> &amp; <A href="http://172.21.12.145:8080/source/s?defs=__WQ_DRAINING&amp;project=linux-4.5">__WQ_DRAINING</A>) &amp;&amp;
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1381" name=1381>1381</A>	    <A href="http://172.21.12.145:8080/source/s?defs=WARN_ON_ONCE&amp;project=linux-4.5">WARN_ON_ONCE</A>(!<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#is_chained_work">is_chained_work</A>(<A href="http://172.21.12.145:8080/source/s?defs=wq&amp;project=linux-4.5">wq</A>)))
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1382" name=1382>1382</A>		<B>return</B>;
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1383" name=1383>1383</A><A href="http://172.21.12.145:8080/source/s?defs=retry&amp;project=linux-4.5">retry</A>:
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1384" name=1384>1384</A>	<B>if</B> (<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#req_cpu">req_cpu</A> == <A href="http://172.21.12.145:8080/source/s?defs=WORK_CPU_UNBOUND&amp;project=linux-4.5">WORK_CPU_UNBOUND</A>)
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1385" name=1385>1385</A>		<A href="http://172.21.12.145:8080/source/s?defs=cpu&amp;project=linux-4.5">cpu</A> = <A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#wq_select_unbound_cpu">wq_select_unbound_cpu</A>(<A href="http://172.21.12.145:8080/source/s?defs=raw_smp_processor_id&amp;project=linux-4.5">raw_smp_processor_id</A>());
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1386" name=1386>1386</A>
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1387" name=1387>1387</A>	<SPAN class=c>/* pwq which will be used unless @work is executing elsewhere */</SPAN>
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1388" name=1388>1388</A>	<B>if</B> (!(<A href="http://172.21.12.145:8080/source/s?defs=wq&amp;project=linux-4.5">wq</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=flags&amp;project=linux-4.5">flags</A> &amp; <A href="http://172.21.12.145:8080/source/s?defs=WQ_UNBOUND&amp;project=linux-4.5">WQ_UNBOUND</A>))
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1389" name=1389>1389</A>		<A href="http://172.21.12.145:8080/source/s?defs=pwq&amp;project=linux-4.5">pwq</A> = <A href="http://172.21.12.145:8080/source/s?defs=per_cpu_ptr&amp;project=linux-4.5">per_cpu_ptr</A>(<A href="http://172.21.12.145:8080/source/s?defs=wq&amp;project=linux-4.5">wq</A>-&gt;<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#cpu_pwqs">cpu_pwqs</A>, <A href="http://172.21.12.145:8080/source/s?defs=cpu&amp;project=linux-4.5">cpu</A>);
<A class=hl href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1390" name=1390>1390</A>	<B>else</B>
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1391" name=1391>1391</A>		<A href="http://172.21.12.145:8080/source/s?defs=pwq&amp;project=linux-4.5">pwq</A> = <A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#unbound_pwq_by_node">unbound_pwq_by_node</A>(<A href="http://172.21.12.145:8080/source/s?defs=wq&amp;project=linux-4.5">wq</A>, <A href="http://172.21.12.145:8080/source/s?defs=cpu_to_node&amp;project=linux-4.5">cpu_to_node</A>(<A href="http://172.21.12.145:8080/source/s?defs=cpu&amp;project=linux-4.5">cpu</A>));
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1392" name=1392>1392</A>
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1393" name=1393>1393</A>	<SPAN class=c>/*
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1394" name=1394>1394</A>	 * If @work was previously on a different pool, it might still be
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1395" name=1395>1395</A>	 * running there, in which case the work needs to be queued on that
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1396" name=1396>1396</A>	 * pool to guarantee non-reentrancy.
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1397" name=1397>1397</A>	 */</SPAN>
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1398" name=1398>1398</A>	<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#last_pool">last_pool</A> = <A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#get_work_pool">get_work_pool</A>(<A href="http://172.21.12.145:8080/source/s?defs=work&amp;project=linux-4.5">work</A>);
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1399" name=1399>1399</A>	<B>if</B> (<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#last_pool">last_pool</A> &amp;&amp; <A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#last_pool">last_pool</A> != <A href="http://172.21.12.145:8080/source/s?defs=pwq&amp;project=linux-4.5">pwq</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=pool&amp;project=linux-4.5">pool</A>) {
<A class=hl href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1400" name=1400>1400</A>		<B>struct</B> <A class=xl name=worker></A><A class=xl href="http://172.21.12.145:8080/source/s?refs=worker&amp;project=linux-4.5">worker</A> *<A class=xl name=worker></A><A class=xl href="http://172.21.12.145:8080/source/s?refs=worker&amp;project=linux-4.5">worker</A>;
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1401" name=1401>1401</A>
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1402" name=1402>1402</A>		<A href="http://172.21.12.145:8080/source/s?defs=spin_lock&amp;project=linux-4.5">spin_lock</A>(&amp;<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#last_pool">last_pool</A>-&gt;<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#lock">lock</A>);
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1403" name=1403>1403</A>
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1404" name=1404>1404</A>		<A href="http://172.21.12.145:8080/source/s?defs=worker&amp;project=linux-4.5">worker</A> = <A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#find_worker_executing_work">find_worker_executing_work</A>(<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#last_pool">last_pool</A>, <A href="http://172.21.12.145:8080/source/s?defs=work&amp;project=linux-4.5">work</A>);
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1405" name=1405>1405</A>
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1406" name=1406>1406</A>		<B>if</B> (<A href="http://172.21.12.145:8080/source/s?defs=worker&amp;project=linux-4.5">worker</A> &amp;&amp; <A href="http://172.21.12.145:8080/source/s?defs=worker&amp;project=linux-4.5">worker</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=current_pwq&amp;project=linux-4.5">current_pwq</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=wq&amp;project=linux-4.5">wq</A> == <A href="http://172.21.12.145:8080/source/s?defs=wq&amp;project=linux-4.5">wq</A>) {
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1407" name=1407>1407</A>			<A href="http://172.21.12.145:8080/source/s?defs=pwq&amp;project=linux-4.5">pwq</A> = <A href="http://172.21.12.145:8080/source/s?defs=worker&amp;project=linux-4.5">worker</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=current_pwq&amp;project=linux-4.5">current_pwq</A>;
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1408" name=1408>1408</A>		} <B>else</B> {
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1409" name=1409>1409</A>			<SPAN class=c>/* meh... not running there, queue here */</SPAN>
<A class=hl href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1410" name=1410>1410</A>			<A href="http://172.21.12.145:8080/source/s?defs=spin_unlock&amp;project=linux-4.5">spin_unlock</A>(&amp;<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#last_pool">last_pool</A>-&gt;<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#lock">lock</A>);
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1411" name=1411>1411</A>			<A href="http://172.21.12.145:8080/source/s?defs=spin_lock&amp;project=linux-4.5">spin_lock</A>(&amp;<A href="http://172.21.12.145:8080/source/s?defs=pwq&amp;project=linux-4.5">pwq</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=pool&amp;project=linux-4.5">pool</A>-&gt;<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#lock">lock</A>);
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1412" name=1412>1412</A>		}
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1413" name=1413>1413</A>	} <B>else</B> {
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1414" name=1414>1414</A>		<A href="http://172.21.12.145:8080/source/s?defs=spin_lock&amp;project=linux-4.5">spin_lock</A>(&amp;<A href="http://172.21.12.145:8080/source/s?defs=pwq&amp;project=linux-4.5">pwq</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=pool&amp;project=linux-4.5">pool</A>-&gt;<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#lock">lock</A>);
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1415" name=1415>1415</A>	}
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1416" name=1416>1416</A>
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1417" name=1417>1417</A>	<SPAN class=c>/*
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1418" name=1418>1418</A>	 * pwq is determined and locked.  For unbound pools, we could have
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1419" name=1419>1419</A>	 * raced with pwq release and it could already be dead.  If its
<A class=hl href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1420" name=1420>1420</A>	 * refcnt is zero, repeat pwq selection.  Note that pwqs never die
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1421" name=1421>1421</A>	 * without another pwq replacing it in the numa_pwq_tbl or while
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1422" name=1422>1422</A>	 * work items are executing on it, so the retrying is guaranteed to
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1423" name=1423>1423</A>	 * make forward-progress.
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1424" name=1424>1424</A>	 */</SPAN>
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1425" name=1425>1425</A>	<B>if</B> (<A href="http://172.21.12.145:8080/source/s?defs=unlikely&amp;project=linux-4.5">unlikely</A>(!<A href="http://172.21.12.145:8080/source/s?defs=pwq&amp;project=linux-4.5">pwq</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=refcnt&amp;project=linux-4.5">refcnt</A>)) {
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1426" name=1426>1426</A>		<B>if</B> (<A href="http://172.21.12.145:8080/source/s?defs=wq&amp;project=linux-4.5">wq</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=flags&amp;project=linux-4.5">flags</A> &amp; <A href="http://172.21.12.145:8080/source/s?defs=WQ_UNBOUND&amp;project=linux-4.5">WQ_UNBOUND</A>) {
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1427" name=1427>1427</A>			<A href="http://172.21.12.145:8080/source/s?defs=spin_unlock&amp;project=linux-4.5">spin_unlock</A>(&amp;<A href="http://172.21.12.145:8080/source/s?defs=pwq&amp;project=linux-4.5">pwq</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=pool&amp;project=linux-4.5">pool</A>-&gt;<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#lock">lock</A>);
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1428" name=1428>1428</A>			<A href="http://172.21.12.145:8080/source/s?defs=cpu_relax&amp;project=linux-4.5">cpu_relax</A>();
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1429" name=1429>1429</A>			<B>goto</B> <A href="http://172.21.12.145:8080/source/s?defs=retry&amp;project=linux-4.5">retry</A>;
<A class=hl href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1430" name=1430>1430</A>		}
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1431" name=1431>1431</A>		<SPAN class=c>/* oops */</SPAN>
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1432" name=1432>1432</A>		<A href="http://172.21.12.145:8080/source/s?defs=WARN_ONCE&amp;project=linux-4.5">WARN_ONCE</A>(<B>true</B>, <SPAN class=s>"workqueue: per-cpu pwq for %s on cpu%d has 0 refcnt"</SPAN>,
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1433" name=1433>1433</A>			  <A href="http://172.21.12.145:8080/source/s?defs=wq&amp;project=linux-4.5">wq</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=name&amp;project=linux-4.5">name</A>, <A href="http://172.21.12.145:8080/source/s?defs=cpu&amp;project=linux-4.5">cpu</A>);
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1434" name=1434>1434</A>	}
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1435" name=1435>1435</A>
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1436" name=1436>1436</A>	<SPAN class=c>/* pwq determined, queue */</SPAN>
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1437" name=1437>1437</A>	<A href="http://172.21.12.145:8080/source/s?defs=trace_workqueue_queue_work&amp;project=linux-4.5">trace_workqueue_queue_work</A>(<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#req_cpu">req_cpu</A>, <A href="http://172.21.12.145:8080/source/s?defs=pwq&amp;project=linux-4.5">pwq</A>, <A href="http://172.21.12.145:8080/source/s?defs=work&amp;project=linux-4.5">work</A>);
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1438" name=1438>1438</A>
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1439" name=1439>1439</A>	<B>if</B> (<A href="http://172.21.12.145:8080/source/s?defs=WARN_ON&amp;project=linux-4.5">WARN_ON</A>(!<A href="http://172.21.12.145:8080/source/s?defs=list_empty&amp;project=linux-4.5">list_empty</A>(&amp;<A href="http://172.21.12.145:8080/source/s?defs=work&amp;project=linux-4.5">work</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=entry&amp;project=linux-4.5">entry</A>))) {
<A class=hl href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1440" name=1440>1440</A>		<A href="http://172.21.12.145:8080/source/s?defs=spin_unlock&amp;project=linux-4.5">spin_unlock</A>(&amp;<A href="http://172.21.12.145:8080/source/s?defs=pwq&amp;project=linux-4.5">pwq</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=pool&amp;project=linux-4.5">pool</A>-&gt;<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#lock">lock</A>);
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1441" name=1441>1441</A>		<B>return</B>;
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1442" name=1442>1442</A>	}
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1443" name=1443>1443</A>
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1444" name=1444>1444</A>	<A href="http://172.21.12.145:8080/source/s?defs=pwq&amp;project=linux-4.5">pwq</A>-&gt;<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#nr_in_flight">nr_in_flight</A>[<A href="http://172.21.12.145:8080/source/s?defs=pwq&amp;project=linux-4.5">pwq</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=work_color&amp;project=linux-4.5">work_color</A>]++;
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1445" name=1445>1445</A>	<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#work_flags">work_flags</A> = <A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#work_color_to_flags">work_color_to_flags</A>(<A href="http://172.21.12.145:8080/source/s?defs=pwq&amp;project=linux-4.5">pwq</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=work_color&amp;project=linux-4.5">work_color</A>);
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1446" name=1446>1446</A>
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1447" name=1447>1447</A>	<B>if</B> (<A href="http://172.21.12.145:8080/source/s?defs=likely&amp;project=linux-4.5">likely</A>(<A href="http://172.21.12.145:8080/source/s?defs=pwq&amp;project=linux-4.5">pwq</A>-&gt;<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#nr_active">nr_active</A> &lt; <A href="http://172.21.12.145:8080/source/s?defs=pwq&amp;project=linux-4.5">pwq</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=max_active&amp;project=linux-4.5">max_active</A>)) {
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1448" name=1448>1448</A>		<A href="http://172.21.12.145:8080/source/s?defs=trace_workqueue_activate_work&amp;project=linux-4.5">trace_workqueue_activate_work</A>(<A href="http://172.21.12.145:8080/source/s?defs=work&amp;project=linux-4.5">work</A>);
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1449" name=1449>1449</A>		<A href="http://172.21.12.145:8080/source/s?defs=pwq&amp;project=linux-4.5">pwq</A>-&gt;<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#nr_active">nr_active</A>++;
<A class=hl href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1450" name=1450>1450</A>		<A href="http://172.21.12.145:8080/source/s?defs=worklist&amp;project=linux-4.5">worklist</A> = &amp;<A href="http://172.21.12.145:8080/source/s?defs=pwq&amp;project=linux-4.5">pwq</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=pool&amp;project=linux-4.5">pool</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=worklist&amp;project=linux-4.5">worklist</A>;
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1451" name=1451>1451</A>		<B>if</B> (<A href="http://172.21.12.145:8080/source/s?defs=list_empty&amp;project=linux-4.5">list_empty</A>(<A href="http://172.21.12.145:8080/source/s?defs=worklist&amp;project=linux-4.5">worklist</A>))
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1452" name=1452>1452</A>			<A href="http://172.21.12.145:8080/source/s?defs=pwq&amp;project=linux-4.5">pwq</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=pool&amp;project=linux-4.5">pool</A>-&gt;<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#watchdog_ts">watchdog_ts</A> = <A href="http://172.21.12.145:8080/source/s?defs=jiffies&amp;project=linux-4.5">jiffies</A>;
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1453" name=1453>1453</A>	} <B>else</B> {
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1454" name=1454>1454</A>		<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#work_flags">work_flags</A> |= <A href="http://172.21.12.145:8080/source/s?defs=WORK_STRUCT_DELAYED&amp;project=linux-4.5">WORK_STRUCT_DELAYED</A>;
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1455" name=1455>1455</A>		<A href="http://172.21.12.145:8080/source/s?defs=worklist&amp;project=linux-4.5">worklist</A> = &amp;<A href="http://172.21.12.145:8080/source/s?defs=pwq&amp;project=linux-4.5">pwq</A>-&gt;<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#delayed_works">delayed_works</A>;
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1456" name=1456>1456</A>	}
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1457" name=1457>1457</A>
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1458" name=1458>1458</A>	<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#insert_work">insert_work</A>(<A href="http://172.21.12.145:8080/source/s?defs=pwq&amp;project=linux-4.5">pwq</A>, <A href="http://172.21.12.145:8080/source/s?defs=work&amp;project=linux-4.5">work</A>, <A href="http://172.21.12.145:8080/source/s?defs=worklist&amp;project=linux-4.5">worklist</A>, <A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#work_flags">work_flags</A>);
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1459" name=1459>1459</A>
<A class=hl href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1460" name=1460>1460</A>	<A href="http://172.21.12.145:8080/source/s?defs=spin_unlock&amp;project=linux-4.5">spin_unlock</A>(&amp;<A href="http://172.21.12.145:8080/source/s?defs=pwq&amp;project=linux-4.5">pwq</A>-&gt;<A href="http://172.21.12.145:8080/source/s?defs=pool&amp;project=linux-4.5">pool</A>-&gt;<A class=d href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#lock">lock</A>);
<A class=l href="http://172.21.12.145:8080/source/xref/linux-4.5/kernel/workqueue.c#1461" name=1461>1461</A>}</PRE>
<P>&nbsp;