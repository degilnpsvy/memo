<SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt; mso-hansi-font-family: Myriad-CnSemibold">a combination of </SPAN><I><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka-Italic; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka-Italic; mso-font-kerning: 0pt; mso-hansi-font-family: Myriad-CnSemibold">kobject_init </SPAN></I><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt; mso-hansi-font-family: Myriad-CnSemibold">and </SPAN><I><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka-Italic; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka-Italic; mso-font-kerning: 0pt; mso-hansi-font-family: Myriad-CnSemibold">kobject_add</SPAN></I></P><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka-Italic; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka-Italic; mso-font-kerning: 0pt; mso-hansi-font-family: Myriad-CnSemibold">
<P><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt; mso-hansi-font-family: Myriad-CnSemibold">There is no kobject_register in kernel sources now.</SPAN></P><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: Birka; mso-bidi-font-size: 10.0pt; mso-bidi-font-family: Birka; mso-font-kerning: 0pt; mso-hansi-font-family: Myriad-CnSemibold"><PRE><A class=hl href="http://172.29.26.110:8080/source/xref/Linux-v4.6/lib/kobject.c#730" name=730>730</A><SPAN class=c>/**
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/lib/kobject.c#731" name=731>731</A> * kobject_create_and_add - create a struct kobject dynamically and register it with sysfs
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/lib/kobject.c#732" name=732>732</A> *
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/lib/kobject.c#733" name=733>733</A> * @name: the name for the kobject
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/lib/kobject.c#734" name=734>734</A> * @parent: the parent kobject of this kobject, if any.
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/lib/kobject.c#735" name=735>735</A> *
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/lib/kobject.c#736" name=736>736</A> * This function creates a kobject structure dynamically and registers it
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/lib/kobject.c#737" name=737>737</A> * with sysfs.  When you are finished with this structure, call
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/lib/kobject.c#738" name=738>738</A> * kobject_put() and the structure will be dynamically freed when
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/lib/kobject.c#739" name=739>739</A> * it is no longer being used.
<A class=hl href="http://172.29.26.110:8080/source/xref/Linux-v4.6/lib/kobject.c#740" name=740>740</A> *
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/lib/kobject.c#741" name=741>741</A> * If the kobject was not able to be created, NULL will be returned.
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/lib/kobject.c#742" name=742>742</A> */</SPAN>
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/lib/kobject.c#743" name=743>743</A><B>struct</B> <A href="http://172.29.26.110:8080/source/s?defs=kobject&amp;project=Linux-v4.6">kobject</A> *<A class=xf name=kobject_create_and_add></A><A class=xf href="http://172.29.26.110:8080/source/s?refs=kobject_create_and_add&amp;project=Linux-v4.6">kobject_create_and_add</A>(<B>const</B> <B>char</B> *<A class=xa name=name></A><A class=xa href="http://172.29.26.110:8080/source/s?refs=name&amp;project=Linux-v4.6">name</A>, <B>struct</B> <A href="http://172.29.26.110:8080/source/s?defs=kobject&amp;project=Linux-v4.6">kobject</A> *<A class=xa name=parent></A><A class=xa href="http://172.29.26.110:8080/source/s?refs=parent&amp;project=Linux-v4.6">parent</A>)
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/lib/kobject.c#744" name=744>744</A>{
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/lib/kobject.c#745" name=745>745</A>	<B>struct</B> <A href="http://172.29.26.110:8080/source/s?defs=kobject&amp;project=Linux-v4.6">kobject</A> *<A class=xl name=kobj></A><A class=xl href="http://172.29.26.110:8080/source/s?refs=kobj&amp;project=Linux-v4.6">kobj</A>;
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/lib/kobject.c#746" name=746>746</A>	<B>int</B> <A class=xl name=retval></A><A class=xl href="http://172.29.26.110:8080/source/s?refs=retval&amp;project=Linux-v4.6">retval</A>;
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/lib/kobject.c#747" name=747>747</A>
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/lib/kobject.c#748" name=748>748</A>	<A href="http://172.29.26.110:8080/source/s?defs=kobj&amp;project=Linux-v4.6">kobj</A> = <A class=d href="http://172.29.26.110:8080/source/xref/Linux-v4.6/lib/kobject.c#kobject_create">kobject_create</A>();
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/lib/kobject.c#749" name=749>749</A>	<B>if</B> (!<A href="http://172.29.26.110:8080/source/s?defs=kobj&amp;project=Linux-v4.6">kobj</A>)
<A class=hl href="http://172.29.26.110:8080/source/xref/Linux-v4.6/lib/kobject.c#750" name=750>750</A>		<B>return</B> <A href="http://172.29.26.110:8080/source/s?defs=NULL&amp;project=Linux-v4.6">NULL</A>;
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/lib/kobject.c#751" name=751>751</A>
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/lib/kobject.c#752" name=752>752</A>	<A href="http://172.29.26.110:8080/source/s?defs=retval&amp;project=Linux-v4.6">retval</A> = <A href="http://172.29.26.110:8080/source/s?defs=kobject_add&amp;project=Linux-v4.6">kobject_add</A>(<A href="http://172.29.26.110:8080/source/s?defs=kobj&amp;project=Linux-v4.6">kobj</A>, <A href="http://172.29.26.110:8080/source/s?defs=parent&amp;project=Linux-v4.6">parent</A>, <SPAN class=s>"%s"</SPAN>, <A href="http://172.29.26.110:8080/source/s?defs=name&amp;project=Linux-v4.6">name</A>);
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/lib/kobject.c#753" name=753>753</A>	<B>if</B> (<A href="http://172.29.26.110:8080/source/s?defs=retval&amp;project=Linux-v4.6">retval</A>) {
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/lib/kobject.c#754" name=754>754</A>		<A href="http://172.29.26.110:8080/source/s?defs=printk&amp;project=Linux-v4.6">printk</A>(<A href="http://172.29.26.110:8080/source/s?defs=KERN_WARNING&amp;project=Linux-v4.6">KERN_WARNING</A> <SPAN class=s>"%s: kobject_add error: %d\n"</SPAN>,
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/lib/kobject.c#755" name=755>755</A>		       <A href="http://172.29.26.110:8080/source/s?defs=__func__&amp;project=Linux-v4.6">__func__</A>, <A href="http://172.29.26.110:8080/source/s?defs=retval&amp;project=Linux-v4.6">retval</A>);
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/lib/kobject.c#756" name=756>756</A>		<A href="http://172.29.26.110:8080/source/s?defs=kobject_put&amp;project=Linux-v4.6">kobject_put</A>(<A href="http://172.29.26.110:8080/source/s?defs=kobj&amp;project=Linux-v4.6">kobj</A>);
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/lib/kobject.c#757" name=757>757</A>		<A href="http://172.29.26.110:8080/source/s?defs=kobj&amp;project=Linux-v4.6">kobj</A> = <A href="http://172.29.26.110:8080/source/s?defs=NULL&amp;project=Linux-v4.6">NULL</A>;
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/lib/kobject.c#758" name=758>758</A>	}
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/lib/kobject.c#759" name=759>759</A>	<B>return</B> <A href="http://172.29.26.110:8080/source/s?defs=kobj&amp;project=Linux-v4.6">kobj</A>;
<A class=hl href="http://172.29.26.110:8080/source/xref/Linux-v4.6/lib/kobject.c#760" name=760>760</A>}
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/lib/kobject.c#761" name=761>761</A><A href="http://172.29.26.110:8080/source/s?defs=EXPORT_SYMBOL_GPL&amp;project=Linux-v4.6">EXPORT_SYMBOL_GPL</A>(<A class=xv name=kobject_create_and_add></A><A class=xv href="http://172.29.26.110:8080/source/s?refs=kobject_create_and_add&amp;project=Linux-v4.6">kobject_create_and_add</A>);</PRE></SPAN></SPAN>