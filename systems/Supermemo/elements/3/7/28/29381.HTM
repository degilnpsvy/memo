&nbsp;&nbsp;for (i = 0; i &lt; pdev-&gt;num_resources; i++) {<BR>&nbsp;&nbsp;&nbsp;struct resource *r = &amp;pdev-&gt;resource[i];<BR>&nbsp;&nbsp;&nbsp;unsigned long type = resource_type(r); 
<P></P>
<P>&nbsp;&nbsp;&nbsp;if (type == IORESOURCE_MEM || type == IORESOURCE_IO)<BR>&nbsp;&nbsp;&nbsp;&nbsp;release_resource(r);<BR>&nbsp;&nbsp;}</P>
<P>In kernel 4.7:</P>
<P><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.7/drivers/base/platform.c#444" name=444>444</A>		<B>for</B> (i = 0; i &lt; <A href="http://172.29.26.110:8080/source/s?defs=pdev&amp;project=Linux-v4.7">pdev</A>-&gt;<A href="http://172.29.26.110:8080/source/s?defs=num_resources&amp;project=Linux-v4.7">num_resources</A>; i++) {<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.7/drivers/base/platform.c#445" name=445>445</A>			<B>struct</B> <A href="http://172.29.26.110:8080/source/s?defs=resource&amp;project=Linux-v4.7">resource</A> *r = &amp;<A href="http://172.29.26.110:8080/source/s?defs=pdev&amp;project=Linux-v4.7">pdev</A>-&gt;<A href="http://172.29.26.110:8080/source/s?defs=resource&amp;project=Linux-v4.7">resource</A>[i];<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.7/drivers/base/platform.c#446" name=446>446</A>			<B>if</B> (r-&gt;<A href="http://172.29.26.110:8080/source/s?defs=parent&amp;project=Linux-v4.7">parent</A>)<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.7/drivers/base/platform.c#447" name=447>447</A>				<A href="http://172.29.26.110:8080/source/s?defs=release_resource&amp;project=Linux-v4.7">release_resource</A>(r);<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.7/drivers/base/platform.c#448" name=448>448</A>		}