B3.3.1 SysTick operation</P>
<P>The timer consists of four registers:<BR>&#8226; A control and status register. This configures the SysTick clock, enables the counter, enables the SysTick interrupt, and indicates the counter status.<BR>&#8226; A counter reload value register.This provides the wrap value for the counter.<BR>&#8226; A counter current value register.<BR>&#8226; A calibration value register. This indicates the preload value required for a 10ms (100Hz) system clock.</P>
<P>When enabled, the timer counts down from the value in SYST_CVR, see SysTick Current Value Register, SYST_CVR on page B3-748. When the counter reaches zero, it reloads the value in SYST_RVR on the next clock edge, see SysTick Reload Value Register, SYST_RVR on page B3-747. It then decrements on subsequent clocks. This reloading when the counter reaches zero is called wrapping.</P>
<P>When the counter transitions to zero, it sets the COUNTFLAG status bit to 1. Reading the COUNTFLAG status bit clears it to 0.</P>
<P>Writing to SYST_CVR clears both the register and the COUNTFLAG status bit to zero. This causes the SysTick logic to reload SYST_CVR from SYST_RVR on the next timer clock. A write to SYST_CVR does not trigger the SysTick exception logic.</P>
<P>Reading SYST_CVR returns the value of the counter at the time the register is accessed.</P>
<P>Writing a value of zero to SYST_RVR disables the counter on the next wrap. The SysTick counter logic maintains this counter value of zero after the wrap.</P>
<P>Note<BR>&#8226; Setting SYST_RVR to zero has the effect of disabling the SysTick counter independently of the counter enable bit.<BR>&#8226; The SYST_CVR value is UNKNOWN on reset. Before enabling the SysTick counter, software must write the required counter value to SYST_RVR, and then write to SYST_CVR. This clears SYST_CVR to zero. When enabled, the counter reloads the value from SYST_RVR, and counts down from that value, rather than from an arbitrary value.</P>
<P>Software can use the calibration value TENMS to scale the counter to other desired clock rates within the dynamic range of the counter.</P>
<P>When the processor is halted in Debug state, the counter does not decrement.</P>
<P>The timer is clocked by a reference clock. Whether the reference clock is the processor clock or an external clock source is implementation defined. If an implementation uses an external clock, it must document the relationship between the processor clock and the external reference. This is required for system timing calibration, taking account of metastability, clock skew and jitter.