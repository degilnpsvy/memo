return atomic_add_unless(&amp;kref-&gt;refcount, 1, 0) </P>
<P><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/include/linux/atomic.h#436" name=436>436</A><SPAN class=c>/**
<A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/include/linux/atomic.h#437" name=437>437</A> * atomic_add_unless - add unless the number is already a given value<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/include/linux/atomic.h#438" name=438>438</A> * @v: pointer of type atomic_t<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/include/linux/atomic.h#439" name=439>439</A> * @a: the amount to add to v...<BR><A class=hl href="http://172.29.26.110:8080/source/xref/Linux-v4.6/include/linux/atomic.h#440" name=440>440</A> * @u: ...unless v is equal to u.<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/include/linux/atomic.h#441" name=441>441</A> *<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/include/linux/atomic.h#442" name=442>442</A> * Atomically adds @a to @v, so long as @v was not already @u.<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/include/linux/atomic.h#443" name=443>443</A> * Returns non-zero if @v was not @u, and zero otherwise.<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/include/linux/atomic.h#444" name=444>444</A> */</SPAN><BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/include/linux/atomic.h#445" name=445>445</A><B>static</B> <B>inline</B> <B>int</B> <A class=xf name=atomic_add_unless></A><A class=xf href="http://172.29.26.110:8080/source/s?refs=atomic_add_unless&amp;project=Linux-v4.6">atomic_add_unless</A>(<A href="http://172.29.26.110:8080/source/s?defs=atomic_t&amp;project=Linux-v4.6">atomic_t</A> *v, <B>int</B> a, <B>int</B> u)<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/include/linux/atomic.h#446" name=446>446</A>{<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/include/linux/atomic.h#447" name=447>447</A>	<B>return</B> <A href="http://172.29.26.110:8080/source/s?defs=__atomic_add_unless&amp;project=Linux-v4.6">__atomic_add_unless</A>(v, a, u) != u;<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/include/linux/atomic.h#448" name=448>448</A>}