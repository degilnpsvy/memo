The last rule (rule 3) is the nastiest one to handle.&nbsp; Say, for<BR>instance, you have a list of items that are each kref-ed, and you wish<BR>to get the first one.&nbsp; You can't just pull the first item off the list<BR>and kref_get() it.&nbsp; That violates rule 3 because you are not already<BR>holding a valid pointer.&nbsp; You must add a mutex (or some other lock).<BR>For instance: <SPAN class=cloze>[...]</SPAN> 
<P>This is really more useful if you have to call other routines as part<BR>of the free operations that could take a long time or might claim the<BR>same lock.&nbsp; Note that doing everything in the release routine is still<BR>preferred as it is a little neater.