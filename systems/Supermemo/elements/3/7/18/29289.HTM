static inline long __sched<BR>__wait_for_common(struct completion *x,<BR>&nbsp;&nbsp;&nbsp; long (*action)(long), long timeout, int state)<BR>{<BR>&nbsp;might_sleep();</P>
<P>&nbsp;spin_lock_irq(&amp;x-&gt;wait.lock);<BR>&nbsp;timeout = do_wait_for_common(x, action, timeout, state);<BR>&nbsp;spin_unlock_irq(&amp;x-&gt;wait.lock);<BR>&nbsp;return timeout;<BR>}