/* Create a new device.&nbsp; <FONT class=clozed>This only initializes the device state<BR>&nbsp;&nbsp; structure and allows properties to be set.&nbsp; The device still needs<BR>&nbsp;&nbsp; to be realized.&nbsp; See qdev-core.h.</FONT>&nbsp; */<BR>DeviceState *<SPAN class=cloze>[...]</SPAN>(BusState *bus, const char *name)<BR>{<BR>&nbsp;&nbsp;&nbsp; DeviceState *dev; 
<P></P>
<P>&nbsp;&nbsp;&nbsp; dev = qdev_try_create(bus, name);<BR>&nbsp;&nbsp;&nbsp; if (!dev) {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (bus) {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; error_report("Unknown device '%s' for bus '%s'", name,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; object_get_typename(OBJECT(bus)));<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } else {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; error_report("Unknown device '%s' for default sysbus", name);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; abort();<BR>&nbsp;&nbsp;&nbsp; }</P>
<P>&nbsp;&nbsp;&nbsp; return dev;<BR>}