B2.2.3 Interfaces to memory system specific pseudocode</P>
<P>Global declarations are as follows:<BR>boolean iswrite; // TRUE for memory stores, FALSE for load accesses<BR>boolean ispriv; // TRUE if the instruction executing with privileged access<BR>boolean isinstrfetch; // TRUE if the memory access is associated with an instruction fetch</P>
<P>FindPriv() determines whether an access is privileged. ValidateAddress() determines the memory attributes associated with an address and, if memory protection is enabled, checks whether the access is valid.<BR>// FindPriv()<BR>// ==========<BR>boolean FindPriv()<BR>&nbsp;&nbsp;&nbsp; if (CurrentMode==Mode_Handler)OR((CurrentMode==Mode_Thread)AND(CONTROL.nPRIV==&#8217;0&#8217;)) then<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ispriv = TRUE;<BR>&nbsp;&nbsp;&nbsp; else<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ispriv = FALSE;<BR>&nbsp;&nbsp;&nbsp; return ispriv;<BR>&nbsp;&nbsp;&nbsp; <BR>ValidateAddress(bits(32) address, boolean ispriv, boolean iswrite, boolean isinstrfetch)</P>
<P>MPU pseudocode on page B3-762 defines the ValidateAddress() function.