/**<BR>&nbsp;* <SPAN class=cloze>[...]</SPAN> - release the semaphore<BR>&nbsp;* @sem: the semaphore to release<BR>&nbsp;*<BR>&nbsp;* Release the semaphore.&nbsp; Unlike mutexes, <SPAN class=cloze><FONT color=#000000>[...]</FONT></SPAN>() may be called from any<BR>&nbsp;* context and even by tasks which have never called down().<BR>&nbsp;*/<BR>void <SPAN class=cloze><FONT color=#000000>[...]</FONT></SPAN>(struct semaphore *sem)<BR>{<BR>&nbsp;unsigned long flags; 
<P></P>
<P>&nbsp;raw_spin_lock_irqsave(&amp;sem-&gt;lock, flags);<BR>&nbsp;if (likely(list_empty(&amp;sem-&gt;wait_list)))<BR>&nbsp;&nbsp;sem-&gt;count++;<BR>&nbsp;else<BR>&nbsp;&nbsp;__<SPAN class=cloze><FONT color=#000000>[...]</FONT></SPAN>(sem);<BR>&nbsp;raw_spin_unlock_irqrestore(&amp;sem-&gt;lock, flags);<BR>}<BR>EXPORT_SYMBOL(<SPAN class=cloze><FONT color=#000000>[...]</FONT></SPAN>);