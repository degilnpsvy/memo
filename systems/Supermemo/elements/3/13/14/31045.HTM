B4.11 Security states, exception banking 
<P></P>
<P>RPJHV <FONT class=extract>In a PE with the Security Extension, some exceptions are banked. A banked exception has all of the following:<BR>&#8226; Banked enabled, pending, and active bits.<BR>&#8226; A banked SHPRn.PRI field.<BR>&#8226; A banked exception vector.<BR>&#8226; A banked handler.</FONT></P>
<P><FONT class=extract>Exception&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Banked<BR>Reset&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; No<BR>HardFault&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Yes<BR>NMI&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; No<BR>MemManage faulta&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Yes<BR>BusFaulta&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; No<BR>UsageFaulta&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Yes<BR>SecureFaulta&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; No<BR>SVCall&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Yes<BR>DebugMonitora&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; No<BR>PendSV&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Yes<BR>SysTick&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Yes<BR>.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .<BR>.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .<BR>.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .<BR>External interrupt 0&nbsp;&nbsp;&nbsp;&nbsp; No<BR>a(Exception type is present only if the Main Extension is implemented.)</FONT></P>
<P>RCWNH <FONT class=extract>A banked exception targets the Security state it is taken from.</FONT><BR>RNBMV <FONT class=extract>Reset always targets Secure state.</FONT><BR>IDDKC <FONT class=extract>NMI can be configured to target either Security state, by using AIRCR.BFHFNMINS.</FONT><BR>IHGFM <FONT class=extract>BusFault can be configured to target either Security state, by using AIRCR.BFHFNMINS.</FONT><BR>RMQWN <FONT class=extract>SecureFault always targets Secure state.</FONT><BR>IWSSL <FONT class=extract>DebugMonitor targets Secure state if the status bit DEMCR.SDME is 1. Otherwise, it targets Non-secure state.</FONT><BR>IDQLX <FONT class=extract>Each external interrupt, 0-N, targets the Security state that its NVIC_ITNSn.&lt;bit number&gt; dictates.</FONT></P>
<P>RPBXI <FONT class=extract>In this rule, &lt;exception&gt; is one of:<BR>&#8226; NMI.<BR>&#8226; BusFault.<BR>&#8226; DebugMonitor.<BR>&#8226; External interrupt N.<BR>When &lt;exception&gt; targets Secure state, the Non-secure view of its SHPRn.PRI field, and enabled, pending, and active bits, are RAZ/WI.</FONT></P>
<P>ILFHQ <FONT class=extract>Secure software must ensure that when changing the target Security state of an exception, the exception is not pending or active.</FONT></P>
<P>See also:<BR>&#8226; Exception numbers and exception priority numbers on page B4-46.<BR>&#8226; Vector tables on page B4-83.