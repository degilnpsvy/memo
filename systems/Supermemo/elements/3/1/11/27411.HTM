LookUpSP() Select the current SP Pseudocode details for ARM core register access on page B1-629</P>
<P>// LookUpSP()<BR>// ==========</P>
<P>RName LookUpSP()<BR>&nbsp;&nbsp;&nbsp; RName SP;<BR>&nbsp;&nbsp;&nbsp; Mode CurrentMode;<BR>&nbsp;&nbsp;&nbsp; if CONTROL.SPSEL == 1<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if CurrentMode==Mode_Thread then<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SP is RNameSP_process;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; UNPREDICTABLE;<BR>&nbsp;&nbsp;&nbsp; else<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SP is RNameSP_main;<BR>&nbsp;&nbsp;&nbsp; return SP;