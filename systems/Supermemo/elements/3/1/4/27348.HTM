BXWritePC() </P>
<P>Write value to PC, with interworking</P>
<P><BR>The BXWritePC() and BLXWritePC() functions each perform an interworking branch:<BR>// BXWritePC()<BR>// ===========</P>
<P></P>
<P>BXWritePC(bits(32) address)<BR>&nbsp;&nbsp;&nbsp; if CurrentMode == Mode_Handler &amp;&amp; address&lt;31:28&gt; == &#8216;1111&#8217; then<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ExceptionReturn(address&lt;27:0&gt;);<BR>&nbsp;&nbsp;&nbsp; else<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; EPSR.T = address&lt;0&gt;; // if EPSR.T == 0, a UsageFault(&#8216;Invalid State&#8217;)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // is taken on the next instruction<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BranchTo(address&lt;31:1&gt;:&#8217;0&#8217;);