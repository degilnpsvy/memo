FixedToFP() Convert integer or fixed-point to floating-point FP conversions on page A2-78<BR>// FixedToFP()<BR>// ===========
<P></P>
<P>bits(N) FixedToFP(bits(M) operand, integer N, integer fraction_bits, boolean unsigned, boolean round_to_nearest, boolean fpscr_controlled)<BR>&nbsp;&nbsp;&nbsp; assert N IN {32,64};<BR>&nbsp;&nbsp;&nbsp; fpscr_val = if fpscr_controlled then FPSCR else StandardFPSCRValue();<BR>&nbsp;&nbsp;&nbsp; if round_to_nearest then fpscr_val&lt;23:22&gt; = &#8216;00&#8217;;<BR>&nbsp;&nbsp;&nbsp; int_operand = if unsigned then UInt(operand) else SInt(operand);<BR>&nbsp;&nbsp;&nbsp; real_operand = int_operand / 2^fraction_bits;<BR>&nbsp;&nbsp;&nbsp; if real_operand == 0.0 then<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; result = FPZero(&#8216;0&#8217;, N);<BR>&nbsp;&nbsp;&nbsp; else<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; result = FPRound(real_operand, N, fpscr_val);<BR>&nbsp;&nbsp;&nbsp; return result;