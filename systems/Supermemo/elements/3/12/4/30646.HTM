<B><SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri>E3.1.268 _SP</FONT></SPAN></B>
<P></P>
<P><I><SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri>// _SP() - assignment form</FONT></SPAN></I></P>
<P><I><SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri>// =======================</FONT></SPAN></I></P>
<P><SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri>ExcInfo _SP(RName spreg, <B>boolean </B>excEntry, <B>bits</B>(32) value)</FONT></SPAN></P>
<P><SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri>&nbsp;&nbsp;&nbsp; excInfo = DefaultExcInfo();</FONT></SPAN></P>
<P><SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri><SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri>&nbsp;&nbsp;&nbsp; </FONT></SPAN>(limit, applylimit) = LookUpSPLim(spreg);</FONT></SPAN></P>
<P><FONT face=Calibri><SPAN><SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri>&nbsp;&nbsp;&nbsp; </FONT></SPAN><STRONG>if </STRONG>applylimit &amp;&amp; (UInt(value) &lt; UInt(limit)) <B>then</B></SPAN></FONT></P>
<P><SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri><SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri>&nbsp;&nbsp;&nbsp;&nbsp;<SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri>&nbsp;&nbsp;&nbsp; </FONT></SPAN></FONT></SPAN><EM>// If the stack limit is violated during exception entry then the stack</EM></FONT></SPAN></P>
<P><SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri><SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri>&nbsp;&nbsp;&nbsp;&nbsp;<SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri>&nbsp;&nbsp;&nbsp; </FONT></SPAN></FONT></SPAN><EM>// pointer is set to the limit value. This both prevents violations and</EM></FONT></SPAN></P>
<P><SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri><SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri>&nbsp;&nbsp;&nbsp;&nbsp;<SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri>&nbsp;&nbsp;&nbsp; </FONT></SPAN></FONT></SPAN><EM>// ensures that the stack pointer is 8 byte aligned.</EM></FONT></SPAN></P>
<P><FONT face=Calibri><SPAN><SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri>&nbsp;&nbsp;&nbsp;&nbsp;<SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri>&nbsp;&nbsp;&nbsp; </FONT></SPAN></FONT></SPAN><STRONG>if </STRONG>excEntry <B>then</B></SPAN></FONT></P>
<P><SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri><SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri>&nbsp;&nbsp;&nbsp;&nbsp;<SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri>&nbsp;&nbsp;&nbsp;&nbsp;<SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri>&nbsp;&nbsp;&nbsp; </FONT></SPAN></FONT></SPAN></FONT></SPAN>_R[spreg] = limit;</FONT></SPAN></P>
<P><I><SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri></FONT></SPAN></I>&nbsp;</P>
<P><SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri><SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri>&nbsp;&nbsp;&nbsp;&nbsp;<SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri>&nbsp;&nbsp;&nbsp; </FONT></SPAN></FONT></SPAN><EM>// Raise the appropriate exception and syndrome information</EM></FONT></SPAN></P>
<P><FONT face=Calibri><SPAN><SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri>&nbsp;&nbsp;&nbsp;&nbsp;<SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri>&nbsp;&nbsp;&nbsp; </FONT></SPAN></FONT></SPAN><STRONG>if </STRONG>HaveMainExt() <B>then</B></SPAN></FONT></P>
<P><SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri><SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri>&nbsp;&nbsp;&nbsp;&nbsp;<SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri>&nbsp;&nbsp;&nbsp;&nbsp;<SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri>&nbsp;&nbsp;&nbsp; </FONT></SPAN></FONT></SPAN></FONT></SPAN>UFSR.STKOF = '1';</FONT></SPAN></P>
<P><SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri><SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri>&nbsp;&nbsp;&nbsp;&nbsp;<SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri>&nbsp;&nbsp;&nbsp; </FONT></SPAN></FONT></SPAN><EM>// Create the exception. NOTE: If Main Extension is not implemented the fault always</EM></FONT></SPAN></P>
<P><SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri><SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri>&nbsp;&nbsp;&nbsp;&nbsp;<SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri>&nbsp;&nbsp;&nbsp; </FONT></SPAN></FONT></SPAN><EM>// escalates to HardFault.</EM></FONT></SPAN></P>
<P><SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri><SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri>&nbsp;&nbsp;&nbsp;&nbsp;<SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri>&nbsp;&nbsp;&nbsp; </FONT></SPAN></FONT></SPAN>excInfo = CreateException(UsageFault, FALSE, <B>boolean </B>UNKNOWN);</FONT></SPAN></P>
<P><FONT face=Calibri><SPAN><SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri>&nbsp;&nbsp;&nbsp;&nbsp;<SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri>&nbsp;&nbsp;&nbsp; </FONT></SPAN></FONT></SPAN><STRONG>if </STRONG>!excEntry <B>then</B></SPAN></FONT></P>
<P><SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri><SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri>&nbsp;&nbsp;&nbsp;&nbsp;<SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri>&nbsp;&nbsp;&nbsp;&nbsp;<SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri>&nbsp;&nbsp;&nbsp; </FONT></SPAN></FONT></SPAN></FONT></SPAN>HandleException(excInfo);</FONT></SPAN></P>
<P><SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri><SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri>&nbsp;&nbsp;&nbsp; </FONT></SPAN><STRONG>else</STRONG></FONT></SPAN></P>
<P><SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri><SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri>&nbsp;&nbsp;&nbsp;&nbsp;<SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri>&nbsp;&nbsp;&nbsp; </FONT></SPAN></FONT></SPAN><EM>// Stack pointer only updated normally if limit not violated</EM></FONT></SPAN></P>
<P><SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri><SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri>&nbsp;&nbsp;&nbsp;&nbsp;<SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri>&nbsp;&nbsp;&nbsp; </FONT></SPAN></FONT></SPAN>_R[spreg] = value&lt;31:2&gt;:'00';</FONT></SPAN></P>
<P><FONT face=Calibri><SPAN><SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri>&nbsp;&nbsp;&nbsp; </FONT></SPAN><STRONG>return </STRONG>excInfo;</SPAN></FONT></P>
<P><I><SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri></FONT></SPAN></I>&nbsp;</P>
<P><I><SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri></FONT></SPAN></I>&nbsp;</P>
<P><I><SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri>// _SP() - non-assignment form</FONT></SPAN></I></P>
<P><I><SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri>// ===========================</FONT></SPAN></I></P>
<P><FONT face=Calibri><B><SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt">bits</SPAN></B><SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt">(32) _SP(RName spreg)</SPAN></FONT></P>
<P><FONT face=Calibri><SPAN><SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri>&nbsp;&nbsp;&nbsp; </FONT></SPAN><STRONG>assert </STRONG>( (spreg == RNameSP_Main_NonSecure) ||</SPAN></FONT></P>
<P><SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri><SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri>&nbsp;&nbsp;&nbsp;&nbsp;<SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri>&nbsp;&nbsp;&nbsp;&nbsp;<SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri>&nbsp;&nbsp;&nbsp;&nbsp;<SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri>&nbsp;&nbsp;&nbsp; </FONT></SPAN></FONT></SPAN></FONT></SPAN></FONT></SPAN>((spreg == RNameSP_Main_Secure) &amp;&amp; HaveSecurityExt()) ||</FONT></SPAN></P>
<P><SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri><SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri>&nbsp;&nbsp;&nbsp;&nbsp;<SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri>&nbsp;&nbsp;&nbsp;&nbsp;<SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri>&nbsp;&nbsp;&nbsp;&nbsp;<SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri>&nbsp;&nbsp;&nbsp; </FONT></SPAN></FONT></SPAN></FONT></SPAN></FONT></SPAN>(spreg == RNameSP_Process_NonSecure) ||</FONT></SPAN></P>
<P><SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri><SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri>&nbsp;&nbsp;&nbsp;&nbsp;<SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri>&nbsp;&nbsp;&nbsp;&nbsp;<SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri>&nbsp;&nbsp;&nbsp;&nbsp;<SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri>&nbsp;&nbsp;&nbsp; </FONT></SPAN></FONT></SPAN></FONT></SPAN></FONT></SPAN>((spreg == RNameSP_Process_Secure) &amp;&amp; HaveSecurityExt()) );</FONT></SPAN></P>
<P><FONT face=Calibri><SPAN><SPAN lang=EN-US style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt"><FONT face=Calibri>&nbsp;&nbsp;&nbsp; </FONT></SPAN><STRONG>return </STRONG>_R[spreg]&lt;31:2&gt;:'00';</SPAN></FONT>