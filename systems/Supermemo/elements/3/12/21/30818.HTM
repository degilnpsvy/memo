/* Return basic MPU access permission bits.&nbsp; */<BR>static uint32_t simple_mpu_ap_bits(uint32_t val)<BR>{<BR>&nbsp;&nbsp;&nbsp; uint32_t ret;<BR>&nbsp;&nbsp;&nbsp; uint32_t mask;<BR>&nbsp;&nbsp;&nbsp; int i;<BR>&nbsp;&nbsp;&nbsp; ret = 0;<BR>&nbsp;&nbsp;&nbsp; mask = 3;<BR>&nbsp;&nbsp;&nbsp; for (i = 0; i &lt; 16; i += 2) {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ret |= (val &gt;&gt; i) &amp; mask;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mask &lt;&lt;= 2;<BR>&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; return ret;<BR>}</P>
<P>/* Pad basic MPU access permission bits to extended format.&nbsp; */<BR>static uint32_t extended_mpu_ap_bits(uint32_t val)<BR>{<BR>&nbsp;&nbsp;&nbsp; uint32_t ret;<BR>&nbsp;&nbsp;&nbsp; uint32_t mask;<BR>&nbsp;&nbsp;&nbsp; int i;<BR>&nbsp;&nbsp;&nbsp; ret = 0;<BR>&nbsp;&nbsp;&nbsp; mask = 3;<BR>&nbsp;&nbsp;&nbsp; for (i = 0; i &lt; 16; i += 2) {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ret |= (val &amp; mask) &lt;&lt; i;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mask &lt;&lt;= 2;<BR>&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; return ret;<BR>}