D2.2.106 ICSR, Interrupt Control and State Register</P>
<P>The ICSR characteristics are:<BR>Purpose: Controls and provides status information for NMI, PendSV, SysTick and interrupts.<BR>Usage constraints: Privileged access permitted only. Unprivileged accesses generate a BusFault.<BR>&nbsp;&nbsp;&nbsp; This register is word accessible only. Halfword and byte accesses are UNPREDICTABLE.<BR>Configurations: This register is always implemented.<BR>Attributes: 32-bit read/write register located at 0xE000ED04.<BR>&nbsp;&nbsp;&nbsp; Secure software can access the Non-secure view of this register via ICSR_NS located at 0xE002ED04. The location 0xE002ED04 is RES0 to software executing in Non-secure state and the debugger.<BR>&nbsp;&nbsp;&nbsp; This register is banked between Security states on a bit by bit basis.</P>
<P>PENDNMISET, bit [31], on a write<BR>Pend NMI set. Allows the NMI exception to be set as pending.<BR>This bit is not banked between Security states.<BR>The possible values of this bit are:<BR>0 No effect.<BR>1 Sets the NMI exception pending.<BR>If both PENDNMISET and PENDNMICLR are written to one simultaneously, the pending state of the NMI exception becomes UNKNOWN.<BR>This bit is write-one-to-set. Writes of zero are ignored.<BR>If AIRCR.BFHFNMINS is zero this bit is RAZ/WI from Non-secure state.</P>
<P>PENDNMISET, bit [31], on a read<BR>Pend NMI set. Indicates whether the NMI exception is pending.<BR>This bit is not banked between Security states.<BR>The possible values of this bit are:<BR>0 NMI exception not pending.<BR>1 NMI exception pending.<BR>If AIRCR.BFHFNMINS is zero this bit is RAZ/WI from Non-secure state.<BR>This bit resets to zero on a Warm reset.</P>
<P>PENDNMICLR, bit [30]<BR>Pend NMI clear. Allows the NMI exception pend state to be cleared.<BR>This bit is not banked between Security states.<BR>The possible values of this bit are:<BR>0 No effect.<BR>1 Clear pending status.<BR>This bit is write-only, and reads-as-zero.<BR>This bit is write-one-to-clear. Writes of zero are ignored.<BR>If AIRCR.BFHFNMINS is zero this bit is RAZ/WI from Non-secure state.</P>
<P>Bit [29]<BR>Reserved, RES0.</P>
<P>PENDSVSET, bit [28], on a write<BR>Pend PendSV set. Allows the PendSV exception for the selected Security state to be set as pending.<BR>This bit is banked between Security states.<BR>The possible values of this bit are:<BR>0 No effect.<BR>1 Sets the PendSV exception pending.<BR>If both PENDNSVSET and PENDSVCLR are written to one simultaneously, the pending state of the associated PendSV exception becomes UNKNOWN.<BR>This bit is write-one-to-set. Writes of zero are ignored.</P>
<P>PENDSVSET, bit [28], on a read<BR>Pend PendSV set. Indicates whether the PendSV for the selected Security state exception is pending.<BR>This bit is banked between Security states.<BR>The possible values of this bit are:<BR>0 PendSV exception not pending.<BR>1 PendSV exception pending.<BR>This bit resets to zero on a Warm reset.</P>
<P>PENDSVCLR, bit [27]<BR>Pend PendSV clear. Allows the PendSV exception pend state to be cleared for the selected Security state.<BR>This bit is banked between Security states.<BR>The possible values of this bit are:<BR>0 No effect.<BR>1 Clear pending status.<BR>This bit is write-only, and reads-as-zero.<BR>This bit is write-one-to-clear. Writes of zero are ignored.</P>
<P>PENDSTSET, bit [26], on a write<BR>Pend SysTick set. Allows the SysTick for the selected Security state exception to be set as pending.<BR>This bit is banked between Security states.<BR>The possible values of this bit are:<BR>0 No effect.<BR>1 Sets the SysTick exception for the selected Security state pending.</P>
<P>PENDSTSET, bit [26], on a read<BR>Pend SysTick set. Indicates whether the SysTick for the selected Security state exception is pending.<BR>This bit is banked between Security states.<BR>The possible values of this bit are:<BR>0 SysTick exception not pending.<BR>1 SysTick exception pending.<BR>If both PENDSTSET and PENDSTCLR are written to one simultaneously, the pending state of the associated SysTick exception becomes UNKNOWN.<BR>This bit resets to zero on a Warm reset.</P>
<P>PENDSTCLR, bit [25]<BR>Pend SysTick clear. Allows the SysTick exception pend state to be cleared for the selected Security state.<BR>This bit is banked between Security states.<BR>The possible values of this bit are:<BR>0 No effect.<BR>1 Clear pending status.<BR>This bit is write-only, and reads-as-zero.<BR>This bit is write-one-to-clear. Writes of zero are ignored.</P>
<P>STTNS, bit [24]<BR>SysTick Targets Non-secure. Controls whether in a single SysTick implementation, the SysTick is Secure or Non-secure.<BR>This bit is not banked between Security states.<BR>The possible values of this bit are:<BR>0 SysTick is Secure.<BR>1 SysTick is Non-secure.<BR>Behaves as RAZ/WI when accessed from Non-secure state, or when either no SysTick or both<BR>SysTick timers are implemented.<BR>This bit is RAZ/WI from Non-secure.<BR>This bit resets to zero on a Warm reset.</P>
<P>ISRPREEMPT, bit [23]<BR>Interrupt preempt. Indicates whether a pending exception will be serviced on exit from debug halt state.<BR>This bit is not banked between Security states.<BR>The possible values of this bit are:<BR>0 Will not service.<BR>1 Will service a pending exception.<BR>The value of this bit is UNKNOWN when not in debug state.<BR>This bit is read-only.<BR>If neither halting debug or the Main Extension are implemented, this bit is RES0.</P>
<P>ISRPENDING, bit [22]<BR>Interrupt pending. Indicates whether an external interrupt, generated by the NVIC, is pending.<BR>This bit is not banked between Security states.<BR>The possible values of this bit are:<BR>0 No external interrupt pending.<BR>1 External interrupt pending.<BR>This bit is read-only.<BR>If neither halting debug or the Main Extension are implemented, this bit is RES0.<BR>Note<BR>The value of DHCSR.C_MASKINTS is ignored.</P>
<P>Bit [21]<BR>Reserved, RES0.</P>
<P>VECTPENDING, bits [20:12]<BR>Vector pending. The exception number of the highest priority pending and enabled interrupt.<BR>This field is not banked between Security states.<BR>The possible values of this field are:<BR>Zero No pending and enabled exception.<BR>Non zero Exception number.<BR>This field is read-only.<BR>Note<BR>If DHCSR.C_MASKINTS is set, the PendSV, SysTick, and configurable external interrupts are masked and will not be shown as pending in VECTPENDING.</P>
<P>RETTOBASE, bit [11]<BR>Return to base. In Handler mode, indicates whether there is more than one active exception.<BR>This bit is not banked between Security states.<BR>The possible values of this bit are:<BR>0 There is more than one active exception.<BR>1 There is only one active exception.<BR>In Thread mode the value of this bit is UNKNOWN.<BR>This bit is read-only.<BR>If the Main Extension is not implemented, this bit is RES0.</P>
<P>Bits [10:9]<BR>Reserved, RES0.</P>
<P>VECTACTIVE, bits [8:0]<BR>Vector active. The exception number of the current executing exception.<BR>This field is not banked between Security states.<BR>The possible values of this field are:<BR>Zero Thread mode.<BR>Non zero Exception number.<BR>This value is the same as the IPSR Exception number. When the IPSR value has been sent to 1 because of a function call to Non-secure state, this field is also set to 1.<BR>This field is read-only.<BR>If neither halting debug or the Main Extension are implemented, this field is RES0.