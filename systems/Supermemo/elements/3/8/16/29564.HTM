&nbsp;klist_iter_init_node(&amp;subsys-&gt;p-&gt;klist_devices, &amp;i, NULL);<BR>&nbsp;while ((dev = next_device(&amp;i))) {<BR>&nbsp;&nbsp;if (dev-&gt;id == id &amp;&amp; get_device(dev)) {<BR>&nbsp;&nbsp;&nbsp;klist_iter_exit(&amp;i);<BR>&nbsp;&nbsp;&nbsp;return dev;<BR>&nbsp;&nbsp;}<BR>&nbsp;}<BR>&nbsp;klist_iter_exit(&amp;i);</P>
<P>In drivers/base/bus.c:</P>
<P><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/bus.c#268" name=268>268</A><B>static</B> <B>struct</B> <A href="http://172.29.26.110:8080/source/s?defs=device&amp;project=Linux-v4.6">device</A> *<A class=xf name=next_device></A><A class=xf href="http://172.29.26.110:8080/source/s?refs=next_device&amp;project=Linux-v4.6">next_device</A>(<B>struct</B> <A href="http://172.29.26.110:8080/source/s?defs=klist_iter&amp;project=Linux-v4.6">klist_iter</A> *i)<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/bus.c#269" name=269>269</A>{<BR><A class=hl href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/bus.c#270" name=270>270</A>	<B>struct</B> <A href="http://172.29.26.110:8080/source/s?defs=klist_node&amp;project=Linux-v4.6">klist_node</A> *n = <A href="http://172.29.26.110:8080/source/s?defs=klist_next&amp;project=Linux-v4.6">klist_next</A>(i);<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/bus.c#271" name=271>271</A>	<B>struct</B> <A href="http://172.29.26.110:8080/source/s?defs=device&amp;project=Linux-v4.6">device</A> *<A class=xl name=dev></A><A class=xl href="http://172.29.26.110:8080/source/s?refs=dev&amp;project=Linux-v4.6">dev</A> = <A href="http://172.29.26.110:8080/source/s?defs=NULL&amp;project=Linux-v4.6">NULL</A>;<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/bus.c#272" name=272>272</A>	<B>struct</B> <A href="http://172.29.26.110:8080/source/s?defs=device_private&amp;project=Linux-v4.6">device_private</A> *<A class=xl name=dev_prv></A><A class=xl href="http://172.29.26.110:8080/source/s?refs=dev_prv&amp;project=Linux-v4.6">dev_prv</A>;<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/bus.c#273" name=273>273</A><BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/bus.c#274" name=274>274</A>	<B>if</B> (n) {<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/bus.c#275" name=275>275</A>		<A href="http://172.29.26.110:8080/source/s?defs=dev_prv&amp;project=Linux-v4.6">dev_prv</A> = <A href="http://172.29.26.110:8080/source/s?defs=to_device_private_bus&amp;project=Linux-v4.6">to_device_private_bus</A>(n);<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/bus.c#276" name=276>276</A>		<A href="http://172.29.26.110:8080/source/s?defs=dev&amp;project=Linux-v4.6">dev</A> = <A href="http://172.29.26.110:8080/source/s?defs=dev_prv&amp;project=Linux-v4.6">dev_prv</A>-&gt;<A href="http://172.29.26.110:8080/source/s?defs=device&amp;project=Linux-v4.6">device</A>;<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/bus.c#277" name=277>277</A>	}<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/bus.c#278" name=278>278</A>	<B>return</B> <A href="http://172.29.26.110:8080/source/s?defs=dev&amp;project=Linux-v4.6">dev</A>;<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.6/drivers/base/bus.c#279" name=279>279</A>}