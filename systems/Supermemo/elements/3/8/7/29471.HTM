static void klist_put(struct klist_node *n, bool kill)<BR>{<BR>&nbsp;struct klist *k = knode_klist(n);<BR>&nbsp;void (*put)(struct klist_node *) = k-&gt;put;</P>
<P>&nbsp;spin_lock(&amp;k-&gt;k_lock);<BR>&nbsp;if (kill)<BR>&nbsp;&nbsp;knode_kill(n);<BR>&nbsp;if (!klist_dec_and_del(n))<BR>&nbsp;&nbsp;put = NULL;<BR>&nbsp;spin_unlock(&amp;k-&gt;k_lock);<BR>&nbsp;if (put)<BR>&nbsp;&nbsp;put(n);<BR>}