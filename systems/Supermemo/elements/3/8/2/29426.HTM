/**<BR>&nbsp;* wait_for_device_probe<BR>&nbsp;* Wait for device probing to be completed.<BR>&nbsp;*/<BR>void wait_for_device_probe(void)<BR>{<BR>&nbsp;/* wait for the deferred probe workqueue to finish */<BR>&nbsp;if (driver_deferred_probe_enable)<BR>&nbsp;&nbsp;flush_workqueue(deferred_wq);</P>
<P>&nbsp;/* wait for the known devices to complete their probing */<BR>&nbsp;wait_event(probe_waitqueue, atomic_read(&amp;probe_count) == 0);<BR>&nbsp;async_synchronize_full();<BR>}<BR>EXPORT_SYMBOL_GPL(wait_for_device_probe);