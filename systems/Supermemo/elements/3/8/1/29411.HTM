static int device_add_attrs(<FONT class=clozed>struct bus_type *bus, struct device *dev</FONT>)<BR>{<BR>&nbsp;int error = 0;<BR>&nbsp;int i; 
<P></P>
<P>&nbsp;if (!bus-&gt;dev_attrs)<BR>&nbsp;&nbsp;return 0;</P>
<P>&nbsp;for (i = 0; bus-&gt;dev_attrs[i].attr.name; i++) {<BR>&nbsp;&nbsp;error = <SPAN class=cloze>[...]</SPAN>(dev, &amp;bus-&gt;dev_attrs[i]);<BR>&nbsp;&nbsp;if (error) {<BR>&nbsp;&nbsp;&nbsp;while (--i &gt;= 0)<BR>&nbsp;&nbsp;&nbsp;&nbsp;device_remove_file(dev, &amp;bus-&gt;dev_attrs[i]);<BR>&nbsp;&nbsp;&nbsp;break;<BR>&nbsp;&nbsp;}<BR>&nbsp;}<BR>&nbsp;return error;<BR>}