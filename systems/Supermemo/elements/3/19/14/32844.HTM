<H3>g_io_channel_set_encoding&nbsp;()</H3><PRE class=programlisting><A title="enum GIOStatus" class=link href="https://developer.gnome.org/glib/stable/glib-IO-Channels.html#GIOStatus"><SPAN class=returnvalue>GIOStatus</SPAN></A>
g_io_channel_set_encoding (<EM class=parameter><CODE><A title="struct GIOChannel" class=link href="https://developer.gnome.org/glib/stable/glib-IO-Channels.html#GIOChannel"><SPAN class=type>GIOChannel</SPAN></A> *channel</CODE></EM>,
                           <EM class=parameter><CODE>const <A title=gchar class=link href="https://developer.gnome.org/glib/stable/glib-Basic-Types.html#gchar"><SPAN class=type>gchar</SPAN></A> *encoding</CODE></EM>,
                           <EM class=parameter><CODE><A title="struct GError" class=link href="https://developer.gnome.org/glib/stable/glib-Error-Reporting.html#GError"><SPAN class=type>GError</SPAN></A> **error</CODE></EM>);</PRE>
<P>Sets the encoding for the input/output of the channel. The internal encoding is always UTF-8. The default encoding for the external file is UTF-8.</P>
<P>The encoding <A title=NULL class=link href="https://developer.gnome.org/glib/stable/glib-Standard-Macros.html#NULL:CAPS"><CODE class=literal>NULL</CODE></A> is safe to use with binary data.</P>
<P>The encoding can only be set if one of the following conditions is true:</P>
<DIV class=itemizedlist>
<UL class=itemizedlist style="LIST-STYLE-TYPE: disc">
<LI class=listitem>
<P>The channel was just created, and has not been written to or read from yet.</P>
<LI class=listitem>
<P>The channel is write-only.</P>
<LI class=listitem>
<P>The channel is a file, and the file pointer was just repositioned by a call to <A title=g_io_channel_seek_position&nbsp;() class=link href="https://developer.gnome.org/glib/stable/glib-IO-Channels.html#g-io-channel-seek-position"><CODE class=function>g_io_channel_seek_position()</CODE></A>. (This flushes all the internal buffers.)</P>
<LI class=listitem>
<P>The current encoding is <A title=NULL class=link href="https://developer.gnome.org/glib/stable/glib-Standard-Macros.html#NULL:CAPS"><CODE class=literal>NULL</CODE></A> or UTF-8.</P>
<LI class=listitem>
<P>One of the (new API) read functions has just returned <A class=link href="https://developer.gnome.org/glib/stable/glib-IO-Channels.html#G-IO-STATUS-EOF:CAPS"><CODE class=literal>G_IO_STATUS_EOF</CODE></A> (or, in the case of <A title=g_io_channel_read_to_end&nbsp;() class=link href="https://developer.gnome.org/glib/stable/glib-IO-Channels.html#g-io-channel-read-to-end"><CODE class=function>g_io_channel_read_to_end()</CODE></A>, <A class=link href="https://developer.gnome.org/glib/stable/glib-IO-Channels.html#G-IO-STATUS-NORMAL:CAPS"><CODE class=literal>G_IO_STATUS_NORMAL</CODE></A>).</P>
<LI class=listitem>
<P>One of the functions <A title=g_io_channel_read_chars&nbsp;() class=link href="https://developer.gnome.org/glib/stable/glib-IO-Channels.html#g-io-channel-read-chars"><CODE class=function>g_io_channel_read_chars()</CODE></A> or <A title=g_io_channel_read_unichar&nbsp;() class=link href="https://developer.gnome.org/glib/stable/glib-IO-Channels.html#g-io-channel-read-unichar"><CODE class=function>g_io_channel_read_unichar()</CODE></A> has returned <A class=link href="https://developer.gnome.org/glib/stable/glib-IO-Channels.html#G-IO-STATUS-AGAIN:CAPS"><CODE class=literal>G_IO_STATUS_AGAIN</CODE></A> or <A class=link href="https://developer.gnome.org/glib/stable/glib-IO-Channels.html#G-IO-STATUS-ERROR:CAPS"><CODE class=literal>G_IO_STATUS_ERROR</CODE></A>. This may be useful in the case of <A class=link href="https://developer.gnome.org/glib/stable/glib-Character-Set-Conversion.html#G-CONVERT-ERROR-ILLEGAL-SEQUENCE:CAPS"><CODE class=literal>G_CONVERT_ERROR_ILLEGAL_SEQUENCE</CODE></A>. Returning one of these statuses from <A title=g_io_channel_read_line&nbsp;() class=link href="https://developer.gnome.org/glib/stable/glib-IO-Channels.html#g-io-channel-read-line"><CODE class=function>g_io_channel_read_line()</CODE></A>, <A title=g_io_channel_read_line_string&nbsp;() class=link href="https://developer.gnome.org/glib/stable/glib-IO-Channels.html#g-io-channel-read-line-string"><CODE class=function>g_io_channel_read_line_string()</CODE></A>, or <A title=g_io_channel_read_to_end&nbsp;() class=link href="https://developer.gnome.org/glib/stable/glib-IO-Channels.html#g-io-channel-read-to-end"><CODE class=function>g_io_channel_read_to_end()</CODE></A> does not guarantee that the encoding can be changed.</P></LI></UL></DIV>
<P>Channels which do not meet one of the above conditions cannot call <A title=g_io_channel_seek_position&nbsp;() class=link href="https://developer.gnome.org/glib/stable/glib-IO-Channels.html#g-io-channel-seek-position"><CODE class=function>g_io_channel_seek_position()</CODE></A> with an offset of <A class=link href="https://developer.gnome.org/glib/stable/glib-IO-Channels.html#G-SEEK-CUR:CAPS"><CODE class=literal>G_SEEK_CUR</CODE></A>, and, if they are "seekable", cannot call <A title=g_io_channel_write_chars&nbsp;() class=link href="https://developer.gnome.org/glib/stable/glib-IO-Channels.html#g-io-channel-write-chars"><CODE class=function>g_io_channel_write_chars()</CODE></A> after calling one of the API "read" functions.</P>
<DIV class=refsect3><A name=id-1.4.9.7.36.9></A>
<H4>Parameters</H4>
<DIV class=informaltable>
<TABLE width="100%" border=0>
<COLGROUP>
<COL class=parameters_name width=150></COL>
<COL class=parameters_description></COL>
<COL class=parameters_annotations width=200></COL></COLGROUP>
<TBODY>
<TR>
<TD class=parameter_name>
<P>channel</P></TD>
<TD class=parameter_description>
<P>a <A title="struct GIOChannel" class=link href="https://developer.gnome.org/glib/stable/glib-IO-Channels.html#GIOChannel"><SPAN class=type>GIOChannel</SPAN></A></P></TD>
<TD class=parameter_annotations>&nbsp;</TD></TR>
<TR>
<TD class=parameter_name>
<P>encoding</P></TD>
<TD class=parameter_description>
<P>the encoding type. </P></TD>
<TD class=parameter_annotations><SPAN class=annotation>[<ACRONYM title="NULL is OK, both for passing and for returning."><SPAN class=acronym>allow-none</SPAN></ACRONYM>]</SPAN></TD></TR>
<TR>
<TD class=parameter_name>
<P>error</P></TD>
<TD class=parameter_description>
<P>location to store an error of type <A title="enum GConvertError" class=link href="https://developer.gnome.org/glib/stable/glib-Character-Set-Conversion.html#GConvertError"><SPAN class=type>GConvertError</SPAN></A></P></TD>
<TD class=parameter_annotations>&nbsp;</TD></TR></TBODY></TABLE></DIV></DIV>
<DIV class=refsect3><A name=id-1.4.9.7.36.10></A>
<H4>Returns</H4>
<P><A class=link href="https://developer.gnome.org/glib/stable/glib-IO-Channels.html#G-IO-STATUS-NORMAL:CAPS"><CODE class=literal>G_IO_STATUS_NORMAL</CODE></A> if the encoding was successfully set</P></DIV>