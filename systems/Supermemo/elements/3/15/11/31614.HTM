<DIV class="h hm">
<H1 id=article_title class=ph>&#22312; Linux &#19978;&#26816;&#27979;&#30828;&#30424;&#19978;&#30340;&#22351;&#36947;&#21644;&#22351;&#22359; </H1></DIV>
<DIV class=h>
<P class=copyright><SPAN class="z textcut">&#32534;&#35793;&#33258;&#65306;<A href="http://www.tecmint.com/check-linux-hard-disk-bad-sectors-bad-blocks/" target=_blank>http://www.tecmint.com/check-linux-hard-disk-bad-sectors-bad-blocks/</A></SPAN> <SPAN class=y>&#20316;&#32773;&#65306; Aaron Kili</SPAN> <BR class=clear><SPAN class=z>&#21407;&#21019;&#65306;<A href="http://lctt.github.io/" target=_blank>LCTT</A> <A href="https://linux.cn/article-7961-1.html" target=_blank>https://linux.cn/article-7961-1.html</A></SPAN> <SPAN class=y>&#35793;&#32773;&#65306; alim0x</SPAN> <BR class=clear><SPAN class=z>&#26412;&#25991;&#22320;&#22336;&#65306;<A href="https://linux.cn/article-7961-1.html">https://linux.cn/article-7961-1.html</A></SPAN> <SPAN class=y><A title=&#25171;&#21360; class=print href="https://linux.cn/article-7961-1.html?pr"></A></SPAN><BR class=clear></P>
<P class=xg1>2016-11-16 16:15&nbsp;&nbsp;&nbsp; &#35780;&#35770;: <A title=&#26597;&#30475;&#20840;&#37096;&#35780;&#35770; href="https://linux.cn/portal.php?mod=comment&amp;id=7961&amp;idtype=aid"><EM id=_commentnum>2</EM></A>&nbsp;&#25910;&#34255;: <EM id=_favtimes>8</EM>&nbsp;&nbsp;&nbsp;&nbsp; </P></DIV>
<DIV id=diysummarytop class=area></DIV>
<DIV id=diysummarybottom class=area></DIV>
<DIV class=d>
<DIV id=diycontenttop class=area></DIV>
<DIV id=article_content>
<DIV class=linuxcnad></DIV>
<P>&#35753;&#25105;&#20204;&#20174;&#22351;&#36947;&#21644;&#22351;&#22359;&#30340;&#23450;&#20041;&#24320;&#22987;&#35828;&#36215;&#65292;&#23427;&#20204;&#26159;&#19968;&#22359;&#30913;&#30424;&#25110;&#38378;&#23384;&#19978;&#19981;&#20877;&#33021;&#22815;&#34987;&#35835;&#20889;&#30340;&#37096;&#20998;&#65292;&#19968;&#33324;&#26159;&#30001;&#20110;&#30913;&#30424;&#34920;&#38754;&#29305;&#23450;&#30340;<A class=ext href="http://www.tecmint.com/defragment-linux-system-partitions-and-directories/" rel="external nofollow" target=_blank>&#29289;&#29702;&#25439;&#22351;</A>&#25110;&#38378;&#23384;&#26230;&#20307;&#31649;&#22833;&#25928;&#23548;&#33268;&#30340;&#12290;</P>
<P>&#38543;&#30528;&#22351;&#36947;&#30340;&#32487;&#32493;&#31215;&#32047;&#65292;&#23427;&#20204;&#20250;&#23545;&#20320;&#30340;&#30913;&#30424;&#25110;&#38378;&#23384;&#23481;&#37327;&#20135;&#29983;&#20196;&#20154;&#19981;&#24555;&#25110;&#30772;&#22351;&#24615;&#30340;&#24433;&#21709;&#65292;&#29978;&#33267;&#21487;&#33021;&#20250;&#23548;&#33268;&#30828;&#20214;&#22833;&#25928;&#12290;</P>
<P>&#21516;&#26102;&#36824;&#38656;&#35201;&#27880;&#24847;&#30340;&#26159;&#22351;&#22359;&#30340;&#23384;&#22312;&#35686;&#31034;&#20320;&#24212;&#35813;&#24320;&#22987;&#32771;&#34385;&#20080;&#22359;&#26032;&#30913;&#30424;&#20102;&#65292;&#25110;&#32773;&#31616;&#21333;&#22320;&#23558;&#22351;&#22359;&#26631;&#35760;&#20026;&#19981;&#21487;&#29992;&#12290;</P>
<P>&#22240;&#27492;&#65292;&#22312;&#36825;&#31687;&#25991;&#31456;&#20013;&#65292;&#25105;&#20204;&#36890;&#36807;&#20960;&#20010;&#24517;&#35201;&#30340;&#27493;&#39588;&#65292;&#20351;&#29992;&#29305;&#23450;&#30340;<A class=ext href="http://www.tecmint.com/ncdu-a-ncurses-based-disk-usage-analyzer-and-tracker/" rel="external nofollow" target=_blank>&#30913;&#30424;&#25195;&#25551;&#24037;&#20855;</A>&#35753;&#20320;&#33021;&#22815;&#21028;&#26029; Linux &#30913;&#30424;&#25110;&#38378;&#23384;&#26159;&#21542;&#23384;&#22312;&#22351;&#36947;&#12290;</P>
<P>&#20197;&#19979;&#23601;&#26159;&#27493;&#39588;&#65306;</P><A id=3_992 class="target-fix ext" rel="external nofollow" target=_blank></A>
<H3 id=toc_1>&#22312; Linux &#19978;&#20351;&#29992;&#22351;&#22359;&#24037;&#20855;&#26816;&#26597;&#22351;&#36947;</H3>
<P>&#22351;&#22359;&#24037;&#20855;&#21487;&#20197;&#35753;&#29992;&#25143;&#25195;&#25551;&#35774;&#22791;&#26816;&#26597;&#22351;&#36947;&#25110;&#22351;&#22359;&#12290;&#35774;&#22791;&#21487;&#20197;&#26159;&#19968;&#20010;&#30913;&#30424;&#25110;&#22806;&#32622;&#30913;&#30424;&#65292;&#30001;&#19968;&#20010;&#22914; <CODE>/dev/sdc</CODE> &#36825;&#26679;&#30340;&#25991;&#20214;&#20195;&#34920;&#12290;</P>
<P>&#39318;&#20808;&#65292;&#36890;&#36807;&#36229;&#32423;&#29992;&#25143;&#26435;&#38480;&#25191;&#34892; <A class=ext href="http://www.tecmint.com/fdisk-commands-to-manage-linux-disk-partitions/" rel="external nofollow" target=_blank>fdisk &#21629;&#20196;</A>&#26469;&#26174;&#31034;&#20320;&#30340;&#25152;&#26377;&#30913;&#30424;&#25110;&#38378;&#23384;&#30340;&#20449;&#24687;&#20197;&#21450;&#23427;&#20204;&#30340;&#20998;&#21306;&#20449;&#24687;&#65306;</P><PRE class="prettyprint linenums prettyprinted"><OL class=linenums><LI class=L0><CODE><SPAN class=pln>$ </SPAN><SPAN class=kwd>sudo</SPAN><SPAN class=pln> </SPAN><SPAN class=kwd>fdisk</SPAN><SPAN class=pln> </SPAN><SPAN class=pun>-</SPAN><SPAN class=pln>l</SPAN><SPAN class=pun>&lt;</SPAN><SPAN class=pln>br</SPAN><SPAN class=pun>&gt;</SPAN></CODE></LI></OL></PRE>
<P class=article_img><IMG title="&#21015;&#20986; Linux &#25991;&#20214;&#31995;&#32479;&#20998;&#21306;" style="CURSOR: pointer; WIDTH: 734px" alt="&#21015;&#20986; Linux &#25991;&#20214;&#31995;&#32479;&#20998;&#21306;" src="https://dn-linuxcn.qbox.me/data/attachment/album/201611/16/161522zvofgpg5atqaz66q.png"></P>
<P class=article_img_desc><EM>&#21015;&#20986; Linux &#25991;&#20214;&#31995;&#32479;&#20998;&#21306;</EM></P>
<P>&#28982;&#21518;&#29992;&#22914;&#19979;&#21629;&#20196;&#26816;&#26597;&#20320;&#30340; Linux &#30828;&#30424;&#19978;&#30340;&#22351;&#36947;/&#22351;&#22359;&#65306;</P><PRE class="prettyprint linenums prettyprinted"><OL class=linenums><LI class=L0><CODE><SPAN class=pln>$ </SPAN><SPAN class=kwd>sudo</SPAN><SPAN class=pln> badblocks </SPAN><SPAN class=pun>-</SPAN><SPAN class=pln>v </SPAN><SPAN class=pun>/</SPAN><SPAN class=pln>dev</SPAN><SPAN class=pun>/</SPAN><SPAN class=pln>sda10 </SPAN><SPAN class=pun>&gt;</SPAN><SPAN class=pln> badsectors</SPAN><SPAN class=pun>.</SPAN><SPAN class=pln>txt</SPAN></CODE></LI></OL></PRE>
<P class=article_img><IMG title="&#22312; Linux &#19978;&#25195;&#25551;&#30828;&#30424;&#22351;&#36947;" alt="&#22312; Linux &#19978;&#25195;&#25551;&#30828;&#30424;&#22351;&#36947;" src="https://dn-linuxcn.qbox.me/data/attachment/album/201611/16/161523ae1f9efev9zmpa44.png"></P>
<P class=article_img_desc><EM>&#22312; Linux &#19978;&#25195;&#25551;&#30828;&#30424;&#22351;&#36947;</EM></P>
<P>&#19978;&#38754;&#30340;&#21629;&#20196;&#20013;&#65292;badblocks &#25195;&#25551;&#35774;&#22791; <CODE>/dev/sda10</CODE>&#65288;&#35760;&#24471;&#25351;&#23450;&#20320;&#30340;&#23454;&#38469;&#35774;&#22791;&#65289;&#65292;<CODE>-v</CODE> &#36873;&#39033;&#35753;&#23427;&#26174;&#31034;&#25805;&#20316;&#30340;&#35814;&#24773;&#12290;&#21478;&#22806;&#65292;&#36825;&#37324;&#20351;&#29992;&#20102;&#36755;&#20986;&#37325;&#23450;&#21521;&#23558;&#25805;&#20316;&#32467;&#26524;&#37325;&#23450;&#21521;&#21040;&#20102;&#25991;&#20214; <CODE>badsectors.txt</CODE>&#12290;</P>
<P>&#22914;&#26524;&#20320;&#22312;&#20320;&#30340;&#30913;&#30424;&#19978;&#21457;&#29616;&#20219;&#20309;&#22351;&#36947;&#65292;&#21368;&#36733;&#30913;&#30424;&#24182;&#20687;&#19979;&#38754;&#36825;&#26679;&#35753;&#31995;&#32479;&#19981;&#35201;&#23558;&#25968;&#25454;&#20889;&#20837;&#22238;&#25253;&#30340;&#25159;&#21306;&#20013;&#12290;</P>
<P>&#20320;&#38656;&#35201;&#25191;&#34892; <CODE>e2fsck</CODE>&#65288;&#38024;&#23545; ext2/ext3/ext4 &#25991;&#20214;&#31995;&#32479;&#65289;&#25110; <CODE>fsck</CODE> &#21629;&#20196;&#65292;&#21629;&#20196;&#20013;&#36824;&#38656;&#35201;&#29992;&#21040; <CODE>badsectors.txt</CODE> &#25991;&#20214;&#21644;&#35774;&#22791;&#25991;&#20214;&#12290;</P>
<P><CODE>-l</CODE> &#36873;&#39033;&#21578;&#35785;&#21629;&#20196;&#23558;&#22312;&#25351;&#23450;&#30340;&#25991;&#20214; <CODE>badsectors.txt</CODE> &#20013;&#21015;&#20986;&#30340;&#25159;&#21306;&#21495;&#30721;&#21152;&#20837;&#22351;&#22359;&#21015;&#34920;&#12290;</P><PRE class="prettyprint linenums prettyprinted"><OL class=linenums><LI class=L0><CODE><SPAN class=pun>------------</SPAN><SPAN class=pln> </SPAN><SPAN class=pun>&#38024;&#23545;</SPAN><SPAN class=pln> </SPAN><SPAN class=kwd>for</SPAN><SPAN class=pln> ext2</SPAN><SPAN class=pun>/</SPAN><SPAN class=pln>ext3</SPAN><SPAN class=pun>/</SPAN><SPAN class=pln>ext4 </SPAN><SPAN class=pun>&#25991;&#20214;&#31995;&#32479;</SPAN><SPAN class=pln> </SPAN><SPAN class=pun>------------</SPAN></CODE><LI class=L1><CODE><SPAN class=pln>$ </SPAN><SPAN class=kwd>sudo</SPAN><SPAN class=pln> </SPAN><SPAN class=kwd>e2fsck</SPAN><SPAN class=pln> </SPAN><SPAN class=pun>-</SPAN><SPAN class=pln>l badsectors</SPAN><SPAN class=pun>.</SPAN><SPAN class=pln>txt </SPAN><SPAN class=pun>/</SPAN><SPAN class=pln>dev</SPAN><SPAN class=pun>/</SPAN><SPAN class=pln>sda10</SPAN></CODE><LI class=L2><CODE></CODE><LI class=L3><CODE><SPAN class=pun>&#25110;</SPAN></CODE><LI class=L4><CODE></CODE><LI class=L5><CODE><SPAN class=pun>------------</SPAN><SPAN class=pln> </SPAN><SPAN class=pun>&#38024;&#23545;&#20854;&#23427;&#25991;&#20214;&#31995;&#32479;</SPAN><SPAN class=pln> </SPAN><SPAN class=pun>------------</SPAN></CODE><LI class=L6><CODE><SPAN class=pln>$ </SPAN><SPAN class=kwd>sudo</SPAN><SPAN class=pln> </SPAN><SPAN class=kwd>fsck</SPAN><SPAN class=pln> </SPAN><SPAN class=pun>-</SPAN><SPAN class=pln>l badsectors</SPAN><SPAN class=pun>.</SPAN><SPAN class=pln>txt </SPAN><SPAN class=pun>/</SPAN><SPAN class=pln>dev</SPAN><SPAN class=pun>/</SPAN><SPAN class=pln>sda10</SPAN></CODE></LI></OL></PRE><A id=3_3093 class="target-fix ext" rel="external nofollow" target=_blank></A>
<H3 id=toc_2>&#22312; Linux &#19978;&#20351;&#29992; Smartmontools &#24037;&#20855;&#25195;&#25551;&#22351;&#36947;</H3>
<P>&#36825;&#20010;&#26041;&#27861;&#23545;&#24102;&#26377; S.M.A.R.T&#65288;<RUBY>&#33258;&#25105;&#30417;&#25511;&#20998;&#26512;&#25253;&#21578;&#25216;&#26415;<RP><FONT size=1>&#65288;</FONT></RP><RT><FONT size=1>Self-Monitoring, Analysis and Reporting Technology</FONT></RT><RP><FONT size=1>&#65289;</FONT></RP></RUBY>&#65289;&#31995;&#32479;&#30340;&#29616;&#20195;&#30913;&#30424;&#65288;ATA/SATA &#21644; SCSI/SAS &#30828;&#30424;&#20197;&#21450;&#22266;&#24577;&#30828;&#30424;&#65289;&#26356;&#21152;&#30340;&#21487;&#38752;&#21644;&#39640;&#25928;&#12290;S.M.A.R.T &#31995;&#32479;&#33021;&#22815;&#24110;&#21161;&#26816;&#27979;&#65292;&#25253;&#21578;&#65292;&#20197;&#21450;&#21487;&#33021;&#35760;&#24405;&#23427;&#20204;&#30340;&#20581;&#24247;&#29366;&#20917;&#65292;&#36825;&#26679;&#20320;&#23601;&#21487;&#20197;&#25214;&#20986;&#20219;&#20309;&#21487;&#33021;&#20986;&#29616;&#30340;&#30828;&#20214;&#22833;&#25928;&#12290;</P>
<P>&#20320;&#21487;&#20197;&#20351;&#29992;&#20197;&#19979;&#21629;&#20196;&#23433;&#35013; <CODE>smartmontools</CODE>&#65306;</P><PRE class="prettyprint linenums prettyprinted"><OL class=linenums><LI class=L0><CODE><SPAN class=pun>------------</SPAN><SPAN class=pln> </SPAN><SPAN class=pun>&#22312;&#22522;&#20110;</SPAN><SPAN class=pln> </SPAN><SPAN class=typ>Debian</SPAN><SPAN class=pun>/</SPAN><SPAN class=typ>Ubuntu</SPAN><SPAN class=pln> </SPAN><SPAN class=pun>&#30340;&#31995;&#32479;&#19978;</SPAN><SPAN class=pln> </SPAN><SPAN class=pun>------------</SPAN></CODE><LI class=L1><CODE><SPAN class=pln>$ </SPAN><SPAN class=kwd>sudo</SPAN><SPAN class=pln> </SPAN><SPAN class=kwd>apt-get</SPAN><SPAN class=pln> install smartmontools</SPAN></CODE><LI class=L2><CODE></CODE><LI class=L3><CODE><SPAN class=pun>------------</SPAN><SPAN class=pln> </SPAN><SPAN class=pun>&#22312;&#22522;&#20110;</SPAN><SPAN class=pln> RHEL</SPAN><SPAN class=pun>/</SPAN><SPAN class=typ>CentOS</SPAN><SPAN class=pln> </SPAN><SPAN class=pun>&#30340;&#31995;&#32479;&#19978;</SPAN><SPAN class=pln> </SPAN><SPAN class=pun>------------</SPAN></CODE><LI class=L4><CODE><SPAN class=pln>$ </SPAN><SPAN class=kwd>sudo</SPAN><SPAN class=pln> </SPAN><SPAN class=kwd>yum</SPAN><SPAN class=pln> install smartmontools</SPAN></CODE></LI></OL></PRE>
<P>&#23433;&#35013;&#23436;&#25104;&#20043;&#21518;&#65292;&#20351;&#29992; <CODE>smartctl</CODE> &#25511;&#21046;&#30913;&#30424;&#38598;&#25104;&#30340; S.M.A.R.T &#31995;&#32479;&#12290;&#20320;&#21487;&#20197;&#36825;&#26679;&#26597;&#30475;&#23427;&#30340;&#25163;&#20876;&#25110;&#24110;&#21161;&#65306;</P><PRE class="prettyprint linenums prettyprinted"><OL class=linenums><LI class=L0><CODE><SPAN class=pln>$ </SPAN><SPAN class=kwd>man</SPAN><SPAN class=pln> smartctl</SPAN></CODE><LI class=L1><CODE><SPAN class=pln>$ smartctl </SPAN><SPAN class=pun>-</SPAN><SPAN class=pln>h</SPAN></CODE></LI></OL></PRE>
<P>&#28982;&#21518;&#25191;&#34892; <CODE>smartctrl</CODE> &#21629;&#20196;&#24182;&#22312;&#21629;&#20196;&#20013;&#25351;&#23450;&#20320;&#30340;&#35774;&#22791;&#20316;&#20026;&#21442;&#25968;&#65292;&#20197;&#19979;&#21629;&#20196;&#21253;&#21547;&#20102;&#21442;&#25968; <CODE>-H</CODE> &#25110; <CODE>--health</CODE> &#20197;&#26174;&#31034; SMART &#25972;&#20307;&#20581;&#24247;&#33258;&#25105;&#35780;&#20272;&#27979;&#35797;&#32467;&#26524;&#12290;</P><PRE class="prettyprint linenums prettyprinted"><OL class=linenums><LI class=L0><CODE><SPAN class=pln>$ </SPAN><SPAN class=kwd>sudo</SPAN><SPAN class=pln> smartctl </SPAN><SPAN class=pun>-</SPAN><SPAN class=pln>H </SPAN><SPAN class=pun>/</SPAN><SPAN class=pln>dev</SPAN><SPAN class=pun>/</SPAN><SPAN class=pln>sda10</SPAN></CODE></LI></OL></PRE>
<P class=article_img><IMG title="&#26816;&#26597; Linux &#30828;&#30424;&#20581;&#24247;" style="CURSOR: pointer; WIDTH: 734px" alt="&#26816;&#26597; Linux &#30828;&#30424;&#20581;&#24247;" src="https://dn-linuxcn.qbox.me/data/attachment/album/201611/16/161523ycc1n841ncat1zz2.png"></P>
<P class=article_img_desc><EM>&#26816;&#26597; Linux &#30828;&#30424;&#20581;&#24247;</EM></P>
<P>&#19978;&#38754;&#30340;&#32467;&#26524;&#25351;&#20986;&#20320;&#30340;&#30828;&#30424;&#24456;&#20581;&#24247;&#65292;&#36817;&#26399;&#20869;&#19981;&#22823;&#21487;&#33021;&#21457;&#29983;&#30828;&#20214;&#22833;&#25928;&#12290;</P>
<P>&#35201;&#33719;&#21462;&#30913;&#30424;&#20449;&#24687;&#24635;&#35272;&#65292;&#20351;&#29992; <CODE>-a</CODE> &#25110; <CODE>--all</CODE> &#36873;&#39033;&#26469;&#26174;&#31034;&#20851;&#20110;&#30913;&#30424;&#25152;&#26377;&#30340; SMART &#20449;&#24687;&#65292;<CODE>-x</CODE> &#25110; <CODE>--xall</CODE> &#26469;&#26174;&#31034;&#25152;&#26377;&#20851;&#20110;&#30913;&#30424;&#30340; SMART &#20449;&#24687;&#20197;&#21450;&#38750; SMART &#20449;&#24687;&#12290;</P></DIV></DIV>