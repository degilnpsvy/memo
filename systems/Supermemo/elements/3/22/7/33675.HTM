/* Allocate a new translation block. Flush the translation buffer if<BR>&nbsp;&nbsp; too many translation blocks or too much generated code. */<BR>static TranslationBlock *tb_alloc(target_ulong pc)<BR>{<BR>&nbsp;&nbsp;&nbsp; TranslationBlock *tb;</P>
<P>&nbsp;&nbsp;&nbsp; if (tcg_ctx.tb_ctx.nb_tbs &gt;= tcg_ctx.code_gen_max_blocks) {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return NULL;<BR>&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; tb = &amp;tcg_ctx.tb_ctx.tbs[tcg_ctx.tb_ctx.nb_tbs++];<BR>&nbsp;&nbsp;&nbsp; tb-&gt;pc = pc;<BR>&nbsp;&nbsp;&nbsp; tb-&gt;cflags = 0;<BR>&nbsp;&nbsp;&nbsp; return tb;<BR>}