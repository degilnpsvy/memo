#if defined(CONFIG_USER_ONLY)<BR>/* Currently it is not recommended to allocate big chunks of data in<BR>&nbsp;&nbsp; user mode. It will change when a dedicated libc will be used.&nbsp; */<BR>/* ??? 64-bit hosts ought to have no problem mmaping data outside the<BR>&nbsp;&nbsp; region in which the guest needs to run.&nbsp; Revisit this.&nbsp; */<BR>#define USE_STATIC_CODE_GEN_BUFFER<BR>#endif 
<P></P>
<P>/* Minimum size of the code gen buffer.&nbsp; This number is randomly chosen,<BR>&nbsp;&nbsp; but not so small that we can't have a fair number of TB's live.&nbsp; */<BR>#define MIN_CODE_GEN_BUFFER_SIZE&nbsp;&nbsp;&nbsp;&nbsp; (1024u * 1024)</P>
<P>/* Maximum size of the code gen buffer we'd like to use.&nbsp; Unless otherwise<BR>&nbsp;&nbsp; indicated, this is constrained by the range of direct branches on the<BR>&nbsp;&nbsp; host cpu, as used by the TCG implementation of goto_tb.&nbsp; */<BR>#if defined(__x86_64__)<BR># define MAX_CODE_GEN_BUFFER_SIZE&nbsp; (2ul * 1024 * 1024 * 1024)<BR>#elif defined(__sparc__)<BR># define MAX_CODE_GEN_BUFFER_SIZE&nbsp; (2ul * 1024 * 1024 * 1024)<BR>#elif defined(__powerpc64__)<BR># define MAX_CODE_GEN_BUFFER_SIZE&nbsp; (2ul * 1024 * 1024 * 1024)<BR>#elif defined(__aarch64__)<BR># define MAX_CODE_GEN_BUFFER_SIZE&nbsp; (128ul * 1024 * 1024)<BR>#elif defined(__arm__)<BR># define MAX_CODE_GEN_BUFFER_SIZE&nbsp; (16u * 1024 * 1024)<BR>#elif defined(__s390x__)<BR>&nbsp; /* We have a +- 4GB range on the branches; leave some slop.&nbsp; */<BR># define MAX_CODE_GEN_BUFFER_SIZE&nbsp; (3ul * 1024 * 1024 * 1024)<BR>#elif defined(__mips__)<BR>&nbsp; /* We have a 256MB branch region, but leave room to make sure the<BR>&nbsp;&nbsp;&nbsp;&nbsp; main executable is also within that region.&nbsp; */<BR># define MAX_CODE_GEN_BUFFER_SIZE&nbsp; (128ul * 1024 * 1024)<BR>#else<BR># define MAX_CODE_GEN_BUFFER_SIZE&nbsp; ((size_t)-1)<BR>#endif</P>
<P>#define DEFAULT_CODE_GEN_BUFFER_SIZE_1 (32u * 1024 * 1024)</P>
<P>#define DEFAULT_CODE_GEN_BUFFER_SIZE \<BR>&nbsp; (DEFAULT_CODE_GEN_BUFFER_SIZE_1 &lt; MAX_CODE_GEN_BUFFER_SIZE \<BR>&nbsp;&nbsp; ? DEFAULT_CODE_GEN_BUFFER_SIZE_1 : MAX_CODE_GEN_BUFFER_SIZE)