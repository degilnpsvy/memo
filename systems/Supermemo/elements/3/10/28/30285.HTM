static inline bool use_goto_tb(DisasContext *s, target_ulong dest)<BR>{<BR>#ifndef CONFIG_USER_ONLY<BR>&nbsp;&nbsp;&nbsp; return (s-&gt;tb-&gt;pc &amp; TARGET_PAGE_MASK) == (dest &amp; TARGET_PAGE_MASK) ||<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ((s-&gt;pc - 1) &amp; TARGET_PAGE_MASK) == (dest &amp; TARGET_PAGE_MASK);<BR>#else<BR>&nbsp;&nbsp;&nbsp; return true;<BR>#endif<BR>}
<P></P>
<P>static inline void gen_goto_tb(DisasContext *s, int n, target_ulong dest)<BR>{<BR>&nbsp;&nbsp;&nbsp; if (use_goto_tb(s, dest)) {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tcg_gen_goto_tb(n);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; gen_set_pc_im(s, dest);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tcg_gen_exit_tb((uintptr_t)s-&gt;tb + n);<BR>&nbsp;&nbsp;&nbsp; } else {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; gen_set_pc_im(s, dest);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tcg_gen_exit_tb(0);<BR>&nbsp;&nbsp;&nbsp; }<BR>}</P>
<P>static inline void gen_jmp (DisasContext *s, uint32_t dest)<BR>{<BR>&nbsp;&nbsp;&nbsp; if (unlikely(s-&gt;singlestep_enabled || s-&gt;ss_active)) {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /* An indirect jump so that we still trigger the debug exception.&nbsp; */<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (s-&gt;thumb)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; dest |= 1;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; gen_bx_im(s, dest);<BR>&nbsp;&nbsp;&nbsp; } else {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; gen_goto_tb(s, 0, dest);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; s-&gt;is_jmp = DISAS_TB_JUMP;<BR>&nbsp;&nbsp;&nbsp; }<BR>}