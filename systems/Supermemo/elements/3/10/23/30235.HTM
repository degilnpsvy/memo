void tcg_gen_deposit_i32(TCGv_i32 ret, TCGv_i32 arg1, TCGv_i32 arg2,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; unsigned int ofs, unsigned int len)<BR>{<BR>&nbsp;&nbsp;&nbsp; uint32_t mask;<BR>&nbsp;&nbsp;&nbsp; TCGv_i32 t1;</P>
<P>&nbsp;&nbsp;&nbsp; tcg_debug_assert(ofs &lt; 32);<BR>&nbsp;&nbsp;&nbsp; tcg_debug_assert(len &lt;= 32);<BR>&nbsp;&nbsp;&nbsp; tcg_debug_assert(ofs + len &lt;= 32);</P>
<P>&nbsp;&nbsp;&nbsp; if (ofs == 0 &amp;&amp; len == 32) {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tcg_gen_mov_i32(ret, arg2);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return;<BR>&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; if (TCG_TARGET_HAS_deposit_i32 &amp;&amp; TCG_TARGET_deposit_i32_valid(ofs, len)) {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tcg_gen_op5ii_i32(INDEX_op_deposit_i32, ret, arg1, arg2, ofs, len);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return;<BR>&nbsp;&nbsp;&nbsp; }</P>
<P>&nbsp;&nbsp;&nbsp; mask = (1u &lt;&lt; len) - 1;<BR>&nbsp;&nbsp;&nbsp; t1 = tcg_temp_new_i32();</P>
<P>&nbsp;&nbsp;&nbsp; if (ofs + len &lt; 32) {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tcg_gen_andi_i32(t1, arg2, mask);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tcg_gen_shli_i32(t1, t1, ofs);<BR>&nbsp;&nbsp;&nbsp; } else {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tcg_gen_shli_i32(t1, arg2, ofs);<BR>&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; tcg_gen_andi_i32(ret, arg1, ~(mask &lt;&lt; ofs));<BR>&nbsp;&nbsp;&nbsp; tcg_gen_or_i32(ret, ret, t1);</P>
<P>&nbsp;&nbsp;&nbsp; tcg_temp_free_i32(t1);<BR>}