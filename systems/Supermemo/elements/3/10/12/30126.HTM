&#29992;&#20110;&#25277;&#35937;Platform&#35774;&#22791;&#30340;&#25968;&#25454;&#32467;&#26500;----&#8220;struct platform_device&#8221;&#65306; </P>
<DIV id=codeSnippetWrapper style='OVERFLOW: auto; CURSOR: text; FONT-SIZE: 8pt; BORDER-TOP: silver 1px solid; FONT-FAMILY: "Courier New", courier, monospace; BORDER-RIGHT: silver 1px solid; WIDTH: 97.5%; BORDER-BOTTOM: silver 1px solid; PADDING-BOTTOM: 4px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 4px; PADDING-LEFT: 4px; MARGIN: 20px 0px 10px; BORDER-LEFT: silver 1px solid; LINE-HEIGHT: 12pt; PADDING-RIGHT: 4px; MAX-HEIGHT: 200px; BACKGROUND-COLOR: rgb(244,244,244)'>
<DIV id=codeSnippet style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(244,244,244)'><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: white'><SPAN id=lnum1 style="COLOR: rgb(96,96,96)">   1:</SPAN> <SPAN style="COLOR: rgb(0,128,0)">/* include/linux/platform_device.h, line 22 */</SPAN></PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(244,244,244)'><SPAN id=lnum2 style="COLOR: rgb(96,96,96)">   2:</SPAN> <SPAN style="COLOR: rgb(0,0,255)">struct</SPAN> platform_device {</PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: white'><SPAN id=lnum3 style="COLOR: rgb(96,96,96)">   3:</SPAN>         <SPAN style="COLOR: rgb(0,0,255)">const</SPAN> <SPAN style="COLOR: rgb(0,0,255)">char</SPAN>      *name;</PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(244,244,244)'><SPAN id=lnum4 style="COLOR: rgb(96,96,96)">   4:</SPAN>         <SPAN style="COLOR: rgb(0,0,255)">int</SPAN>             id;</PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: white'><SPAN id=lnum5 style="COLOR: rgb(96,96,96)">   5:</SPAN>         <SPAN style="COLOR: rgb(0,0,255)">bool</SPAN>            id_auto; </PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(244,244,244)'><SPAN id=lnum6 style="COLOR: rgb(96,96,96)">   6:</SPAN>         <SPAN style="COLOR: rgb(0,0,255)">struct</SPAN> device   dev;</PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: white'><SPAN id=lnum7 style="COLOR: rgb(96,96,96)">   7:</SPAN>         u32             num_resources;</PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(244,244,244)'><SPAN id=lnum8 style="COLOR: rgb(96,96,96)">   8:</SPAN>         <SPAN style="COLOR: rgb(0,0,255)">struct</SPAN> resource *resource;</PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: white'><SPAN id=lnum9 style="COLOR: rgb(96,96,96)">   9:</SPAN>&nbsp; </PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(244,244,244)'><SPAN id=lnum10 style="COLOR: rgb(96,96,96)">  10:</SPAN>         <SPAN style="COLOR: rgb(0,0,255)">const</SPAN> <SPAN style="COLOR: rgb(0,0,255)">struct</SPAN> platform_device_id *id_entry;</PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: white'><SPAN id=lnum11 style="COLOR: rgb(96,96,96)">  11:</SPAN>         </PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(244,244,244)'><SPAN id=lnum12 style="COLOR: rgb(96,96,96)">  12:</SPAN>         <SPAN style="COLOR: rgb(0,128,0)">/* MFD cell pointer */</SPAN></PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: white'><SPAN id=lnum13 style="COLOR: rgb(96,96,96)">  13:</SPAN>         <SPAN style="COLOR: rgb(0,0,255)">struct</SPAN> mfd_cell *mfd_cell;</PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(244,244,244)'><SPAN id=lnum14 style="COLOR: rgb(96,96,96)">  14:</SPAN>&nbsp; </PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: white'><SPAN id=lnum15 style="COLOR: rgb(96,96,96)">  15:</SPAN>         <SPAN style="COLOR: rgb(0,128,0)">/* arch specific additions */</SPAN></PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(244,244,244)'><SPAN id=lnum16 style="COLOR: rgb(96,96,96)">  16:</SPAN>         <SPAN style="COLOR: rgb(0,0,255)">struct</SPAN> pdev_archdata    archdata;</PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: white'><SPAN id=lnum17 style="COLOR: rgb(96,96,96)">  17:</SPAN> };</PRE><!--CRLF--></DIV></DIV>
<BLOCKQUOTE>
<P>&#35813;&#32467;&#26500;&#30340;&#35299;&#37322;&#22914;&#19979;&#65306; </P>
<P>dev&#65292;&#30495;&#27491;&#30340;&#35774;&#22791;&#65288;Platform&#35774;&#22791;&#21482;&#26159;&#19968;&#20010;&#29305;&#27530;&#30340;&#35774;&#22791;&#65292;&#22240;&#27492;&#20854;&#26680;&#24515;&#36923;&#36753;&#36824;&#26159;&#30001;&#24213;&#23618;&#30340;&#27169;&#22359;&#23454;&#29616;&#65289;&#12290; </P>
<P>name&#65292;&#35774;&#22791;&#30340;&#21517;&#31216;&#65292;&#21644;struct device&#32467;&#26500;&#20013;&#30340;init_name&#65288;"<A href="http://www.wowotech.net/linux_kenrel/device_and_driver.html">Linux&#35774;&#22791;&#27169;&#22411;(5)_device&#21644;device driver</A>&#8221;&#65289;&#24847;&#20041;&#30456;&#21516;&#12290;&#23454;&#38469;&#19978;&#65292;&#35813;&#21517;&#31216;&#22312;&#35774;&#22791;&#27880;&#20876;&#26102;&#65292;&#20250;&#25335;&#36125;&#21040;dev.init_name&#20013;&#12290; </P>
<P>id&#65292;&#29992;&#20110;&#26631;&#35782;&#35813;&#35774;&#22791;&#30340;ID&#12290; <BR>&#22312;&#8220;<A href="http://www.wowotech.net/linux_kenrel/bus.html">Linux&#35774;&#22791;&#27169;&#22411;(6)_Bus</A>&#8221;&#20013;&#26377;&#25552;&#36807;&#65292;&#20869;&#26680;&#20801;&#35768;&#23384;&#22312;&#22810;&#20010;&#21517;&#31216;&#30456;&#21516;&#30340;&#35774;&#22791;&#12290;&#32780;&#35774;&#22791;&#39537;&#21160;&#30340;probe&#65292;&#20381;&#36182;&#20110;&#21517;&#31216;&#65292;Linux&#37319;&#21462;&#30340;&#31574;&#30053;&#26159;&#65306;&#22312;bus&#30340;&#35774;&#22791;&#38142;&#34920;&#20013;&#26597;&#25214;device&#65292;&#21644;&#23545;&#24212;&#30340;device_driver&#27604;&#23545;name&#65292;&#22914;&#26524;&#30456;&#21516;&#65292;&#21017;&#26597;&#30475;&#35813;&#35774;&#22791;&#26159;&#21542;&#24050;&#32463;&#32465;&#23450;&#20102;driver&#65288;&#26597;&#30475;&#20854;dev-&gt;driver&#25351;&#38024;&#26159;&#21542;&#20026;&#31354;&#65289;&#65292;&#22914;&#26524;&#24050;&#32465;&#23450;&#65292;&#21017;&#19981;&#20250;&#25191;&#34892;probe&#21160;&#20316;&#65292;&#22914;&#26524;&#27809;&#26377;&#32465;&#23450;&#65292;&#21017;&#20197;&#35813;device&#30340;&#25351;&#38024;&#20026;&#21442;&#25968;&#65292;&#35843;&#29992;driver&#30340;probe&#25509;&#21475;&#12290; <BR>&#22240;&#27492;&#65292;&#22312;driver&#30340;probe&#25509;&#21475;&#20013;&#65292;&#36890;&#36807;&#21028;&#26029;&#35774;&#22791;&#30340;ID&#65292;&#21487;&#20197;&#30693;&#36947;&#27492;&#27425;&#39537;&#21160;&#30340;&#35774;&#22791;&#26159;&#21738;&#20010;&#12290; </P>
<P>id_auto&#65292;&#25351;&#31034;&#22312;&#27880;&#20876;&#35774;&#22791;&#26102;&#65292;&#26159;&#21542;&#33258;&#21160;&#36171;&#20104;ID&#20540;&#65288;&#19981;&#38656;&#35201;&#20154;&#20026;&#25351;&#23450;&#21862;&#65292;&#21487;&#20197;&#25042;&#19968;&#28857;&#21862;&#65289;&#12290; </P>
<P>num_resources&#12289;resource&#65292;&#35813;&#35774;&#22791;&#30340;&#36164;&#28304;&#25551;&#36848;&#65292;&#30001;struct resource&#65288;include/linux/ioport.h&#65289;&#32467;&#26500;&#25277;&#35937;&#12290; <BR><SPAN style="COLOR: rgb(0,0,255)">&#22312;Linux&#20013;&#65292;&#31995;&#32479;&#36164;&#28304;&#21253;&#25324;I/O&#12289;Memory&#12289;Register&#12289;IRQ&#12289;DMA&#12289;Bus&#31561;&#22810;&#31181;&#31867;&#22411;&#12290;&#36825;&#20123;&#36164;&#28304;&#22823;&#22810;&#20855;&#26377;&#29420;&#21344;&#24615;&#65292;&#19981;&#20801;&#35768;&#22810;&#20010;&#35774;&#22791;&#21516;&#26102;&#20351;&#29992;&#65292;&#22240;&#27492;Linux&#20869;&#26680;&#25552;&#20379;&#20102;&#19968;&#20123;API&#65292;&#29992;&#20110;&#20998;&#37197;&#12289;&#31649;&#29702;&#36825;&#20123;&#36164;&#28304;&#12290; <BR>&#24403;&#26576;&#20010;&#35774;&#22791;&#38656;&#35201;&#20351;&#29992;&#26576;&#20123;&#36164;&#28304;&#26102;&#65292;&#21482;&#38656;&#21033;&#29992;struct resource&#32452;&#32455;&#36825;&#20123;&#36164;&#28304;&#65288;&#22914;&#21517;&#31216;&#12289;&#31867;&#22411;&#12289;&#36215;&#22987;&#12289;&#32467;&#26463;&#22320;&#22336;&#31561;&#65289;&#65292;&#24182;&#20445;&#23384;&#22312;&#35813;&#35774;&#22791;&#30340;resource&#25351;&#38024;&#20013;&#21363;&#21487;&#12290;&#28982;&#21518;&#22312;&#35774;&#22791;probe&#26102;&#65292;&#35774;&#22791;&#38656;&#27714;&#20250;&#35843;&#29992;&#36164;&#28304;&#31649;&#29702;&#25509;&#21475;&#65292;&#20998;&#37197;&#12289;&#20351;&#29992;&#36825;&#20123;&#36164;&#28304;&#12290;&#32780;&#20869;&#26680;&#30340;&#36164;&#28304;&#31649;&#29702;&#36923;&#36753;&#65292;&#21487;&#20197;&#21028;&#26029;&#36825;&#20123;&#36164;&#28304;&#26159;&#21542;&#24050;&#34987;&#20351;&#29992;&#12289;&#26159;&#21542;&#21487;&#34987;&#20351;&#29992;&#31561;&#31561;&#12290;</SPAN> </P>
<P>id_entry&#65292;&#21644;&#20869;&#26680;&#27169;&#22359;&#30456;&#20851;&#30340;&#20869;&#23481;&#65292;&#26242;&#19981;&#35828;&#26126;&#12290; </P>
<P>mfd_cell&#65292;&#21644;MFD&#35774;&#22791;&#30456;&#20851;&#30340;&#20869;&#23481;&#65292;&#26242;&#19981;&#35828;&#26126;&#12290; </P>
<P>archdata&#65292;&#19968;&#20010;&#22855;&#33897;&#30340;&#23384;&#22312;&#65281;&#65281;&#23427;&#30340;&#30446;&#30340;&#26159;&#20026;&#20102;&#20445;&#23384;&#19968;&#20123;architecture&#30456;&#20851;&#30340;&#25968;&#25454;&#65292;&#21435;&#30475;&#30475;arch/arm/include/asm/device.h&#20013;struct pdev_archdata&#32467;&#26500;&#30340;&#23450;&#20041;&#65292;&#23601;&#30693;&#36947;&#36825;&#31181;&#25918;&#32437;&#30340;&#35774;&#35745;&#26377;&#22810;&#20040;&#22403;&#22334;&#20102;&#12290;&#19981;&#31649;&#23427;&#20102;&#65281;&#65281;</P></BLOCKQUOTE>