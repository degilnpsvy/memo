Platform Device&#20027;&#35201;&#25552;&#20379;&#35774;&#22791;&#30340;&#20998;&#37197;&#12289;&#27880;&#20876;&#31561;&#25509;&#21475;&#65292;&#20379;&#20854;&#23427;driver&#20351;&#29992;&#65292;&#20855;&#20307;&#21253;&#25324;&#65306; 
<P></P>
<DIV id=codeSnippetWrapper style='OVERFLOW: auto; CURSOR: text; FONT-SIZE: 8pt; BORDER-TOP: silver 1px solid; FONT-FAMILY: "Courier New", courier, monospace; BORDER-RIGHT: silver 1px solid; WIDTH: 97.5%; BORDER-BOTTOM: silver 1px solid; PADDING-BOTTOM: 4px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 4px; PADDING-LEFT: 4px; MARGIN: 20px 0px 10px; BORDER-LEFT: silver 1px solid; LINE-HEIGHT: 12pt; PADDING-RIGHT: 4px; MAX-HEIGHT: 200px; BACKGROUND-COLOR: rgb(244,244,244)'>
<DIV id=codeSnippet style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(244,244,244)'><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: white'><SPAN id=lnum1 style="COLOR: rgb(96,96,96)">   1:</SPAN> <SPAN style="COLOR: rgb(0,128,0)">/* include/linux/platform_device.h */</SPAN></PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(244,244,244)'><SPAN id=lnum2 style="COLOR: rgb(96,96,96)">   2:</SPAN> <SPAN style="COLOR: rgb(0,0,255)">extern</SPAN> <SPAN style="COLOR: rgb(0,0,255)">int</SPAN> platform_device_register(<SPAN style="COLOR: rgb(0,0,255)">struct</SPAN> platform_device *);</PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: white'><SPAN id=lnum3 style="COLOR: rgb(96,96,96)">   3:</SPAN> <SPAN style="COLOR: rgb(0,0,255)">extern</SPAN> <SPAN style="COLOR: rgb(0,0,255)">void</SPAN> platform_device_unregister(<SPAN style="COLOR: rgb(0,0,255)">struct</SPAN> platform_device *);</PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(244,244,244)'><SPAN id=lnum4 style="COLOR: rgb(96,96,96)">   4:</SPAN>&nbsp; </PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: white'><SPAN id=lnum5 style="COLOR: rgb(96,96,96)">   5:</SPAN> <SPAN style="COLOR: rgb(0,0,255)">extern</SPAN> <SPAN style="COLOR: rgb(0,0,255)">void</SPAN> arch_setup_pdev_archdata(<SPAN style="COLOR: rgb(0,0,255)">struct</SPAN> platform_device *);</PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(244,244,244)'><SPAN id=lnum6 style="COLOR: rgb(96,96,96)">   6:</SPAN> <SPAN style="COLOR: rgb(0,0,255)">extern</SPAN> <SPAN style="COLOR: rgb(0,0,255)">struct</SPAN> resource *platform_get_resource(<SPAN style="COLOR: rgb(0,0,255)">struct</SPAN> platform_device *,</PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: white'><SPAN id=lnum7 style="COLOR: rgb(96,96,96)">   7:</SPAN>                                               <SPAN style="COLOR: rgb(0,0,255)">unsigned</SPAN> <SPAN style="COLOR: rgb(0,0,255)">int</SPAN>, <SPAN style="COLOR: rgb(0,0,255)">unsigned</SPAN> <SPAN style="COLOR: rgb(0,0,255)">int</SPAN>);</PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(244,244,244)'><SPAN id=lnum8 style="COLOR: rgb(96,96,96)">   8:</SPAN> <SPAN style="COLOR: rgb(0,0,255)">extern</SPAN> <SPAN style="COLOR: rgb(0,0,255)">int</SPAN> platform_get_irq(<SPAN style="COLOR: rgb(0,0,255)">struct</SPAN> platform_device *, <SPAN style="COLOR: rgb(0,0,255)">unsigned</SPAN> <SPAN style="COLOR: rgb(0,0,255)">int</SPAN>);</PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: white'><SPAN id=lnum9 style="COLOR: rgb(96,96,96)">   9:</SPAN> <SPAN style="COLOR: rgb(0,0,255)">extern</SPAN> <SPAN style="COLOR: rgb(0,0,255)">struct</SPAN> resource *platform_get_resource_byname(<SPAN style="COLOR: rgb(0,0,255)">struct</SPAN> platform_device *,</PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(244,244,244)'><SPAN id=lnum10 style="COLOR: rgb(96,96,96)">  10:</SPAN>                                                      <SPAN style="COLOR: rgb(0,0,255)">unsigned</SPAN> <SPAN style="COLOR: rgb(0,0,255)">int</SPAN>,</PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: white'><SPAN id=lnum11 style="COLOR: rgb(96,96,96)">  11:</SPAN>                                                      <SPAN style="COLOR: rgb(0,0,255)">const</SPAN> <SPAN style="COLOR: rgb(0,0,255)">char</SPAN> *);</PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(244,244,244)'><SPAN id=lnum12 style="COLOR: rgb(96,96,96)">  12:</SPAN> <SPAN style="COLOR: rgb(0,0,255)">extern</SPAN> <SPAN style="COLOR: rgb(0,0,255)">int</SPAN> platform_get_irq_byname(<SPAN style="COLOR: rgb(0,0,255)">struct</SPAN> platform_device *, <SPAN style="COLOR: rgb(0,0,255)">const</SPAN> <SPAN style="COLOR: rgb(0,0,255)">char</SPAN> *);</PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: white'><SPAN id=lnum13 style="COLOR: rgb(96,96,96)">  13:</SPAN> <SPAN style="COLOR: rgb(0,0,255)">extern</SPAN> <SPAN style="COLOR: rgb(0,0,255)">int</SPAN> platform_add_devices(<SPAN style="COLOR: rgb(0,0,255)">struct</SPAN> platform_device **, <SPAN style="COLOR: rgb(0,0,255)">int</SPAN>);</PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(244,244,244)'><SPAN id=lnum14 style="COLOR: rgb(96,96,96)">  14:</SPAN>&nbsp; </PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: white'><SPAN id=lnum15 style="COLOR: rgb(96,96,96)">  15:</SPAN> <SPAN style="COLOR: rgb(0,0,255)">extern</SPAN> <SPAN style="COLOR: rgb(0,0,255)">struct</SPAN> platform_device *platform_device_register_full(</PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(244,244,244)'><SPAN id=lnum16 style="COLOR: rgb(96,96,96)">  16:</SPAN>                 <SPAN style="COLOR: rgb(0,0,255)">const</SPAN> <SPAN style="COLOR: rgb(0,0,255)">struct</SPAN> platform_device_info *pdevinfo);</PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: white'><SPAN id=lnum17 style="COLOR: rgb(96,96,96)">  17:</SPAN>&nbsp; </PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(244,244,244)'><SPAN id=lnum18 style="COLOR: rgb(96,96,96)">  18:</SPAN> <SPAN style="COLOR: rgb(0,0,255)">static</SPAN> <SPAN style="COLOR: rgb(0,0,255)">inline</SPAN> <SPAN style="COLOR: rgb(0,0,255)">struct</SPAN> platform_device *platform_device_register_resndata(</PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: white'><SPAN id=lnum19 style="COLOR: rgb(96,96,96)">  19:</SPAN>                 <SPAN style="COLOR: rgb(0,0,255)">struct</SPAN> device *parent, <SPAN style="COLOR: rgb(0,0,255)">const</SPAN> <SPAN style="COLOR: rgb(0,0,255)">char</SPAN> *name, <SPAN style="COLOR: rgb(0,0,255)">int</SPAN> id,</PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(244,244,244)'><SPAN id=lnum20 style="COLOR: rgb(96,96,96)">  20:</SPAN>                 <SPAN style="COLOR: rgb(0,0,255)">const</SPAN> <SPAN style="COLOR: rgb(0,0,255)">struct</SPAN> resource *res, <SPAN style="COLOR: rgb(0,0,255)">unsigned</SPAN> <SPAN style="COLOR: rgb(0,0,255)">int</SPAN> num,</PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: white'><SPAN id=lnum21 style="COLOR: rgb(96,96,96)">  21:</SPAN>                 <SPAN style="COLOR: rgb(0,0,255)">const</SPAN> <SPAN style="COLOR: rgb(0,0,255)">void</SPAN> *data, size_t size)</PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(244,244,244)'><SPAN id=lnum22 style="COLOR: rgb(96,96,96)">  22:</SPAN>&nbsp; </PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: white'><SPAN id=lnum23 style="COLOR: rgb(96,96,96)">  23:</SPAN> <SPAN style="COLOR: rgb(0,0,255)">static</SPAN> <SPAN style="COLOR: rgb(0,0,255)">inline</SPAN> <SPAN style="COLOR: rgb(0,0,255)">struct</SPAN> platform_device *platform_device_register_simple(</PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(244,244,244)'><SPAN id=lnum24 style="COLOR: rgb(96,96,96)">  24:</SPAN>                 <SPAN style="COLOR: rgb(0,0,255)">const</SPAN> <SPAN style="COLOR: rgb(0,0,255)">char</SPAN> *name, <SPAN style="COLOR: rgb(0,0,255)">int</SPAN> id,</PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: white'><SPAN id=lnum25 style="COLOR: rgb(96,96,96)">  25:</SPAN>                 <SPAN style="COLOR: rgb(0,0,255)">const</SPAN> <SPAN style="COLOR: rgb(0,0,255)">struct</SPAN> resource *res, <SPAN style="COLOR: rgb(0,0,255)">unsigned</SPAN> <SPAN style="COLOR: rgb(0,0,255)">int</SPAN> num)</PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(244,244,244)'><SPAN id=lnum26 style="COLOR: rgb(96,96,96)">  26:</SPAN>&nbsp; </PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: white'><SPAN id=lnum27 style="COLOR: rgb(96,96,96)">  27:</SPAN> <SPAN style="COLOR: rgb(0,0,255)">static</SPAN> <SPAN style="COLOR: rgb(0,0,255)">inline</SPAN> <SPAN style="COLOR: rgb(0,0,255)">struct</SPAN> platform_device *platform_device_register_data(</PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(244,244,244)'><SPAN id=lnum28 style="COLOR: rgb(96,96,96)">  28:</SPAN>                 <SPAN style="COLOR: rgb(0,0,255)">struct</SPAN> device *parent, <SPAN style="COLOR: rgb(0,0,255)">const</SPAN> <SPAN style="COLOR: rgb(0,0,255)">char</SPAN> *name, <SPAN style="COLOR: rgb(0,0,255)">int</SPAN> id,</PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: white'><SPAN id=lnum29 style="COLOR: rgb(96,96,96)">  29:</SPAN>                 <SPAN style="COLOR: rgb(0,0,255)">const</SPAN> <SPAN style="COLOR: rgb(0,0,255)">void</SPAN> *data, size_t size)</PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(244,244,244)'><SPAN id=lnum30 style="COLOR: rgb(96,96,96)">  30:</SPAN>&nbsp; </PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: white'><SPAN id=lnum31 style="COLOR: rgb(96,96,96)">  31:</SPAN> <SPAN style="COLOR: rgb(0,0,255)">extern</SPAN> <SPAN style="COLOR: rgb(0,0,255)">struct</SPAN> platform_device *platform_device_alloc(<SPAN style="COLOR: rgb(0,0,255)">const</SPAN> <SPAN style="COLOR: rgb(0,0,255)">char</SPAN> *name, <SPAN style="COLOR: rgb(0,0,255)">int</SPAN> id);</PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(244,244,244)'><SPAN id=lnum32 style="COLOR: rgb(96,96,96)">  32:</SPAN> <SPAN style="COLOR: rgb(0,0,255)">extern</SPAN> <SPAN style="COLOR: rgb(0,0,255)">int</SPAN> platform_device_add_resources(<SPAN style="COLOR: rgb(0,0,255)">struct</SPAN> platform_device *pdev,</PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: white'><SPAN id=lnum33 style="COLOR: rgb(96,96,96)">  33:</SPAN>                                          <SPAN style="COLOR: rgb(0,0,255)">const</SPAN> <SPAN style="COLOR: rgb(0,0,255)">struct</SPAN> resource *res,</PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(244,244,244)'><SPAN id=lnum34 style="COLOR: rgb(96,96,96)">  34:</SPAN>                                          <SPAN style="COLOR: rgb(0,0,255)">unsigned</SPAN> <SPAN style="COLOR: rgb(0,0,255)">int</SPAN> num);</PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: white'><SPAN id=lnum35 style="COLOR: rgb(96,96,96)">  35:</SPAN> <SPAN style="COLOR: rgb(0,0,255)">extern</SPAN> <SPAN style="COLOR: rgb(0,0,255)">int</SPAN> platform_device_add_data(<SPAN style="COLOR: rgb(0,0,255)">struct</SPAN> platform_device *pdev,</PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(244,244,244)'><SPAN id=lnum36 style="COLOR: rgb(96,96,96)">  36:</SPAN>                                     <SPAN style="COLOR: rgb(0,0,255)">const</SPAN> <SPAN style="COLOR: rgb(0,0,255)">void</SPAN> *data, size_t size);</PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: white'><SPAN id=lnum37 style="COLOR: rgb(96,96,96)">  37:</SPAN> <SPAN style="COLOR: rgb(0,0,255)">extern</SPAN> <SPAN style="COLOR: rgb(0,0,255)">int</SPAN> platform_device_add(<SPAN style="COLOR: rgb(0,0,255)">struct</SPAN> platform_device *pdev);</PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(244,244,244)'><SPAN id=lnum38 style="COLOR: rgb(96,96,96)">  38:</SPAN> <SPAN style="COLOR: rgb(0,0,255)">extern</SPAN> <SPAN style="COLOR: rgb(0,0,255)">void</SPAN> platform_device_del(<SPAN style="COLOR: rgb(0,0,255)">struct</SPAN> platform_device *pdev);</PRE><!--CRLF--><PRE style='OVERFLOW: visible; FONT-SIZE: 8pt; FONT-FAMILY: "Courier New", courier, monospace; WIDTH: 100%; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; BACKGROUND-COLOR: white'><SPAN id=lnum39 style="COLOR: rgb(96,96,96)">  39:</SPAN> <SPAN style="COLOR: rgb(0,0,255)">extern</SPAN> <SPAN style="COLOR: rgb(0,0,255)">void</SPAN> platform_device_put(<SPAN style="COLOR: rgb(0,0,255)">struct</SPAN> platform_device *pdev);</PRE><!--CRLF--></DIV></DIV>
<BLOCKQUOTE>
<P>platform_device_register&#12289;platform_device_unregister&#65292;Platform&#35774;&#22791;&#30340;&#27880;&#20876;/&#27880;&#38144;&#25509;&#21475;&#65292;&#21644;&#24213;&#23618;&#30340;device_register&#31561;&#25509;&#21475;&#31867;&#20284;&#12290; </P>
<P>arch_setup_pdev_archdata&#65292;&#35774;&#32622;platform_device&#21464;&#37327;&#20013;&#30340;archdata&#25351;&#38024;&#12290; </P>
<P>platform_get_resource&#12289;platform_get_irq&#12289;platform_get_resource_byname&#12289;platform_get_irq_byname&#65292;&#36890;&#36807;&#36825;&#20123;&#25509;&#21475;&#65292;&#21487;&#20197;&#33719;&#21462;platform_device&#21464;&#37327;&#20013;&#30340;resource&#20449;&#24687;&#65292;&#20197;&#21450;&#30452;&#25509;&#33719;&#21462;IRQ&#30340;number&#31561;&#31561;&#12290; </P>
<P>platform_device_register_full&#12289;platform_device_register_resndata&#12289;platform_device_register_simple&#12289;platform_device_register_data&#65292;&#20854;&#23427;&#24418;&#24335;&#30340;&#35774;&#22791;&#27880;&#20876;&#12290;&#35843;&#29992;&#32773;&#21482;&#38656;&#35201;&#25552;&#20379;&#19968;&#20123;&#24517;&#35201;&#30340;&#20449;&#24687;&#65292;&#22914;name&#12289;ID&#12289;resource&#31561;&#65292;Platform&#27169;&#22359;&#23601;&#20250;&#33258;&#21160;&#20998;&#37197;&#19968;&#20010;struct platform_device&#21464;&#37327;&#65292;&#22635;&#20805;&#20869;&#23481;&#21518;&#65292;&#27880;&#20876;&#21040;&#20869;&#26680;&#20013;&#12290; </P>
<P>platform_device_alloc&#65292;&#20197;name&#21644;id&#20026;&#21442;&#25968;&#65292;&#21160;&#24577;&#20998;&#37197;&#19968;&#20010;struct platform_device&#21464;&#37327;&#12290; </P>
<P>platform_device_add_resources&#65292;&#21521;platform device&#20013;&#22686;&#21152;&#36164;&#28304;&#25551;&#36848;&#12290; </P>
<P>platform_device_add_data&#65292;&#21521;platform device&#20013;&#28155;&#21152;&#33258;&#23450;&#20041;&#30340;&#25968;&#25454;&#65288;&#20445;&#23384;&#22312;pdev-&gt;dev.platform_data&#25351;&#38024;&#20013;&#65289;&#12290; </P>
<P>platform_device_add&#12289;platform_device_del&#12289;platform_device_put&#65292;&#20854;&#23427;&#25805;&#20316;&#25509;&#21475;&#12290;</P></BLOCKQUOTE>