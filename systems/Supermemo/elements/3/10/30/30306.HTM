device_release_driver</P>
<P><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.7/drivers/base/dd.c#755" name=755>755</A><SPAN class=c>/*<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.7/drivers/base/dd.c#756" name=756>756</A> * __device_release_driver() must be called with @dev lock held.<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.7/drivers/base/dd.c#757" name=757>757</A> * When called for a USB interface, @dev-&gt;parent lock must be held as well.<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.7/drivers/base/dd.c#758" name=758>758</A> */</SPAN><BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.7/drivers/base/dd.c#759" name=759>759</A><B>static</B> <B>void</B> <A class=xf name=__device_release_driver></A><A class=xf href="http://172.29.26.110:8080/source/s?refs=__device_release_driver&amp;project=Linux-v4.7">__device_release_driver</A>(<B>struct</B> <A href="http://172.29.26.110:8080/source/s?defs=device&amp;project=Linux-v4.7">device</A> *<A class=xa name=dev></A><A class=xa href="http://172.29.26.110:8080/source/s?refs=dev&amp;project=Linux-v4.7">dev</A>)<BR><A class=hl href="http://172.29.26.110:8080/source/xref/Linux-v4.7/drivers/base/dd.c#760" name=760>760</A>{<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.7/drivers/base/dd.c#761" name=761>761</A>	<B>struct</B> <A href="http://172.29.26.110:8080/source/s?defs=device_driver&amp;project=Linux-v4.7">device_driver</A> *<A class=xl name=drv></A><A class=xl href="http://172.29.26.110:8080/source/s?refs=drv&amp;project=Linux-v4.7">drv</A>;<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.7/drivers/base/dd.c#762" name=762>762</A><BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.7/drivers/base/dd.c#763" name=763>763</A>	<A href="http://172.29.26.110:8080/source/s?defs=drv&amp;project=Linux-v4.7">drv</A> = <A href="http://172.29.26.110:8080/source/s?defs=dev&amp;project=Linux-v4.7">dev</A>-&gt;<A href="http://172.29.26.110:8080/source/s?defs=driver&amp;project=Linux-v4.7">driver</A>;<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.7/drivers/base/dd.c#764" name=764>764</A>	<B>if</B> (<A href="http://172.29.26.110:8080/source/s?defs=drv&amp;project=Linux-v4.7">drv</A>) {<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.7/drivers/base/dd.c#765" name=765>765</A>		<B>if</B> (<A class=d href="http://172.29.26.110:8080/source/xref/Linux-v4.7/drivers/base/dd.c#driver_allows_async_probing">driver_allows_async_probing</A>(<A href="http://172.29.26.110:8080/source/s?defs=drv&amp;project=Linux-v4.7">drv</A>))<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.7/drivers/base/dd.c#766" name=766>766</A>			<A href="http://172.29.26.110:8080/source/s?defs=async_synchronize_full&amp;project=Linux-v4.7">async_synchronize_full</A>();<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.7/drivers/base/dd.c#767" name=767>767</A><BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.7/drivers/base/dd.c#768" name=768>768</A>		<A href="http://172.29.26.110:8080/source/s?defs=pm_runtime_get_sync&amp;project=Linux-v4.7">pm_runtime_get_sync</A>(<A href="http://172.29.26.110:8080/source/s?defs=dev&amp;project=Linux-v4.7">dev</A>);<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.7/drivers/base/dd.c#769" name=769>769</A><BR><A class=hl href="http://172.29.26.110:8080/source/xref/Linux-v4.7/drivers/base/dd.c#770" name=770>770</A>		<A class=d href="http://172.29.26.110:8080/source/xref/Linux-v4.7/drivers/base/dd.c#driver_sysfs_remove">driver_sysfs_remove</A>(<A href="http://172.29.26.110:8080/source/s?defs=dev&amp;project=Linux-v4.7">dev</A>);<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.7/drivers/base/dd.c#771" name=771>771</A><BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.7/drivers/base/dd.c#772" name=772>772</A>		<B>if</B> (<A href="http://172.29.26.110:8080/source/s?defs=dev&amp;project=Linux-v4.7">dev</A>-&gt;<A href="http://172.29.26.110:8080/source/s?defs=bus&amp;project=Linux-v4.7">bus</A>)<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.7/drivers/base/dd.c#773" name=773>773</A>			<A href="http://172.29.26.110:8080/source/s?defs=blocking_notifier_call_chain&amp;project=Linux-v4.7">blocking_notifier_call_chain</A>(&amp;<A href="http://172.29.26.110:8080/source/s?defs=dev&amp;project=Linux-v4.7">dev</A>-&gt;<A href="http://172.29.26.110:8080/source/s?defs=bus&amp;project=Linux-v4.7">bus</A>-&gt;p-&gt;<A href="http://172.29.26.110:8080/source/s?defs=bus_notifier&amp;project=Linux-v4.7">bus_notifier</A>,<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.7/drivers/base/dd.c#774" name=774>774</A>						&nbsp;&nbsp;&nbsp;&nbsp; <A href="http://172.29.26.110:8080/source/s?defs=BUS_NOTIFY_UNBIND_DRIVER&amp;project=Linux-v4.7">BUS_NOTIFY_UNBIND_DRIVER</A>,<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.7/drivers/base/dd.c#775" name=775>775</A>						&nbsp;&nbsp;&nbsp;&nbsp; <A href="http://172.29.26.110:8080/source/s?defs=dev&amp;project=Linux-v4.7">dev</A>);<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.7/drivers/base/dd.c#776" name=776>776</A><BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.7/drivers/base/dd.c#777" name=777>777</A>		<A href="http://172.29.26.110:8080/source/s?defs=pm_runtime_put_sync&amp;project=Linux-v4.7">pm_runtime_put_sync</A>(<A href="http://172.29.26.110:8080/source/s?defs=dev&amp;project=Linux-v4.7">dev</A>);<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.7/drivers/base/dd.c#778" name=778>778</A><BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.7/drivers/base/dd.c#779" name=779>779</A>		<B>if</B> (<A href="http://172.29.26.110:8080/source/s?defs=dev&amp;project=Linux-v4.7">dev</A>-&gt;<A href="http://172.29.26.110:8080/source/s?defs=bus&amp;project=Linux-v4.7">bus</A> &amp;&amp; <A href="http://172.29.26.110:8080/source/s?defs=dev&amp;project=Linux-v4.7">dev</A>-&gt;<A href="http://172.29.26.110:8080/source/s?defs=bus&amp;project=Linux-v4.7">bus</A>-&gt;<A href="http://172.29.26.110:8080/source/s?defs=remove&amp;project=Linux-v4.7">remove</A>)<BR><A class=hl href="http://172.29.26.110:8080/source/xref/Linux-v4.7/drivers/base/dd.c#780" name=780>780</A>			<A href="http://172.29.26.110:8080/source/s?defs=dev&amp;project=Linux-v4.7">dev</A>-&gt;<A href="http://172.29.26.110:8080/source/s?defs=bus&amp;project=Linux-v4.7">bus</A>-&gt;<A href="http://172.29.26.110:8080/source/s?defs=remove&amp;project=Linux-v4.7">remove</A>(<A href="http://172.29.26.110:8080/source/s?defs=dev&amp;project=Linux-v4.7">dev</A>);<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.7/drivers/base/dd.c#781" name=781>781</A>		<B>else</B> <B>if</B> (<A href="http://172.29.26.110:8080/source/s?defs=drv&amp;project=Linux-v4.7">drv</A>-&gt;<A href="http://172.29.26.110:8080/source/s?defs=remove&amp;project=Linux-v4.7">remove</A>)<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.7/drivers/base/dd.c#782" name=782>782</A>			<A href="http://172.29.26.110:8080/source/s?defs=drv&amp;project=Linux-v4.7">drv</A>-&gt;<A href="http://172.29.26.110:8080/source/s?defs=remove&amp;project=Linux-v4.7">remove</A>(<A href="http://172.29.26.110:8080/source/s?defs=dev&amp;project=Linux-v4.7">dev</A>);<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.7/drivers/base/dd.c#783" name=783>783</A>		<A href="http://172.29.26.110:8080/source/s?defs=devres_release_all&amp;project=Linux-v4.7">devres_release_all</A>(<A href="http://172.29.26.110:8080/source/s?defs=dev&amp;project=Linux-v4.7">dev</A>);<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.7/drivers/base/dd.c#784" name=784>784</A>		<A href="http://172.29.26.110:8080/source/s?defs=dev&amp;project=Linux-v4.7">dev</A>-&gt;<A href="http://172.29.26.110:8080/source/s?defs=driver&amp;project=Linux-v4.7">driver</A> = <A href="http://172.29.26.110:8080/source/s?defs=NULL&amp;project=Linux-v4.7">NULL</A>;<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.7/drivers/base/dd.c#785" name=785>785</A>		<A href="http://172.29.26.110:8080/source/s?defs=dev_set_drvdata&amp;project=Linux-v4.7">dev_set_drvdata</A>(<A href="http://172.29.26.110:8080/source/s?defs=dev&amp;project=Linux-v4.7">dev</A>, <A href="http://172.29.26.110:8080/source/s?defs=NULL&amp;project=Linux-v4.7">NULL</A>);<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.7/drivers/base/dd.c#786" name=786>786</A>		<B>if</B> (<A href="http://172.29.26.110:8080/source/s?defs=dev&amp;project=Linux-v4.7">dev</A>-&gt;<A href="http://172.29.26.110:8080/source/s?defs=pm_domain&amp;project=Linux-v4.7">pm_domain</A> &amp;&amp; <A href="http://172.29.26.110:8080/source/s?defs=dev&amp;project=Linux-v4.7">dev</A>-&gt;<A href="http://172.29.26.110:8080/source/s?defs=pm_domain&amp;project=Linux-v4.7">pm_domain</A>-&gt;<A href="http://172.29.26.110:8080/source/s?defs=dismiss&amp;project=Linux-v4.7">dismiss</A>)<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.7/drivers/base/dd.c#787" name=787>787</A>			<A href="http://172.29.26.110:8080/source/s?defs=dev&amp;project=Linux-v4.7">dev</A>-&gt;<A href="http://172.29.26.110:8080/source/s?defs=pm_domain&amp;project=Linux-v4.7">pm_domain</A>-&gt;<A href="http://172.29.26.110:8080/source/s?defs=dismiss&amp;project=Linux-v4.7">dismiss</A>(<A href="http://172.29.26.110:8080/source/s?defs=dev&amp;project=Linux-v4.7">dev</A>);<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.7/drivers/base/dd.c#788" name=788>788</A>		<A href="http://172.29.26.110:8080/source/s?defs=pm_runtime_reinit&amp;project=Linux-v4.7">pm_runtime_reinit</A>(<A href="http://172.29.26.110:8080/source/s?defs=dev&amp;project=Linux-v4.7">dev</A>);<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.7/drivers/base/dd.c#789" name=789>789</A><BR><A class=hl href="http://172.29.26.110:8080/source/xref/Linux-v4.7/drivers/base/dd.c#790" name=790>790</A>		<A href="http://172.29.26.110:8080/source/s?defs=klist_remove&amp;project=Linux-v4.7">klist_remove</A>(&amp;<A href="http://172.29.26.110:8080/source/s?defs=dev&amp;project=Linux-v4.7">dev</A>-&gt;p-&gt;<A href="http://172.29.26.110:8080/source/s?defs=knode_driver&amp;project=Linux-v4.7">knode_driver</A>);<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.7/drivers/base/dd.c#791" name=791>791</A>		<A href="http://172.29.26.110:8080/source/s?defs=device_pm_check_callbacks&amp;project=Linux-v4.7">device_pm_check_callbacks</A>(<A href="http://172.29.26.110:8080/source/s?defs=dev&amp;project=Linux-v4.7">dev</A>);<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.7/drivers/base/dd.c#792" name=792>792</A>		<B>if</B> (<A href="http://172.29.26.110:8080/source/s?defs=dev&amp;project=Linux-v4.7">dev</A>-&gt;<A href="http://172.29.26.110:8080/source/s?defs=bus&amp;project=Linux-v4.7">bus</A>)<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.7/drivers/base/dd.c#793" name=793>793</A>			<A href="http://172.29.26.110:8080/source/s?defs=blocking_notifier_call_chain&amp;project=Linux-v4.7">blocking_notifier_call_chain</A>(&amp;<A href="http://172.29.26.110:8080/source/s?defs=dev&amp;project=Linux-v4.7">dev</A>-&gt;<A href="http://172.29.26.110:8080/source/s?defs=bus&amp;project=Linux-v4.7">bus</A>-&gt;p-&gt;<A href="http://172.29.26.110:8080/source/s?defs=bus_notifier&amp;project=Linux-v4.7">bus_notifier</A>,<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.7/drivers/base/dd.c#794" name=794>794</A>						&nbsp;&nbsp;&nbsp;&nbsp; <A href="http://172.29.26.110:8080/source/s?defs=BUS_NOTIFY_UNBOUND_DRIVER&amp;project=Linux-v4.7">BUS_NOTIFY_UNBOUND_DRIVER</A>,<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.7/drivers/base/dd.c#795" name=795>795</A>						&nbsp;&nbsp;&nbsp;&nbsp; <A href="http://172.29.26.110:8080/source/s?defs=dev&amp;project=Linux-v4.7">dev</A>);<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.7/drivers/base/dd.c#796" name=796>796</A>	}<BR><A class=l href="http://172.29.26.110:8080/source/xref/Linux-v4.7/drivers/base/dd.c#797" name=797>797</A>}