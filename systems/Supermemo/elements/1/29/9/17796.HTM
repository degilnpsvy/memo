<H3 class=section>6.5 Operator Precedence (How Operators Nest)</H3><A name=index-precedence-1></A><A name=index-operators_002c-precedence-1></A>
<P><EM>Operator precedence</EM> determines how operators are grouped when different operators appear close by in one expression. For example, &#8216;<SAMP>*</SAMP>&#8217; has higher precedence than &#8216;<SAMP>+</SAMP>&#8217;; thus, &#8216;<SAMP>a + b * c</SAMP>&#8217; means to multiply <CODE>b</CODE> and <CODE>c</CODE>, and then add <CODE>a</CODE> to the product (i.e., &#8216;<SAMP>a + (b * c)</SAMP>&#8217;). </P>
<P>The normal precedence of the operators can be overruled by using parentheses. Think of the precedence rules as saying where the parentheses are assumed to be. In fact, it is wise to always use parentheses whenever there is an unusual combination of operators, because other people who read the program may not remember what the precedence is in this case. Even experienced programmers occasionally forget the exact rules, which leads to mistakes. Explicit parentheses help prevent any such mistakes. </P>
<P>When operators of equal precedence are used together, the leftmost operator groups first, except for the assignment, conditional, and exponentiation operators, which group in the opposite order. Thus, &#8216;<SAMP>a - b + c</SAMP>&#8217; groups as &#8216;<SAMP>(a - b) + c</SAMP>&#8217; and &#8216;<SAMP>a = b = c</SAMP>&#8217; groups as &#8216;<SAMP>a = (b = c)</SAMP>&#8217;. </P>
<P>Normally the precedence of prefix unary operators does not matter, because there is only one way to interpret them: innermost first. Thus, &#8216;<SAMP>$++i</SAMP>&#8217; means &#8216;<SAMP>$(++i)</SAMP>&#8217; and &#8216;<SAMP>++$x</SAMP>&#8217; means &#8216;<SAMP>++($x)</SAMP>&#8217;. However, when another operator follows the operand, then the precedence of the unary operators can matter. &#8216;<SAMP>$x^2</SAMP>&#8217; means &#8216;<SAMP>($x)^2</SAMP>&#8217;, but &#8216;<SAMP>-x^2</SAMP>&#8217; means &#8216;<SAMP>-(x^2)</SAMP>&#8217;, because &#8216;<SAMP>-</SAMP>&#8217; has lower precedence than &#8216;<SAMP>^</SAMP>&#8217;, whereas &#8216;<SAMP>$</SAMP>&#8217; has higher precedence. Also, operators cannot be combined in a way that violates the precedence rules; for example, &#8216;<SAMP>$$0++--</SAMP>&#8217; is not a valid expression because the first &#8216;<SAMP>$</SAMP>&#8217; has higher precedence than the &#8216;<SAMP>++</SAMP>&#8217;; to avoid the problem the expression can be rewritten as &#8216;<SAMP>$($0++)--</SAMP>&#8217;. </P>
<P>This table presents <CODE>awk</CODE>&#8217;s operators, in order of highest to lowest precedence: </P>
<DL compact>
<DT><CODE>(&#8230;)</CODE></DT>
<DD>
<P>Grouping. </P><A name=index-_0024-_0028dollar-sign_0029_002c-_0024-field-operator-1></A><A name=index-dollar-sign-_0028_0024_0029_002c-_0024-field-operator-1></A></DD>
<DT><CODE>$</CODE></DT>
<DD>
<P>Field reference. </P><A name=index-_002b-_0028plus-sign_0029_002c-_002b_002b-operator-2></A><A name=index-plus-sign-_0028_002b_0029_002c-_002b_002b-operator-2></A><A name=index-_002d-_0028hyphen_0029_002c-_002d_002d-operator-1></A><A name=index-hyphen-_0028_002d_0029_002c-_002d_002d-operator-1></A></DD>
<DT><CODE>++ --</CODE></DT>
<DD>
<P>Increment, decrement. </P><A name=index-_005e-_0028caret_0029_002c-_005e-operator></A><A name=index-caret-_0028_005e_0029_002c-_005e-operator></A><A name=index-_002a-_0028asterisk_0029_002c-_002a_002a-operator-1></A><A name=index-asterisk-_0028_002a_0029_002c-_002a_002a-operator-1></A></DD>
<DT><CODE>^ **</CODE></DT>
<DD>
<P>Exponentiation. These operators group right-to-left. </P><A name=index-_002b-_0028plus-sign_0029_002c-_002b-operator></A><A name=index-plus-sign-_0028_002b_0029_002c-_002b-operator></A><A name=index-_002d-_0028hyphen_0029_002c-_002d-operator></A><A name=index-hyphen-_0028_002d_0029_002c-_002d-operator></A><A name=index-_0021-_0028exclamation-point_0029_002c-_0021-operator-1></A><A name=index-exclamation-point-_0028_0021_0029_002c-_0021-operator-1></A></DD>
<DT><CODE>+ - !</CODE></DT>
<DD>
<P>Unary plus, minus, logical &#8220;not.&#8221; </P><A name=index-_002a-_0028asterisk_0029_002c-_002a-operator_002c-as-multiplication-operator></A><A name=index-asterisk-_0028_002a_0029_002c-_002a-operator_002c-as-multiplication-operator></A><A name=index-_002f-_0028forward-slash_0029_002c-_002f-operator></A><A name=index-forward-slash-_0028_002f_0029_002c-_002f-operator></A><A name=index-_0025-_0028percent-sign_0029_002c-_0025-operator></A><A name=index-percent-sign-_0028_0025_0029_002c-_0025-operator></A></DD>
<DT><CODE>* / %</CODE></DT>
<DD>
<P>Multiplication, division, remainder. </P><A name=index-_002b-_0028plus-sign_0029_002c-_002b-operator-1></A><A name=index-plus-sign-_0028_002b_0029_002c-_002b-operator-1></A><A name=index-_002d-_0028hyphen_0029_002c-_002d-operator-1></A><A name=index-hyphen-_0028_002d_0029_002c-_002d-operator-1></A></DD>
<DT><CODE>+ -</CODE></DT>
<DD>
<P>Addition, subtraction. </P></DD>
<DT><CODE><SPAN class=roman><FONT face=Batang>String Concatenation</FONT></SPAN></CODE></DT>
<DD>
<P>There is no special symbol for concatenation. The operands are simply written side by side (see <A href="http://www.gnu.org/software/gawk/manual/gawk.html#Concatenation">Concatenation</A>). </P><A name=index-_003c-_0028left-angle-bracket_0029_002c-_003c-operator-1></A><A name=index-left-angle-bracket-_0028_003c_0029_002c-_003c-operator-1></A><A name=index-_003c-_0028left-angle-bracket_0029_002c-_003c_003d-operator-1></A><A name=index-left-angle-bracket-_0028_003c_0029_002c-_003c_003d-operator-1></A><A name=index-_003e-_0028right-angle-bracket_0029_002c-_003e_003d-operator-1></A><A name=index-right-angle-bracket-_0028_003e_0029_002c-_003e_003d-operator-1></A><A name=index-_003e-_0028right-angle-bracket_0029_002c-_003e-operator-1></A><A name=index-right-angle-bracket-_0028_003e_0029_002c-_003e-operator-1></A><A name=index-_003d-_0028equals-sign_0029_002c-_003d_003d-operator-1></A><A name=index-equals-sign-_0028_003d_0029_002c-_003d_003d-operator-1></A><A name=index-_0021-_0028exclamation-point_0029_002c-_0021_003d-operator-1></A><A name=index-exclamation-point-_0028_0021_0029_002c-_0021_003d-operator-1></A><A name=index-_003e-_0028right-angle-bracket_0029_002c-_003e_003e-operator-_0028I_002fO_0029-1></A><A name=index-right-angle-bracket-_0028_003e_0029_002c-_003e_003e-operator-_0028I_002fO_0029-1></A><A name=index-operators_002c-input_002foutput-5></A><A name=index-_007c-_0028vertical-bar_0029_002c-_007c-operator-_0028I_002fO_0029-2></A><A name=index-vertical-bar-_0028_007c_0029_002c-_007c-operator-_0028I_002fO_0029-1></A><A name=index-operators_002c-input_002foutput-6></A><A name=index-_007c-_0028vertical-bar_0029_002c-_007c_0026-operator-_0028I_002fO_0029-2></A><A name=index-vertical-bar-_0028_007c_0029_002c-_007c_0026-operator-_0028I_002fO_0029-1></A><A name=index-operators_002c-input_002foutput-7></A></DD>
<DT><CODE>&lt; &lt;= == != &gt; &gt;= &gt;&gt; | |&amp;</CODE></DT>
<DD>
<P>Relational and redirection. The relational operators and the redirections have the same precedence level. Characters such as &#8216;<SAMP>&gt;</SAMP>&#8217; serve both as relationals and as redirections; the context distinguishes between the two meanings. </P><A name=index-print-statement_002c-I_002fO-operators-in></A><A name=index-printf-statement_002c-I_002fO-operators-in></A>
<P>Note that the I/O redirection operators in <CODE>print</CODE> and <CODE>printf</CODE> statements belong to the statement level, not to expressions. The redirection does not produce an expression that could be the operand of another operator. As a result, it does not make sense to use a redirection operator near another operator of lower precedence without parentheses. Such combinations (for example, &#8216;<SAMP>print foo &gt; a ? b : c</SAMP>&#8217;), result in syntax errors. The correct way to write this statement is &#8216;<SAMP>print foo &gt; (a ? b : c)</SAMP>&#8217;. </P><A name=index-_007e-_0028tilde_0029_002c-_007e-operator-6></A><A name=index-tilde-_0028_007e_0029_002c-_007e-operator-6></A><A name=index-_0021-_0028exclamation-point_0029_002c-_0021_007e-operator-6></A><A name=index-exclamation-point-_0028_0021_0029_002c-_0021_007e-operator-6></A></DD>
<DT><CODE>~ !~</CODE></DT>
<DD>
<P>Matching, nonmatching. </P><A name=index-in-operator-1></A></DD>
<DT><CODE>in</CODE></DT>
<DD>
<P>Array membership. </P><A name=index-_0026-_0028ampersand_0029_002c-_0026_0026-operator-1></A><A name=index-ampersand-_0028_0026_0029_002c-_0026_0026-operator-1></A></DD>
<DT><CODE>&amp;&amp;</CODE></DT>
<DD>
<P>Logical &#8220;and&#8221;. </P><A name=index-_007c-_0028vertical-bar_0029_002c-_007c_007c-operator-1></A><A name=index-vertical-bar-_0028_007c_0029_002c-_007c_007c-operator-1></A></DD>
<DT><CODE>||</CODE></DT>
<DD>
<P>Logical &#8220;or&#8221;. </P><A name=index-_003f-_0028question-mark_0029_002c-_003f_003a-operator></A><A name=index-question-mark-_0028_003f_0029_002c-_003f_003a-operator></A></DD>
<DT><CODE>?:</CODE></DT>
<DD>
<P>Conditional. This operator groups right-to-left. </P><A name=index-_002b-_0028plus-sign_0029_002c-_002b_003d-operator-1></A><A name=index-plus-sign-_0028_002b_0029_002c-_002b_003d-operator-1></A><A name=index-_002d-_0028hyphen_0029_002c-_002d_003d-operator-1></A><A name=index-hyphen-_0028_002d_0029_002c-_002d_003d-operator-1></A><A name=index-_002a-_0028asterisk_0029_002c-_002a_003d-operator-1></A><A name=index-asterisk-_0028_002a_0029_002c-_002a_003d-operator-1></A><A name=index-_002a-_0028asterisk_0029_002c-_002a_002a_003d-operator-1></A><A name=index-asterisk-_0028_002a_0029_002c-_002a_002a_003d-operator-1></A><A name=index-_002f-_0028forward-slash_0029_002c-_002f_003d-operator-1></A><A name=index-forward-slash-_0028_002f_0029_002c-_002f_003d-operator-1></A><A name=index-_0025-_0028percent-sign_0029_002c-_0025_003d-operator-1></A><A name=index-percent-sign-_0028_0025_0029_002c-_0025_003d-operator-1></A><A name=index-_005e-_0028caret_0029_002c-_005e_003d-operator-1></A><A name=index-caret-_0028_005e_0029_002c-_005e_003d-operator-1></A></DD>
<DT><CODE>= += -= *= /= %= ^= **=</CODE></DT>
<DD>
<P>Assignment. These operators group right-to-left. </P></DD></DL><A name=index-POSIX-awk_002c-_002a_002a-operator-and></A><A name=index-portability_002c-operators_002c-not-in-POSIX-awk></A>
<BLOCKQUOTE>
<P><B>NOTE:</B> The &#8216;<SAMP>|&amp;</SAMP>&#8217;, &#8216;<SAMP>**</SAMP>&#8217;, and &#8216;<SAMP>**=</SAMP>&#8217; operators are not specified by POSIX. For maximum portability, do not use them. </P></BLOCKQUOTE>