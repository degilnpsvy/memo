<H3 style="LINE-HEIGHT: normal; TEXT-TRANSFORM: none; FONT-VARIANT: normal; FONT-STYLE: normal; TEXT-INDENT: 0px; FONT-FAMILY: Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" class=section>15.4 Arbitrary Precision Floating-point Arithmetic with<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>gawk</CODE></H3>
<P style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px"><CODE>gawk</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>uses the GNU MPFR library for arbitrary precision floating-point arithmetic. The MPFR library provides precise control over precisions and rounding modes, and gives correctly rounded, reproducible, platform-independent results. With one of the command-line options<SPAN class=Apple-converted-space>&nbsp;</SPAN><SAMP>--bignum</SAMP><SPAN class=Apple-converted-space>&nbsp;</SPAN>or<SPAN class=Apple-converted-space>&nbsp;</SPAN><SAMP>-M</SAMP>, all floating-point arithmetic operators and numeric functions can yield results to any desired precision level supported by MPFR. Two built-in variables,<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>PREC</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>and<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>ROUNDMODE</CODE>, provide control over the working precision and the rounding mode (see<SPAN class=Apple-converted-space>&nbsp;</SPAN><A href="http://www.gnu.org/software/gawk/manual/gawk.html#Setting-Precision">Setting Precision</A>, and see<SPAN class=Apple-converted-space>&nbsp;</SPAN><A href="http://www.gnu.org/software/gawk/manual/gawk.html#Setting-Rounding-Mode">Setting Rounding Mode</A>). The precision and the rounding mode are set globally for every operation to follow.</P>
<P style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">The default working precision for arbitrary precision floating-point values is 53 bits, and the default value for<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>ROUNDMODE</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>is<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>"N"</CODE>, which selects the IEEE-754<CODE>roundTiesToEven</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>rounding mode (see<SPAN class=Apple-converted-space>&nbsp;</SPAN><A href="http://www.gnu.org/software/gawk/manual/gawk.html#Rounding-Mode">Rounding Mode</A>).<A href="http://www.gnu.org/software/gawk/manual/gawk.html#FOOT94" name=DOCF94><SUP>94</SUP></A><SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>gawk</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>uses the default exponent range in MPFR (<VAR>emax</VAR><SPAN class=Apple-converted-space>&nbsp;</SPAN>= 2^30 - 1,<SPAN class=Apple-converted-space>&nbsp;</SPAN><VAR>emin</VAR><SPAN class=Apple-converted-space>&nbsp;</SPAN>= -<VAR>emax</VAR>) for all floating-point contexts. There is no explicit mechanism to adjust the exponent range. MPFR does not implement subnormal numbers by default, and this behavior cannot be changed in<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>gawk</CODE>.</P>
<BLOCKQUOTE style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">
<P><B>NOTE:</B><SPAN class=Apple-converted-space>&nbsp;</SPAN>When emulating an IEEE-754 format (see<SPAN class=Apple-converted-space>&nbsp;</SPAN><A href="http://www.gnu.org/software/gawk/manual/gawk.html#Setting-Precision">Setting Precision</A>),<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>gawk</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>internally adjusts the exponent range to the value defined for the format and also performs computations needed for gradual underflow (subnormal numbers).</P></BLOCKQUOTE>
<BLOCKQUOTE style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">
<P><B>NOTE:</B><SPAN class=Apple-converted-space>&nbsp;</SPAN>MPFR numbers are variable-size entities, consuming only as much space as needed to store the significant digits. Since the performance using MPFR numbers pales in comparison to doing arithmetic using the underlying machine types, you should consider using only as much precision as needed by your program.</P></BLOCKQUOTE>
<TABLE style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" class=menu border=0 cellSpacing=0>
<TBODY>
<TR>
<TD vAlign=top align=left>&#8226;<SPAN class=Apple-converted-space>&nbsp;</SPAN><A accessKey=1 href="http://www.gnu.org/software/gawk/manual/gawk.html#Setting-Precision">Setting Precision</A>:</TD>
<TD>&nbsp;&nbsp;</TD>
<TD vAlign=top align=left>Setting the working precision.</TD></TR>
<TR>
<TD vAlign=top align=left>&#8226;<SPAN class=Apple-converted-space>&nbsp;</SPAN><A accessKey=2 href="http://www.gnu.org/software/gawk/manual/gawk.html#Setting-Rounding-Mode">Setting Rounding Mode</A>:</TD>
<TD>&nbsp;&nbsp;</TD>
<TD vAlign=top align=left>Setting the rounding mode.</TD></TR>
<TR>
<TD vAlign=top align=left>&#8226;<SPAN class=Apple-converted-space>&nbsp;</SPAN><A accessKey=3 href="http://www.gnu.org/software/gawk/manual/gawk.html#Floating_002dpoint-Constants">Floating-point Constants</A>:</TD>
<TD>&nbsp;&nbsp;</TD>
<TD vAlign=top align=left>Representing floating-point constants.</TD></TR>
<TR>
<TD vAlign=top align=left>&#8226;<SPAN class=Apple-converted-space>&nbsp;</SPAN><A accessKey=4 href="http://www.gnu.org/software/gawk/manual/gawk.html#Changing-Precision">Changing Precision</A>:</TD>
<TD>&nbsp;&nbsp;</TD>
<TD vAlign=top align=left>Changing the precision of a number.</TD></TR>
<TR>
<TD vAlign=top align=left>&#8226;<SPAN class=Apple-converted-space>&nbsp;</SPAN><A accessKey=5 href="http://www.gnu.org/software/gawk/manual/gawk.html#Exact-Arithmetic">Exact Arithmetic</A>:</TD>
<TD>&nbsp;&nbsp;</TD>
<TD vAlign=top align=left>Exact arithmetic with floating-point numbers.</TD></TR></TBODY></TABLE><BR class=Apple-interchange-newline>