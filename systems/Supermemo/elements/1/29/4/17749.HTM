<H4 class=subsection>4.9.7 Using <CODE>getline</CODE> from a Coprocess</H4><A name=index-coprocesses_002c-getline-from></A><A name=index-getline-command_002c-coprocesses_002c-using-from></A><A name=index-_007c-_0028vertical-bar_0029_002c-_007c_0026-operator-_0028I_002fO_0029></A><A name=index-vertical-bar-_0028_007c_0029_002c-_007c_0026-operator-_0028I_002fO_0029></A><A name=index-operators_002c-input_002foutput-2></A><A name=index-differences-in-awk-and-gawk_002c-input_002foutput-operators></A>
<P>Input into <CODE>getline</CODE> from a pipe is a one-way operation. The command that is started with &#8216;<SAMP><VAR>command</VAR> | getline</SAMP>&#8217; only sends data <EM>to</EM> your <CODE>awk</CODE> program. </P>
<P>On occasion, you might want to send data to another program for processing and then read the results back. <CODE>gawk</CODE> allows you to start a <EM>coprocess</EM>, with which two-way communications are possible. This is done with the &#8216;<SAMP>|&amp;</SAMP>&#8217; operator. Typically, you write data to the coprocess first and then read results back, as shown in the following: </P>
<DIV class=example><PRE class=example>print "<VAR>some query</VAR>" |&amp; "db_server"
"db_server" |&amp; getline
</PRE></DIV>
<P>which sends a query to <CODE>db_server</CODE> and then reads the results. </P>
<P>The values of <CODE>NR</CODE> and <CODE>FNR</CODE> are not changed, because the main input stream is not used. However, the record is split into fields in the normal manner, thus changing the values of <CODE>$0</CODE>, of the other fields, and of <CODE>NF</CODE> and <CODE>RT</CODE>. </P>
<P>Coprocesses are an advanced feature. They are discussed here only because this is the section on <CODE>getline</CODE>. See <A href="http://www.gnu.org/software/gawk/manual/gawk.html#Two_002dway-I_002fO">Two-way I/O</A>, where coprocesses are discussed in more detail.