<H4 style="LINE-HEIGHT: normal; TEXT-TRANSFORM: none; FONT-VARIANT: normal; FONT-STYLE: normal; TEXT-INDENT: 0px; FONT-FAMILY: Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); FONT-SIZE: medium; WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" class=subsection>15.4.2 Setting the Rounding Mode</H4><A style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" name=index-ROUNDMODE-variable-1></A><SPAN style="TEXT-TRANSFORM: none; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; DISPLAY: inline !important; FONT: medium Simsun; WHITE-SPACE: normal; FLOAT: none; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px"></SPAN><A style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" name=index-setting-rounding-mode></A><SPAN style="TEXT-TRANSFORM: none; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; DISPLAY: inline !important; FONT: medium Simsun; WHITE-SPACE: normal; FLOAT: none; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px"></SPAN>
<P style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">The<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>ROUNDMODE</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>variable provides program level control over the rounding mode. The correspondence between<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>ROUNDMODE</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>and the IEEE rounding modes is shown in<SPAN class=Apple-converted-space>&nbsp;</SPAN><A href="http://www.gnu.org/software/gawk/manual/gawk.html#table_002dgawk_002drounding_002dmodes">Table 15.4</A>.</P>
<DIV style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" class=float><A name=table_002dgawk_002drounding_002dmodes></A>
<TABLE>
<THEAD>
<TR>
<TH width="45%">Rounding Mode</TH>
<TH width="30%">IEEE Name</TH>
<TH width="25%"><CODE>ROUNDMODE</CODE></TH></TR></THEAD>
<TBODY>
<TR>
<TD width="45%">Round to nearest, ties to even</TD>
<TD width="30%"><CODE>roundTiesToEven</CODE></TD>
<TD width="25%"><CODE>"N"</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>or<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>"n"</CODE></TD></TR>
<TR>
<TD width="45%">Round toward plus Infinity</TD>
<TD width="30%"><CODE>roundTowardPositive</CODE></TD>
<TD width="25%"><CODE>"U"</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>or<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>"u"</CODE></TD></TR>
<TR>
<TD width="45%">Round toward negative Infinity</TD>
<TD width="30%"><CODE>roundTowardNegative</CODE></TD>
<TD width="25%"><CODE>"D"</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>or<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>"d"</CODE></TD></TR>
<TR>
<TD width="45%">Round toward zero</TD>
<TD width="30%"><CODE>roundTowardZero</CODE></TD>
<TD width="25%"><CODE>"Z"</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>or<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>"z"</CODE></TD></TR>
<TR>
<TD width="45%">Round to nearest, ties away from zero</TD>
<TD width="30%"><CODE>roundTiesToAway</CODE></TD>
<TD width="25%"><CODE>"A"</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>or<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>"a"</CODE></TD></TR></TBODY></TABLE>
<DIV class=float-caption>
<P><STRONG>Table 15.4:<SPAN class=Apple-converted-space>&nbsp;</SPAN></STRONG><CODE>gawk</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>Rounding Modes</P></DIV></DIV>
<P style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px"><CODE>ROUNDMODE</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>has the default value<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>"N"</CODE>, which selects the IEEE-754 rounding mode<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>roundTiesToEven</CODE>. In<SPAN class=Apple-converted-space>&nbsp;</SPAN><A href="http://www.gnu.org/software/gawk/manual/gawk.html#table_002dgawk_002drounding_002dmodes">Table 15.4</A>,<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>"A"</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>is listed to select the IEEE-754 mode<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>roundTiesToAway</CODE>. This is only available if your version of the MPFR library supports it; otherwise setting<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>ROUNDMODE</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>to this value has no effect. See<SPAN class=Apple-converted-space>&nbsp;</SPAN><A href="http://www.gnu.org/software/gawk/manual/gawk.html#Rounding-Mode">Rounding Mode</A>, for the meanings of the various rounding modes.</P>
<P style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">Here is an example of how to change the default rounding behavior of<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>printf</CODE>&#8217;s output:</P>
<DIV style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); MARGIN-LEFT: 3.2em; WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" class=example><PRE class=example>$ <KBD style="FONT-STYLE: oblique">gawk -M -v ROUNDMODE="Z" 'BEGIN { printf("%.2f\n", 1.378) }'</KBD>
-| 1.37</PRE></DIV>