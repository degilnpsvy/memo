<H3 class=section>3.6 Case Sensitivity in Matching</H3><A name=index-regular-expressions_002c-case-sensitivity></A><A name=index-case-sensitivity_002c-regexps-and></A>
<P>Case is normally significant in regular expressions, both when matching ordinary characters (i.e., not metacharacters) and inside bracket expressions. Thus, a &#8216;<SAMP>w</SAMP>&#8217; in a regular expression matches only a lowercase &#8216;<SAMP>w</SAMP>&#8217; and not an uppercase &#8216;<SAMP>W</SAMP>&#8217;. </P>
<P>The simplest way to do a case-independent match is to use a bracket expression&#8212;for example, &#8216;<SAMP>[Ww]</SAMP>&#8217;. However, this can be cumbersome if you need to use it often, and it can make the regular expressions harder to read. There are two alternatives that you might prefer. </P>
<P>One way to perform a case-insensitive match at a particular point in the program is to convert the data to a single case, using the <CODE>tolower()</CODE> or <CODE>toupper()</CODE> built-in string functions (which we haven&#8217;t discussed yet; see <A href="http://www.gnu.org/software/gawk/manual/gawk.html#String-Functions">String Functions</A>). For example: </P>
<DIV class=example><PRE class=example>tolower($1) ~ /foo/  { &#8230; }
</PRE></DIV>
<P>converts the first field to lowercase before matching against it. This works in any POSIX-compliant <CODE>awk</CODE>. </P><A name=index-gawk_002c-regular-expressions_002c-case-sensitivity></A><A name=index-case-sensitivity_002c-gawk></A><A name=index-differences-in-awk-and-gawk_002c-regular-expressions></A><A name=index-_007e-_0028tilde_0029_002c-_007e-operator-1></A><A name=index-tilde-_0028_007e_0029_002c-_007e-operator-1></A><A name=index-_0021-_0028exclamation-point_0029_002c-_0021_007e-operator-1></A><A name=index-exclamation-point-_0028_0021_0029_002c-_0021_007e-operator-1></A><A name=index-IGNORECASE-variable_002c-with-_007e-and-_0021_007e-operators></A><A name=index-gawk_002c-IGNORECASE-variable-in></A>
<P>Another method, specific to <CODE>gawk</CODE>, is to set the variable <CODE>IGNORECASE</CODE> to a nonzero value (see <A href="http://www.gnu.org/software/gawk/manual/gawk.html#Built_002din-Variables">Built-in Variables</A>). When <CODE>IGNORECASE</CODE> is not zero, <EM>all</EM> regexp and string operations ignore case. Changing the value of <CODE>IGNORECASE</CODE> dynamically controls the case-sensitivity of the program as it runs. Case is significant by default because <CODE>IGNORECASE</CODE> (like most variables) is initialized to zero: </P>
<DIV class=example><PRE class=example>x = "aB"
if (x ~ /ab/) &#8230;   # this test will fail

IGNORECASE = 1
if (x ~ /ab/) &#8230;   # now it will succeed
</PRE></DIV>
<P>In general, you cannot use <CODE>IGNORECASE</CODE> to make certain rules case-insensitive and other rules case-sensitive, because there is no straightforward way to set <CODE>IGNORECASE</CODE> just for the pattern of a particular rule.<A href="http://www.gnu.org/software/gawk/manual/gawk.html#FOOT18" name=DOCF18><SUP>18</SUP></A> To do this, use either bracket expressions or <CODE>tolower()</CODE>. However, one thing you can do with <CODE>IGNORECASE</CODE> only is dynamically turn case-sensitivity on or off for all the rules at once. </P>
<P><CODE>IGNORECASE</CODE> can be set on the command line or in a <CODE>BEGIN</CODE> rule (see <A href="http://www.gnu.org/software/gawk/manual/gawk.html#Other-Arguments">Other Arguments</A>; also see <A href="http://www.gnu.org/software/gawk/manual/gawk.html#Using-BEGIN_002fEND">Using BEGIN/END</A>). Setting <CODE>IGNORECASE</CODE> from the command line is a way to make a program case-insensitive without having to edit it. </P>
<P>Both regexp and string comparison operations are affected by <CODE>IGNORECASE</CODE>. </P>
<P>In multibyte locales, the equivalences between upper- and lowercase characters are tested based on the wide-character values of the locale&#8217;s character set. Otherwise, the characters are tested based on the ISO-8859-1 (ISO Latin-1) character set. This character set is a superset of the traditional 128 ASCII characters, which also provides a number of characters suitable for use with European languages.<A href="http://www.gnu.org/software/gawk/manual/gawk.html#FOOT19" name=DOCF19><SUP>19</SUP></A> </P>
<P>The value of <CODE>IGNORECASE</CODE> has no effect if <CODE>gawk</CODE> is in compatibility mode (see <A href="http://www.gnu.org/software/gawk/manual/gawk.html#Options">Options</A>). Case is always significant in compatibility mode.