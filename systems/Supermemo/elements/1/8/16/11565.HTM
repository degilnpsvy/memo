<B><SPAN lang=EN-US style="FONT-SIZE: 15pt; COLOR: black; FONT-FAMILY: Arial; mso-bidi-font-size: 10.0pt; mso-font-kerning: 0pt">7.20.4 Rules </SPAN></B><SPAN lang=EN-US style="FONT-SIZE: 15pt; COLOR: black; FONT-FAMILY: Arial; mso-bidi-font-size: 10.0pt; mso-font-kerning: 0pt"></SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 15pt; COLOR: black; mso-bidi-font-size: 10.0pt; mso-font-kerning: 0pt">a) An extension can be added by an initiator, interconnect or target component. In particular, the creation of extensions is not restricted to initiators. </SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 15pt; COLOR: black; mso-bidi-font-size: 10.0pt; mso-font-kerning: 0pt">b) Any number of extensions may be added to each instance of the generic payload. </SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 15pt; COLOR: black; mso-bidi-font-size: 10.0pt; mso-font-kerning: 0pt">c) In the case of an ignorable extension, any component (excepting the component that added the extension) is allowed to ignore the extension, and ignorable extensions are not mandatory extensions. Having a component fail because of either the absence of an ignorable extension or the absence of a response to an ignorable extension would destroy interoperability. </SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 15pt; COLOR: black; mso-bidi-font-size: 10.0pt; mso-font-kerning: 0pt">d) There is no built-in mechanism to enforce the presence of a given extension, nor is there a mechanism to ensure that an extension is ignorable. </SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 15pt; COLOR: black; mso-bidi-font-size: 10.0pt; mso-font-kerning: 0pt">e) The semantics of each extension shall be application-defined. There are no pre-defined extensions. </SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 15pt; COLOR: black; mso-bidi-font-size: 10.0pt; mso-font-kerning: 0pt">f) An extension shall be created by deriving a user-defined class from the class <B>tlm_extension</B>, passing the name of the user-defined class itself as a template argument to <B>tlm_extension</B>, then creating an object of that class. The user-defined extension class may include members which represent extended attributes of the generic payload. </SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 15pt; COLOR: black; mso-bidi-font-size: 10.0pt; mso-font-kerning: 0pt">g) The virtual method <B>free </B>of the class <B>tlm_extension_base </B>shall delete the extension object. This method may be overridden to implement user-defined memory management of extension, but this is not necessary. </SPAN></P>
<P class=Default style="MARGIN: 0cm 0cm 0pt"><FONT face=Arial><SPAN lang=EN-US style="FONT-SIZE: 15pt; mso-bidi-font-size: 10.0pt">h) The pure virtual function <B>clone </B>of class <B>tlm_extension </B>shall be defined in the user-defined extension class to clone the extension object, including any extended attributes. This <B>clone </B>method is intended for </SPAN><SPAN lang=EN-US style="FONT-SIZE: 17pt; FONT-FAMILY: 'Times New Roman'; mso-bidi-font-size: 12.0pt"></SPAN></FONT></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 15pt; COLOR: black; mso-bidi-font-size: 10.0pt; mso-font-kerning: 0pt">use in conjunction with generic payload memory management. It shall create a copy of any extension object such that the copy can survive the destruction of the original object with no visible side-effects. </SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 15pt; COLOR: black; mso-bidi-font-size: 10.0pt; mso-font-kerning: 0pt">i) The pure virtual function <B>copy_from </B>of class <B>tlm_extension </B>shall be defined in the user-defined extension class to modify the current extension object by copying the attributes of another extension object. </SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 15pt; COLOR: black; mso-bidi-font-size: 10.0pt; mso-font-kerning: 0pt">j) The act of instantiating the class template <B>tlm_extension </B>shall cause the public data member <B>ID </B>to be initialized, and this shall have the effect of registering the given extension with the generic payload object and assigning a unique ID to the extension. The ID shall be unique across the whole executing program. That is, each instantiation of the class template <B>tlm_extension </B>shall have a distinct <B>ID</B>, whereas all extension objects of a given type shall share the same <B>ID</B>. </SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 15pt; COLOR: black; mso-bidi-font-size: 10.0pt; mso-font-kerning: 0pt">k) The generic payload shall behave as if it stored pointers to the extensions in a re-sizable array, where the <B>ID </B>of the extension gives the index of the extension pointer in the array. Registering the extension with the generic payload shall reserve an array index for that extension. Each generic payload object shall contain an array capable of storing pointers to every extension registered in the currently executing program. </SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 15pt; COLOR: black; mso-bidi-font-size: 10.0pt; mso-font-kerning: 0pt">l) The pointers in the extension array shall be null when the transaction is constructed. </SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 15pt; COLOR: black; mso-bidi-font-size: 10.0pt; mso-font-kerning: 0pt">m) Each generic payload object can store a pointer to at most one object of any given extension type (but to many objects of different extensions types). (There exists a utility class <B>instance_specific_extension</B>, which enables a generic payload object to reference several extension objects of the same type. See 9.4 Instance-specific extensions.) </SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 15pt; COLOR: black; mso-bidi-font-size: 10.0pt; mso-font-kerning: 0pt">n) The function <B>max_num_extensions </B>shall return the number of extension types, that is, the size of the extension array. As a consequence, the extension types shall be numbered from <B>0 </B>to <B>max_num_extensions()-1</B>. </SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 15pt; COLOR: black; mso-bidi-font-size: 10.0pt; mso-font-kerning: 0pt">o) The methods <B>set_extension</B>, <B>set_auto_extension, get_extension</B>, <B>clear_extension, </B>and <B>release_extension </B>are provided in several forms, each of which identify the extension to be accessed in different ways: using a function template, using an extension pointer argument, or using an ID argument. The functions with an ID argument are intended for specialist programming tasks such as when cloning a generic payload object, and not for general use in applications. </SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 15pt; COLOR: black; mso-bidi-font-size: 10.0pt; mso-font-kerning: 0pt">p) The method <B>set_extension(T*) </B>shall replace the pointer to the extension object of type T in the array-of-pointers with the value of the argument. The argument shall be a pointer to a registered extension. The return value of the function shall be the previous value of the pointer in the generic payload that was replaced by this call, which may be a null pointer. The method <B>set_auto_extension(T*) </B>shall behave similarly, except that the extension shall be marked for automatic deletion. </SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 15pt; COLOR: black; mso-bidi-font-size: 10.0pt; mso-font-kerning: 0pt">q) The method <B>set_extension(unsigned int, tlm_extension_base*) </B>shall replace the pointer to the extension object in the array-of-pointers at the array index given by the first argument with the value of the second argument. The given index shall have been registered as an extension ID, otherwise the behavior of the function is undefined. The return value of the function shall be the previous value of the pointer at the given array index, which may be a null pointer. The method set_auto_extension(unsigned int, tlm_extension_base*) shall behave similarly, except that the extension shall be marked for automatic deletion </SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 15pt; COLOR: black; mso-bidi-font-size: 10.0pt; mso-font-kerning: 0pt">r) In the presence of a memory manager, a call to set_auto_extension for a given extension is equivalent to a call to set_extension immediatedly followed by a call to release_extension for that same extension. In the absence of a memory manager, a call to <B>set_auto_extension </B>will cause a run-time error. </SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 15pt; COLOR: black; mso-bidi-font-size: 10.0pt; mso-font-kerning: 0pt">s) If an extension is marked for automatic deletion, the given extension object should be deleted or pooled by the implementation of the method <B>free </B>of a user-defined memory manager. Method <B>free </B>is called by method <B>release </B>of class <B>tlm_generic_payload </B>when the reference count of the transaction object reaches 0. The extension object may be deleted by calling method <B>reset </B>of class <B>tlm_generic_payload </B>or by calling method <B>free </B>of the extension object itself. </SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 15pt; COLOR: black; mso-bidi-font-size: 10.0pt; mso-font-kerning: 0pt">t) If the generic payload object already contained a non-null pointer to an extension of the type being set, then the old pointer is overwritten. </SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 15pt; COLOR: black; mso-bidi-font-size: 10.0pt; mso-font-kerning: 0pt">u) The method functions <B>get_extension(T*&amp;) </B>and <B>T* get_extension() </B>shall each return a pointer to the extension object of the given type, if it exists, or a null pointer if it does not exist. The type <B>T </B>shall be a pointer to an object of a type derived from <B>tlm_extension</B>. It is not an error to attempt to retrieve a non-existent extension using this function template. </SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 15pt; COLOR: black; mso-bidi-font-size: 10.0pt; mso-font-kerning: 0pt">v) The method <B>get_extension(unsigned int) </B>shall return a pointer to the extension object with the ID given by the argument. The given index shall have been registered as an extension ID, otherwise the behavior of the function is undefined. If the pointer at the given index does not point to an extension object, the function shall return a null pointer. </SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 15pt; COLOR: black; mso-bidi-font-size: 10.0pt; mso-font-kerning: 0pt">w) The methods <B>clear_extension(const T*) </B>and <B>clear_extension() </B>shall remove the given extension from the generic payload object, that is, shall set the corresponding pointer in the extension array to null. The extension may be specified either by passing a pointer to an extension object as an argument, or by using the function template parameter type, for example <B>clear_extension&lt;ext_type&gt;()</B>. If present, the argument shall be a pointer to an object of a type derived from <B>tlm_extension</B>. Method <B>clear_extension </B>shall not delete the extension object. </SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 15pt; COLOR: black; mso-bidi-font-size: 10.0pt; mso-font-kerning: 0pt">x) The methods <B>release_extension(T*) </B>and <B>release_extension() </B>shall mark the extension for automatic deletion if the transaction object has a memory manager, or otherwise shall delete the given extension by calling the method <B>free </B>of the extension object and setting the corresponding pointer in the extension array to null. The extension may be specified either by passing a pointer to an extension object as an argument, or by using the function template parameter type, for example <B>release_extension&lt;ext_type&gt;()</B>. If present, the argument shall be a pointer to an object of a type derived from <B>tlm_extension</B>. </SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 15pt; COLOR: black; mso-bidi-font-size: 10.0pt; mso-font-kerning: 0pt">y) Note that the behavior of method <B>release_extension </B>depends upon whether or not the transaction object has a memory manager. With a memory manager, the extension is merely marked for automatic deletion, and continues to be accessible. In the absence of a memory manager, not only is the extension pointer cleared but also the extension object itself is deleted. Care should be taken not to release a non-existent extension object, because doing so will result in a run-time error. </SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 15pt; COLOR: black; mso-bidi-font-size: 10.0pt; mso-font-kerning: 0pt">z) The methods <B>clear_extension </B>and <B>release_extension </B>shall not be called for extensions marked for automatic deletion, for example, an extension set using <B>set_auto_extension </B>or already released using <B>release_extension</B>. Doing so may result in a run-time error. </SPAN></P>
<P class=Default style="MARGIN: 0cm 0cm 0pt"><FONT face=Arial><SPAN lang=EN-US style="FONT-SIZE: 15pt; mso-bidi-font-size: 10.0pt">aa) Each generic payload transaction should allocate sufficient space to store pointers to every registered extension. This can be achieved in one of two ways, either by constructing the transaction object <I>after </I>C++ static initialization, or by calling the method <B>resize_extensions </B><I>after </I>static initialization but <I>before </I></SPAN><SPAN lang=EN-US style="FONT-SIZE: 17pt; FONT-FAMILY: 'Times New Roman'; mso-bidi-font-size: 12.0pt"></SPAN></FONT></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 15pt; COLOR: black; mso-bidi-font-size: 10.0pt; mso-font-kerning: 0pt">using the transaction object for the first time. In the former case, it is the responsibility of the generic payload constructor to set the size of the extension array. In the latter case, it is the responsibility of the application to call <B>resize_extensions </B>before accessing the extensions for the first time. </SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 15pt; COLOR: black; mso-bidi-font-size: 10.0pt; mso-font-kerning: 0pt">bb) The method <B>resize_extensions </B>shall increase the size of the extensions array in the generic payload to accommodate every registered extension. </SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 15pt; COLOR: black; mso-bidi-font-size: 10.0pt; mso-font-kerning: 0pt">&nbsp;</SPAN></P>
<p><B><SPAN lang=EN-US style="FONT-SIZE: 15pt; mso-bidi-font-size: 10.0pt">Example</SPAN></B></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp; </SPAN>1</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #bf0000; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'">// Showing an ignorable extension</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp; </SPAN>2</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #bf0000; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'">// User-defined extension</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp; </SPAN>3</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #40ffff; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'">class</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"> <SPAN style="COLOR: #40ffff">struct</SPAN> <SPAN style="COLOR: #00bf00">ID_extension</SPAN>: <SPAN style="COLOR: #bf00bf">tlm</SPAN>::<SPAN style="COLOR: #00bf00">tlm_extension</SPAN>&lt;<SPAN style="COLOR: #00bf00">ID_extension</SPAN>&gt;</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp; </SPAN>4</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'">{</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp; </SPAN>5</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp; </SPAN><SPAN style="COLOR: #6060ff">ID_extension</SPAN>() : transaction_id(0) {} <SPAN style="COLOR: #40ffff">virtual</SPAN> <SPAN style="COLOR: #00bf00">tlm_extension_base</SPAN> *<SPAN style="COLOR: #6060ff">clone</SPAN>()</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp; </SPAN>6</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp; </SPAN><SPAN style="COLOR: #40ffff">const</SPAN><SPAN style="mso-spacerun: yes">&nbsp;&nbsp; </SPAN><SPAN style="COLOR: #bf0000">// Must override pure virtual clone method</SPAN></SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp; </SPAN>7</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp; </SPAN>{</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp; </SPAN>8</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN><SPAN style="COLOR: #00bf00">ID_extension</SPAN> *<SPAN style="COLOR: #bfbf00">t</SPAN> = <SPAN style="COLOR: #40ffff">new</SPAN> <SPAN style="COLOR: #00bf00">ID_extension</SPAN>;</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN><SPAN style="mso-spacerun: yes">&nbsp;</SPAN></SPAN><SPAN lang=FR style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'; mso-ansi-language: FR">9</SPAN><SPAN lang=FR style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'; mso-ansi-language: FR"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>t-&gt;transaction_id = <SPAN style="COLOR: #40ffff">this</SPAN>-&gt;transaction_id;</SPAN></P>
<p><SPAN lang=FR style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'; mso-ansi-language: FR"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN></SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'">10</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN><SPAN style="COLOR: #40ffff">return</SPAN> t;</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>11</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp; </SPAN>} <SPAN style="COLOR: #bf0000">// Must override pure virtual copy_from method</SPAN></SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>12</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp; </SPAN><SPAN style="COLOR: #40ffff">virtual</SPAN> <SPAN style="COLOR: #00bf00">void</SPAN> <SPAN style="COLOR: #6060ff">copy_from</SPAN>(tlm_extension_base <SPAN style="COLOR: #40ffff">const</SPAN> &amp;<SPAN style="COLOR: #bfbf00">ext</SPAN>)</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>13</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp; </SPAN>{</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>14</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>transaction_id = <SPAN style="COLOR: #40ffff">static_cast</SPAN>&lt;ID_extension <SPAN style="COLOR: #40ffff">const</SPAN> &amp;&gt;(ext).transaction_id;</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>15</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp; </SPAN>} <SPAN style="COLOR: #00bf00">unsigned</SPAN> <SPAN style="COLOR: #00bf00">int</SPAN> <SPAN style="COLOR: #bfbf00">transaction_id</SPAN>;</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>16</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'">};</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>17</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>18</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #bf0000; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'">// The initiator</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>19</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #40ffff; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'">struct</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"> <SPAN style="COLOR: #00bf00">Initiator</SPAN>: <SPAN style="COLOR: #00bf00">sc_module</SPAN></SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>20</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'">{</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>21</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp; </SPAN>...</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>22</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp; </SPAN><SPAN style="COLOR: #00bf00">void</SPAN> thread()</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>23</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp; </SPAN>{</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>24</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN><SPAN style="COLOR: #bf00bf">tlm</SPAN>::<SPAN style="COLOR: #00bf00">tlm_generic_payload</SPAN> <SPAN style="COLOR: #bfbf00">trans</SPAN>;</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>25</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>...</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>26</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>ID_extension *id_extension = <SPAN style="COLOR: #40ffff">new</SPAN> <SPAN style="COLOR: #00bf00">ID_extension</SPAN>;</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>27</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>trans.set_extension(id_extension);<SPAN style="mso-spacerun: yes">&nbsp;&nbsp; </SPAN><SPAN style="COLOR: #bf0000">// Add the extension to the transaction</SPAN></SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>28</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN><SPAN style="COLOR: #40ffff">for</SPAN> (<SPAN style="COLOR: #00bf00">int</SPAN> <SPAN style="COLOR: #bfbf00">i</SPAN> = 0; i &lt; RUN_LENGTH; i += 4)</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>29</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>{</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>30</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>...</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>31</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>++ id_extension-&gt;transaction_id; <SPAN style="COLOR: #bf0000">// Increment the id for each new transaction</SPAN></SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>32</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>...</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>33</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>socket-&gt;b_transport(trans, delay);</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>34</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>...</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>35</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>}</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>36</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp; </SPAN>}</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>37</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'">}</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>38</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #bf0000; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'">// The target</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>39</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #40ffff; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'">virtual</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"> <SPAN style="COLOR: #00bf00">void</SPAN> <SPAN style="COLOR: #6060ff">b_transport</SPAN>(<SPAN style="COLOR: #bf00bf">tlm</SPAN>::<SPAN style="COLOR: #00bf00">tlm_generic_payload</SPAN> &amp;<SPAN style="COLOR: #bfbf00">trans</SPAN>, <SPAN style="COLOR: #bf00bf">sc_core</SPAN>::<SPAN style="COLOR: #00bf00">sc_time</SPAN> &amp;<SPAN style="COLOR: #bfbf00">t</SPAN>)</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>40</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'">{</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>41</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp; </SPAN>...</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>42</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp; </SPAN>ID_extension *id_extension;</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>43</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp; </SPAN>trans.get_extension(id_extension);<SPAN style="mso-spacerun: yes">&nbsp;&nbsp; </SPAN><SPAN style="COLOR: #bf0000">// Retrieve the extension</SPAN></SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>44</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp; </SPAN><SPAN style="COLOR: #40ffff">if</SPAN> (id_extension)<SPAN style="mso-spacerun: yes">&nbsp;&nbsp; </SPAN><SPAN style="COLOR: #bf0000">// Extension is not mandatory</SPAN></SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>45</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>{</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>46</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN><SPAN style="COLOR: #00bf00">char</SPAN> <SPAN style="COLOR: #bfbf00">txt</SPAN>[80];</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>47</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>sprintf(txt, <SPAN style="COLOR: #00bf00">"Received transaction id %d"</SPAN>, id_extension-&gt;transaction_id);</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>48</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>SC_REPORT_INFO(<SPAN style="COLOR: #00bf00">"TLM-2.0"</SPAN>, txt);</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>49</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp; </SPAN><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;</SPAN>}</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>50</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp; </SPAN>...</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>51</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'">}</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>52</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #bf0000; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'">// Showing a new protocol traits class with a mandatory extension</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>53</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #40ffff; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'">struct</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"> <SPAN style="COLOR: #00bf00">cmd_extension</SPAN>:</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>54</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp; </SPAN><SPAN style="COLOR: #bf00bf">tlm</SPAN>::<SPAN style="COLOR: #00bf00">tlm_extension</SPAN>&lt;<SPAN style="COLOR: #00bf00">cmd_extension</SPAN>&gt;<SPAN style="mso-spacerun: yes">&nbsp;&nbsp; </SPAN><SPAN style="COLOR: #bf0000">// User-defined mandatory extension class</SPAN></SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>55</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'">{</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>56</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp; </SPAN><SPAN style="COLOR: #6060ff">cmd_extension</SPAN>(): increment(<SPAN style="COLOR: #bf00bf">false</SPAN>) {} <SPAN style="COLOR: #40ffff">virtual</SPAN> <SPAN style="COLOR: #00bf00">tlm_extension_base</SPAN> *<SPAN style="COLOR: #6060ff">clone</SPAN>() <SPAN style="COLOR: #40ffff">const</SPAN></SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>57</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp; </SPAN>{</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>58</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN><SPAN style="COLOR: #00bf00">cmd_extension</SPAN> *<SPAN style="COLOR: #bfbf00">t</SPAN> = <SPAN style="COLOR: #40ffff">new</SPAN> <SPAN style="COLOR: #00bf00">cmd_extension</SPAN>;</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>59</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>t-&gt;increment = <SPAN style="COLOR: #40ffff">this</SPAN>-&gt;increment;</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>60</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN><SPAN style="COLOR: #40ffff">return</SPAN> t;</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>61</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp; </SPAN>} <SPAN style="COLOR: #40ffff">virtual</SPAN> <SPAN style="COLOR: #00bf00">void</SPAN> <SPAN style="COLOR: #6060ff">copy_from</SPAN>(tlm_extension_base <SPAN style="COLOR: #40ffff">const</SPAN> &amp;<SPAN style="COLOR: #bfbf00">ext</SPAN>)</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>62</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp; </SPAN>{</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>63</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>increment = <SPAN style="COLOR: #40ffff">static_cast</SPAN>&lt;cmd_extension <SPAN style="COLOR: #40ffff">const</SPAN> &amp;&gt;(ext).increment;</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>64</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp; </SPAN>} <SPAN style="COLOR: #00bf00">bool</SPAN> <SPAN style="COLOR: #bfbf00">increment</SPAN>;</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>65</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'">};</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>66</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #40ffff; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'">struct</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"> <SPAN style="COLOR: #00bf00">my_protocol_types</SPAN> <SPAN style="COLOR: #bf0000">// User-defined protocol traits class</SPAN></SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>67</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'">{</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>68</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp; </SPAN><SPAN style="COLOR: #40ffff">typedef</SPAN> <SPAN style="COLOR: #bf00bf">tlm</SPAN>::<SPAN style="COLOR: #00bf00">tlm_generic_payload</SPAN> <SPAN style="COLOR: #00bf00">tlm_payload_type</SPAN>;</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>69</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp; </SPAN><SPAN style="COLOR: #40ffff">typedef</SPAN> <SPAN style="COLOR: #bf00bf">tlm</SPAN>::<SPAN style="COLOR: #00bf00">tlm_phase</SPAN> <SPAN style="COLOR: #00bf00">tlm_phase_type</SPAN>;</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>70</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'">};</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>71</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #40ffff; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'">struct</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"> <SPAN style="COLOR: #00bf00">Initiator</SPAN>: <SPAN style="COLOR: #00bf00">sc_module</SPAN></SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>72</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'">{</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>73</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp; </SPAN><SPAN style="COLOR: #bf00bf">tlm_utils</SPAN>::<SPAN style="COLOR: #00bf00">simple_initiator_socket</SPAN>&lt;<SPAN style="COLOR: #00bf00">Initiator</SPAN>, 32, <SPAN style="COLOR: #00bf00">my_protocol_types</SPAN>&gt; <SPAN style="COLOR: #bfbf00">socket</SPAN>;</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>74</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp; </SPAN>... <SPAN style="COLOR: #00bf00">void</SPAN> thread()</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>75</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp; </SPAN>{</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>76</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN><SPAN style="COLOR: #bf00bf">tlm</SPAN>::<SPAN style="COLOR: #00bf00">tlm_generic_payload</SPAN> <SPAN style="COLOR: #bfbf00">trans</SPAN>;</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>77</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN><SPAN style="COLOR: #00bf00">cmd_extension</SPAN> *<SPAN style="COLOR: #bfbf00">extension</SPAN> = <SPAN style="COLOR: #40ffff">new</SPAN> <SPAN style="COLOR: #00bf00">cmd_extension</SPAN>;</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>78</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>trans.set_extension(extension);<SPAN style="mso-spacerun: yes">&nbsp;&nbsp; </SPAN><SPAN style="COLOR: #bf0000">// Add the extension to the transaction</SPAN></SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>79</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>...</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>80</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>trans.set_command(<SPAN style="COLOR: #bf00bf">tlm</SPAN>::TLM_WRITE_COMMAND); <SPAN style="COLOR: #bf0000">// Execute a write command</SPAN></SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>81</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>socket-&gt;b_transport(trans, delay);</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>82</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>...</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>83</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>trans.set_command(<SPAN style="COLOR: #bf00bf">tlm</SPAN>::TLM_IGNORE_COMMAND);</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>84</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>extension-&gt;increment = <SPAN style="COLOR: #bf00bf">true</SPAN>; <SPAN style="COLOR: #bf0000">// Execute an increment command</SPAN></SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>85</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>socket-&gt;b_transport(trans, delay);</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>86</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>...</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>87</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp; </SPAN>}</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>88</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp; </SPAN>...</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>89</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>90</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'">}</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>91</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #bf0000; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'">// The target</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>92</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #bf00bf; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'">tlm_utils</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'">::<SPAN style="COLOR: #00bf00">simple_target_socket</SPAN>&lt;Memory, 32, <SPAN style="COLOR: #00bf00">my_protocol_types</SPAN>&gt; <SPAN style="COLOR: #bfbf00">socket</SPAN>;</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>93</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #40ffff; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'">virtual</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"> <SPAN style="COLOR: #00bf00">void</SPAN> <SPAN style="COLOR: #6060ff">b_transport</SPAN>(<SPAN style="COLOR: #bf00bf">tlm</SPAN>::<SPAN style="COLOR: #00bf00">tlm_generic_payload</SPAN> &amp;<SPAN style="COLOR: #bfbf00">trans</SPAN>,</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>94</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN><SPAN style="COLOR: #bf00bf">sc_core</SPAN>::<SPAN style="COLOR: #00bf00">sc_time</SPAN> &amp;<SPAN style="COLOR: #bfbf00">t</SPAN>)</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>95</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'">{</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>96</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp; </SPAN><SPAN style="COLOR: #bf00bf">tlm</SPAN>::<SPAN style="COLOR: #00bf00">tlm_command</SPAN> <SPAN style="COLOR: #bfbf00">cmd</SPAN> = trans.get_command();</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>97</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp; </SPAN>...</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>98</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp; </SPAN>cmd_extension *extension;</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>99</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp; </SPAN>trans.get_extension(extension);<SPAN style="mso-spacerun: yes">&nbsp;&nbsp; </SPAN><SPAN style="COLOR: #bf0000">// Retrieve the command extension</SPAN></SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'">100</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp; </SPAN>...</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'">101</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp; </SPAN><SPAN style="COLOR: #40ffff">if</SPAN> (!extension)<SPAN style="mso-spacerun: yes">&nbsp;&nbsp; </SPAN><SPAN style="COLOR: #bf0000">// Check the extension exists</SPAN></SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'">102</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>{</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'">103</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>trans.set_response_status(<SPAN style="COLOR: #bf00bf">tlm</SPAN>::TLM_GENERIC_ERROR_RESPONSE);</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'">104</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN><SPAN style="COLOR: #40ffff">return</SPAN>;</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'">105</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>}</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'">106</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp; </SPAN><SPAN style="COLOR: #40ffff">if</SPAN> (extension-&gt;increment)</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'">107</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>{</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'">108</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN><SPAN style="COLOR: #40ffff">if</SPAN> (cmd != <SPAN style="COLOR: #bf00bf">tlm</SPAN>::TLM_IGNORE_COMMAND)<SPAN style="mso-spacerun: yes">&nbsp;&nbsp; </SPAN><SPAN style="COLOR: #bf0000">// Detect clash with read or write</SPAN></SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'">109</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>{</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'">110</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>trans.set_response_status(<SPAN style="COLOR: #bf00bf">tlm</SPAN>::TLM_GENERIC_ERROR_RESPONSE);</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'">111</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN><SPAN style="COLOR: #40ffff">return</SPAN>;</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'">112</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>} ++ m_storage[adr]; <SPAN style="COLOR: #bf0000">//Execute an increment command</SPAN></SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'">113</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>memcpy(ptr, &amp;m_storage[adr], len);</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'">114</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>}</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'">115</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'"><SPAN style="mso-spacerun: yes">&nbsp; </SPAN>...</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 14pt; COLOR: #00bf00; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'">116</SPAN><SPAN lang=EN-US style="FONT-SIZE: 14pt; FONT-FAMILY: 'Lucida Console'; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'">}</SPAN>