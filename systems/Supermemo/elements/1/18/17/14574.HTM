<H3 style="MARGIN: 13pt 0cm"><SPAN style="LINE-HEIGHT: 173%; FONT-SIZE: 24pt; mso-bidi-font-size: 16.0pt; mso-font-kerning: 0pt" lang=EN-US>Creating a shared library using standard conventions</SPAN></H3>
<P><SPAN style="FONT-SIZE: 18.5pt; mso-bidi-font-size: 12.0pt; mso-font-kerning: 0pt" lang=EN-US>Putting all of the above information together, we now show how to build our demonstration</SPAN></P>
<P><SPAN style="FONT-SIZE: 18.5pt; mso-bidi-font-size: 12.0pt; mso-font-kerning: 0pt" lang=EN-US>library following the standard conventions. First, we create the object files:</SPAN></P>
<P><SPAN style="FONT-FAMILY: 'Lucida Console'; FONT-SIZE: 17pt; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'; mso-ansi-language: DA" lang=DA>$ gcc -g -c <FONT class=clozed>-fPIC</FONT> -Wall mod1.c mod2.c mod3.c</SPAN></P>
<P><SPAN style="FONT-SIZE: 18.5pt; mso-bidi-font-size: 12.0pt; mso-font-kerning: 0pt" lang=EN-US>Then we create the shared library with the real name </SPAN><SPAN style="FONT-FAMILY: TheSansMonoCondensed-Plain; FONT-SIZE: 18pt; mso-bidi-font-size: 8.5pt; mso-font-kerning: 0pt; mso-bidi-font-family: TheSansMonoCondensed-Plain; mso-hansi-font-family: Futura-Heavy" lang=EN-US>libdemo.so.1.0.1 </SPAN><SPAN style="FONT-SIZE: 18.5pt; mso-bidi-font-size: 12.0pt; mso-font-kerning: 0pt" lang=EN-US>and the</SPAN></P>
<P><SPAN style="FONT-SIZE: 18.5pt; mso-bidi-font-size: 12.0pt; mso-font-kerning: 0pt" lang=EN-US>soname </SPAN><SPAN style="FONT-FAMILY: TheSansMonoCondensed-Plain; FONT-SIZE: 18pt; mso-bidi-font-size: 8.5pt; mso-font-kerning: 0pt; mso-bidi-font-family: TheSansMonoCondensed-Plain; mso-hansi-font-family: Futura-Heavy" lang=EN-US>libdemo.so.1</SPAN><SPAN style="FONT-SIZE: 18.5pt; mso-bidi-font-size: 12.0pt; mso-font-kerning: 0pt" lang=EN-US>.</SPAN></P>
<P><SPAN style="FONT-FAMILY: 'Lucida Console'; FONT-SIZE: 17pt; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'; mso-ansi-language: DA" lang=DA>$ gcc -g <FONT class=clozed>-shared -Wl,-soname,libdemo.so.1 -o libdemo.so.1.0.1</FONT> </SPAN><SPAN style="FONT-FAMILY: 'Lucida Console'; FONT-SIZE: 17pt; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'; mso-ansi-language: DA" lang=DA>mod1.o mod2.o mod3.o</SPAN></P>
<P><SPAN style="FONT-SIZE: 18.5pt; mso-bidi-font-size: 12.0pt; mso-font-kerning: 0pt" lang=EN-US>Next, we create appropriate symbolic links for the soname and linker name:</SPAN></P>
<P><SPAN style="FONT-FAMILY: 'Lucida Console'; FONT-SIZE: 17pt; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'; mso-ansi-language: DA" lang=DA>$ ln -s libdemo.so.1.0.1 libdemo.so.1</SPAN></P>
<P><SPAN style="FONT-FAMILY: 'Lucida Console'; FONT-SIZE: 17pt; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'; mso-ansi-language: DA" lang=DA>$ ln -s libdemo.so.1 libdemo.so</SPAN></P>
<P><SPAN style="FONT-SIZE: 18.5pt; mso-bidi-font-size: 12.0pt; mso-font-kerning: 0pt" lang=EN-US>We can employ </SPAN><SPAN style="FONT-FAMILY: NewBaskervilleEF-RomanIta; FONT-SIZE: 24pt; mso-bidi-font-size: 12.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: NewBaskervilleEF-RomanIta" lang=EN-US>ls </SPAN><SPAN style="FONT-SIZE: 18.5pt; mso-bidi-font-size: 12.0pt; mso-font-kerning: 0pt" lang=EN-US>to verify the setup (with </SPAN><SPAN style="FONT-FAMILY: NewBaskervilleEF-RomanIta; FONT-SIZE: 24pt; mso-bidi-font-size: 12.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: NewBaskervilleEF-RomanIta" lang=EN-US>awk </SPAN><SPAN style="FONT-SIZE: 18.5pt; mso-bidi-font-size: 12.0pt; mso-font-kerning: 0pt" lang=EN-US>used to select the fields of interest):</SPAN></P>
<P><SPAN style="FONT-FAMILY: 'Lucida Console'; FONT-SIZE: 17pt; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'; mso-ansi-language: DA" lang=DA>$ ls -l libdemo.so* | awk '{print $1, $9, $10, $11}'</SPAN></P>
<P><SPAN style="FONT-FAMILY: 'Lucida Console'; FONT-SIZE: 17pt; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'; mso-ansi-language: DA" lang=DA>lrwxrwxrwx libdemo.so -&gt; libdemo.so.1</SPAN></P>
<P><SPAN style="FONT-FAMILY: 'Lucida Console'; FONT-SIZE: 17pt; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'; mso-ansi-language: DA" lang=DA>lrwxrwxrwx libdemo.so.1 -&gt; libdemo.so.1.0.1</SPAN></P>
<P><SPAN style="FONT-FAMILY: 'Lucida Console'; FONT-SIZE: 17pt; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'; mso-ansi-language: DA" lang=DA>-rwxr-xr-x libdemo.so.1.0.1</SPAN></P>
<P><SPAN style="FONT-SIZE: 18.5pt; mso-bidi-font-size: 12.0pt; mso-font-kerning: 0pt" lang=EN-US>Then we can build our executable using the linker name (note that the link command</SPAN></P>
<P><SPAN style="FONT-SIZE: 18.5pt; mso-bidi-font-size: 12.0pt; mso-font-kerning: 0pt" lang=EN-US>makes no mention of version numbers), and run the program as usual:</SPAN></P>
<P><SPAN style="FONT-FAMILY: 'Lucida Console'; FONT-SIZE: 17pt; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'; mso-ansi-language: DA" lang=DA>$ gcc -g -Wall -o prog prog.c -L. -ldemo</SPAN></P>
<P><SPAN style="FONT-FAMILY: 'Lucida Console'; FONT-SIZE: 17pt; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'; mso-ansi-language: DA" lang=DA>$ <FONT class=clozed>LD_LIBRARY_PATH=.</FONT> ./prog</SPAN></P>
<P><SPAN style="FONT-FAMILY: 'Lucida Console'; FONT-SIZE: 17pt; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'; mso-ansi-language: DA" lang=DA>Called mod1-x1</SPAN></P>
<P><SPAN style="FONT-FAMILY: 'Lucida Console'; FONT-SIZE: 17pt; mso-bidi-font-size: 9.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: 'Lucida Console'; mso-ansi-language: DA" lang=DA>Called mod2-x2</SPAN>