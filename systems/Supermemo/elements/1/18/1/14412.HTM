<H3 class=section>5.5 Errors in Recipes</H3>
<P><A name=index-errors-_0028in-recipes_0029-363></A><A name=index-recipes_002c-errors-in-364></A><A name=index-exit-status-_0028errors_0029-365></A><FONT class=extract>After each shell invocation returns, <CODE>make</CODE> looks at its exit status. If the shell completed successfully (the exit status is zero), the next line in the recipe is executed in a new shell; after the last line is finished, the rule is finished.</FONT> 
<P>If there is an error (the exit status is nonzero), <CODE>make</CODE> gives up on the current rule, and perhaps on all rules. 
<P>Sometimes the failure of a certain recipe line does not indicate a problem. For example, you may use the <CODE>mkdir</CODE> command to ensure that a directory exists. If the directory already exists, <CODE>mkdir</CODE> will report an error, but you probably want <CODE>make</CODE> to continue regardless. 
<P><A name=index-g_t_0040code_007b_002d_007d-_0028in-recipes_0029-366></A>To ignore errors in a recipe line, write a &#8216;<SAMP><SPAN class=samp>-</SPAN></SAMP>&#8217; at the beginning of the line's text (after the initial tab). The &#8216;<SAMP><SPAN class=samp>-</SPAN></SAMP>&#8217; is discarded before the line is passed to the shell for execution. 
<P>For example, <PRE class=example>     clean:
             -rm -f *.o
</PRE>
<P><A name=index-g_t_0040code_007brm_007d-_0028shell-command_0029-367></A>This causes <CODE>make</CODE> to continue even if <CODE>rm</CODE> is unable to remove a file. 
<P><A name=index-g_t_0040code_007b_002di_007d-368></A><A name=index-g_t_0040code_007b_002d_002dignore_002derrors_007d-369></A><A name=index-g_t_002eIGNORE-370></A><FONT class=extract>When you run <CODE>make</CODE> with the &#8216;<SAMP><SPAN class=samp>-i</SPAN></SAMP>&#8217; or &#8216;<SAMP><SPAN class=samp>--ignore-errors</SPAN></SAMP>&#8217; flag, errors are ignored in all recipes of all rules. A rule in the makefile for the special target <CODE>.IGNORE</CODE> has the same effect, if there are no prerequisites. These ways of ignoring errors are obsolete because &#8216;<SAMP><SPAN class=samp>-</SPAN></SAMP>&#8217; is more flexible.</FONT> 
<P>When errors are to be ignored, because of either a &#8216;<SAMP><SPAN class=samp>-</SPAN></SAMP>&#8217; or the &#8216;<SAMP><SPAN class=samp>-i</SPAN></SAMP>&#8217; flag, <CODE>make</CODE> treats an error return just like success, except that it prints out a message that tells you the status code the shell exited with, and says that the error has been ignored. 
<P><FONT class=extract>When an error happens that <CODE>make</CODE> has not been told to ignore, it implies that the current target cannot be correctly remade, and neither can any other that depends on it either directly or indirectly. No further recipes will be executed for these targets, since their preconditions have not been achieved. </FONT>
<P><A name=index-g_t_0040code_007b_002dk_007d-371></A><A name=index-g_t_0040code_007b_002d_002dkeep_002dgoing_007d-372></A><FONT class=extract>Normally <CODE>make</CODE> gives up immediately in this circumstance, returning a nonzero status. However, if the &#8216;<SAMP><SPAN class=samp>-k</SPAN></SAMP>&#8217; or &#8216;<SAMP><SPAN class=samp>--keep-going</SPAN></SAMP>&#8217; flag is specified, <CODE>make</CODE> continues to consider the other prerequisites of the pending targets, remaking them if necessary, before it gives up and returns nonzero status. For example, after an error in compiling one object file, &#8216;<SAMP><SPAN class=samp>make -k</SPAN></SAMP>&#8217; will continue compiling other object files even though it already knows that linking them will be impossible. See </FONT><A href="https://www.gnu.org/software/make/manual/make.html#Options-Summary"><FONT class=extract>Summary of Options</FONT></A><FONT class=extract>.</FONT> 
<P><FONT class=extract>The usual behavior assumes that your purpose is to get the specified targets up to date; once <CODE>make</CODE> learns that this is impossible, it might as well report the failure immediately. The &#8216;<SAMP><SPAN class=samp>-k</SPAN></SAMP>&#8217; option says that the real purpose is to test as many of the changes made in the program as possible, perhaps to find several independent problems so that you can correct them all before the next attempt to compile. This is why Emacs' <CODE>compile</CODE> command passes the &#8216;<SAMP><SPAN class=samp>-k</SPAN></SAMP>&#8217; flag by default. </FONT><A name=index-Emacs-_0028_0040code_007bM_002dx-compile_007d_0029-373></A><A name=index-g_t_002eDELETE_005fON_005fERROR-374></A><A name=index-deletion-of-target-files-375></A><A name=index-removal-of-target-files-376></A><A name=index-target_002c-deleting-on-error-377></A><FONT class=extract>Usually when a recipe line fails, if it has changed the target file at all, the file is corrupted and cannot be used&#8212;or at least it is not completely updated. Yet the file's time stamp says that it is now up to date, so the next time <CODE>make</CODE> runs, it will not try to update that file. The situation is just the same as when the shell is killed by a signal; see </FONT><A href="https://www.gnu.org/software/make/manual/make.html#Interrupts"><FONT class=extract>Interrupts</FONT></A><FONT class=extract>. So generally the right thing to do is to delete the target file if the recipe fails after beginning to change the file. <CODE>make</CODE> will do this if <CODE>.DELETE_ON_ERROR</CODE> appears as a target. This is almost always what you want <CODE>make</CODE> to do, but it is not historical practice; so for compatibility, you must explicitly request it.</FONT>