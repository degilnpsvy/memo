Listing 30-3: Setting the mutex type </P>
<P>pthread_mutex_t mtx; </P>
<P>pthread_mutexattr_t mtxAttr; </P>
<P>int s, type; </P>
<P>s = pthread_mutexattr_init(&amp;mtxAttr); </P>
<P>if (s != 0) errExitEN(s, "pthread_mutexattr_init"); </P>
<P>s = pthread_mutexattr_settype(&amp;mtxAttr, PTHREAD_MUTEX_ERRORCHECK); </P>
<P>if (s != 0) errExitEN(s, "pthread_mutexattr_settype"); </P>
<P>s = pthread_mutex_init(mtx, &amp;mtxAttr); </P>
<P>if (s != 0) errExitEN(s, "pthread_mutex_init"); </P>
<P>s = pthread_mutexattr_destroy(&amp;mtxAttr); /* No longer needed */ </P>
<P>if (s != 0) errExitEN(s, "pthread_mutexattr_destroy")<SPAN style="FONT-FAMILY: TheSansMonoCondensed-Plain; FONT-SIZE: 12pt; mso-bidi-font-size: 8.5pt; mso-font-kerning: 0pt; mso-bidi-font-family: TheSansMonoCondensed-Plain" lang=EN-US>;</SPAN>