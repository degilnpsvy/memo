<H3 class=section style="WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); TEXT-INDENT: 0px; LINE-HEIGHT: normal; FONT-STYLE: normal; FONT-FAMILY: Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; FONT-VARIANT: normal; orphans: auto; widows: auto; -webkit-text-stroke-width: 0px">1.2 Controlling<SPAN class=Apple-converted-space>&nbsp;</SPAN><SAMP><SPAN class=command>ar</SPAN></SAMP><SPAN class=Apple-converted-space>&nbsp;</SPAN>with a Script</H3><PRE class=smallexample style="FONT-WEIGHT: normal; FONT-SIZE: smaller; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); TEXT-INDENT: 0px; LINE-HEIGHT: normal; FONT-STYLE: normal; LETTER-SPACING: normal; FONT-VARIANT: normal; orphans: auto; widows: auto; -webkit-text-stroke-width: 0px">     ar -M [ &lt;<VAR>script</VAR> ]
</PRE>
<P style="WORD-SPACING: 0px; FONT: medium Simsun; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); TEXT-INDENT: 0px; WHITE-SPACE: normal; LETTER-SPACING: normal; orphans: auto; widows: auto; -webkit-text-stroke-width: 0px"><A name=index-MRI-compatibility_002c-_0040command_007bar_007d-34></A><A name=index-scripts_002c-_0040command_007bar_007d-35></A>If you use the single command-line option `<SAMP><SPAN class=samp>-M</SPAN></SAMP>' with<SPAN class=Apple-converted-space>&nbsp;</SPAN><SAMP><SPAN class=command>ar</SPAN></SAMP>, you can control its operation with a rudimentary command language. This form of<SPAN class=Apple-converted-space>&nbsp;</SPAN><SAMP><SPAN class=command>ar</SPAN></SAMP><SPAN class=Apple-converted-space>&nbsp;</SPAN>operates interactively if standard input is coming directly from a terminal. During interactive use,<SPAN class=Apple-converted-space>&nbsp;</SPAN><SAMP><SPAN class=command>ar</SPAN></SAMP><SPAN class=Apple-converted-space>&nbsp;</SPAN>prompts for input (the prompt is `<SAMP><SPAN class=samp>AR &gt;</SPAN></SAMP>'), and continues executing even after errors. If you redirect standard input to a script file, no prompts are issued, and<SPAN class=Apple-converted-space>&nbsp;</SPAN><SAMP><SPAN class=command>ar</SPAN></SAMP><SPAN class=Apple-converted-space>&nbsp;</SPAN>abandons execution (with a nonzero exit code) on any error.</P>
<P style="WORD-SPACING: 0px; FONT: medium Simsun; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); TEXT-INDENT: 0px; WHITE-SPACE: normal; LETTER-SPACING: normal; orphans: auto; widows: auto; -webkit-text-stroke-width: 0px">The<SPAN class=Apple-converted-space>&nbsp;</SPAN><SAMP><SPAN class=command>ar</SPAN></SAMP><SPAN class=Apple-converted-space>&nbsp;</SPAN>command language is<SPAN class=Apple-converted-space>&nbsp;</SPAN><EM>not</EM><SPAN class=Apple-converted-space>&nbsp;</SPAN>designed to be equivalent to the command-line options; in fact, it provides somewhat less control over archives. The only purpose of the command language is to ease the transition to<SPAN class=Apple-converted-space>&nbsp;</SPAN><SPAN class=sc style="FONT-VARIANT: small-caps">gnu</SPAN><SPAN class=Apple-converted-space>&nbsp;</SPAN><SAMP><SPAN class=command>ar</SPAN></SAMP><SPAN class=Apple-converted-space>&nbsp;</SPAN>for developers who already have scripts written for the MRI &#8220;librarian&#8221; program.</P>
<P style="WORD-SPACING: 0px; FONT: medium Simsun; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); TEXT-INDENT: 0px; WHITE-SPACE: normal; LETTER-SPACING: normal; orphans: auto; widows: auto; -webkit-text-stroke-width: 0px">The syntax for the<SPAN class=Apple-converted-space>&nbsp;</SPAN><SAMP><SPAN class=command>ar</SPAN></SAMP><SPAN class=Apple-converted-space>&nbsp;</SPAN>command language is straightforward:</P>
<UL style="WORD-SPACING: 0px; FONT: medium Simsun; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); TEXT-INDENT: 0px; WHITE-SPACE: normal; LETTER-SPACING: normal; orphans: auto; widows: auto; -webkit-text-stroke-width: 0px">
<LI>commands are recognized in upper or lower case; for example,<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>LIST</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>is the same as<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>list</CODE>. In the following descriptions, commands are shown in upper case for clarity.</LI>
<LI>a single command may appear on each line; it is the first word on the line.</LI>
<LI>empty lines are allowed, and have no effect.</LI>
<LI>comments are allowed; text after either of the characters `<SAMP><SPAN class=samp>*</SPAN></SAMP>' or `<SAMP><SPAN class=samp>;</SPAN></SAMP>' is ignored.</LI>
<LI>Whenever you use a list of names as part of the argument to an<SPAN class=Apple-converted-space>&nbsp;</SPAN><SAMP><SPAN class=command>ar</SPAN></SAMP><SPAN class=Apple-converted-space>&nbsp;</SPAN>command, you can separate the individual names with either commas or blanks. Commas are shown in the explanations below, for clarity.</LI>
<LI>`<SAMP><SPAN class=samp>+</SPAN></SAMP>' is used as a line continuation character; if `<SAMP><SPAN class=samp>+</SPAN></SAMP>' appears at the end of a line, the text on the following line is considered part of the current command.</LI></UL>
<P style="WORD-SPACING: 0px; FONT: medium Simsun; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); TEXT-INDENT: 0px; WHITE-SPACE: normal; LETTER-SPACING: normal; orphans: auto; widows: auto; -webkit-text-stroke-width: 0px">Here are the commands you can use in<SPAN class=Apple-converted-space>&nbsp;</SPAN><SAMP><SPAN class=command>ar</SPAN></SAMP><SPAN class=Apple-converted-space>&nbsp;</SPAN>scripts, or when using<SPAN class=Apple-converted-space>&nbsp;</SPAN><SAMP><SPAN class=command>ar</SPAN></SAMP><SPAN class=Apple-converted-space>&nbsp;</SPAN>interactively. Three of them have special significance:</P>
<P style="WORD-SPACING: 0px; FONT: medium Simsun; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); TEXT-INDENT: 0px; WHITE-SPACE: normal; LETTER-SPACING: normal; orphans: auto; widows: auto; -webkit-text-stroke-width: 0px"><CODE>OPEN</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>or<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>CREATE</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>specify a<SPAN class=Apple-converted-space>&nbsp;</SPAN><DFN>current archive</DFN>, which is a temporary file required for most of the other commands.</P>
<P style="WORD-SPACING: 0px; FONT: medium Simsun; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); TEXT-INDENT: 0px; WHITE-SPACE: normal; LETTER-SPACING: normal; orphans: auto; widows: auto; -webkit-text-stroke-width: 0px"><CODE>SAVE</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>commits the changes so far specified by the script. Prior to<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>SAVE</CODE>, commands affect only the temporary copy of the current archive.</P>
<DL style="WORD-SPACING: 0px; FONT: medium Simsun; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); TEXT-INDENT: 0px; WHITE-SPACE: normal; LETTER-SPACING: normal; orphans: auto; widows: auto; -webkit-text-stroke-width: 0px">
<DT><CODE>ADDLIB<SPAN class=Apple-converted-space>&nbsp;</SPAN></CODE><VAR>archive</VAR></DT>
<DT><CODE>ADDLIB<SPAN class=Apple-converted-space>&nbsp;</SPAN></CODE><VAR>archive</VAR><CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>(</CODE><VAR>module</VAR><CODE>,<SPAN class=Apple-converted-space>&nbsp;</SPAN></CODE><VAR>module</VAR><CODE>, ...<SPAN class=Apple-converted-space>&nbsp;</SPAN></CODE><VAR>module</VAR><CODE>)</CODE></DT>
<DD>Add all the contents of<SPAN class=Apple-converted-space>&nbsp;</SPAN><VAR>archive</VAR><SPAN class=Apple-converted-space>&nbsp;</SPAN>(or, if specified, each named<SPAN class=Apple-converted-space>&nbsp;</SPAN><VAR>module</VAR><SPAN class=Apple-converted-space>&nbsp;</SPAN>from<SPAN class=Apple-converted-space>&nbsp;</SPAN><VAR>archive</VAR>) to the current archive.
<P>Requires prior use of<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>OPEN</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>or<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>CREATE</CODE>.<SPAN class=Apple-converted-space>&nbsp;</SPAN><BR></P></DD>
<DT><CODE>ADDMOD<SPAN class=Apple-converted-space>&nbsp;</SPAN></CODE><VAR>member</VAR><CODE>,<SPAN class=Apple-converted-space>&nbsp;</SPAN></CODE><VAR>member</VAR><CODE>, ...<SPAN class=Apple-converted-space>&nbsp;</SPAN></CODE><VAR>member</VAR></DT>
<DD>Add each named<SPAN class=Apple-converted-space>&nbsp;</SPAN><VAR>member</VAR><SPAN class=Apple-converted-space>&nbsp;</SPAN>as a module in the current archive.
<P>Requires prior use of<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>OPEN</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>or<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>CREATE</CODE>.<SPAN class=Apple-converted-space>&nbsp;</SPAN><BR></P></DD>
<DT><CODE>CLEAR</CODE></DT>
<DD>Discard the contents of the current archive, canceling the effect of any operations since the last<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>SAVE</CODE>. May be executed (with no effect) even if no current archive is specified.<SPAN class=Apple-converted-space>&nbsp;</SPAN><BR></DD>
<DT><CODE>CREATE<SPAN class=Apple-converted-space>&nbsp;</SPAN></CODE><VAR>archive</VAR></DT>
<DD>Creates an archive, and makes it the current archive (required for many other commands). The new archive is created with a temporary name; it is not actually saved as<SPAN class=Apple-converted-space>&nbsp;</SPAN><VAR>archive</VAR><SPAN class=Apple-converted-space>&nbsp;</SPAN>until you use<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>SAVE</CODE>. You can overwrite existing archives; similarly, the contents of any existing file named<SPAN class=Apple-converted-space>&nbsp;</SPAN><VAR>archive</VAR><SPAN class=Apple-converted-space>&nbsp;</SPAN>will not be destroyed until<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>SAVE</CODE>.<SPAN class=Apple-converted-space>&nbsp;</SPAN><BR></DD>
<DT><CODE>DELETE<SPAN class=Apple-converted-space>&nbsp;</SPAN></CODE><VAR>module</VAR><CODE>,<SPAN class=Apple-converted-space>&nbsp;</SPAN></CODE><VAR>module</VAR><CODE>, ...<SPAN class=Apple-converted-space>&nbsp;</SPAN></CODE><VAR>module</VAR></DT>
<DD>Delete each listed<SPAN class=Apple-converted-space>&nbsp;</SPAN><VAR>module</VAR><SPAN class=Apple-converted-space>&nbsp;</SPAN>from the current archive; equivalent to `<SAMP><SPAN class=samp>ar -d<SPAN class=Apple-converted-space>&nbsp;</SPAN></SPAN><VAR>archive</VAR><SPAN class=Apple-converted-space>&nbsp;</SPAN><VAR>module</VAR><SPAN class=samp><SPAN class=Apple-converted-space>&nbsp;</SPAN>...<SPAN class=Apple-converted-space>&nbsp;</SPAN></SPAN><VAR>module</VAR></SAMP>'.
<P>Requires prior use of<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>OPEN</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>or<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>CREATE</CODE>.<SPAN class=Apple-converted-space>&nbsp;</SPAN><BR></P></DD>
<DT><CODE>DIRECTORY<SPAN class=Apple-converted-space>&nbsp;</SPAN></CODE><VAR>archive</VAR><CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>(</CODE><VAR>module</VAR><CODE>, ...<SPAN class=Apple-converted-space>&nbsp;</SPAN></CODE><VAR>module</VAR><CODE>)</CODE></DT>
<DT><CODE>DIRECTORY<SPAN class=Apple-converted-space>&nbsp;</SPAN></CODE><VAR>archive</VAR><CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>(</CODE><VAR>module</VAR><CODE>, ...<SPAN class=Apple-converted-space>&nbsp;</SPAN></CODE><VAR>module</VAR><CODE>)<SPAN class=Apple-converted-space>&nbsp;</SPAN></CODE><VAR>outputfile</VAR></DT>
<DD>List each named<SPAN class=Apple-converted-space>&nbsp;</SPAN><VAR>module</VAR><SPAN class=Apple-converted-space>&nbsp;</SPAN>present in<SPAN class=Apple-converted-space>&nbsp;</SPAN><VAR>archive</VAR>. The separate command<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>VERBOSE</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>specifies the form of the output: when verbose output is off, output is like that of `<SAMP><SPAN class=samp>ar -t<SPAN class=Apple-converted-space>&nbsp;</SPAN></SPAN><VAR>archive</VAR><SPAN class=Apple-converted-space>&nbsp;</SPAN><VAR>module</VAR><SPAN class=samp>...</SPAN></SAMP>'. When verbose output is on, the listing is like `<SAMP><SPAN class=samp>ar -tv<SPAN class=Apple-converted-space>&nbsp;</SPAN></SPAN><VAR>archive</VAR><SPAN class=Apple-converted-space>&nbsp;</SPAN><VAR>module</VAR><SPAN class=samp>...</SPAN></SAMP>'.
<P>Output normally goes to the standard output stream; however, if you specify<SPAN class=Apple-converted-space>&nbsp;</SPAN><VAR>outputfile</VAR><SPAN class=Apple-converted-space>&nbsp;</SPAN>as a final argument,<SPAN class=Apple-converted-space>&nbsp;</SPAN><SAMP><SPAN class=command>ar</SPAN></SAMP><SPAN class=Apple-converted-space>&nbsp;</SPAN>directs the output to that file.<SPAN class=Apple-converted-space>&nbsp;</SPAN><BR></P></DD>
<DT><CODE>END</CODE></DT>
<DD>Exit from<SPAN class=Apple-converted-space>&nbsp;</SPAN><SAMP><SPAN class=command>ar</SPAN></SAMP>, with a<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>0</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>exit code to indicate successful completion. This command does not save the output file; if you have changed the current archive since the last<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>SAVE</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>command, those changes are lost.<SPAN class=Apple-converted-space>&nbsp;</SPAN><BR></DD>
<DT><CODE>EXTRACT<SPAN class=Apple-converted-space>&nbsp;</SPAN></CODE><VAR>module</VAR><CODE>,<SPAN class=Apple-converted-space>&nbsp;</SPAN></CODE><VAR>module</VAR><CODE>, ...<SPAN class=Apple-converted-space>&nbsp;</SPAN></CODE><VAR>module</VAR></DT>
<DD>Extract each named<SPAN class=Apple-converted-space>&nbsp;</SPAN><VAR>module</VAR><SPAN class=Apple-converted-space>&nbsp;</SPAN>from the current archive, writing them into the current directory as separate files. Equivalent to `<SAMP><SPAN class=samp>ar -x<SPAN class=Apple-converted-space>&nbsp;</SPAN></SPAN><VAR>archive</VAR><SPAN class=Apple-converted-space>&nbsp;</SPAN><VAR>module</VAR><SPAN class=samp>...</SPAN></SAMP>'.
<P>Requires prior use of<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>OPEN</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>or<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>CREATE</CODE>.<SPAN class=Apple-converted-space>&nbsp;</SPAN><BR></P></DD>
<DT><CODE>LIST</CODE></DT>
<DD>Display full contents of the current archive, in &#8220;verbose&#8221; style regardless of the state of<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>VERBOSE</CODE>. The effect is like `<SAMP><SPAN class=samp>ar tv<SPAN class=Apple-converted-space>&nbsp;</SPAN></SPAN><VAR>archive</VAR></SAMP>'. (This single command is a<SPAN class=Apple-converted-space>&nbsp;</SPAN><SPAN class=sc style="FONT-VARIANT: small-caps">gnu</SPAN><SPAN class=Apple-converted-space>&nbsp;</SPAN><SAMP><SPAN class=command>ar</SPAN></SAMP><SPAN class=Apple-converted-space>&nbsp;</SPAN>enhancement, rather than present for MRI compatibility.)
<P>Requires prior use of<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>OPEN</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>or<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>CREATE</CODE>.<SPAN class=Apple-converted-space>&nbsp;</SPAN><BR></P></DD>
<DT><CODE>OPEN<SPAN class=Apple-converted-space>&nbsp;</SPAN></CODE><VAR>archive</VAR></DT>
<DD>Opens an existing archive for use as the current archive (required for many other commands). Any changes as the result of subsequent commands will not actually affect<SPAN class=Apple-converted-space>&nbsp;</SPAN><VAR>archive</VAR><SPAN class=Apple-converted-space>&nbsp;</SPAN>until you next use<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>SAVE</CODE>.<SPAN class=Apple-converted-space>&nbsp;</SPAN><BR></DD>
<DT><CODE>REPLACE<SPAN class=Apple-converted-space>&nbsp;</SPAN></CODE><VAR>module</VAR><CODE>,<SPAN class=Apple-converted-space>&nbsp;</SPAN></CODE><VAR>module</VAR><CODE>, ...<SPAN class=Apple-converted-space>&nbsp;</SPAN></CODE><VAR>module</VAR></DT>
<DD>In the current archive, replace each existing<SPAN class=Apple-converted-space>&nbsp;</SPAN><VAR>module</VAR><SPAN class=Apple-converted-space>&nbsp;</SPAN>(named in the<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>REPLACE</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>arguments) from files in the current working directory. To execute this command without errors, both the file, and the module in the current archive, must exist.
<P>Requires prior use of<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>OPEN</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>or<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>CREATE</CODE>.<SPAN class=Apple-converted-space>&nbsp;</SPAN><BR></P></DD>
<DT><CODE>VERBOSE</CODE></DT>
<DD>Toggle an internal flag governing the output from<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>DIRECTORY</CODE>. When the flag is on,<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>DIRECTORY</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>output matches output from `<SAMP><SPAN class=samp>ar -tv<SPAN class=Apple-converted-space>&nbsp;</SPAN></SPAN></SAMP>'<SMALL class=dots>...</SMALL>.<SPAN class=Apple-converted-space>&nbsp;</SPAN><BR></DD>
<DT><CODE>SAVE</CODE></DT>
<DD>Commit your changes to the current archive, and actually save it as a file with the name specified in the last<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>CREATE</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>or<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>OPEN</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>command.
<P>Requires prior use of<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>OPEN</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>or<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>CREATE</CODE>.</P></DD></DL>