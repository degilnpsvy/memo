<H3 style="LINE-HEIGHT: normal; TEXT-TRANSFORM: none; FONT-VARIANT: normal; FONT-STYLE: normal; TEXT-INDENT: 0px; FONT-FAMILY: Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" class=section>7.21 Usage</H3><A style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" name=statprof-statprof_002dactive_003f></A>
<DL style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">
<DT><A name=index-statprof_002dactive_003f></A>Function:<SPAN class=Apple-converted-space>&nbsp;</SPAN><STRONG>statprof-active?</STRONG></DT>
<DD>
<P>Returns<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>#t</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>if<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>statprof-start</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>has been called more times than<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>statprof-stop</CODE>,<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>#f</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>otherwise.</P></DD></DL><A style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" name=statprof-statprof_002dstart></A>
<DL style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">
<DT><A name=index-statprof_002dstart></A>Function:<SPAN class=Apple-converted-space>&nbsp;</SPAN><STRONG>statprof-start</STRONG></DT>
<DD>
<P>Start the profiler.<CODE></CODE></P></DD></DL><A style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" name=statprof-statprof_002dstop></A>
<DL style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">
<DT><A name=index-statprof_002dstop></A>Function:<SPAN class=Apple-converted-space>&nbsp;</SPAN><STRONG>statprof-stop</STRONG></DT>
<DD>
<P>Stop the profiler.<CODE></CODE></P></DD></DL><A style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" name=statprof-statprof_002dreset></A>
<DL style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">
<DT><A name=index-statprof_002dreset></A>Function:<SPAN class=Apple-converted-space>&nbsp;</SPAN><STRONG>statprof-reset</STRONG><SPAN class=Apple-converted-space>&nbsp;</SPAN><EM>sample-seconds sample-microseconds count-calls? [full-stacks?]</EM></DT>
<DD>
<P>Reset the statprof sampler interval to<SPAN class=Apple-converted-space>&nbsp;</SPAN><VAR>sample-seconds</VAR><SPAN class=Apple-converted-space>&nbsp;</SPAN>and<SPAN class=Apple-converted-space>&nbsp;</SPAN><VAR>sample-microseconds</VAR>. If<SPAN class=Apple-converted-space>&nbsp;</SPAN><VAR>count-calls?</VAR><SPAN class=Apple-converted-space>&nbsp;</SPAN>is true, arrange to instrument procedure calls as well as collecting statistical profiling data. If<SPAN class=Apple-converted-space>&nbsp;</SPAN><VAR>full-stacks?</VAR><SPAN class=Apple-converted-space>&nbsp;</SPAN>is true, collect all sampled stacks into a list for later analysis.</P>
<P>Enables traps and debugging as necessary.</P></DD></DL><A style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" name=statprof-statprof_002daccumulated_002dtime></A>
<DL style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">
<DT><A name=index-statprof_002daccumulated_002dtime></A>Function:<SPAN class=Apple-converted-space>&nbsp;</SPAN><STRONG>statprof-accumulated-time</STRONG></DT>
<DD>
<P>Returns the time accumulated during the last statprof run.<CODE></CODE></P></DD></DL><A style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" name=statprof-statprof_002dsample_002dcount></A>
<DL style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">
<DT><A name=index-statprof_002dsample_002dcount></A>Function:<SPAN class=Apple-converted-space>&nbsp;</SPAN><STRONG>statprof-sample-count</STRONG></DT>
<DD>
<P>Returns the number of samples taken during the last statprof run.<CODE></CODE></P></DD></DL><A style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" name=statprof-statprof_002dfold_002dcall_002ddata></A>
<DL style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">
<DT><A name=index-statprof_002dfold_002dcall_002ddata></A>Function:<SPAN class=Apple-converted-space>&nbsp;</SPAN><STRONG>statprof-fold-call-data</STRONG><SPAN class=Apple-converted-space>&nbsp;</SPAN><EM>proc init</EM></DT>
<DD>
<P>Fold<SPAN class=Apple-converted-space>&nbsp;</SPAN><VAR>proc</VAR><SPAN class=Apple-converted-space>&nbsp;</SPAN>over the call-data accumulated by statprof. Cannot be called while statprof is active.<SPAN class=Apple-converted-space>&nbsp;</SPAN><VAR>proc</VAR><SPAN class=Apple-converted-space>&nbsp;</SPAN>should take two arguments,<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>(<VAR>call-data</VAR><SPAN class=Apple-converted-space>&nbsp;</SPAN><VAR>prior-result</VAR>)</CODE>.</P>
<P>Note that a given proc-name may appear multiple times, but if it does, it represents different functions with the same name.</P></DD></DL><A style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" name=statprof-statprof_002dproc_002dcall_002ddata></A>
<DL style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">
<DT><A name=index-statprof_002dproc_002dcall_002ddata></A>Function:<SPAN class=Apple-converted-space>&nbsp;</SPAN><STRONG>statprof-proc-call-data</STRONG><SPAN class=Apple-converted-space>&nbsp;</SPAN><EM>proc</EM></DT>
<DD>
<P>Returns the call-data associated with<SPAN class=Apple-converted-space>&nbsp;</SPAN><VAR>proc</VAR>, or<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>#f</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>if none is available.</P></DD></DL><A style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" name=statprof-statprof_002dcall_002ddata_002dname></A>
<DL style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">
<DT><A name=index-statprof_002dcall_002ddata_002dname></A>Function:<SPAN class=Apple-converted-space>&nbsp;</SPAN><STRONG>statprof-call-data-name</STRONG><SPAN class=Apple-converted-space>&nbsp;</SPAN><EM>cd</EM></DT></DL><A style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" name=statprof-statprof_002dcall_002ddata_002dcalls></A>
<DL style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">
<DT><A name=index-statprof_002dcall_002ddata_002dcalls></A>Function:<SPAN class=Apple-converted-space>&nbsp;</SPAN><STRONG>statprof-call-data-calls</STRONG><SPAN class=Apple-converted-space>&nbsp;</SPAN><EM>cd</EM></DT></DL><A style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" name=statprof-statprof_002dcall_002ddata_002dcum_002dsamples></A>
<DL style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">
<DT><A name=index-statprof_002dcall_002ddata_002dcum_002dsamples></A>Function:<SPAN class=Apple-converted-space>&nbsp;</SPAN><STRONG>statprof-call-data-cum-samples</STRONG><SPAN class=Apple-converted-space>&nbsp;</SPAN><EM>cd</EM></DT></DL><A style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" name=statprof-statprof_002dcall_002ddata_002dself_002dsamples></A>
<DL style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">
<DT><A name=index-statprof_002dcall_002ddata_002dself_002dsamples></A>Function:<SPAN class=Apple-converted-space>&nbsp;</SPAN><STRONG>statprof-call-data-self-samples</STRONG><SPAN class=Apple-converted-space>&nbsp;</SPAN><EM>cd</EM></DT></DL><A style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" name=statprof-statprof_002dcall_002ddata_002d_003estats></A>
<DL style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">
<DT><A name=index-statprof_002dcall_002ddata_002d_003estats></A>Function:<SPAN class=Apple-converted-space>&nbsp;</SPAN><STRONG>statprof-call-data-&gt;stats</STRONG><SPAN class=Apple-converted-space>&nbsp;</SPAN><EM>call-data</EM></DT>
<DD>
<P>Returns an object of type<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>statprof-stats</CODE>.</P></DD></DL><A style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" name=statprof-statprof_002dstats_002dproc_002dname></A>
<DL style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">
<DT><A name=index-statprof_002dstats_002dproc_002dname></A>Function:<SPAN class=Apple-converted-space>&nbsp;</SPAN><STRONG>statprof-stats-proc-name</STRONG><SPAN class=Apple-converted-space>&nbsp;</SPAN><EM>stats</EM></DT></DL><A style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" name=statprof-statprof_002dstats_002d_0025_002dtime_002din_002dproc></A>
<DL style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">
<DT><A name=index-statprof_002dstats_002d_0025_002dtime_002din_002dproc></A>Function:<SPAN class=Apple-converted-space>&nbsp;</SPAN><STRONG>statprof-stats-%-time-in-proc</STRONG><SPAN class=Apple-converted-space>&nbsp;</SPAN><EM>stats</EM></DT></DL><A style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" name=statprof-statprof_002dstats_002dcum_002dsecs_002din_002dproc></A>
<DL style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">
<DT><A name=index-statprof_002dstats_002dcum_002dsecs_002din_002dproc></A>Function:<SPAN class=Apple-converted-space>&nbsp;</SPAN><STRONG>statprof-stats-cum-secs-in-proc</STRONG><SPAN class=Apple-converted-space>&nbsp;</SPAN><EM>stats</EM></DT></DL><A style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" name=statprof-statprof_002dstats_002dself_002dsecs_002din_002dproc></A>
<DL style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">
<DT><A name=index-statprof_002dstats_002dself_002dsecs_002din_002dproc></A>Function:<SPAN class=Apple-converted-space>&nbsp;</SPAN><STRONG>statprof-stats-self-secs-in-proc</STRONG><SPAN class=Apple-converted-space>&nbsp;</SPAN><EM>stats</EM></DT></DL><A style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" name=statprof-statprof_002dstats_002dcalls></A>
<DL style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">
<DT><A name=index-statprof_002dstats_002dcalls></A>Function:<SPAN class=Apple-converted-space>&nbsp;</SPAN><STRONG>statprof-stats-calls</STRONG><SPAN class=Apple-converted-space>&nbsp;</SPAN><EM>stats</EM></DT></DL><A style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" name=statprof-statprof_002dstats_002dself_002dsecs_002dper_002dcall></A>
<DL style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">
<DT><A name=index-statprof_002dstats_002dself_002dsecs_002dper_002dcall></A>Function:<SPAN class=Apple-converted-space>&nbsp;</SPAN><STRONG>statprof-stats-self-secs-per-call</STRONG><SPAN class=Apple-converted-space>&nbsp;</SPAN><EM>stats</EM></DT></DL><A style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" name=statprof-statprof_002dstats_002dcum_002dsecs_002dper_002dcall></A>
<DL style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">
<DT><A name=index-statprof_002dstats_002dcum_002dsecs_002dper_002dcall></A>Function:<SPAN class=Apple-converted-space>&nbsp;</SPAN><STRONG>statprof-stats-cum-secs-per-call</STRONG><SPAN class=Apple-converted-space>&nbsp;</SPAN><EM>stats</EM></DT></DL><A style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" name=statprof-statprof_002ddisplay></A>
<DL style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">
<DT><A name=index-statprof_002ddisplay></A>Function:<SPAN class=Apple-converted-space>&nbsp;</SPAN><STRONG>statprof-display</STRONG><SPAN class=Apple-converted-space>&nbsp;</SPAN><EM>. _</EM></DT>
<DD>
<P>Displays a gprof-like summary of the statistics collected. Unless an optional<SPAN class=Apple-converted-space>&nbsp;</SPAN><VAR>port</VAR><SPAN class=Apple-converted-space>&nbsp;</SPAN>argument is passed, uses the current output port.</P></DD></DL><A style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" name=statprof-statprof_002ddisplay_002danomolies></A>
<DL style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">
<DT><A name=index-statprof_002ddisplay_002danomolies></A>Function:<SPAN class=Apple-converted-space>&nbsp;</SPAN><STRONG>statprof-display-anomolies</STRONG></DT>
<DD>
<P>A sanity check that attempts to detect anomolies in statprof&#8217;s statistics.<CODE></CODE></P></DD></DL><A style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" name=statprof-statprof_002dfetch_002dstacks></A>
<DL style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">
<DT><A name=index-statprof_002dfetch_002dstacks></A>Function:<SPAN class=Apple-converted-space>&nbsp;</SPAN><STRONG>statprof-fetch-stacks</STRONG></DT>
<DD>
<P>Returns a list of stacks, as they were captured since the last call to<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>statprof-reset</CODE>.</P>
<P>Note that stacks are only collected if the<SPAN class=Apple-converted-space>&nbsp;</SPAN><VAR>full-stacks?</VAR><SPAN class=Apple-converted-space>&nbsp;</SPAN>argument to<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>statprof-reset</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>is true.</P></DD></DL><A style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" name=statprof-statprof_002dfetch_002dcall_002dtree></A>
<DL style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">
<DT><A name=index-statprof_002dfetch_002dcall_002dtree></A>Function:<SPAN class=Apple-converted-space>&nbsp;</SPAN><STRONG>statprof-fetch-call-tree</STRONG></DT>
<DD><PRE class=verbatim>Return a call tree for the previous statprof run.

The return value is a list of nodes, each of which is of the type:
@@code
 node ::= (@@var@{proc@} @@var@{count@} . @@var@{nodes@})
@@end code
</PRE></DD></DL><A style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" name=statprof-statprof></A>
<DL style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">
<DT><A name=index-statprof></A>Function:<SPAN class=Apple-converted-space>&nbsp;</SPAN><STRONG>statprof</STRONG><SPAN class=Apple-converted-space>&nbsp;</SPAN><EM>thunk [#:loop] [#:hz] [#:count-calls?] [#:full-stacks?]</EM></DT>
<DD>
<P>Profiles the execution of<SPAN class=Apple-converted-space>&nbsp;</SPAN><VAR>thunk</VAR>.</P>
<P>The stack will be sampled<SPAN class=Apple-converted-space>&nbsp;</SPAN><VAR>hz</VAR><SPAN class=Apple-converted-space>&nbsp;</SPAN>times per second, and the thunk itself will be called<SPAN class=Apple-converted-space>&nbsp;</SPAN><VAR>loop</VAR><SPAN class=Apple-converted-space>&nbsp;</SPAN>times.</P>
<P>If<SPAN class=Apple-converted-space>&nbsp;</SPAN><VAR>count-calls?</VAR><SPAN class=Apple-converted-space>&nbsp;</SPAN>is true, all procedure calls will be recorded. This operation is somewhat expensive.</P>
<P>If<SPAN class=Apple-converted-space>&nbsp;</SPAN><VAR>full-stacks?</VAR><SPAN class=Apple-converted-space>&nbsp;</SPAN>is true, at each sample, statprof will store away the whole call tree, for later analysis. Use<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>statprof-fetch-stacks</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>or<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>statprof-fetch-call-tree</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>to retrieve the last-stored stacks.</P></DD></DL><A style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" name=statprof-with_002dstatprof></A>
<DL style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">
<DT><A name=index-with_002dstatprof></A>Special Form:<SPAN class=Apple-converted-space>&nbsp;</SPAN><STRONG>with-statprof</STRONG><SPAN class=Apple-converted-space>&nbsp;</SPAN><EM>args</EM></DT>
<DD>
<P>Profiles the expressions in its body.</P>
<P>Keyword arguments:</P>
<DL compact>
<DT><CODE>#:loop</CODE></DT>
<DD>
<P>Execute the body<SPAN class=Apple-converted-space>&nbsp;</SPAN><VAR>loop</VAR><SPAN class=Apple-converted-space>&nbsp;</SPAN>number of times, or<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>#f</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>for no looping</P>
<P>default:<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>#f</CODE></P></DD>
<DT><CODE>#:hz</CODE></DT>
<DD>
<P>Sampling rate</P>
<P>default:<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>20</CODE></P></DD>
<DT><CODE>#:count-calls?</CODE></DT>
<DD>
<P>Whether to instrument each function call (expensive)</P>
<P>default:<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>#f</CODE></P></DD>
<DT><CODE>#:full-stacks?</CODE></DT>
<DD>
<P>Whether to collect away all sampled stacks into a list</P>
<P>default:<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>#f</CODE></P></DD></DL></DD></DL><A style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" name=statprof-gcprof></A>
<DL style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">
<DT><A name=index-gcprof></A>Function:<SPAN class=Apple-converted-space>&nbsp;</SPAN><STRONG>gcprof</STRONG><SPAN class=Apple-converted-space>&nbsp;</SPAN><EM>thunk [#:loop] [#:full-stacks?]</EM></DT>
<DD>
<P>Do an allocation profile of the execution of<SPAN class=Apple-converted-space>&nbsp;</SPAN><VAR>thunk</VAR>.</P>
<P>The stack will be sampled soon after every garbage collection, yielding an approximate idea of what is causing allocation in your program.</P>
<P>Since GC does not occur very frequently, you may need to use the<SPAN class=Apple-converted-space>&nbsp;</SPAN><VAR>loop</VAR><SPAN class=Apple-converted-space>&nbsp;</SPAN>parameter, to cause<SPAN class=Apple-converted-space>&nbsp;</SPAN><VAR>thunk</VAR><SPAN class=Apple-converted-space>&nbsp;</SPAN>to be called<SPAN class=Apple-converted-space>&nbsp;</SPAN><VAR>loop</VAR><SPAN class=Apple-converted-space>&nbsp;</SPAN>times.</P>
<P>If<SPAN class=Apple-converted-space>&nbsp;</SPAN><VAR>full-stacks?</VAR><SPAN class=Apple-converted-space>&nbsp;</SPAN>is true, at each sample, statprof will store away the whole call tree, for later analysis. Use<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>statprof-fetch-stacks</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>or<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>statprof-fetch-call-tree</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>to retrieve the last-stored stacks.</P></DD></DL>