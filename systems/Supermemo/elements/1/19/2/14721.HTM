<H3 style="MARGIN: 13pt 0cm"><SPAN lang=EN-US style="FONT-SIZE: 25pt; LINE-HEIGHT: 173%; mso-bidi-font-size: 16.0pt; mso-font-kerning: 0pt">42.1.6 Accessing Symbols in the Main Program</SPAN></H3>
<P><SPAN lang=EN-US style="FONT-SIZE: 19.5pt; mso-bidi-font-size: 12.0pt; mso-font-kerning: 0pt">Suppose that we use </SPAN><SPAN lang=EN-US style="FONT-SIZE: 26pt; FONT-FAMILY: NewBaskervilleEF-RomanIta; mso-bidi-font-size: 12.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: NewBaskervilleEF-RomanIta">dlopen() </SPAN><SPAN lang=EN-US style="FONT-SIZE: 19.5pt; mso-bidi-font-size: 12.0pt; mso-font-kerning: 0pt">to dynamically load a shared library, use </SPAN><SPAN lang=EN-US style="FONT-SIZE: 26pt; FONT-FAMILY: NewBaskervilleEF-RomanIta; mso-bidi-font-size: 12.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: NewBaskervilleEF-RomanIta">dlsym() </SPAN><SPAN lang=EN-US style="FONT-SIZE: 19.5pt; mso-bidi-font-size: 12.0pt; mso-font-kerning: 0pt">to obtain the address of a function </SPAN><SPAN lang=EN-US style="FONT-SIZE: 26pt; FONT-FAMILY: NewBaskervilleEF-RomanIta; mso-bidi-font-size: 12.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: NewBaskervilleEF-RomanIta">x() </SPAN><SPAN lang=EN-US style="FONT-SIZE: 19.5pt; mso-bidi-font-size: 12.0pt; mso-font-kerning: 0pt">from that library, and then call </SPAN><SPAN lang=EN-US style="FONT-SIZE: 26pt; FONT-FAMILY: NewBaskervilleEF-RomanIta; mso-bidi-font-size: 12.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: NewBaskervilleEF-RomanIta">x()</SPAN><SPAN lang=EN-US style="FONT-SIZE: 19.5pt; mso-bidi-font-size: 12.0pt; mso-font-kerning: 0pt">. If </SPAN><SPAN lang=EN-US style="FONT-SIZE: 26pt; FONT-FAMILY: NewBaskervilleEF-RomanIta; mso-bidi-font-size: 12.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: NewBaskervilleEF-RomanIta">x() </SPAN><SPAN lang=EN-US style="FONT-SIZE: 19.5pt; mso-bidi-font-size: 12.0pt; mso-font-kerning: 0pt">in turn calls a function </SPAN><SPAN lang=EN-US style="FONT-SIZE: 26pt; FONT-FAMILY: NewBaskervilleEF-RomanIta; mso-bidi-font-size: 12.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: NewBaskervilleEF-RomanIta">y()</SPAN><SPAN lang=EN-US style="FONT-SIZE: 19.5pt; mso-bidi-font-size: 12.0pt; mso-font-kerning: 0pt">, then </SPAN><SPAN lang=EN-US style="FONT-SIZE: 26pt; FONT-FAMILY: NewBaskervilleEF-RomanIta; mso-bidi-font-size: 12.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: NewBaskervilleEF-RomanIta">y() </SPAN><SPAN lang=EN-US style="FONT-SIZE: 19.5pt; mso-bidi-font-size: 12.0pt; mso-font-kerning: 0pt">would normally be sought in one of the shared libraries loaded by the program.</SPAN></P>
<P><SPAN lang=EN-US style="FONT-SIZE: 19.5pt; mso-bidi-font-size: 12.0pt; mso-font-kerning: 0pt">Sometimes, it is desirable instead to have </SPAN><SPAN lang=EN-US style="FONT-SIZE: 26pt; FONT-FAMILY: NewBaskervilleEF-RomanIta; mso-bidi-font-size: 12.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: NewBaskervilleEF-RomanIta">x() </SPAN><SPAN lang=EN-US style="FONT-SIZE: 19.5pt; mso-bidi-font-size: 12.0pt; mso-font-kerning: 0pt">invoke an implementation of </SPAN><SPAN lang=EN-US style="FONT-SIZE: 26pt; FONT-FAMILY: NewBaskervilleEF-RomanIta; mso-bidi-font-size: 12.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: NewBaskervilleEF-RomanIta">y() </SPAN><SPAN lang=EN-US style="FONT-SIZE: 19.5pt; mso-bidi-font-size: 12.0pt; mso-font-kerning: 0pt">in the main program. (This is similar to a callback mechanism.) In order to do this, we must make the (global-scope) symbols in the main program available to the dynamic linker, by linking the program using the <SPAN class=cloze>[...]</SPAN></SPAN><SPAN lang=EN-US style="FONT-SIZE: 26pt; FONT-FAMILY: NewBaskervilleEF-RomanIta; mso-bidi-font-size: 12.0pt; mso-font-kerning: 0pt; mso-bidi-font-family: NewBaskervilleEF-RomanIta"> </SPAN><SPAN lang=EN-US style="FONT-SIZE: 19.5pt; mso-bidi-font-size: 12.0pt; mso-font-kerning: 0pt">linker option:</SPAN>