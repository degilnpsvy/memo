<SPAN style="FONT-SIZE: 18pt; mso-bidi-font-size: 12.0pt" lang=EN-US><FONT face=&#23435;&#20307;>1sc_semaphore NAME(COUNT); </FONT></SPAN>
<P></P>
<P><SPAN style="FONT-SIZE: 18pt; mso-bidi-font-size: 12.0pt" lang=EN-US><FONT face=&#23435;&#20307;>2 <SPAN class=cloze>[...]</SPAN>; </FONT></SPAN><SPAN style="FONT-SIZE: 18pt; mso-bidi-font-size: 12.0pt" lang=EN-US><FONT face=&#23435;&#20307;>// Lock one semaphore<SPAN style="mso-spacerun: yes">&nbsp;</SPAN></FONT></SPAN><SPAN style="FONT-SIZE: 18pt; mso-bidi-font-size: 12.0pt" lang=EN-US><FONT face=&#23435;&#20307;>Wait until available if in use<SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></FONT></SPAN></P>
<P><SPAN style="FONT-SIZE: 18pt; mso-bidi-font-size: 12.0pt" lang=EN-US><FONT face=&#23435;&#20307;>5int NAME.trywait() // Non-blocking, return success<SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></FONT></SPAN></P>
<P><SPAN style="FONT-SIZE: 18pt; mso-bidi-font-size: 12.0pt" lang=EN-US><FONT face=&#23435;&#20307;>6int NAME.get_value() // Returns available semaphores<SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></FONT></SPAN></P>
<P><SPAN style="FONT-SIZE: 18pt; mso-bidi-font-size: 12.0pt" lang=EN-US><FONT face=&#23435;&#20307;>7NAME.post(); </FONT></SPAN></P>
<P><SPAN style="FONT-SIZE: 18pt; mso-bidi-font-size: 12.0pt" lang=EN-US><FONT face=&#23435;&#20307;>8// Free one previously locked<SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></FONT></SPAN></P>
<P><SPAN style="FONT-SIZE: 18pt; mso-bidi-font-size: 12.0pt" lang=EN-US><FONT face=&#23435;&#20307;>9// semaphore </FONT></SPAN></P>
<P><FONT face=&#23435;&#20307;><SPAN style="FONT-SIZE: 18pt; mso-bidi-font-size: 12.0pt" lang=EN-US>Fig. 8.6<SPAN style="mso-spacerun: yes">&nbsp; </SPAN>Syntax of sc_semaphore_if and sc_semaphore</SPAN><SPAN style="FONT-SIZE: 18pt; mso-bidi-font-size: 12.0pt; mso-fareast-font-family: &#23435;&#20307;" lang=EN-US></SPAN></FONT>