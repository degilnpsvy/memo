<H3 style="LINE-HEIGHT: normal; TEXT-TRANSFORM: none; FONT-VARIANT: normal; FONT-STYLE: normal; TEXT-INDENT: 0px; FONT-FAMILY: Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">Mouse: Int 33h</H3>
<P style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px"><STRONG>Author:</STRONG><SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="COLOR: rgb(0,0,0); TEXT-DECORATION: underline" href="mailto:InternetNightmare_X@yahoo.com?subject=assembly">InternetNightmare</A></P>
<P style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">&nbsp;</P>
<P style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">In this tutorial I'll cover mouse usage in DOS applications. If you want to test the program in real DOS mode (without windows running) you'll need<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="COLOR: rgb(0,0,0); TEXT-DECORATION: underline" href="http://cutemouse.sourceforge.net/" target=_blank>CuteMouse</A>drivers that can be downloaded<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="COLOR: rgb(0,0,0); TEXT-DECORATION: underline" href="http://ik.su.lt/~laurynas/asmmums/ctmouse.exe">here</A>.</P>
<P style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">mov ax,0<BR>int 33h ; mouse interrupt<BR>; (ifi AX=FFFFh mouse is installed, if 0000 not, DX - number of mouse buttons)</P>
<P style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">cmp ax,0<BR>ja pmouse ; if AX &gt; 0 lets start!</P>
<P style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">mov ah,4ch<BR>int 21h ;else just exit</P>
<P style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">pmouse:<BR>mov ax,03 ; function to get mouse position and buttons<SPAN class=Apple-converted-space>&nbsp;</SPAN><BR>int 33h</P>
<P style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">mov ax,dx ; Y coord to AX<BR>mov dx,320</P>
<P style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">mul dx ; multiply AX by 320<BR>add ax,cx ; add X coord</P>
<P style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">; (Now currsor position is in AX, lets draw the pixel there)</P>
<P style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">mov di,ax<BR>mov ax,0A000h<BR>mov es,ax<BR>mov dl,12 ; red color ;)<BR>mov es:[di],dl ; and we have the pixel drawn</P>
<P style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">By default mouse resolution is 640x200, lets set it to 320x200 (monitor height is already set, lets just set the width)</P>
<P style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">mov ax, 7<SPAN class=Apple-converted-space>&nbsp;</SPAN><BR>mov cx,0 ; min pos<SPAN class=Apple-converted-space>&nbsp;</SPAN><BR>mov dx,320 ; max pos<SPAN class=Apple-converted-space>&nbsp;</SPAN><BR>int 33h</P>
<P style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">And height can be set:</P>
<P style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">mov ax, 8<BR>mov cx,0<BR>mov dx,200<BR>int 33h</P>
<P style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">The source for this tutorial can be found<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="COLOR: rgb(0,0,0); TEXT-DECORATION: underline" href="http://asm.inightmare.org/mouse.asm">here</A>.