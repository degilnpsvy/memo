<H1 style="BORDER-BOTTOM: rgb(170,170,170) 1px solid; PADDING-BOTTOM: 0px; TEXT-TRANSFORM: none; TEXT-INDENT: 0px; MARGIN: 0px 0px 0.25em; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; FONT: 1.8em/1.3 'Linux Libertine', Georgia, Times, serif; WHITE-SPACE: normal; BACKGROUND: none transparent scroll repeat 0% 0%; LETTER-SPACING: normal; COLOR: black; OVERFLOW: hidden; WORD-SPACING: 0px; PADDING-TOP: 0px; -webkit-text-stroke-width: 0px" id=firstHeading lang=en class=firstHeading><SPAN dir=auto>x86 memory segmentation</SPAN></H1>
<DIV style="POSITION: relative; TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: 0.87em/1.6 sans-serif; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(37,37,37); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" id=bodyContent class=mw-body-content>
<DIV style="DISPLAY: inline; FONT-SIZE: 12px" id=siteSub>From Wikipedia, the free encyclopedia</DIV>
<DIV style="LINE-HEIGHT: 1.2em; MARGIN: 0px 0px 1.4em 1em; WIDTH: auto; COLOR: rgb(84,84,84); FONT-SIZE: 12px" id=contentSub></DIV>
<DIV style="MARGIN-TOP: -1.4em; ZOOM: 1; MARGIN-BOTTOM: 1.4em; HEIGHT: 0px; OVERFLOW: hidden; -webkit-user-select: none" id=jump-to-nav class=mw-jump><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" href="http://en.wikipedia.org/wiki/X86_memory_segmentation#mw-navigation"></A><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" href="http://en.wikipedia.org/wiki/X86_memory_segmentation#p-search"></A></DIV>
<DIV style="DIRECTION: ltr" dir=ltr id=mw-content-text lang=en class=mw-content-ltr>
<P style="MARGIN: 0.5em 0px"><B>x86 memory segmentation</B><SPAN class=Apple-converted-space>&nbsp;</SPAN>refers to the implementation of<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title="Memory segmentation" href="http://en.wikipedia.org/wiki/Memory_segmentation">memory segmentation</A><SPAN class=Apple-converted-space>&nbsp;</SPAN>in the Intel<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title=X86 href="http://en.wikipedia.org/wiki/X86">x86</A><SPAN class=Apple-converted-space>&nbsp;</SPAN>computer<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" class=mw-redirect title="Instruction set architecture" href="http://en.wikipedia.org/wiki/Instruction_set_architecture">instruction set architecture</A>. Segmentation was introduced on the<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title="Intel 8086" href="http://en.wikipedia.org/wiki/Intel_8086">Intel 8086</A><SPAN class=Apple-converted-space>&nbsp;</SPAN>in 1978 as a way to allow programs to address more than 64&nbsp;KB (65,536&nbsp;<A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title=Byte href="http://en.wikipedia.org/wiki/Byte">bytes</A>) of memory. The<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title="Intel 80286" href="http://en.wikipedia.org/wiki/Intel_80286">Intel 80286</A><SPAN class=Apple-converted-space>&nbsp;</SPAN>introduced a second version of segmentation in 1982 that added support for<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title="Virtual memory" href="http://en.wikipedia.org/wiki/Virtual_memory">virtual memory</A><SPAN class=Apple-converted-space>&nbsp;</SPAN>and<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title="Memory protection" href="http://en.wikipedia.org/wiki/Memory_protection">memory protection</A>. At this point the original model was renamed<SPAN class=Apple-converted-space>&nbsp;</SPAN><B><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title="Real mode" href="http://en.wikipedia.org/wiki/Real_mode">real mode</A></B>, and the new version was named<SPAN class=Apple-converted-space>&nbsp;</SPAN><B><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title="Protected mode" href="http://en.wikipedia.org/wiki/Protected_mode">protected mode</A></B>. The<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title=X86-64 href="http://en.wikipedia.org/wiki/X86-64">x86-64</A><SPAN class=Apple-converted-space>&nbsp;</SPAN>architecture, introduced in 2003, has largely dropped support for segmentation in 64-bit mode.</P>
<P style="MARGIN: 0.5em 0px">In both real and protected modes the system uses 16-bit<SPAN class=Apple-converted-space>&nbsp;</SPAN><I>segment registers</I><SPAN class=Apple-converted-space>&nbsp;</SPAN>to derive the actual memory address. In real mode the registers CS, DS, SS, and ES point to the currently used program<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title="Code segment" href="http://en.wikipedia.org/wiki/Code_segment">code segment</A><SPAN class=Apple-converted-space>&nbsp;</SPAN>(CS), the current<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title="Data segment" href="http://en.wikipedia.org/wiki/Data_segment">data segment</A>(DS), the current<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title="Stack (abstract data type)" href="http://en.wikipedia.org/wiki/Stack_(abstract_data_type)">stack segment</A><SPAN class=Apple-converted-space>&nbsp;</SPAN>(SS), and one<SPAN class=Apple-converted-space>&nbsp;</SPAN><I>extra</I><SPAN class=Apple-converted-space>&nbsp;</SPAN>segment determined by the programmer (ES). The<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title="Intel 80386" href="http://en.wikipedia.org/wiki/Intel_80386">Intel 80386</A>, introduced in 1985, adds two additional segment registers, FS and GS, with no specific uses defined by the hardware. The way in which the segment registers are used differs between the two modes.<SUP style="LINE-HEIGHT: 1; FONT-STYLE: normal; FONT-SIZE: 11px; FONT-WEIGHT: normal" id=cite_ref-Arch_1-0 class=reference><A style="WHITE-SPACE: nowrap; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" href="http://en.wikipedia.org/wiki/X86_memory_segmentation#cite_note-Arch-1"><SPAN>[</SPAN>1<SPAN>]</SPAN></A></SUP></P>
<P style="MARGIN: 0.5em 0px">The choice of segment is normally defaulted by the processor according to the function being executed. Instructions are always fetched from the code segment. Any stack push or pop or any data reference referring to the stack uses the stack segment. All other references to data use the data segment. The extra segment is the default destination for string operations (for example MOVS or CMPS). FS and GS have no hardware-assigned uses. The instruction format allows an optional<SPAN class=Apple-converted-space>&nbsp;</SPAN><I>segment prefix</I><SPAN class=Apple-converted-space>&nbsp;</SPAN>byte which can be used to override the default segment for selected instructions if desired.<SUP style="LINE-HEIGHT: 1; FONT-STYLE: normal; FONT-SIZE: 11px; FONT-WEIGHT: normal" id=cite_ref-2 class=reference><A style="WHITE-SPACE: nowrap; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" href="http://en.wikipedia.org/wiki/X86_memory_segmentation#cite_note-2"><SPAN>[</SPAN>2<SPAN>]</SPAN></A></SUP></P>
<P style="MARGIN: 0.5em 0px"></P>
<DIV style="BORDER-BOTTOM: rgb(170,170,170) 1px solid; BORDER-LEFT: rgb(170,170,170) 1px solid; PADDING-BOTTOM: 7px; BACKGROUND-COLOR: rgb(249,249,249); PADDING-LEFT: 7px; PADDING-RIGHT: 7px; ZOOM: 1; DISPLAY: table; FONT-SIZE: 13px; BORDER-TOP: rgb(170,170,170) 1px solid; BORDER-RIGHT: rgb(170,170,170) 1px solid; PADDING-TOP: 7px" id=toc class=toc>
<DIV style="TEXT-ALIGN: center; DIRECTION: ltr" id=toctitle>
<H2 style="BORDER-BOTTOM: medium none; BORDER-LEFT: medium none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 1.3; MARGIN: 1em 0px 0.25em; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; DISPLAY: inline; FONT-FAMILY: sans-serif; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: black; FONT-SIZE: 13px; OVERFLOW: hidden; BORDER-TOP: medium none; FONT-WEIGHT: bold; BORDER-RIGHT: medium none; PADDING-TOP: 0px">Contents</H2><SPAN class=Apple-converted-space>&nbsp;</SPAN><SPAN style="FONT-SIZE: 12px; -webkit-user-select: none" class=toctoggle>&nbsp;[<A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" id=togglelink href="http://en.wikipedia.org/wiki/X86_memory_segmentation#">hide</A>]&nbsp;</SPAN></DIV>
<UL style="TEXT-ALIGN: left; PADDING-BOTTOM: 0px; LINE-HEIGHT: 1.6; LIST-STYLE-TYPE: none; MARGIN: 0.3em 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; LIST-STYLE-IMAGE: none; PADDING-TOP: 0px">
<LI style="MARGIN-BOTTOM: 0.1em" class="toclevel-1 tocsection-1"><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" href="http://en.wikipedia.org/wiki/X86_memory_segmentation#Real_mode"><SPAN class=tocnumber>1</SPAN><SPAN class=Apple-converted-space>&nbsp;</SPAN><SPAN class=toctext>Real mode</SPAN></A></LI>
<LI style="MARGIN-BOTTOM: 0.1em" class="toclevel-1 tocsection-2"><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" href="http://en.wikipedia.org/wiki/X86_memory_segmentation#Protected_mode"><SPAN class=tocnumber>2</SPAN><SPAN class=Apple-converted-space>&nbsp;</SPAN><SPAN class=toctext>Protected mode</SPAN></A>
<UL style="TEXT-ALIGN: left; PADDING-BOTTOM: 0px; LINE-HEIGHT: 1.6; LIST-STYLE-TYPE: none; MARGIN: 0px 0px 0px 2em; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; LIST-STYLE-IMAGE: none; PADDING-TOP: 0px">
<LI style="MARGIN-BOTTOM: 0.1em" class="toclevel-2 tocsection-3"><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" href="http://en.wikipedia.org/wiki/X86_memory_segmentation#80286_protected_mode"><SPAN class=tocnumber>2.1</SPAN><SPAN class=Apple-converted-space>&nbsp;</SPAN><SPAN class=toctext>80286 protected mode</SPAN></A></LI>
<LI style="MARGIN-BOTTOM: 0.1em" class="toclevel-2 tocsection-4"><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" href="http://en.wikipedia.org/wiki/X86_memory_segmentation#Detailed_Segmentation_Unit_Workflow"><SPAN class=tocnumber>2.2</SPAN><SPAN class=Apple-converted-space>&nbsp;</SPAN><SPAN class=toctext>Detailed Segmentation Unit Workflow</SPAN></A></LI>
<LI style="MARGIN-BOTTOM: 0.1em" class="toclevel-2 tocsection-5"><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" href="http://en.wikipedia.org/wiki/X86_memory_segmentation#80386_protected_mode"><SPAN class=tocnumber>2.3</SPAN><SPAN class=Apple-converted-space>&nbsp;</SPAN><SPAN class=toctext>80386 protected mode</SPAN></A></LI></UL></LI>
<LI style="MARGIN-BOTTOM: 0.1em" class="toclevel-1 tocsection-6"><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" href="http://en.wikipedia.org/wiki/X86_memory_segmentation#Later_developments"><SPAN class=tocnumber>3</SPAN><SPAN class=Apple-converted-space>&nbsp;</SPAN><SPAN class=toctext>Later developments</SPAN></A></LI>
<LI style="MARGIN-BOTTOM: 0.1em" class="toclevel-1 tocsection-7"><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" href="http://en.wikipedia.org/wiki/X86_memory_segmentation#Practices"><SPAN class=tocnumber>4</SPAN><SPAN class=Apple-converted-space>&nbsp;</SPAN><SPAN class=toctext>Practices</SPAN></A></LI>
<LI style="MARGIN-BOTTOM: 0.1em" class="toclevel-1 tocsection-8"><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" href="http://en.wikipedia.org/wiki/X86_memory_segmentation#Notes_and_references"><SPAN class=tocnumber>5</SPAN><SPAN class=Apple-converted-space>&nbsp;</SPAN><SPAN class=toctext>Notes and references</SPAN></A></LI>
<LI style="MARGIN-BOTTOM: 0.1em" class="toclevel-1 tocsection-9"><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" href="http://en.wikipedia.org/wiki/X86_memory_segmentation#See_also"><SPAN class=tocnumber>6</SPAN><SPAN class=Apple-converted-space>&nbsp;</SPAN><SPAN class=toctext>See also</SPAN></A></LI>
<LI style="MARGIN-BOTTOM: 0.1em" class="toclevel-1 tocsection-10"><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" href="http://en.wikipedia.org/wiki/X86_memory_segmentation#External_links"><SPAN class=tocnumber>7</SPAN><SPAN class=Apple-converted-space>&nbsp;</SPAN><SPAN class=toctext>External links</SPAN></A></LI></UL></DIV>
<P style="MARGIN: 0.5em 0px"></P>
<H2 style="BORDER-BOTTOM: rgb(170,170,170) 1px solid; PADDING-BOTTOM: 0px; LINE-HEIGHT: 1.3; MARGIN: 1em 0px 0.25em; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; FONT-FAMILY: 'Linux Libertine', Georgia, Times, serif; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: black; FONT-SIZE: 1.5em; OVERFLOW: hidden; FONT-WEIGHT: normal; PADDING-TOP: 0px"><SPAN id=Real_mode class=mw-headline>Real mode</SPAN><SPAN style="LINE-HEIGHT: 1em; DISPLAY: inline-block; FONT-FAMILY: sans-serif; WHITE-SPACE: nowrap; MARGIN-LEFT: 1em; FONT-SIZE: small; VERTICAL-ALIGN: baseline; FONT-WEIGHT: normal; -webkit-user-select: none" class=mw-editsection><SPAN style="COLOR: rgb(85,85,85); MARGIN-LEFT: 0px; MARGIN-RIGHT: 0px" class=mw-editsection-bracket>[</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title="Edit section: Real mode" href="http://en.wikipedia.org/w/index.php?title=X86_memory_segmentation&amp;action=edit&amp;section=1">edit</A><SPAN style="COLOR: rgb(85,85,85); MARGIN-LEFT: 0px; MARGIN-RIGHT: 0px" class=mw-editsection-bracket>]</SPAN></SPAN></H2>
<DIV style="BACKGROUND-COLOR: transparent; MARGIN: 0.5em 0px 1.3em 1.4em; WIDTH: auto; FLOAT: right; CLEAR: right" class="thumb tright">
<DIV style="BORDER-BOTTOM: rgb(204,204,204) 1px solid; MIN-WIDTH: 100px; TEXT-ALIGN: center; BORDER-LEFT: rgb(204,204,204) 1px solid; PADDING-BOTTOM: 3px; BACKGROUND-COLOR: rgb(249,249,249); PADDING-LEFT: 3px; WIDTH: 302px; PADDING-RIGHT: 3px; FONT-SIZE: 12px; OVERFLOW: hidden; BORDER-TOP: rgb(204,204,204) 1px solid; BORDER-RIGHT: rgb(204,204,204) 1px solid; PADDING-TOP: 3px" class=thumbinner><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" class=image href="http://en.wikipedia.org/wiki/File:Overlapping_realmode_segments.svg"><IMG style="BORDER-BOTTOM: rgb(204,204,204) 1px solid; BORDER-LEFT: rgb(204,204,204) 1px solid; BACKGROUND-COLOR: rgb(255,255,255); VERTICAL-ALIGN: middle; BORDER-TOP: rgb(204,204,204) 1px solid; BORDER-RIGHT: rgb(204,204,204) 1px solid" class=thumbimage alt="" src="http://upload.wikimedia.org/wikipedia/commons/thumb/d/db/Overlapping_realmode_segments.svg/300px-Overlapping_realmode_segments.svg.png" width=300 height=381 data-file-height="824" data-file-width="648" srcset="//upload.wikimedia.org/wikipedia/commons/thumb/d/db/Overlapping_realmode_segments.svg/450px-Overlapping_realmode_segments.svg.png 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/d/db/Overlapping_realmode_segments.svg/600px-Overlapping_realmode_segments.svg.png 2x"></A>
<DIV style="BORDER-BOTTOM: medium none; TEXT-ALIGN: left; BORDER-LEFT: medium none; PADDING-BOTTOM: 3px; LINE-HEIGHT: 1.4em; PADDING-LEFT: 3px; PADDING-RIGHT: 3px; FONT-SIZE: 12px; BORDER-TOP: medium none; BORDER-RIGHT: medium none; PADDING-TOP: 3px" class=thumbcaption>
<DIV style="FLOAT: right; MARGIN-LEFT: 3px; MARGIN-RIGHT: 0px" class=magnify><A style="TEXT-INDENT: 15px; WIDTH: 15px; DISPLAY: block; WHITE-SPACE: nowrap; BACKGROUND: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAALCAAAAACFLIiAAAAAAnRSTlMA/1uRIrUAAAACYktHRAD/h4/MvwAAAAlwSFlzAAAK8AAACvABQqw0mAAAAAd0SU1FB9UEAhIREfdlPYsAAABPSURBVAjXY/j///+5vXDwjAHIr26ZAgXZe8H8a/+hoIcw/9nevdVL9+79DuPvzQYZFPUezu8BMZLXgkExnD8HAu6hqv//n+HZVjD4DuUDAKlChD3fj6aPAAAAAElFTkSuQmCC) no-repeat 50% 50%; HEIGHT: 11px; COLOR: rgb(11,0,128); OVERFLOW: hidden; TEXT-DECORATION: none; -webkit-user-select: none" class=internal title=Enlarge href="http://en.wikipedia.org/wiki/File:Overlapping_realmode_segments.svg"></A></DIV>Three segments in<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title="Real mode" href="http://en.wikipedia.org/wiki/Real_mode">real mode</A><SPAN class=Apple-converted-space>&nbsp;</SPAN>memory (click on image to enlarge). Note the overlap between segment 2 and segment 3; the bytes in the turquoise area can be used from both segment selectors.</DIV></DIV></DIV>
<P style="MARGIN: 0.5em 0px">In<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title="Real mode" href="http://en.wikipedia.org/wiki/Real_mode">real mode</A><SPAN class=Apple-converted-space>&nbsp;</SPAN>or<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title="Virtual 8086 mode" href="http://en.wikipedia.org/wiki/Virtual_8086_mode">V86 mode</A>, a segment is always 65,536&nbsp;<A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title=Byte href="http://en.wikipedia.org/wiki/Byte">bytes</A><SPAN class=Apple-converted-space>&nbsp;</SPAN>in size (using 16-bit offsets).</P>
<P style="MARGIN: 0.5em 0px">The 16-bit segment selector in the segment register is interpreted as the most significant 16 bits of a linear 20-bit address, called a segment address, of which the remaining four least significant bits are all zeros. The segment address is always added to a 16-bit offset in the instruction to yield a<SPAN class=Apple-converted-space>&nbsp;</SPAN><I>linear</I><SPAN class=Apple-converted-space>&nbsp;</SPAN>address, which is the same as<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title="Physical address" href="http://en.wikipedia.org/wiki/Physical_address">physical address</A><SPAN class=Apple-converted-space>&nbsp;</SPAN>in this mode. For instance, the segmented address 06EFh:1234h (here the suffix "h" means<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title=Hexadecimal href="http://en.wikipedia.org/wiki/Hexadecimal">hexadecimal</A>) has a segment selector of 06EFh, representing a segment address of 06EF0h, to which we add the offset, yielding the linear address 06EF0h&nbsp;+&nbsp;1234h&nbsp;=&nbsp;08124h (<A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title=Hexadecimal href="http://en.wikipedia.org/wiki/Hexadecimal">hexadecimal</A>).</P>
<P style="MARGIN: 0.5em 0px">Because of the way the segment address and offset are added, a single linear address can be mapped to up to 4096 distinct segment:offset pairs. For example, the linear address 08124h can have the segmented addresses 06EFh:1234h, 0812h:0004h, 0000h:8124h, etc. This could be confusing to programmers accustomed to unique addressing schemes, but it can also be used to advantage, for example when addressing multiple nested data structures. While real mode segments are always 64&nbsp;<A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" class=mw-redirect title=KiB href="http://en.wikipedia.org/wiki/KiB">KiB</A><SPAN class=Apple-converted-space>&nbsp;</SPAN>long, the practical effect is only that no segment can be longer than 64&nbsp;KiB, rather than that every segment<SPAN class=Apple-converted-space>&nbsp;</SPAN><I>must</I><SPAN class=Apple-converted-space>&nbsp;</SPAN>be 64&nbsp;KiB long. Because there is no protection or privilege limitation in real mode, even if a segment could be defined to be smaller than 64&nbsp;KiB, it would still be entirely up to the programs to coordinate and keep within the bounds of their segments, as any program can always access any memory (since it can arbitrarily set segment selectors to change segment addresses with absolutely no supervision). Therefore, real mode can just as well be imagined as having a variable length for each segment, in the range 1 to 65536 bytes, that is just not enforced by the CPU.</P>
<P style="MARGIN: 0.5em 0px">(Note that the leading zeros of the linear address, segmented addresses, and the segment and offset fields, which are usually neglected, were shown here for clarity.)</P>
<P style="MARGIN: 0.5em 0px">The effective 20-bit<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title="Address space" href="http://en.wikipedia.org/wiki/Address_space">address space</A><SPAN class=Apple-converted-space>&nbsp;</SPAN>of real mode limits the<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title="Memory address" href="http://en.wikipedia.org/wiki/Memory_address">addressable memory</A><SPAN class=Apple-converted-space>&nbsp;</SPAN>to 2<SUP style="LINE-HEIGHT: 1; FONT-SIZE: 11px">20</SUP>&nbsp;bytes, or 1,048,576&nbsp;bytes (1&nbsp;<A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" class=mw-redirect title=MiB href="http://en.wikipedia.org/wiki/MiB">MiB</A>). This derived directly from the hardware design of the Intel&nbsp;8086 (and, subsequently, the closely related 8088), which had exactly 20<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title="Address bus" href="http://en.wikipedia.org/wiki/Address_bus">address pins</A>. (Both were packaged in 40-pin DIP packages; even with only 20 address lines, the address and data buses were multiplexed to fit all the address and data lines within the limited pin count.)</P>
<P style="MARGIN: 0.5em 0px">Each segment begins at a multiple of 16&nbsp;bytes, called a<SPAN class=Apple-converted-space>&nbsp;</SPAN><I>paragraph</I>, from the beginning of the linear (flat) address space. That is, at 16&nbsp;byte intervals. Since all segments are 64&nbsp;KiB long, this explains how overlap can occur between segments and why any location in the linear memory address space can be accessed with many segment:offset pairs. The actual location of the beginning of a segment in the linear address space can be calculated with segment&#215;16. A segment value of 0Ch (12) would give a linear address at C0h (192) in the linear address space. The address offset can then be added to this number. 0Ch:0Fh (12:15) would be C0h+0Fh=CFh (192+15=207), CFh (207) being the linear address. Such address translations are carried out by the segmentation unit of the CPU. The last segment, FFFFh (65535), begins at linear address FFFF0h (1048560), 16&nbsp;bytes before the end of the 20&nbsp;bit address space, and thus, can access, with an offset of up to 65,536&nbsp;bytes, up to 65,520 (65536&#8722;16) bytes past the end of the 20&nbsp;bit 8088 address space. On the 8088, these address accesses were wrapped around to the beginning of the address space such that 65535:16 would access address 0 and 65533:1000 would access address&nbsp;952 of the linear address space. Programmers using this feature led to the<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" class=mw-redirect title="Gate A20" href="http://en.wikipedia.org/wiki/Gate_A20">Gate A20</A><SPAN class=Apple-converted-space>&nbsp;</SPAN>compatibility issues in later CPU generations, where the linear address space was expanded past 20&nbsp;bits.</P>
<P style="MARGIN: 0.5em 0px">In 16-bit real mode, enabling applications to make use of multiple memory segments (in order to access more memory than available in any one 64K-segment) is quite complex, but was viewed as a necessary evil for all but the smallest tools (which could do with less memory). The root of the problem is that no appropriate address-arithmetic instructions suitable for flat addressing of the entire memory range are available.<SUP style="LINE-HEIGHT: 1; WHITE-SPACE: nowrap; FONT-SIZE: 11px" class="noprint Inline-Template Template-Fact">[<I><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title="Wikipedia:Citation needed" href="http://en.wikipedia.org/wiki/Wikipedia:Citation_needed"><SPAN title="This claim needs references to reliable sources. (July 2011)">citation needed</SPAN></A></I>]</SUP><SPAN class=Apple-converted-space>&nbsp;</SPAN>Flat addressing is possible by applying multiple instructions, which however leads to slower programs.</P>
<P style="MARGIN: 0.5em 0px">The<SPAN class=Apple-converted-space>&nbsp;</SPAN><I><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title="Intel Memory Model" href="http://en.wikipedia.org/wiki/Intel_Memory_Model">memory model</A></I><SPAN class=Apple-converted-space>&nbsp;</SPAN>concept derives from the setup of the segment registers. for example in the<SPAN class=Apple-converted-space>&nbsp;</SPAN><I>tiny model</I><SPAN class=Apple-converted-space>&nbsp;</SPAN>CS=DS=SS, that is the program's code, data, and stack are all contained within a single 64&nbsp;KB segment. In the<SPAN class=Apple-converted-space>&nbsp;</SPAN><I>small</I><SPAN class=Apple-converted-space>&nbsp;</SPAN>memory model DS=SS, so both data and stack reside in the same segment; CS points to a different code segment of up to 64&nbsp;KB.</P>
<H2 style="BORDER-BOTTOM: rgb(170,170,170) 1px solid; PADDING-BOTTOM: 0px; LINE-HEIGHT: 1.3; MARGIN: 1em 0px 0.25em; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; FONT-FAMILY: 'Linux Libertine', Georgia, Times, serif; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: black; FONT-SIZE: 1.5em; OVERFLOW: hidden; FONT-WEIGHT: normal; PADDING-TOP: 0px"><SPAN id=Protected_mode class=mw-headline>Protected mode</SPAN><SPAN style="LINE-HEIGHT: 1em; DISPLAY: inline-block; FONT-FAMILY: sans-serif; WHITE-SPACE: nowrap; MARGIN-LEFT: 1em; FONT-SIZE: small; VERTICAL-ALIGN: baseline; FONT-WEIGHT: normal; -webkit-user-select: none" class=mw-editsection><SPAN style="COLOR: rgb(85,85,85); MARGIN-LEFT: 0px; MARGIN-RIGHT: 0px" class=mw-editsection-bracket>[</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title="Edit section: Protected mode" href="http://en.wikipedia.org/w/index.php?title=X86_memory_segmentation&amp;action=edit&amp;section=2">edit</A><SPAN style="COLOR: rgb(85,85,85); MARGIN-LEFT: 0px; MARGIN-RIGHT: 0px" class=mw-editsection-bracket>]</SPAN></SPAN></H2>
<DIV style="BACKGROUND-COLOR: transparent; MARGIN: 0.5em 1.4em 1.3em 0px; WIDTH: auto; FLOAT: left; CLEAR: left" class="thumb tleft">
<DIV style="BORDER-BOTTOM: rgb(204,204,204) 1px solid; MIN-WIDTH: 100px; TEXT-ALIGN: center; BORDER-LEFT: rgb(204,204,204) 1px solid; PADDING-BOTTOM: 3px; BACKGROUND-COLOR: rgb(249,249,249); PADDING-LEFT: 3px; WIDTH: 302px; PADDING-RIGHT: 3px; FONT-SIZE: 12px; OVERFLOW: hidden; BORDER-TOP: rgb(204,204,204) 1px solid; BORDER-RIGHT: rgb(204,204,204) 1px solid; PADDING-TOP: 3px" class=thumbinner><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" class=image href="http://en.wikipedia.org/wiki/File:Protected_mode_segments.svg"><IMG style="BORDER-BOTTOM: rgb(204,204,204) 1px solid; BORDER-LEFT: rgb(204,204,204) 1px solid; BACKGROUND-COLOR: rgb(255,255,255); VERTICAL-ALIGN: middle; BORDER-TOP: rgb(204,204,204) 1px solid; BORDER-RIGHT: rgb(204,204,204) 1px solid" class=thumbimage alt="" src="http://upload.wikimedia.org/wikipedia/commons/thumb/4/48/Protected_mode_segments.svg/300px-Protected_mode_segments.svg.png" width=300 height=239 data-file-height="577" data-file-width="723" srcset="//upload.wikimedia.org/wikipedia/commons/thumb/4/48/Protected_mode_segments.svg/450px-Protected_mode_segments.svg.png 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/4/48/Protected_mode_segments.svg/600px-Protected_mode_segments.svg.png 2x"></A>
<DIV style="BORDER-BOTTOM: medium none; TEXT-ALIGN: left; BORDER-LEFT: medium none; PADDING-BOTTOM: 3px; LINE-HEIGHT: 1.4em; PADDING-LEFT: 3px; PADDING-RIGHT: 3px; FONT-SIZE: 12px; BORDER-TOP: medium none; BORDER-RIGHT: medium none; PADDING-TOP: 3px" class=thumbcaption>
<DIV style="FLOAT: right; MARGIN-LEFT: 3px; MARGIN-RIGHT: 0px" class=magnify><A style="TEXT-INDENT: 15px; WIDTH: 15px; DISPLAY: block; WHITE-SPACE: nowrap; BACKGROUND: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAALCAAAAACFLIiAAAAAAnRSTlMA/1uRIrUAAAACYktHRAD/h4/MvwAAAAlwSFlzAAAK8AAACvABQqw0mAAAAAd0SU1FB9UEAhIREfdlPYsAAABPSURBVAjXY/j///+5vXDwjAHIr26ZAgXZe8H8a/+hoIcw/9nevdVL9+79DuPvzQYZFPUezu8BMZLXgkExnD8HAu6hqv//n+HZVjD4DuUDAKlChD3fj6aPAAAAAElFTkSuQmCC) no-repeat 50% 50%; HEIGHT: 11px; COLOR: rgb(11,0,128); OVERFLOW: hidden; TEXT-DECORATION: none; -webkit-user-select: none" class=internal title=Enlarge href="http://en.wikipedia.org/wiki/File:Protected_mode_segments.svg"></A></DIV>Three segments in<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title="Protected mode" href="http://en.wikipedia.org/wiki/Protected_mode">protected mode</A><SPAN class=Apple-converted-space>&nbsp;</SPAN>memory (click on image to enlarge), with the<SPAN class=Apple-converted-space>&nbsp;</SPAN><B>local descriptor table</B>.</DIV></DIV></DIV>
<H3 style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 1.6; MARGIN: 0.3em 0px 0px; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: black; FONT-SIZE: 1.17em; OVERFLOW: hidden; FONT-WEIGHT: bold; PADDING-TOP: 0.5em"><SPAN id=80286_protected_mode class=mw-headline>80286 protected mode</SPAN><SPAN style="LINE-HEIGHT: 1em; DISPLAY: inline-block; FONT-FAMILY: sans-serif; WHITE-SPACE: nowrap; MARGIN-LEFT: 1em; FONT-SIZE: small; VERTICAL-ALIGN: baseline; FONT-WEIGHT: normal; -webkit-user-select: none" class=mw-editsection><SPAN style="COLOR: rgb(85,85,85); MARGIN-LEFT: 0px; MARGIN-RIGHT: 0px" class=mw-editsection-bracket>[</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title="Edit section: 80286 protected mode" href="http://en.wikipedia.org/w/index.php?title=X86_memory_segmentation&amp;action=edit&amp;section=3">edit</A><SPAN style="COLOR: rgb(85,85,85); MARGIN-LEFT: 0px; MARGIN-RIGHT: 0px" class=mw-editsection-bracket>]</SPAN></SPAN></H3>
<P style="MARGIN: 0.5em 0px">The<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title="Intel 80286" href="http://en.wikipedia.org/wiki/Intel_80286">80286</A>'s<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title="Protected mode" href="http://en.wikipedia.org/wiki/Protected_mode">protected mode</A><SPAN class=Apple-converted-space>&nbsp;</SPAN>extends the processor's address space to 2<SUP style="LINE-HEIGHT: 1; FONT-SIZE: 11px">24</SUP>bytes (16 mebibytes), but not by adjusting the shift value. Instead, the 16-bit segment registers now contain an index into a table of<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" class=mw-redirect title="Segment descriptors" href="http://en.wikipedia.org/wiki/Segment_descriptors">segment descriptors</A><SPAN class=Apple-converted-space>&nbsp;</SPAN>containing 24-bit base addresses to which the offset is added. To support old software, the processor starts up in "real mode", a mode in which it uses the segmented addressing model of the 8086. There is a small difference though: the resulting physical address is no longer truncated to 20&nbsp;bits, so<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title="Real mode" href="http://en.wikipedia.org/wiki/Real_mode">real mode</A><SPAN class=Apple-converted-space>&nbsp;</SPAN>pointers (but not 8086 pointers) can now refer to addresses between 100000<SUB style="LINE-HEIGHT: 1; FONT-SIZE: 11px">h</SUB><SPAN class=Apple-converted-space>&nbsp;</SPAN>and 10FFEF<SUB style="LINE-HEIGHT: 1; FONT-SIZE: 11px">h</SUB>. This roughly 64-kilobyte region of memory was known as the<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" class=mw-redirect title="High Memory Area" href="http://en.wikipedia.org/wiki/High_Memory_Area">High Memory Area</A>(HMA), and later versions of<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title=MS-DOS href="http://en.wikipedia.org/wiki/MS-DOS">MS-DOS</A><SPAN class=Apple-converted-space>&nbsp;</SPAN>could use it to increase the available "conventional" memory (i.e. within the first<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" class=mw-redirect title=MiB href="http://en.wikipedia.org/wiki/MiB">MiB</A>). With the addition of the HMA, the total address space is approximately 1.06&nbsp;MiB. Though the 80286 does not truncate real-mode addresses to 20&nbsp;bits, a system containing an 80286 can do so with hardware external to the processor, by gating off the 21st address line, the<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title="A20 line" href="http://en.wikipedia.org/wiki/A20_line">A20 line</A>. The IBM&nbsp;PC&nbsp;AT provided the hardware to do this (for full backward compatibility with software for the original<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" class=mw-redirect title="IBM PC" href="http://en.wikipedia.org/wiki/IBM_PC">IBM&nbsp;PC</A><SPAN class=Apple-converted-space>&nbsp;</SPAN>and<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" class=mw-redirect title="IBM PC/XT" href="http://en.wikipedia.org/wiki/IBM_PC/XT">PC/XT</A><SPAN class=Apple-converted-space>&nbsp;</SPAN>models), and so all subsequent "<A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" class=mw-redirect title="IBM PC/AT" href="http://en.wikipedia.org/wiki/IBM_PC/AT">AT</A>-class" PC clones did as well. The first megabyte of memory cannot be accessed. (also true of 32-bit protected mode).</P>
<P style="MARGIN: 0.5em 0px">286 protected mode was seldom used as it would have excluded the large body of users with 8086/88 machines. Moreover, it still necessitated dividing memory into 64k segments like was done in real mode. This limitation can be worked around on 32-bit CPUs which permit the use of memory pointers greater than 64k in size, however as the base addresses remain 24-bit, the maximum segment size that can be created is 16MB (although paging can be used to allocate more memory, no individual segment may exceed 16MB). This method was commonly used on Windows 3.x applications to produce a flat memory space, although as the OS itself was still 16-bit, API calls could not be made with 32-bit instructions. Thus, it was still necessary to place all code that performs API calls in 64k segments.</P>
<P style="MARGIN: 0.5em 0px">Once 286 protected mode is invoked, it cannot be exited except by performing a hardware reset. Windows 3.x worked around this problem by triggering an intentional segment fault that would cause the CPU to drop back into real mode.</P>
<H3 style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 1.6; MARGIN: 0.3em 0px 0px; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: black; FONT-SIZE: 1.17em; OVERFLOW: hidden; FONT-WEIGHT: bold; PADDING-TOP: 0.5em"><SPAN id=Detailed_Segmentation_Unit_Workflow class=mw-headline>Detailed Segmentation Unit Workflow</SPAN><SPAN style="LINE-HEIGHT: 1em; DISPLAY: inline-block; FONT-FAMILY: sans-serif; WHITE-SPACE: nowrap; MARGIN-LEFT: 1em; FONT-SIZE: small; VERTICAL-ALIGN: baseline; FONT-WEIGHT: normal; -webkit-user-select: none" class=mw-editsection><SPAN style="COLOR: rgb(85,85,85); MARGIN-LEFT: 0px; MARGIN-RIGHT: 0px" class=mw-editsection-bracket>[</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title="Edit section: Detailed Segmentation Unit Workflow" href="http://en.wikipedia.org/w/index.php?title=X86_memory_segmentation&amp;action=edit&amp;section=4">edit</A><SPAN style="COLOR: rgb(85,85,85); MARGIN-LEFT: 0px; MARGIN-RIGHT: 0px" class=mw-editsection-bracket>]</SPAN></SPAN></H3>
<P style="MARGIN: 0.5em 0px">A logical address consists of a 16-bit segment selector (supplying 13+1 address bits) and a 16-bit offset. The segment selector must be located in one of the segment registers. That selector consists of a 2-bit Requested<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title="Privilege level" href="http://en.wikipedia.org/wiki/Privilege_level">Privilege Level</A>(RPL), a 1-bit Table Indicator (TI), and a 13-bit index.</P>
<P style="MARGIN: 0.5em 0px">When attempting address translation of a given logical address, the processor reads the 64-bit<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title="Segment descriptor" href="http://en.wikipedia.org/wiki/Segment_descriptor">segment descriptor</A>structure from either the<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title="Global Descriptor Table" href="http://en.wikipedia.org/wiki/Global_Descriptor_Table">Global Descriptor Table</A><SPAN class=Apple-converted-space>&nbsp;</SPAN>when TI=0 or the<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" class=mw-redirect title="Local Descriptor Table" href="http://en.wikipedia.org/wiki/Local_Descriptor_Table">Local Descriptor Table</A><SPAN class=Apple-converted-space>&nbsp;</SPAN>when TI=1. It then performs the privilege check:</P>
<DL style="MARGIN-TOP: 0.2em; MARGIN-BOTTOM: 0.5em">
<DD style="LINE-HEIGHT: 1.6; MARGIN-BOTTOM: 0.1em; MARGIN-LEFT: 1.6em; MARGIN-RIGHT: 0px">max(CPL,&#8201;RPL) &#8804; DPL</DD></DL>
<P style="MARGIN: 0.5em 0px">where CPL is the current privilege level (found in the lower 2&nbsp;bits of the CS register), RPL is the requested privilege level from the segment selector, and DPL is the descriptor privilege level of the segment (found in the descriptor). All privilege levels are integers in the range 0&#8211;3, where the lowest number corresponds to the highest privilege.</P>
<P style="MARGIN: 0.5em 0px">If the inequality is false, the processor generates a<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title="General protection fault" href="http://en.wikipedia.org/wiki/General_protection_fault">general protection (GP) fault</A>. Otherwise, address translation continues. The processor then takes the 32-bit or 16-bit offset and compares it against the segment limit specified in the segment descriptor. If it is larger, a GP fault is generated. Otherwise, the processor adds the 24-bit segment base, specified in descriptor, to the offset, creating a linear physical address.</P>
<P style="MARGIN: 0.5em 0px">The privilege check is done only when the segment register is loaded, because<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" class=mw-redirect title="Segment descriptors" href="http://en.wikipedia.org/wiki/Segment_descriptors">segment descriptors</A><SPAN class=Apple-converted-space>&nbsp;</SPAN>are cached in hidden parts of the segment registers.<SUP style="LINE-HEIGHT: 1; WHITE-SPACE: nowrap; FONT-SIZE: 11px" class="noprint Inline-Template Template-Fact">[<I><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title="Wikipedia:Citation needed" href="http://en.wikipedia.org/wiki/Wikipedia:Citation_needed"><SPAN title="Is this true on the 80286, or only on the 80386 and above? (July 2011)">citation needed</SPAN></A></I>]</SUP><SUP style="LINE-HEIGHT: 1; FONT-STYLE: normal; FONT-SIZE: 11px; FONT-WEIGHT: normal" id=cite_ref-Arch_1-1 class=reference><A style="WHITE-SPACE: nowrap; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" href="http://en.wikipedia.org/wiki/X86_memory_segmentation#cite_note-Arch-1"><SPAN>[</SPAN>1<SPAN>]</SPAN></A></SUP></P>
<H3 style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 1.6; MARGIN: 0.3em 0px 0px; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: black; FONT-SIZE: 1.17em; OVERFLOW: hidden; FONT-WEIGHT: bold; PADDING-TOP: 0.5em"><SPAN id=80386_protected_mode class=mw-headline>80386 protected mode</SPAN><SPAN style="LINE-HEIGHT: 1em; DISPLAY: inline-block; FONT-FAMILY: sans-serif; WHITE-SPACE: nowrap; MARGIN-LEFT: 1em; FONT-SIZE: small; VERTICAL-ALIGN: baseline; FONT-WEIGHT: normal; -webkit-user-select: none" class=mw-editsection><SPAN style="COLOR: rgb(85,85,85); MARGIN-LEFT: 0px; MARGIN-RIGHT: 0px" class=mw-editsection-bracket>[</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title="Edit section: 80386 protected mode" href="http://en.wikipedia.org/w/index.php?title=X86_memory_segmentation&amp;action=edit&amp;section=5">edit</A><SPAN style="COLOR: rgb(85,85,85); MARGIN-LEFT: 0px; MARGIN-RIGHT: 0px" class=mw-editsection-bracket>]</SPAN></SPAN></H3>
<P style="MARGIN: 0.5em 0px">In the<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title="Intel 80386" href="http://en.wikipedia.org/wiki/Intel_80386">Intel 80386</A><SPAN class=Apple-converted-space>&nbsp;</SPAN>and later, protected mode retains the segmentation mechanism of 80286 protected mode, but a<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title=Paging href="http://en.wikipedia.org/wiki/Paging">paging</A>unit has been added as a second layer of address translation between the segmentation unit and the physical bus. Also, importantly, address offsets are 32-bit (instead of 16-bit), and the segment base in each segment descriptor is also 32-bit (instead of 24-bit). The general operation of the segmentation unit is otherwise unchanged. The paging unit may be enabled or disabled; if disabled, operation is the same as on the 80286. If the paging unit is enabled, addresses in a segment are now virtual addresses, rather than physical addresses as they were on the 80286. That is, the segment starting address, the offset, and the final 32-bit address the segmentation unit derived by adding the two are all virtual (or logical) addresses when the paging unit is enabled. When the segmentation unit generates and validates these 32-bit virtual addresses from a program's logical (46-bit<SUP style="LINE-HEIGHT: 1; FONT-STYLE: normal; FONT-SIZE: 11px; FONT-WEIGHT: normal" id=cite_ref-3 class=reference><A style="WHITE-SPACE: nowrap; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" href="http://en.wikipedia.org/wiki/X86_memory_segmentation#cite_note-3"><SPAN>[</SPAN>3<SPAN>]</SPAN></A></SUP>) addresses, the enabled paging unit finally translates these virtual addresses into physical addresses. The physical addresses are 32-bit on the<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title="Intel 80386" href="http://en.wikipedia.org/wiki/Intel_80386">386</A>, but can be larger on newer processors which support<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title="Physical Address Extension" href="http://en.wikipedia.org/wiki/Physical_Address_Extension">Physical Address Extension</A>.</P>
<P style="MARGIN: 0.5em 0px">The 80386 also introduced two new general-purpose data segment registers, FS and GS, to the original set of four segment registers (CS, DS, ES, and SS).</P>
<P style="MARGIN: 0.5em 0px">Unlike 286 protected mode, 386 CPUs can be put back into real mode merely by clearing a bit in the CR0 control register.</P>
<H2 style="BORDER-BOTTOM: rgb(170,170,170) 1px solid; PADDING-BOTTOM: 0px; LINE-HEIGHT: 1.3; MARGIN: 1em 0px 0.25em; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; FONT-FAMILY: 'Linux Libertine', Georgia, Times, serif; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: black; FONT-SIZE: 1.5em; OVERFLOW: hidden; FONT-WEIGHT: normal; PADDING-TOP: 0px"><SPAN id=Later_developments class=mw-headline>Later developments</SPAN><SPAN style="LINE-HEIGHT: 1em; DISPLAY: inline-block; FONT-FAMILY: sans-serif; WHITE-SPACE: nowrap; MARGIN-LEFT: 1em; FONT-SIZE: small; VERTICAL-ALIGN: baseline; FONT-WEIGHT: normal; -webkit-user-select: none" class=mw-editsection><SPAN style="COLOR: rgb(85,85,85); MARGIN-LEFT: 0px; MARGIN-RIGHT: 0px" class=mw-editsection-bracket>[</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title="Edit section: Later developments" href="http://en.wikipedia.org/w/index.php?title=X86_memory_segmentation&amp;action=edit&amp;section=6">edit</A><SPAN style="COLOR: rgb(85,85,85); MARGIN-LEFT: 0px; MARGIN-RIGHT: 0px" class=mw-editsection-bracket>]</SPAN></SPAN></H2>
<P style="MARGIN: 0.5em 0px">The<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title=X86-64 href="http://en.wikipedia.org/wiki/X86-64">x86-64</A><SPAN class=Apple-converted-space>&nbsp;</SPAN>architecture does not use segmentation in long mode (64-bit mode). Four of the segment registers: CS, SS, DS, and ES are forced to 0, and the limit to 2<SUP style="LINE-HEIGHT: 1; FONT-SIZE: 11px">64</SUP>. The segment registers FS and GS can still have a nonzero base address. This allows operating systems to use these segments for special purposes.</P>
<P style="MARGIN: 0.5em 0px">For instance,<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title="Microsoft Windows" href="http://en.wikipedia.org/wiki/Microsoft_Windows">Microsoft Windows</A><SPAN class=Apple-converted-space>&nbsp;</SPAN>on x86-64 uses the GS&nbsp;segment to point to the<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title="Win32 Thread Information Block" href="http://en.wikipedia.org/wiki/Win32_Thread_Information_Block">Thread Environment Block</A>, a small data structure for each<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" class=mw-redirect title="Thread (computer science)" href="http://en.wikipedia.org/wiki/Thread_(computer_science)">thread</A>, which contains information about exception handling, thread-local variables, and other per-thread state. Similarly, the<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title="Linux kernel" href="http://en.wikipedia.org/wiki/Linux_kernel">Linux kernel</A><SPAN class=Apple-converted-space>&nbsp;</SPAN>uses the GS&nbsp;segment to store per-CPU data.</P>
<P style="MARGIN: 0.5em 0px">On x64, the CPU powers on into real mode and is indistinguishable from a 32-bit Pentium IV. 64-bit instructions cannot be used unless long mode is set, which first requires entering 32-bit protected mode. When long mode is operating, 16-bit instructions and virtual x86 mode are disabled and protected mode disappears.</P>
<H2 style="BORDER-BOTTOM: rgb(170,170,170) 1px solid; PADDING-BOTTOM: 0px; LINE-HEIGHT: 1.3; MARGIN: 1em 0px 0.25em; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; FONT-FAMILY: 'Linux Libertine', Georgia, Times, serif; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: black; FONT-SIZE: 1.5em; OVERFLOW: hidden; FONT-WEIGHT: normal; PADDING-TOP: 0px"><SPAN id=Practices class=mw-headline>Practices</SPAN><SPAN style="LINE-HEIGHT: 1em; DISPLAY: inline-block; FONT-FAMILY: sans-serif; WHITE-SPACE: nowrap; MARGIN-LEFT: 1em; FONT-SIZE: small; VERTICAL-ALIGN: baseline; FONT-WEIGHT: normal; -webkit-user-select: none" class=mw-editsection><SPAN style="COLOR: rgb(85,85,85); MARGIN-LEFT: 0px; MARGIN-RIGHT: 0px" class=mw-editsection-bracket>[</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title="Edit section: Practices" href="http://en.wikipedia.org/w/index.php?title=X86_memory_segmentation&amp;action=edit&amp;section=7">edit</A><SPAN style="COLOR: rgb(85,85,85); MARGIN-LEFT: 0px; MARGIN-RIGHT: 0px" class=mw-editsection-bracket>]</SPAN></SPAN></H2>
<P style="MARGIN: 0.5em 0px">Logical addresses can be explicitly specified in<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title="X86 assembly language" href="http://en.wikipedia.org/wiki/X86_assembly_language">x86 assembly language</A>, e.g. (AT&amp;T syntax):</P><PRE style="BORDER-BOTTOM: rgb(221,221,221) 1px solid; BORDER-LEFT: rgb(221,221,221) 1px solid; PADDING-BOTTOM: 1em; LINE-HEIGHT: 1.3em; BACKGROUND-COLOR: rgb(249,249,249); PADDING-LEFT: 1em; PADDING-RIGHT: 1em; FONT-FAMILY: monospace, Courier; COLOR: black; BORDER-TOP: rgb(221,221,221) 1px solid; BORDER-RIGHT: rgb(221,221,221) 1px solid; PADDING-TOP: 1em">movl $42, %fs:(%eax)  ; Equivalent to M[fs:eax]&lt;-42) in <A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" class=mw-redirect title="Register Transfer Language" href="http://en.wikipedia.org/wiki/Register_Transfer_Language">RTL</A>
</PRE>
<P style="MARGIN: 0.5em 0px">or in<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" class=mw-redirect title="Intel syntax" href="http://en.wikipedia.org/wiki/Intel_syntax">Intel syntax</A>:</P>
<DIV style="BORDER-BOTTOM: rgb(221,221,221) 1px solid; BORDER-LEFT: rgb(221,221,221) 1px solid; PADDING-BOTTOM: 1em; LINE-HEIGHT: 1.3em; BACKGROUND-COLOR: rgb(249,249,249); PADDING-LEFT: 1em; PADDING-RIGHT: 1em; FONT-FAMILY: monospace, Courier; DIRECTION: ltr; COLOR: black; BORDER-TOP: rgb(221,221,221) 1px solid; BORDER-RIGHT: rgb(221,221,221) 1px solid; PADDING-TOP: 1em" dir=ltr class="mw-geshi mw-code mw-content-ltr">
<DIV style="LINE-HEIGHT: normal; FONT-FAMILY: monospace, monospace; tab-size: 4" class="asm source-asm"><PRE style="BORDER-BOTTOM: white 0px; BORDER-LEFT: white 0px; PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; FONT: 1em/1.2em monospace, monospace; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: black; VERTICAL-ALIGN: top; BORDER-TOP: white 0px; BORDER-RIGHT: white 0px; PADDING-TOP: 0px; tab-size: 4" class=de1><SPAN style="COLOR: rgb(0,0,127); FONT-WEIGHT: bold" class=kw1>mov</SPAN> <SPAN style="COLOR: rgb(0,0,255); FONT-WEIGHT: bold" class=kw6>dword</SPAN> <SPAN style="COLOR: rgb(0,153,0); FONT-WEIGHT: bold" class=br0>[</SPAN><SPAN style="COLOR: rgb(70,170,3); FONT-WEIGHT: bold" class=kw4>fs</SPAN><SPAN style="COLOR: rgb(51,153,51)" class=sy1>:</SPAN><SPAN style="COLOR: rgb(70,170,3); FONT-WEIGHT: bold" class=kw4>eax</SPAN><SPAN style="COLOR: rgb(0,153,0); FONT-WEIGHT: bold" class=br0>]</SPAN><SPAN style="COLOR: rgb(51,153,51)" class=sy1>,</SPAN> <SPAN style="COLOR: rgb(255,0,0)" class=nu0>42</SPAN>
</PRE></DIV></DIV>
<P style="MARGIN: 0.5em 0px">However, segment registers are usually used implicitly.</P>
<UL style="PADDING-BOTTOM: 0px; LINE-HEIGHT: 1.6; LIST-STYLE-TYPE: disc; MARGIN: 0.3em 0px 0px 1.6em; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; LIST-STYLE-IMAGE: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAANAQMAAABb8jbLAAAABlBMVEX///8AUow5QSOjAAAAAXRSTlMAQObYZgAAABNJREFUCB1jYEABBQw/wLCAgQEAGpIDyT0IVcsAAAAASUVORK5CYII=); PADDING-TOP: 0px">
<LI style="MARGIN-BOTTOM: 0.1em">All CPU instructions are implicitly fetched from the<SPAN class=Apple-converted-space>&nbsp;</SPAN><I><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title="Code segment" href="http://en.wikipedia.org/wiki/Code_segment">code segment</A></I><SPAN class=Apple-converted-space>&nbsp;</SPAN>specified by the segment selector held in the CS&nbsp;register.</LI></UL>
<UL style="PADDING-BOTTOM: 0px; LINE-HEIGHT: 1.6; LIST-STYLE-TYPE: disc; MARGIN: 0.3em 0px 0px 1.6em; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; LIST-STYLE-IMAGE: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAANAQMAAABb8jbLAAAABlBMVEX///8AUow5QSOjAAAAAXRSTlMAQObYZgAAABNJREFUCB1jYEABBQw/wLCAgQEAGpIDyT0IVcsAAAAASUVORK5CYII=); PADDING-TOP: 0px">
<LI style="MARGIN-BOTTOM: 0.1em">Most memory references come from the<SPAN class=Apple-converted-space>&nbsp;</SPAN><I><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title="Data segment" href="http://en.wikipedia.org/wiki/Data_segment">data segment</A></I><SPAN class=Apple-converted-space>&nbsp;</SPAN>specified by the segment selector held in the DS&nbsp;register. These may also come from the extra segment specified by the segment selector held in the ES&nbsp;register, if a segment-override prefix precedes the instruction that makes the memory reference. Most, but not all, instructions that use DS by default will accept an ES override prefix.</LI></UL>
<UL style="PADDING-BOTTOM: 0px; LINE-HEIGHT: 1.6; LIST-STYLE-TYPE: disc; MARGIN: 0.3em 0px 0px 1.6em; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; LIST-STYLE-IMAGE: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAANAQMAAABb8jbLAAAABlBMVEX///8AUow5QSOjAAAAAXRSTlMAQObYZgAAABNJREFUCB1jYEABBQw/wLCAgQEAGpIDyT0IVcsAAAAASUVORK5CYII=); PADDING-TOP: 0px">
<LI style="MARGIN-BOTTOM: 0.1em">Processor<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" class=mw-redirect title="Run-time stack" href="http://en.wikipedia.org/wiki/Run-time_stack">stack</A><SPAN class=Apple-converted-space>&nbsp;</SPAN>references, either implicitly (e.g.<SPAN class=Apple-converted-space>&nbsp;</SPAN><B>push</B><SPAN class=Apple-converted-space>&nbsp;</SPAN>and<SPAN class=Apple-converted-space>&nbsp;</SPAN><B>pop</B><SPAN class=Apple-converted-space>&nbsp;</SPAN>instructions) or explicitly (<A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title="Stack-based memory allocation" href="http://en.wikipedia.org/wiki/Stack-based_memory_allocation">memory accesses using the (E)SP or (E)BP registers</A>) use the<SPAN class=Apple-converted-space>&nbsp;</SPAN><I>stack segment</I><SPAN class=Apple-converted-space>&nbsp;</SPAN>specified by the segment selector held in the SS&nbsp;register.</LI></UL>
<UL style="PADDING-BOTTOM: 0px; LINE-HEIGHT: 1.6; LIST-STYLE-TYPE: disc; MARGIN: 0.3em 0px 0px 1.6em; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; LIST-STYLE-IMAGE: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAANAQMAAABb8jbLAAAABlBMVEX///8AUow5QSOjAAAAAXRSTlMAQObYZgAAABNJREFUCB1jYEABBQw/wLCAgQEAGpIDyT0IVcsAAAAASUVORK5CYII=); PADDING-TOP: 0px">
<LI style="MARGIN-BOTTOM: 0.1em"><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(165,88,88); TEXT-DECORATION: none" class=new title="X86 string instructions (page does not exist)" href="http://en.wikipedia.org/w/index.php?title=X86_string_instructions&amp;action=edit&amp;redlink=1">String instructions</A><SPAN class=Apple-converted-space>&nbsp;</SPAN>(e.g.<SPAN class=Apple-converted-space>&nbsp;</SPAN><B>stos</B>,<SPAN class=Apple-converted-space>&nbsp;</SPAN><B>movs</B>), along with data segment, also use the<SPAN class=Apple-converted-space>&nbsp;</SPAN><I>extra segment</I><SPAN class=Apple-converted-space>&nbsp;</SPAN>specified by the segment selector held in the ES&nbsp;register.</LI></UL>
<P style="MARGIN: 0.5em 0px">Segmentation cannot be turned off on x86-32 processors (this is true for 64-bit mode as well, but beyond the scope of discussion), so many 32-bit operating systems simulate a<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title="Flat memory model" href="http://en.wikipedia.org/wiki/Flat_memory_model">flat memory model</A><SPAN class=Apple-converted-space>&nbsp;</SPAN>by setting all segments' bases to 0 in order to make segmentation neutral to programs. For instance, the<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title="Linux kernel" href="http://en.wikipedia.org/wiki/Linux_kernel">Linux kernel</A><SPAN class=Apple-converted-space>&nbsp;</SPAN>sets up only 4 general purpose segments:</P>
<TABLE style="BORDER-BOTTOM: rgb(170,170,170) 1px solid; BORDER-LEFT: rgb(170,170,170) 1px solid; BACKGROUND-COLOR: rgb(249,249,249); MARGIN: 1em 0px; BORDER-COLLAPSE: collapse; COLOR: black; FONT-SIZE: 14px; BORDER-TOP: rgb(170,170,170) 1px solid; BORDER-RIGHT: rgb(170,170,170) 1px solid" class=wikitable>
<TBODY>
<TR>
<TH style="BORDER-BOTTOM: rgb(170,170,170) 1px solid; TEXT-ALIGN: center; BORDER-LEFT: rgb(170,170,170) 1px solid; PADDING-BOTTOM: 0.2em; BACKGROUND-COLOR: rgb(242,242,242); PADDING-LEFT: 0.2em; PADDING-RIGHT: 0.2em; BORDER-TOP: rgb(170,170,170) 1px solid; BORDER-RIGHT: rgb(170,170,170) 1px solid; PADDING-TOP: 0.2em">Name</TH>
<TH style="BORDER-BOTTOM: rgb(170,170,170) 1px solid; TEXT-ALIGN: center; BORDER-LEFT: rgb(170,170,170) 1px solid; PADDING-BOTTOM: 0.2em; BACKGROUND-COLOR: rgb(242,242,242); PADDING-LEFT: 0.2em; PADDING-RIGHT: 0.2em; BORDER-TOP: rgb(170,170,170) 1px solid; BORDER-RIGHT: rgb(170,170,170) 1px solid; PADDING-TOP: 0.2em">Description</TH>
<TH style="BORDER-BOTTOM: rgb(170,170,170) 1px solid; TEXT-ALIGN: center; BORDER-LEFT: rgb(170,170,170) 1px solid; PADDING-BOTTOM: 0.2em; BACKGROUND-COLOR: rgb(242,242,242); PADDING-LEFT: 0.2em; PADDING-RIGHT: 0.2em; BORDER-TOP: rgb(170,170,170) 1px solid; BORDER-RIGHT: rgb(170,170,170) 1px solid; PADDING-TOP: 0.2em">Base</TH>
<TH style="BORDER-BOTTOM: rgb(170,170,170) 1px solid; TEXT-ALIGN: center; BORDER-LEFT: rgb(170,170,170) 1px solid; PADDING-BOTTOM: 0.2em; BACKGROUND-COLOR: rgb(242,242,242); PADDING-LEFT: 0.2em; PADDING-RIGHT: 0.2em; BORDER-TOP: rgb(170,170,170) 1px solid; BORDER-RIGHT: rgb(170,170,170) 1px solid; PADDING-TOP: 0.2em">Limit</TH>
<TH style="BORDER-BOTTOM: rgb(170,170,170) 1px solid; TEXT-ALIGN: center; BORDER-LEFT: rgb(170,170,170) 1px solid; PADDING-BOTTOM: 0.2em; BACKGROUND-COLOR: rgb(242,242,242); PADDING-LEFT: 0.2em; PADDING-RIGHT: 0.2em; BORDER-TOP: rgb(170,170,170) 1px solid; BORDER-RIGHT: rgb(170,170,170) 1px solid; PADDING-TOP: 0.2em"><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" class=mw-redirect title="Descriptor Privilege Level" href="http://en.wikipedia.org/wiki/Descriptor_Privilege_Level">DPL</A></TH></TR>
<TR>
<TD style="BORDER-BOTTOM: rgb(170,170,170) 1px solid; BORDER-LEFT: rgb(170,170,170) 1px solid; PADDING-BOTTOM: 0.2em; PADDING-LEFT: 0.2em; PADDING-RIGHT: 0.2em; BORDER-TOP: rgb(170,170,170) 1px solid; BORDER-RIGHT: rgb(170,170,170) 1px solid; PADDING-TOP: 0.2em">__KERNEL_CS</TD>
<TD style="BORDER-BOTTOM: rgb(170,170,170) 1px solid; BORDER-LEFT: rgb(170,170,170) 1px solid; PADDING-BOTTOM: 0.2em; PADDING-LEFT: 0.2em; PADDING-RIGHT: 0.2em; BORDER-TOP: rgb(170,170,170) 1px solid; BORDER-RIGHT: rgb(170,170,170) 1px solid; PADDING-TOP: 0.2em">Kernel code segment</TD>
<TD style="BORDER-BOTTOM: rgb(170,170,170) 1px solid; BORDER-LEFT: rgb(170,170,170) 1px solid; PADDING-BOTTOM: 0.2em; PADDING-LEFT: 0.2em; PADDING-RIGHT: 0.2em; BORDER-TOP: rgb(170,170,170) 1px solid; BORDER-RIGHT: rgb(170,170,170) 1px solid; PADDING-TOP: 0.2em">0</TD>
<TD style="BORDER-BOTTOM: rgb(170,170,170) 1px solid; BORDER-LEFT: rgb(170,170,170) 1px solid; PADDING-BOTTOM: 0.2em; PADDING-LEFT: 0.2em; PADDING-RIGHT: 0.2em; BORDER-TOP: rgb(170,170,170) 1px solid; BORDER-RIGHT: rgb(170,170,170) 1px solid; PADDING-TOP: 0.2em">4&nbsp;GiB</TD>
<TD style="BORDER-BOTTOM: rgb(170,170,170) 1px solid; BORDER-LEFT: rgb(170,170,170) 1px solid; PADDING-BOTTOM: 0.2em; PADDING-LEFT: 0.2em; PADDING-RIGHT: 0.2em; BORDER-TOP: rgb(170,170,170) 1px solid; BORDER-RIGHT: rgb(170,170,170) 1px solid; PADDING-TOP: 0.2em">0</TD></TR>
<TR>
<TD style="BORDER-BOTTOM: rgb(170,170,170) 1px solid; BORDER-LEFT: rgb(170,170,170) 1px solid; PADDING-BOTTOM: 0.2em; PADDING-LEFT: 0.2em; PADDING-RIGHT: 0.2em; BORDER-TOP: rgb(170,170,170) 1px solid; BORDER-RIGHT: rgb(170,170,170) 1px solid; PADDING-TOP: 0.2em">__KERNEL_DS</TD>
<TD style="BORDER-BOTTOM: rgb(170,170,170) 1px solid; BORDER-LEFT: rgb(170,170,170) 1px solid; PADDING-BOTTOM: 0.2em; PADDING-LEFT: 0.2em; PADDING-RIGHT: 0.2em; BORDER-TOP: rgb(170,170,170) 1px solid; BORDER-RIGHT: rgb(170,170,170) 1px solid; PADDING-TOP: 0.2em">Kernel data segment</TD>
<TD style="BORDER-BOTTOM: rgb(170,170,170) 1px solid; BORDER-LEFT: rgb(170,170,170) 1px solid; PADDING-BOTTOM: 0.2em; PADDING-LEFT: 0.2em; PADDING-RIGHT: 0.2em; BORDER-TOP: rgb(170,170,170) 1px solid; BORDER-RIGHT: rgb(170,170,170) 1px solid; PADDING-TOP: 0.2em">0</TD>
<TD style="BORDER-BOTTOM: rgb(170,170,170) 1px solid; BORDER-LEFT: rgb(170,170,170) 1px solid; PADDING-BOTTOM: 0.2em; PADDING-LEFT: 0.2em; PADDING-RIGHT: 0.2em; BORDER-TOP: rgb(170,170,170) 1px solid; BORDER-RIGHT: rgb(170,170,170) 1px solid; PADDING-TOP: 0.2em">4&nbsp;GiB</TD>
<TD style="BORDER-BOTTOM: rgb(170,170,170) 1px solid; BORDER-LEFT: rgb(170,170,170) 1px solid; PADDING-BOTTOM: 0.2em; PADDING-LEFT: 0.2em; PADDING-RIGHT: 0.2em; BORDER-TOP: rgb(170,170,170) 1px solid; BORDER-RIGHT: rgb(170,170,170) 1px solid; PADDING-TOP: 0.2em">0</TD></TR>
<TR>
<TD style="BORDER-BOTTOM: rgb(170,170,170) 1px solid; BORDER-LEFT: rgb(170,170,170) 1px solid; PADDING-BOTTOM: 0.2em; PADDING-LEFT: 0.2em; PADDING-RIGHT: 0.2em; BORDER-TOP: rgb(170,170,170) 1px solid; BORDER-RIGHT: rgb(170,170,170) 1px solid; PADDING-TOP: 0.2em">__USER_CS</TD>
<TD style="BORDER-BOTTOM: rgb(170,170,170) 1px solid; BORDER-LEFT: rgb(170,170,170) 1px solid; PADDING-BOTTOM: 0.2em; PADDING-LEFT: 0.2em; PADDING-RIGHT: 0.2em; BORDER-TOP: rgb(170,170,170) 1px solid; BORDER-RIGHT: rgb(170,170,170) 1px solid; PADDING-TOP: 0.2em">User code segment</TD>
<TD style="BORDER-BOTTOM: rgb(170,170,170) 1px solid; BORDER-LEFT: rgb(170,170,170) 1px solid; PADDING-BOTTOM: 0.2em; PADDING-LEFT: 0.2em; PADDING-RIGHT: 0.2em; BORDER-TOP: rgb(170,170,170) 1px solid; BORDER-RIGHT: rgb(170,170,170) 1px solid; PADDING-TOP: 0.2em">0</TD>
<TD style="BORDER-BOTTOM: rgb(170,170,170) 1px solid; BORDER-LEFT: rgb(170,170,170) 1px solid; PADDING-BOTTOM: 0.2em; PADDING-LEFT: 0.2em; PADDING-RIGHT: 0.2em; BORDER-TOP: rgb(170,170,170) 1px solid; BORDER-RIGHT: rgb(170,170,170) 1px solid; PADDING-TOP: 0.2em">4&nbsp;GiB</TD>
<TD style="BORDER-BOTTOM: rgb(170,170,170) 1px solid; BORDER-LEFT: rgb(170,170,170) 1px solid; PADDING-BOTTOM: 0.2em; PADDING-LEFT: 0.2em; PADDING-RIGHT: 0.2em; BORDER-TOP: rgb(170,170,170) 1px solid; BORDER-RIGHT: rgb(170,170,170) 1px solid; PADDING-TOP: 0.2em">3</TD></TR>
<TR>
<TD style="BORDER-BOTTOM: rgb(170,170,170) 1px solid; BORDER-LEFT: rgb(170,170,170) 1px solid; PADDING-BOTTOM: 0.2em; PADDING-LEFT: 0.2em; PADDING-RIGHT: 0.2em; BORDER-TOP: rgb(170,170,170) 1px solid; BORDER-RIGHT: rgb(170,170,170) 1px solid; PADDING-TOP: 0.2em">__USER_DS</TD>
<TD style="BORDER-BOTTOM: rgb(170,170,170) 1px solid; BORDER-LEFT: rgb(170,170,170) 1px solid; PADDING-BOTTOM: 0.2em; PADDING-LEFT: 0.2em; PADDING-RIGHT: 0.2em; BORDER-TOP: rgb(170,170,170) 1px solid; BORDER-RIGHT: rgb(170,170,170) 1px solid; PADDING-TOP: 0.2em">User data segment</TD>
<TD style="BORDER-BOTTOM: rgb(170,170,170) 1px solid; BORDER-LEFT: rgb(170,170,170) 1px solid; PADDING-BOTTOM: 0.2em; PADDING-LEFT: 0.2em; PADDING-RIGHT: 0.2em; BORDER-TOP: rgb(170,170,170) 1px solid; BORDER-RIGHT: rgb(170,170,170) 1px solid; PADDING-TOP: 0.2em">0</TD>
<TD style="BORDER-BOTTOM: rgb(170,170,170) 1px solid; BORDER-LEFT: rgb(170,170,170) 1px solid; PADDING-BOTTOM: 0.2em; PADDING-LEFT: 0.2em; PADDING-RIGHT: 0.2em; BORDER-TOP: rgb(170,170,170) 1px solid; BORDER-RIGHT: rgb(170,170,170) 1px solid; PADDING-TOP: 0.2em">4&nbsp;GiB</TD>
<TD style="BORDER-BOTTOM: rgb(170,170,170) 1px solid; BORDER-LEFT: rgb(170,170,170) 1px solid; PADDING-BOTTOM: 0.2em; PADDING-LEFT: 0.2em; PADDING-RIGHT: 0.2em; BORDER-TOP: rgb(170,170,170) 1px solid; BORDER-RIGHT: rgb(170,170,170) 1px solid; PADDING-TOP: 0.2em">3</TD></TR></TBODY></TABLE>
<P style="MARGIN: 0.5em 0px">Since the base is set to 0 in all cases and the limit 4&nbsp;GiB, the segmentation unit does not affect the addresses the program issues before they arrive at the<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title=Paging href="http://en.wikipedia.org/wiki/Paging">paging</A><SPAN class=Apple-converted-space>&nbsp;</SPAN>unit. (This, of course, refers to 80386 and later processors, as the earlier x86 processors do not have a paging unit.)</P>
<P style="MARGIN: 0.5em 0px">Current Linux also uses GS to point to<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title="Thread-local storage" href="http://en.wikipedia.org/wiki/Thread-local_storage">thread-local storage</A>.</P>
<P style="MARGIN: 0.5em 0px">Segments can be defined to be either code, data, or system segments. Additional permission bits are present to make segments read only, read/write, execute, etc.</P>
<P style="MARGIN: 0.5em 0px">Note that, in protected mode, code may always modify all segment registers<SPAN class=Apple-converted-space>&nbsp;</SPAN><I>except</I><SPAN class=Apple-converted-space>&nbsp;</SPAN>CS (the<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title="Code segment" href="http://en.wikipedia.org/wiki/Code_segment">code segment</A><SPAN class=Apple-converted-space>&nbsp;</SPAN>selector). This is because the current privilege level (CPL) of the processor is stored in the lower 2&nbsp;bits of the CS&nbsp;register. The only way to raise the processor privilege level (and reload CS) is through the<SPAN class=Apple-converted-space>&nbsp;</SPAN><B>lcall</B><SPAN class=Apple-converted-space>&nbsp;</SPAN>(far call) and<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title="INT (x86 instruction)" href="http://en.wikipedia.org/wiki/INT_(x86_instruction)"><B>int</B><SPAN class=Apple-converted-space>&nbsp;</SPAN>(interrupt)</A>instructions. Similarly, the only way to lower the privilege level (and reload CS) is through<SPAN class=Apple-converted-space>&nbsp;</SPAN><B>lret</B><SPAN class=Apple-converted-space>&nbsp;</SPAN>(far return) and<B>iret</B><SPAN class=Apple-converted-space>&nbsp;</SPAN>(interrupt return) instructions. In real mode, code may also modify the CS&nbsp;register by making a far jump (or using an undocumented<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE style="BORDER-BOTTOM: rgb(221,221,221) 1px solid; BORDER-LEFT: rgb(221,221,221) 1px solid; PADDING-BOTTOM: 1px; BACKGROUND-COLOR: rgb(249,249,249); PADDING-LEFT: 4px; PADDING-RIGHT: 4px; FONT-FAMILY: monospace, Courier; COLOR: black; BORDER-TOP: rgb(221,221,221) 1px solid; BORDER-RIGHT: rgb(221,221,221) 1px solid; PADDING-TOP: 1px; border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px">POP CS</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>instruction on the 8086 or 8088)<SUP style="LINE-HEIGHT: 1; FONT-STYLE: normal; FONT-SIZE: 11px; FONT-WEIGHT: normal" id=cite_ref-4 class=reference><A style="WHITE-SPACE: nowrap; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" href="http://en.wikipedia.org/wiki/X86_memory_segmentation#cite_note-4"><SPAN>[</SPAN>4<SPAN>]</SPAN></A></SUP>). Of course, in real mode, there are no privilege levels; all programs have absolute unchecked access to all of memory and all CPU instructions.</P>
<P style="MARGIN: 0.5em 0px">For more information about segmentation, see the<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title=IA-32 href="http://en.wikipedia.org/wiki/IA-32">IA-32</A><SPAN class=Apple-converted-space>&nbsp;</SPAN>manuals freely available on the<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" class=mw-redirect title=AMD href="http://en.wikipedia.org/wiki/AMD">AMD</A><SPAN class=Apple-converted-space>&nbsp;</SPAN>or<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title=Intel href="http://en.wikipedia.org/wiki/Intel">Intel</A><SPAN class=Apple-converted-space>&nbsp;</SPAN>websites.</P>
<H2 style="BORDER-BOTTOM: rgb(170,170,170) 1px solid; PADDING-BOTTOM: 0px; LINE-HEIGHT: 1.3; MARGIN: 1em 0px 0.25em; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; FONT-FAMILY: 'Linux Libertine', Georgia, Times, serif; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: black; FONT-SIZE: 1.5em; OVERFLOW: hidden; FONT-WEIGHT: normal; PADDING-TOP: 0px"><SPAN id=Notes_and_references class=mw-headline>Notes and references</SPAN><SPAN style="LINE-HEIGHT: 1em; DISPLAY: inline-block; FONT-FAMILY: sans-serif; WHITE-SPACE: nowrap; MARGIN-LEFT: 1em; FONT-SIZE: small; VERTICAL-ALIGN: baseline; FONT-WEIGHT: normal; -webkit-user-select: none" class=mw-editsection><SPAN style="COLOR: rgb(85,85,85); MARGIN-LEFT: 0px; MARGIN-RIGHT: 0px" class=mw-editsection-bracket>[</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title="Edit section: Notes and references" href="http://en.wikipedia.org/w/index.php?title=X86_memory_segmentation&amp;action=edit&amp;section=8">edit</A><SPAN style="COLOR: rgb(85,85,85); MARGIN-LEFT: 0px; MARGIN-RIGHT: 0px" class=mw-editsection-bracket>]</SPAN></SPAN></H2>
<DIV style="LIST-STYLE-TYPE: decimal; MARGIN-BOTTOM: 0.5em; FONT-SIZE: 12px" class=reflist>
<OL style="PADDING-BOTTOM: 0px; LINE-HEIGHT: 1.6; MARGIN: 0.3em 0px 0.5em 3.2em; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; FONT-SIZE: 12px; LIST-STYLE-IMAGE: none; PADDING-TOP: 0px" class=references>
<LI style="MARGIN-BOTTOM: 0.1em" id=cite_note-Arch-1><SPAN style="-webkit-user-select: none" class=mw-cite-backlink>^<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" href="http://en.wikipedia.org/wiki/X86_memory_segmentation#cite_ref-Arch_1-0"><SPAN style="CLIP: rect(1px 1px 1px 1px); BORDER-BOTTOM: 0px; POSITION: absolute !important; BORDER-LEFT: 0px; PADDING-BOTTOM: 0px !important; PADDING-LEFT: 0px !important; WIDTH: 1px !important; PADDING-RIGHT: 0px !important; HEIGHT: 1px !important; OVERFLOW: hidden; BORDER-TOP: 0px; TOP: -99999px; BORDER-RIGHT: 0px; PADDING-TOP: 0px !important; -webkit-user-select: none" class=cite-accessibility-label>Jump up to:</SPAN><SUP style="LINE-HEIGHT: 1; FONT-SIZE: 10px"><I><B>a</B></I></SUP></A><SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" href="http://en.wikipedia.org/wiki/X86_memory_segmentation#cite_ref-Arch_1-1"><SUP style="LINE-HEIGHT: 1; FONT-SIZE: 10px"><I><B>b</B></I></SUP></A></SPAN><SPAN class=Apple-converted-space>&nbsp;</SPAN><SPAN class=reference-text>"Intel 64 and IA-32 Architectures Software Developer's Manual", Volume 3, "System Programming Guide", published in 2011, Page "Vol. 3A 3-11", the book is written: "<I>Every segment register has a &#8220;visible&#8221; part and a &#8220;hidden&#8221; part. (The hidden part is sometimes referred to as a &#8220;descriptor cache&#8221; or a &#8220;shadow register.&#8221;) When a segment selector is loaded into the visible part of a segment register, the processor also loads the hidden part of the segment register with the base address, segment limit, and access control information from the segment descriptor pointed to by the segment selector. The information cached in the segment register (visible and hidden) allows the processor to translate addresses without taking extra bus cycles to read the base address and limit from the segment descriptor.</I>"</SPAN></LI>
<LI style="MARGIN-BOTTOM: 0.1em" id=cite_note-2><SPAN style="-webkit-user-select: none" class=mw-cite-backlink><B><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" href="http://en.wikipedia.org/wiki/X86_memory_segmentation#cite_ref-2"><SPAN style="CLIP: rect(1px 1px 1px 1px); BORDER-BOTTOM: 0px; POSITION: absolute !important; BORDER-LEFT: 0px; PADDING-BOTTOM: 0px !important; PADDING-LEFT: 0px !important; WIDTH: 1px !important; PADDING-RIGHT: 0px !important; HEIGHT: 1px !important; OVERFLOW: hidden; BORDER-TOP: 0px; TOP: -99999px; BORDER-RIGHT: 0px; PADDING-TOP: 0px !important; -webkit-user-select: none" class=cite-accessibility-label>Jump up</SPAN>^</A></B></SPAN><SPAN class=Apple-converted-space>&nbsp;</SPAN><SPAN class=reference-text><SPAN style="WORD-WRAP: break-word" class="citation book">Intel Corporation (2004).<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="PADDING-RIGHT: 18px; BACKGROUND: url(http://upload.wikimedia.org/wikipedia/commons/2/23/Icons-mini-file_acrobat.gif) no-repeat 100% 50%; COLOR: rgb(102,51,102); TEXT-DECORATION: none" class="external text" href="http://www.intel.com/content/dam/www/public/us/en/documents/manuals/64-ia-32-architectures-software-developer-vol-1-manual.pdf" rel=nofollow><I>IA-32 Intel Architecture Software Developer's Manual Volume 1: Basic Architecture</I></A>.</SPAN><SPAN class=Z3988 title=ctx_ver=Z39.88-2004&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AX86+memory+segmentation&amp;rft.au=Intel+Corporation&amp;rft.aulast=Intel+Corporation&amp;rft.btitle=IA-32+Intel+Architecture+Software+Developer%27s+Manual+Volume+1%3A+Basic+Architecture&amp;rft.date=2004&amp;rft.genre=book&amp;rft_id=http%3A%2F%2Fwww.intel.com%2Fcontent%2Fdam%2Fwww%2Fpublic%2Fus%2Fen%2Fdocuments%2Fmanuals%2F64-ia-32-architectures-software-developer-vol-1-manual.pdf&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Abook></SPAN></SPAN></LI>
<LI style="MARGIN-BOTTOM: 0.1em" id=cite_note-3><SPAN style="-webkit-user-select: none" class=mw-cite-backlink><B><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" href="http://en.wikipedia.org/wiki/X86_memory_segmentation#cite_ref-3"><SPAN style="CLIP: rect(1px 1px 1px 1px); BORDER-BOTTOM: 0px; POSITION: absolute !important; BORDER-LEFT: 0px; PADDING-BOTTOM: 0px !important; PADDING-LEFT: 0px !important; WIDTH: 1px !important; PADDING-RIGHT: 0px !important; HEIGHT: 1px !important; OVERFLOW: hidden; BORDER-TOP: 0px; TOP: -99999px; BORDER-RIGHT: 0px; PADDING-TOP: 0px !important; -webkit-user-select: none" class=cite-accessibility-label>Jump up</SPAN>^</A></B></SPAN><SPAN class=Apple-converted-space>&nbsp;</SPAN><SPAN class=reference-text>The 46 bits are 14 bits from a 16-bit segment register (the other two bits are the privilege level) plus a 32-bit offset.</SPAN></LI>
<LI style="MARGIN-BOTTOM: 0.1em" id=cite_note-4><SPAN style="-webkit-user-select: none" class=mw-cite-backlink><B><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" href="http://en.wikipedia.org/wiki/X86_memory_segmentation#cite_ref-4"><SPAN style="CLIP: rect(1px 1px 1px 1px); BORDER-BOTTOM: 0px; POSITION: absolute !important; BORDER-LEFT: 0px; PADDING-BOTTOM: 0px !important; PADDING-LEFT: 0px !important; WIDTH: 1px !important; PADDING-RIGHT: 0px !important; HEIGHT: 1px !important; OVERFLOW: hidden; BORDER-TOP: 0px; TOP: -99999px; BORDER-RIGHT: 0px; PADDING-TOP: 0px !important; -webkit-user-select: none" class=cite-accessibility-label>Jump up</SPAN>^</A></B></SPAN><SPAN class=Apple-converted-space>&nbsp;</SPAN><SPAN class=reference-text><CODE style="BORDER-BOTTOM: rgb(221,221,221) 1px solid; BORDER-LEFT: rgb(221,221,221) 1px solid; PADDING-BOTTOM: 1px; BACKGROUND-COLOR: rgb(249,249,249); PADDING-LEFT: 4px; PADDING-RIGHT: 4px; FONT-FAMILY: monospace, Courier; COLOR: black; BORDER-TOP: rgb(221,221,221) 1px solid; BORDER-RIGHT: rgb(221,221,221) 1px solid; PADDING-TOP: 1px; border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px">POP CS</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>must be used with extreme care and has limited usefulness, because it immediately changes the effective address that will be computed from the instruction pointer to fetch the next instruction. Generally, a far jump is much more useful. The existence of<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE style="BORDER-BOTTOM: rgb(221,221,221) 1px solid; BORDER-LEFT: rgb(221,221,221) 1px solid; PADDING-BOTTOM: 1px; BACKGROUND-COLOR: rgb(249,249,249); PADDING-LEFT: 4px; PADDING-RIGHT: 4px; FONT-FAMILY: monospace, Courier; COLOR: black; BORDER-TOP: rgb(221,221,221) 1px solid; BORDER-RIGHT: rgb(221,221,221) 1px solid; PADDING-TOP: 1px; border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px">POP CS</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>is probably an accident, as it follows a pattern of PUSH and POP instruction opcodes for the four segment registers on the 8086 and 8088.</SPAN></LI></OL></DIV>
<H2 style="BORDER-BOTTOM: rgb(170,170,170) 1px solid; PADDING-BOTTOM: 0px; LINE-HEIGHT: 1.3; MARGIN: 1em 0px 0.25em; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; FONT-FAMILY: 'Linux Libertine', Georgia, Times, serif; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: black; FONT-SIZE: 1.5em; OVERFLOW: hidden; FONT-WEIGHT: normal; PADDING-TOP: 0px"><SPAN id=See_also class=mw-headline>See also</SPAN><SPAN style="LINE-HEIGHT: 1em; DISPLAY: inline-block; FONT-FAMILY: sans-serif; WHITE-SPACE: nowrap; MARGIN-LEFT: 1em; FONT-SIZE: small; VERTICAL-ALIGN: baseline; FONT-WEIGHT: normal; -webkit-user-select: none" class=mw-editsection><SPAN style="COLOR: rgb(85,85,85); MARGIN-LEFT: 0px; MARGIN-RIGHT: 0px" class=mw-editsection-bracket>[</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title="Edit section: See also" href="http://en.wikipedia.org/w/index.php?title=X86_memory_segmentation&amp;action=edit&amp;section=9">edit</A><SPAN style="COLOR: rgb(85,85,85); MARGIN-LEFT: 0px; MARGIN-RIGHT: 0px" class=mw-editsection-bracket>]</SPAN></SPAN></H2>
<UL style="PADDING-BOTTOM: 0px; LINE-HEIGHT: 1.6; LIST-STYLE-TYPE: disc; MARGIN: 0.3em 0px 0px 1.6em; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; LIST-STYLE-IMAGE: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAANAQMAAABb8jbLAAAABlBMVEX///8AUow5QSOjAAAAAXRSTlMAQObYZgAAABNJREFUCB1jYEABBQw/wLCAgQEAGpIDyT0IVcsAAAAASUVORK5CYII=); PADDING-TOP: 0px">
<LI style="MARGIN-BOTTOM: 0.1em"><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title="Intel Memory Model" href="http://en.wikipedia.org/wiki/Intel_Memory_Model">Intel Memory Model</A></LI>
<LI style="MARGIN-BOTTOM: 0.1em"><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title="THE multiprogramming system" href="http://en.wikipedia.org/wiki/THE_multiprogramming_system">THE multiprogramming system</A></LI></UL>
<H2 style="BORDER-BOTTOM: rgb(170,170,170) 1px solid; PADDING-BOTTOM: 0px; LINE-HEIGHT: 1.3; MARGIN: 1em 0px 0.25em; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; FONT-FAMILY: 'Linux Libertine', Georgia, Times, serif; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: black; FONT-SIZE: 1.5em; OVERFLOW: hidden; FONT-WEIGHT: normal; PADDING-TOP: 0px"><SPAN id=External_links class=mw-headline>External links</SPAN><SPAN style="LINE-HEIGHT: 1em; DISPLAY: inline-block; FONT-FAMILY: sans-serif; WHITE-SPACE: nowrap; MARGIN-LEFT: 1em; FONT-SIZE: small; VERTICAL-ALIGN: baseline; FONT-WEIGHT: normal; -webkit-user-select: none" class=mw-editsection><SPAN style="COLOR: rgb(85,85,85); MARGIN-LEFT: 0px; MARGIN-RIGHT: 0px" class=mw-editsection-bracket>[</SPAN><A style="BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(11,0,128); TEXT-DECORATION: none" title="Edit section: External links" href="http://en.wikipedia.org/w/index.php?title=X86_memory_segmentation&amp;action=edit&amp;section=10">edit</A><SPAN style="COLOR: rgb(85,85,85); MARGIN-LEFT: 0px; MARGIN-RIGHT: 0px" class=mw-editsection-bracket>]</SPAN></SPAN></H2>
<UL style="PADDING-BOTTOM: 0px; LINE-HEIGHT: 1.6; LIST-STYLE-TYPE: disc; MARGIN: 0.3em 0px 0px 1.6em; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; LIST-STYLE-IMAGE: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAANAQMAAABb8jbLAAAABlBMVEX///8AUow5QSOjAAAAAXRSTlMAQObYZgAAABNJREFUCB1jYEABBQw/wLCAgQEAGpIDyT0IVcsAAAAASUVORK5CYII=); PADDING-TOP: 0px">
<LI style="MARGIN-BOTTOM: 0.1em"><A style="PADDING-RIGHT: 13px; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(102,51,102); TEXT-DECORATION: none" class="external text" href="http://www.intel.com/products/processor/manuals/index.htm" rel=nofollow>Home of the IA-32 Intel Architecture Software Developer's Manual</A></LI>
<LI style="MARGIN-BOTTOM: 0.1em"><A style="PADDING-RIGHT: 13px; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(102,51,102); TEXT-DECORATION: none" class="external text" href="http://thestarman.pcministry.com/asm/debug/Segments.html" rel=nofollow>The Segment:Offset Addressing Scheme</A></LI></UL></DIV></DIV>