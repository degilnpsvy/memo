<H4 class=subsection>2.5.1 The <CODE>AWKPATH</CODE> Environment Variable</H4><A name=index-AWKPATH-environment-variable></A><A name=index-directories_002c-searching-for-source-files></A><A name=index-search-paths_002c-for-source-files></A><A name=index-differences-in-awk-and-gawk_002c-AWKPATH-environment-variable></A>
<P>In most <CODE>awk</CODE> implementations, you must supply a precise path name for each program file, unless the file is in the current directory. But in <CODE>gawk</CODE>, if the file name supplied to the <SAMP>-f</SAMP> or <SAMP>-i</SAMP> options does not contain a directory separator &#8216;<SAMP>/</SAMP>&#8217;, then <CODE>gawk</CODE> searches a list of directories (called the <EM>search path</EM>), one by one, looking for a file with the specified name. </P>
<P>The search path is a string consisting of directory names separated by colons<A href="http://www.gnu.org/software/gawk/manual/gawk.html#FOOT14" name=DOCF14><SUP>14</SUP></A>. <CODE>gawk</CODE> gets its search path from the <CODE>AWKPATH</CODE> environment variable. If that variable does not exist, <CODE>gawk</CODE> uses a default path, &#8216;<SAMP>.:/usr/local/share/awk</SAMP>&#8217;.<A href="http://www.gnu.org/software/gawk/manual/gawk.html#FOOT15" name=DOCF15><SUP>15</SUP></A> </P>
<P>The search path feature is particularly useful for building libraries of useful <CODE>awk</CODE> functions. The library files can be placed in a standard directory in the default path and then specified on the command line with a short file name. Otherwise, the full file name would have to be typed for each file. </P>
<P>By using the <SAMP>-i</SAMP> option, or the <SAMP>--source</SAMP> and <SAMP>-f</SAMP> options, your command-line <CODE>awk</CODE> programs can use facilities in <CODE>awk</CODE> library files (see <A href="http://www.gnu.org/software/gawk/manual/gawk.html#Library-Functions">Library Functions</A>). Path searching is not done if <CODE>gawk</CODE> is in compatibility mode. This is true for both <SAMP>--traditional</SAMP> and <SAMP>--posix</SAMP>. See <A href="http://www.gnu.org/software/gawk/manual/gawk.html#Options">Options</A>. </P>
<P>If the source code is not found after the initial search, the path is searched again after adding the default &#8216;<SAMP>.awk</SAMP>&#8217; suffix to the filename. </P>
<BLOCKQUOTE>
<P><B>NOTE:</B> To include the current directory in the path, either place <SAMP>.</SAMP> explicitly in the path or write a null entry in the path. (A null entry is indicated by starting or ending the path with a colon or by placing two colons next to each other (&#8216;<SAMP>::</SAMP>&#8217;).) This path search mechanism is similar to the shell&#8217;s. </P>
<P>However, <CODE>gawk</CODE> always looks in the current directory <EM>before</EM> searching <CODE>AWKPATH</CODE>, so there is no real reason to include the current directory in the search path. </P></BLOCKQUOTE>
<P>If <CODE>AWKPATH</CODE> is not defined in the environment, <CODE>gawk</CODE> places its default search path into <CODE>ENVIRON["AWKPATH"]</CODE>. This makes it easy to determine the actual search path that <CODE>gawk</CODE> will use from within an <CODE>awk</CODE> program. </P>
<P>While you can change <CODE>ENVIRON["AWKPATH"]</CODE> within your <CODE>awk</CODE> program, this has no effect on the running program&#8217;s behavior. This makes sense: the <CODE>AWKPATH</CODE> environment variable is used to find the program source files. Once your program is running, all the files have been found, and <CODE>gawk</CODE> no longer needs to use <CODE>AWKPATH</CODE>.