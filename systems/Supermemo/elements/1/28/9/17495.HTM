<H1 class=postTitle><A id=cb_post_title_url class=postTitle2 href="http://www.cnblogs.com/vamei/archive/2012/09/15/2684781.html">Python&#26631;&#20934;&#24211;05 &#23384;&#20648;&#23545;&#35937; (pickle&#21253;&#65292;cPickle&#21253;)</A> </H1>
<DIV class=clear></DIV>
<DIV class=postBody>
<DIV id=cnblogs_post_body>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#20316;&#32773;&#65306;Vamei &#20986;&#22788;&#65306;http://www.cnblogs.com/vamei &#27426;&#36814;&#36716;&#36733;&#65292;&#20063;&#35831;&#20445;&#30041;&#36825;&#27573;&#22768;&#26126;&#12290;&#35874;&#35874;&#65281;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#35874;&#35874;<A id=a_comment_author_2554934 href="http://home.cnblogs.com/u/469140/" target=_blank>reverland</A>&#32416;&#38169;</SPAN></P>
<P>&nbsp;</P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#22312;&#20043;&#21069;&#23545;Python&#23545;&#35937;&#30340;&#20171;&#32461;&#20013; (<A id=cb_post_title_url class=postTitle2 href="http://www.cnblogs.com/vamei/archive/2012/06/02/2531515.html">&#38754;&#21521;&#23545;&#35937;&#30340;&#22522;&#26412;&#27010;&#24565;</A>&#65292;<A id=cb_post_title_url class=postTitle2 href="http://www.cnblogs.com/vamei/archive/2012/06/02/2532018.html">&#38754;&#21521;&#23545;&#35937;&#30340;&#36827;&#19968;&#27493;&#25299;&#23637;</A>)&#65292;&#25105;&#25552;&#21040;&#36807;Python&#8220;&#19968;&#20999;&#30342;&#23545;&#35937;&#8221;&#30340;&#21746;&#23398;&#65292;&#22312;Python&#20013;&#65292;&#26080;&#35770;&#26159;&#21464;&#37327;&#36824;&#26159;&#20989;&#25968;&#65292;&#37117;&#26159;&#19968;&#20010;&#23545;&#35937;&#12290;&#24403;Python&#36816;&#34892;&#26102;&#65292;&#23545;&#35937;&#23384;&#20648;&#22312;&#20869;&#23384;&#20013;&#65292;&#38543;&#26102;&#31561;&#24453;&#31995;&#32479;&#30340;&#35843;&#29992;&#12290;&#28982;&#32780;&#65292;&#20869;&#23384;&#37324;&#30340;&#25968;&#25454;&#20250;&#38543;&#30528;&#35745;&#31639;&#26426;&#20851;&#26426;&#21644;&#28040;&#22833;&#65292;&#22914;&#20309;<SPAN style="COLOR: #ff0000">&#23558;&#23545;&#35937;&#20445;&#23384;&#21040;&#25991;&#20214;</SPAN>&#65292;&#24182;&#20648;&#23384;&#22312;&#30828;&#30424;&#19978;&#21602;&#65311;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#35745;&#31639;&#26426;&#30340;&#20869;&#23384;&#20013;&#23384;&#20648;&#30340;&#26159;&#20108;&#36827;&#21046;&#30340;&#24207;&#21015; (&#24403;&#28982;&#65292;&#22312;Linux&#30524;&#20013;&#65292;&#26159;<A href="http://www.cnblogs.com/vamei/archive/2012/09/14/2683756.html">&#25991;&#26412;&#27969;</A>)&#12290;&#25105;&#20204;&#21487;&#20197;&#30452;&#25509;&#23558;&#26576;&#20010;&#23545;&#35937;&#25152;&#23545;&#24212;&#20301;&#32622;&#30340;&#25968;&#25454;&#25235;&#21462;&#19979;&#26469;&#65292;&#36716;&#25442;&#25104;<SPAN style="COLOR: #ff0000">&#25991;&#26412;&#27969;</SPAN> (&#36825;&#20010;&#36807;&#31243;&#21483;&#20570;serialize)&#65292;&#28982;&#21518;&#23558;&#25991;&#26412;&#27969;&#23384;&#20837;&#21040;&#25991;&#20214;&#20013;&#12290;&#30001;&#20110;Python&#22312;&#21019;&#24314;&#23545;&#35937;&#26102;&#65292;&#35201;<SPAN style="COLOR: #ff0000">&#21442;&#32771;&#23545;&#35937;&#30340;&#31867;&#23450;&#20041;</SPAN>&#65292;&#25152;&#20197;&#24403;&#25105;&#20204;&#20174;&#25991;&#26412;&#20013;&#35835;&#21462;&#23545;&#35937;&#26102;&#65292;&#24517;&#39035;&#22312;&#25163;&#36793;&#35201;&#26377;&#35813;&#23545;&#35937;&#30340;&#31867;&#23450;&#20041;&#65292;&#25165;&#33021;&#25026;&#24471;&#22914;&#20309;&#21435;&#37325;&#24314;&#36825;&#19968;&#23545;&#35937;&#12290;&#20174;&#25991;&#20214;&#35835;&#21462;&#26102;&#65292;&#23545;&#20110;Python&#30340;&#20869;&#24314;(built-in)&#23545;&#35937; (&#27604;&#22914;&#35828;&#25972;&#25968;&#12289;&#35789;&#20856;&#12289;&#34920;&#31561;&#31561;)&#65292;&#30001;&#20110;&#20854;&#31867;&#23450;&#20041;&#24050;&#32463;&#36733;&#20837;&#20869;&#23384;&#65292;&#25152;&#20197;&#19981;&#38656;&#35201;&#25105;&#20204;&#20877;&#22312;&#31243;&#24207;&#20013;&#23450;&#20041;&#31867;&#12290;&#20294;&#23545;&#20110;&#29992;&#25143;&#33258;&#34892;&#23450;&#20041;&#30340;&#23545;&#35937;&#65292;&#23601;<SPAN style="COLOR: #ff0000">&#24517;&#39035;&#35201;&#20808;&#23450;&#20041;&#31867;</SPAN>&#65292;&#28982;&#21518;&#25165;&#33021;&#20174;&#25991;&#20214;&#20013;&#36733;&#20837;&#23545;&#35937; (&#27604;&#22914;<A id=cb_post_title_url class=postTitle2 href="http://www.cnblogs.com/vamei/archive/2012/06/02/2531515.html">&#38754;&#21521;&#23545;&#35937;&#30340;&#22522;&#26412;&#27010;&#24565;</A>&#20013;&#30340;&#23545;&#35937;&#37027;&#20010;summer)&#12290;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&nbsp;</SPAN></P>
<H3><SPAN style="FONT-FAMILY: courier new, courier">pickle&#21253;</SPAN></H3>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#23545;&#20110;&#19978;&#36848;&#36807;&#31243;&#65292;&#26368;&#24120;&#29992;&#30340;&#24037;&#20855;&#26159;Python&#20013;&#30340;pickle&#21253;&#12290;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">1) &#23558;&#20869;&#23384;&#20013;&#30340;&#23545;&#35937;<SPAN style="COLOR: #ff0000">&#36716;&#25442;&#25104;&#20026;&#25991;&#26412;&#27969;</SPAN>&#65306;</SPAN></P>
<DIV class=cnblogs_code>
<DIV class=cnblogs_code_toolbar><SPAN class=cnblogs_code_copy><A title=&#22797;&#21046;&#20195;&#30721; void(0);"><IMG alt=&#22797;&#21046;&#20195;&#30721; src="http://common.cnblogs.com/images/copycode.gif"></A></SPAN></DIV><PRE><SPAN style="FONT-FAMILY: courier new, courier"><SPAN style="COLOR: #0000ff">import</SPAN><SPAN style="COLOR: #000000"> pickle

</SPAN><SPAN style="COLOR: #008000"># define class</SPAN>
<SPAN style="COLOR: #0000ff">class</SPAN><SPAN style="COLOR: #000000"> Bird(object):
    have_feather </SPAN>=<SPAN style="COLOR: #000000"> True
    way_of_reproduction  </SPAN>= <SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #800000">egg</SPAN><SPAN style="COLOR: #800000">'</SPAN>

<SPAN style="COLOR: #000000">summer     &nbsp; = Bird()</SPAN>                 <SPAN style="COLOR: #008000">#</SPAN><SPAN style="COLOR: #008000"> construct an object</SPAN>
<SPAN style="COLOR: #000000">picklestring = pickle.dumps(summer)</SPAN>   <SPAN style="COLOR: #008000">#</SPAN><SPAN style="COLOR: #008000"> serialize object</SPAN></SPAN></PRE>
<DIV class=cnblogs_code_toolbar><SPAN class=cnblogs_code_copy><A title=&#22797;&#21046;&#20195;&#30721; void(0);"><IMG alt=&#22797;&#21046;&#20195;&#30721; src="http://common.cnblogs.com/images/copycode.gif"></A></SPAN></DIV></DIV>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#20351;&#29992;pickle.dumps()&#26041;&#27861;&#21487;&#20197;&#23558;&#23545;&#35937;summer&#36716;&#25442;&#25104;&#20102;&#23383;&#31526;&#20018; picklestring(&#20063;&#23601;&#26159;&#25991;&#26412;&#27969;)&#12290;&#38543;&#21518;&#25105;&#20204;&#21487;&#20197;&#29992;&#26222;&#36890;&#25991;&#26412;&#30340;&#23384;&#20648;&#26041;&#27861;&#26469;&#23558;&#35813;&#23383;&#31526;&#20018;&#20648;&#23384;&#22312;&#25991;&#20214;(<A id=cb_post_title_url class=postTitle2 href="http://www.cnblogs.com/vamei/archive/2012/06/06/2537868.html">&#25991;&#26412;&#25991;&#20214;&#30340;&#36755;&#20837;&#36755;&#20986;</A>)&#12290;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&nbsp;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#24403;&#28982;&#65292;&#25105;&#20204;&#20063;&#21487;&#20197;&#20351;&#29992;pickle.dump()&#30340;&#26041;&#27861;&#65292;&#23558;&#19978;&#38754;&#20004;&#37096;&#21512;&#20108;&#20026;&#19968;:</SPAN></P>
<DIV class=cnblogs_code>
<DIV class=cnblogs_code_toolbar><SPAN class=cnblogs_code_copy><A title=&#22797;&#21046;&#20195;&#30721; void(0);"><IMG alt=&#22797;&#21046;&#20195;&#30721; src="http://common.cnblogs.com/images/copycode.gif"></A></SPAN></DIV><PRE><SPAN style="FONT-FAMILY: courier new, courier"><SPAN style="COLOR: #008000"><SPAN style="COLOR: #0000ff">import</SPAN><SPAN style="COLOR: #000000"> pickle</SPAN><BR><BR>#</SPAN><SPAN style="COLOR: #008000"> define class</SPAN>
<SPAN style="COLOR: #0000ff">class</SPAN><SPAN style="COLOR: #000000"> Bird(object):
    have_feather </SPAN>=<SPAN style="COLOR: #000000"> True
    way_of_reproduction  </SPAN>= <SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #800000">egg</SPAN><SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #000000">

summer       </SPAN>= Bird()                        <SPAN style="COLOR: #008000">#</SPAN><SPAN style="COLOR: #008000"> construct an object</SPAN>
fn           = <SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #800000">a.pkl</SPAN><SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #000000">
with open(fn, <SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #800000">w</SPAN><SPAN style="COLOR: #800000">'</SPAN>) as f:                     <SPAN style="COLOR: #008000"># open file with write-mode</SPAN><BR>    picklestring </SPAN>= pickle.dump(summer, f)   <SPAN style="COLOR: #008000">#</SPAN><SPAN style="COLOR: #008000"> serialize and save object</SPAN></SPAN></PRE>
<DIV class=cnblogs_code_toolbar><SPAN class=cnblogs_code_copy><A title=&#22797;&#21046;&#20195;&#30721; void(0);"><IMG alt=&#22797;&#21046;&#20195;&#30721; src="http://common.cnblogs.com/images/copycode.gif"></A></SPAN></DIV></DIV>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#23545;&#35937;summer&#23384;&#20648;&#22312;&#25991;&#20214;a.pkl</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&nbsp;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">2) <SPAN style="COLOR: #ff0000">&#37325;&#24314;&#23545;&#35937;</SPAN></SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#39318;&#20808;&#65292;&#25105;&#20204;&#35201;&#20174;&#25991;&#26412;&#20013;&#35835;&#20986;&#25991;&#26412;&#65292;&#23384;&#20648;&#21040;&#23383;&#31526;&#20018; (<A id=cb_post_title_url class=postTitle2 href="http://www.cnblogs.com/vamei/archive/2012/06/06/2537868.html">&#25991;&#26412;&#25991;&#20214;&#30340;&#36755;&#20837;&#36755;&#20986;</A>)&#12290;&#28982;&#21518;&#20351;&#29992;pickle.loads(str)&#30340;&#26041;&#27861;&#65292;&#23558;&#23383;&#31526;&#20018;&#36716;&#25442;&#25104;&#20026;&#23545;&#35937;&#12290;&#35201;&#35760;&#24471;&#65292;&#27492;&#26102;&#25105;&#20204;&#30340;&#31243;&#24207;&#20013;&#24517;&#39035;&#24050;&#32463;&#26377;&#20102;&#35813;&#23545;&#35937;&#30340;&#31867;&#23450;&#20041;&#12290;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&nbsp;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#27492;&#22806;&#65292;&#25105;&#20204;&#20063;&#21487;&#20197;&#20351;&#29992;pickle.load()&#30340;&#26041;&#27861;&#65292;&#23558;&#19978;&#38754;&#27493;&#39588;&#21512;&#24182;:</SPAN></P>
<DIV class=cnblogs_code>
<DIV class=cnblogs_code_toolbar><SPAN class=cnblogs_code_copy><A title=&#22797;&#21046;&#20195;&#30721; void(0);"><IMG alt=&#22797;&#21046;&#20195;&#30721; src="http://common.cnblogs.com/images/copycode.gif"></A></SPAN></DIV><PRE><SPAN style="FONT-FAMILY: courier new, courier"><SPAN style="COLOR: #0000ff">import</SPAN><SPAN style="COLOR: #000000"> pickle

</SPAN><SPAN style="COLOR: #008000">#</SPAN><SPAN style="COLOR: #008000"> define the class before unpickle</SPAN>
<SPAN style="COLOR: #0000ff">class</SPAN><SPAN style="COLOR: #000000"> Bird(object):
    have_feather </SPAN>=<SPAN style="COLOR: #000000"> True
    way_of_reproduction  </SPAN>= <SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #800000">egg</SPAN><SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #000000">

fn     </SPAN>= <SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #800000">a.pkl</SPAN><SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #000000">
with open(fn, </SPAN><SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #800000">r</SPAN><SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #000000">) as f:
    summer </SPAN>=<SPAN style="COLOR: #000000"> pickle.load(f)</SPAN>   <SPAN style="COLOR: #008000">#</SPAN><SPAN style="COLOR: #008000"> read file and build object</SPAN></SPAN></PRE>
<DIV class=cnblogs_code_toolbar><SPAN class=cnblogs_code_copy><A title=&#22797;&#21046;&#20195;&#30721; void(0);"><IMG alt=&#22797;&#21046;&#20195;&#30721; src="http://common.cnblogs.com/images/copycode.gif"></A></SPAN></DIV></DIV>
<P><SPAN style="FONT-FAMILY: courier new, courier">&nbsp;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&nbsp;</SPAN></P>
<H3><SPAN style="FONT-FAMILY: courier new, courier">cPickle&#21253;</SPAN></H3>
<P><SPAN style="FONT-FAMILY: courier new, courier">cPickle&#21253;&#30340;&#21151;&#33021;&#21644;&#29992;&#27861;&#19982;pickle&#21253;&#20960;&#20046;&#23436;&#20840;&#30456;&#21516; (&#20854;&#23384;&#22312;&#24046;&#21035;&#30340;&#22320;&#26041;&#23454;&#38469;&#19978;&#24456;&#23569;&#29992;&#21040;)&#65292;&#19981;&#21516;&#22312;&#20110;cPickle&#26159;&#22522;&#20110;c&#35821;&#35328;&#32534;&#20889;&#30340;&#65292;&#36895;&#24230;&#26159;pickle&#21253;&#30340;<SPAN style="COLOR: #ff0000">1000&#20493;</SPAN>&#12290;&#23545;&#20110;&#19978;&#38754;&#30340;&#20363;&#23376;&#65292;&#22914;&#26524;&#24819;&#20351;&#29992;cPickle&#21253;&#65292;&#25105;&#20204;&#37117;&#21487;&#20197;&#23558;import&#35821;&#21477;&#25913;&#20026;:</SPAN></P>
<DIV class=cnblogs_code><PRE><SPAN style="FONT-FAMILY: courier new, courier"><SPAN style="COLOR: #0000ff">import</SPAN> cPickle as pickle</SPAN></PRE></DIV>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#23601;&#19981;&#38656;&#35201;&#20877;&#20570;&#20219;&#20309;&#25913;&#21160;&#20102;&#12290;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&nbsp;</SPAN></P>
<H3><SPAN style="FONT-FAMILY: courier new, courier">&#24635;&#32467;</SPAN></H3>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#23545;&#35937; -&gt; &#25991;&#26412; -&gt; &#25991;&#20214;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">pickle.dump(), pickle.load(), cPickle</SPAN></P></DIV></DIV>