<H1 class=postTitle><A id=cb_post_title_url class=postTitle2 href="http://www.cnblogs.com/vamei/archive/2012/10/12/2721016.html">Python&#26631;&#20934;&#24211;09 &#24403;&#21069;&#36827;&#31243;&#20449;&#24687; (os&#21253;)</A> </H1>
<DIV class=clear></DIV>
<DIV class=postBody>
<DIV id=cnblogs_post_body>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#20316;&#32773;&#65306;Vamei &#20986;&#22788;&#65306;http://www.cnblogs.com/vamei &#27426;&#36814;&#36716;&#36733;&#65292;&#20063;&#35831;&#20445;&#30041;&#36825;&#27573;&#22768;&#26126;&#12290;&#35874;&#35874;&#65281;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&nbsp;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#25105;&#20204;&#22312;<A id=PostsList1_rpPosts_TitleUrl_0 href="http://www.cnblogs.com/vamei/archive/2012/10/10/2718229.html">Linux&#30340;&#27010;&#24565;&#19982;&#20307;&#31995;</A>&#65292;&#22810;&#27425;&#25552;&#21450;&#36827;&#31243;&#30340;&#37325;&#35201;&#24615;&#12290;Python&#30340;os&#21253;&#20013;&#26377;&#26597;&#35810;&#21644;&#20462;&#25913;<SPAN style="BACKGROUND-COLOR: #ffffff; COLOR: #ff0000">&#36827;&#31243;&#20449;&#24687;</SPAN>&#30340;&#20989;&#25968;&#12290;&#23398;&#20064;Python&#30340;&#36825;&#20123;&#24037;&#20855;&#20063;&#26377;&#21161;&#20110;&#29702;&#35299;Linux&#20307;&#31995;&#12290;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&nbsp;</SPAN></P>
<H3><SPAN style="FONT-FAMILY: courier new, courier"><SPAN style="FONT-FAMILY: courier new, courier">&#36827;&#31243;&#20449;&#24687;<BR></SPAN></SPAN></H3>
<P><SPAN style="FONT-FAMILY: courier new, courier">os&#21253;&#20013;&#30456;&#20851;&#20989;&#25968;&#22914;&#19979;&#65306;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier"><SPAN style="COLOR: #993300">uname()</SPAN> &#36820;&#22238;<SPAN style="COLOR: #ff0000">&#25805;&#20316;&#31995;&#32479;</SPAN>&#30456;&#20851;&#20449;&#24687;&#12290;&#31867;&#20284;&#20110;Linux&#19978;&#30340;<SPAN style="COLOR: #993300">uname</SPAN>&#21629;&#20196;&#12290;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier"><SPAN style="COLOR: #993300">umask()</SPAN> &#35774;&#32622;&#35813;&#36827;&#31243;&#21019;&#24314;&#25991;&#20214;&#26102;&#30340;&#26435;&#38480;mask&#12290;&#31867;&#20284;&#20110;Linux&#19978;&#30340;<SPAN style="COLOR: #800000">umask</SPAN>&#21629;&#20196;&#65292;&#35265;<A id=PostsList1_rpPosts_TitleUrl_11 href="http://www.cnblogs.com/vamei/archive/2012/09/09/2676792.html">Linux&#25991;&#20214;&#31649;&#29702;&#32972;&#26223;&#30693;&#35782;</A></SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&nbsp;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier"><SPAN style="COLOR: #993300">get*()</SPAN> &#26597;&#35810; (*&#30001;&#20197;&#19979;&#20195;&#26367;)</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&nbsp;&nbsp;&nbsp; uid, euid, resuid, gid, egid, resgid &#65306;<SPAN style="COLOR: #ff0000">&#26435;&#38480;</SPAN>&#30456;&#20851;&#65292;&#20854;&#20013;resuid&#20027;&#35201;&#29992;&#26469;&#36820;&#22238;saved UID&#12290;&#30456;&#20851;&#20171;&#32461;&#35265;<A id=PostsList1_rpPosts_TitleUrl_3 href="http://www.cnblogs.com/vamei/archive/2012/10/07/2713593.html">Linux&#29992;&#25143;&#19982;&#8220;&#26368;&#23567;&#26435;&#38480;&#8221;&#21407;&#21017;</A></SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&nbsp;&nbsp;&nbsp; pid, pgid, ppid, sid&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#65306;<SPAN style="COLOR: #ff0000">&#36827;&#31243;</SPAN>&#30456;&#20851;&#12290;&#30456;&#20851;&#20171;&#32461;&#35265;<A id=PostsList1_rpPosts_TitleUrl_4 href="http://www.cnblogs.com/vamei/archive/2012/10/07/2713023.html">Linux&#36827;&#31243;&#20851;&#31995;</A></SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&nbsp;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier"><SPAN style="COLOR: #993300">put*()</SPAN> &#35774;&#32622; (*&#30001;&#20197;&#19979;&#20195;&#26367;)</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&nbsp;&nbsp;&nbsp; euid, egid&#65306; &#29992;&#20110;<SPAN style="COLOR: #ff0000">&#26356;&#25913;euid<SPAN style="COLOR: #000000">&#65292;</SPAN>egid</SPAN>&#12290;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&nbsp;&nbsp;&nbsp; uid, gid&nbsp; &#65306; &#25913;&#21464;&#36827;&#31243;&#30340;uid, gid&#12290;&#21482;&#26377;<SPAN style="COLOR: #ff0000">super user</SPAN>&#25165;&#26377;&#26435;&#25913;&#21464;&#36827;&#31243;uid&#21644;gid (&#24847;&#21619;&#30528;&#35201;&#20197;<SPAN style="COLOR: #993300">$sudo python</SPAN>&#30340;&#26041;&#24335;&#36816;&#34892;Python)&#12290;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&nbsp;&nbsp;&nbsp; pgid, sid &#65306; &#25913;&#21464;&#36827;&#31243;&#25152;&#22312;&#30340;&#36827;&#31243;&#32452;(process group)&#21644;&#20250;&#35805;(session)&#12290;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&nbsp;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier"><SPAN style="COLOR: #993300">getenviron()</SPAN>&#65306;&#33719;&#24471;&#36827;&#31243;&#30340;&#29615;&#22659;&#21464;&#37327; </SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier"><SPAN style="COLOR: #993300">setenviron()</SPAN>&#65306;&#26356;&#25913;&#36827;&#31243;&#30340;&#29615;&#22659;&#21464;&#37327;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&nbsp;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#20363;1&#65292;&#36827;&#31243;&#30340;real UID&#21644;real GID</SPAN></P>
<DIV class=cnblogs_code><PRE><SPAN style="FONT-FAMILY: courier new, courier"><SPAN style="COLOR: #0000ff">import</SPAN><SPAN style="COLOR: #000000"> os<BR></SPAN><SPAN style="COLOR: #0000ff">print</SPAN><SPAN style="COLOR: #000000">(os.getuid())
</SPAN><SPAN style="COLOR: #0000ff">print</SPAN><SPAN style="COLOR: #000000">(os.getgid())</SPAN></SPAN></PRE></DIV>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#23558;&#19978;&#38754;&#30340;&#31243;&#24207;&#20445;&#23384;&#20026;py_id.py&#25991;&#20214;&#65292;&#20998;&#21035;&#29992;<SPAN style="COLOR: #993300">$python py_id.py</SPAN>&#21644;<SPAN style="COLOR: #993300">$sudo python py_id.py</SPAN>&#30475;&#19968;&#19979;&#36816;&#34892;&#32467;&#26524;</SPAN></P>
<P>&nbsp;</P>
<H3><SPAN style="FONT-FAMILY: courier new, courier">saved UID&#21644;saved GID</SPAN></H3>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#25105;&#20204;&#24076;&#26395;saved UID&#21644;saved GID&#22914;&#25105;&#20204;&#22312;<A href="http://www.cnblogs.com/vamei/archive/2012/10/07/2713593.html">Linux&#29992;&#25143;&#19982;&#8220;&#26368;&#23567;&#26435;&#38480;&#8221;&#21407;&#21017;</A>&#20013;&#25551;&#36848;&#30340;&#37027;&#26679;&#24037;&#20316;&#65292;&#20294;&#36825;&#24456;&#38590;&#12290;&#21407;&#22240;&#22312;&#20110;&#65292;&#24403;&#25105;&#20204;&#20889;&#19968;&#20010;Python&#33050;&#26412;&#21518;&#65292;&#25105;&#20204;<SPAN style="COLOR: #ff0000">&#23454;&#38469;&#36816;&#34892;&#30340;&#26159;python&#36825;&#20010;&#35299;&#37322;&#22120;</SPAN>&#65292;&#32780;&#19981;&#26159;Python&#33050;&#26412;&#25991;&#20214;&#12290;&#23545;&#27604;C&#65292;C&#35821;&#35328;&#30452;&#25509;&#36816;&#34892;&#30001;C&#35821;&#35328;&#32534;&#35793;&#25104;&#30340;&#25191;&#34892;&#25991;&#20214;&#12290;&#25105;&#20204;&#24517;&#39035;&#26356;&#25913;python&#35299;&#37322;&#22120;&#26412;&#36523;&#30340;&#26435;&#38480;&#26469;&#36816;&#29992;saved UID&#26426;&#21046;&#65292;&#28982;&#32780;&#36825;&#20040;&#20570;&#21448;&#26159;<SPAN style="COLOR: #ff0000">&#24322;&#24120;&#21361;&#38505;</SPAN>&#30340;&#12290;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#27604;&#22914;&#35828;&#65292;&#25105;&#20204;&#30340;python&#25191;&#34892;&#25991;&#20214;&#20026;/usr/bin/python (&#20320;&#21487;&#20197;&#36890;&#36807;<SPAN style="COLOR: #800000">$which python</SPAN>&#33719;&#30693;)</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#25105;&#20204;&#20808;&#30475;&#19968;&#19979;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier; COLOR: #800000">$ls -l /usr/bin/python</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#30340;&#32467;&#26524;:</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">-rwxr-xr-x root root</SPAN></P>
<P>&nbsp;</P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#25105;&#20204;&#20462;&#25913;&#26435;&#38480;&#20197;&#35774;&#32622;set UID&#21644;set GID&#20301; (&#21442;&#32771;<SPAN style="FONT-FAMILY: courier new, courier"><A href="http://www.cnblogs.com/vamei/archive/2012/10/07/2713593.html">Linux&#29992;&#25143;&#19982;&#8220;&#26368;&#23567;&#26435;&#38480;&#8221;&#21407;&#21017;</A></SPAN>)<BR></SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier; COLOR: #800000">$sudo chmod 6755 /usr/bin/python</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">/usr/bin/python&#30340;&#26435;&#38480;&#25104;&#20026;:</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">-rwsr-sr-x root root</SPAN></P>
<P>&nbsp;</P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#38543;&#21518;&#65292;&#25105;&#20204;&#36816;&#34892;&#25991;&#20214;&#19979;&#38754;test.py&#25991;&#20214;&#65292;&#36825;&#20010;&#25991;&#20214;&#21487;&#20197;&#26159;&#30001;&#26222;&#36890;&#29992;&#25143;vamei&#25152;&#26377;:</SPAN></P>
<DIV class=cnblogs_code><PRE><SPAN style="FONT-FAMILY: courier new, courier"><SPAN style="COLOR: #0000ff">import</SPAN><SPAN style="COLOR: #000000"> os
</SPAN><SPAN style="COLOR: #0000ff">print</SPAN>(os.getresuid())</SPAN></PRE></DIV>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#25105;&#20204;&#24471;&#21040;&#32467;&#26524;:</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">(1000, 0, 0)</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#19978;&#38754;&#20998;&#21035;&#26159;UID&#65292;EUID&#65292;saved UID&#12290;&#25105;&#20204;&#21482;&#29992;&#25191;&#34892;&#19968;&#20010;&#30001;&#26222;&#36890;&#29992;&#25143;&#25317;&#26377;&#30340;python&#33050;&#26412;&#65292;&#23601;&#21487;&#20197;&#24471;&#21040;super user&#30340;&#26435;&#38480;&#65281;&#25152;&#20197;&#65292;&#36825;&#26679;&#20570;&#26159;&#26497;&#24230;&#21361;&#38505;&#30340;&#65292;&#25105;&#20204;&#30456;&#24403;&#20110;&#20132;&#20986;&#20102;&#31995;&#32479;&#30340;&#20445;&#25252;&#31995;&#32479;&#12290;&#24819;&#20687;&#19968;&#19979;Python&#24378;&#22823;&#30340;&#21151;&#33021;&#65292;&#21035;&#20154;&#29616;&#22312;&#21487;&#20197;&#29992;&#36825;&#20123;&#24378;&#22823;&#30340;&#21151;&#33021;&#20316;&#20026;&#25915;&#20987;&#20320;&#30340;&#27494;&#22120;&#20102;&#65281;&#20351;&#29992;&#19979;&#38754;&#21629;&#20196;&#26469;&#24674;&#22797;&#21040;&#20174;&#21069;:</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier; COLOR: #800000">$sudo chmod 0755 /usr/bin/python</SPAN></P>
<P>&nbsp;</P>
<P>&#20851;&#20110;&#33050;&#26412;&#25991;&#20214;&#30340;saved UID/GID&#65292;&#26356;&#21152;&#35814;&#32454;&#30340;&#35752;&#35770;&#35265;</P>
<P><SPAN style="FONT-FAMILY: courier new, courier"><A href="http://www.faqs.org/faqs/unix-faq/faq/part4/section-7.html">http://www.faqs.org/faqs/unix-faq/faq/part4/section-7.html</A></SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&nbsp;</SPAN></P>
<H3><SPAN style="FONT-FAMILY: courier new, courier">&#24635;&#32467;</SPAN></H3>
<P><SPAN style="FONT-FAMILY: courier new, courier">get*, set*</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">umask(), uname()</SPAN></P></DIV></DIV>