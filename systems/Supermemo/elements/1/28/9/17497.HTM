<H1 class=postTitle><A id=cb_post_title_url class=postTitle2 href="http://www.cnblogs.com/vamei/archive/2012/10/06/2712683.html">Python&#26631;&#20934;&#24211;07 &#20449;&#21495; (signal&#21253;&#65292;&#37096;&#20998;os&#21253;)</A> </H1>
<DIV class=clear></DIV>
<DIV class=postBody>
<DIV id=cnblogs_post_body>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#20316;&#32773;&#65306;Vamei &#20986;&#22788;&#65306;http://www.cnblogs.com/vamei &#27426;&#36814;&#36716;&#36733;&#65292;&#20063;&#35831;&#20445;&#30041;&#36825;&#27573;&#22768;&#26126;&#12290;&#35874;&#35874;&#65281;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&nbsp;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#22312;&#20102;&#35299;&#20102;<A href="http://www.cnblogs.com/vamei/archive/2012/10/04/2711818.html">Linux&#30340;&#20449;&#21495;&#22522;&#30784;</A>&#20043;&#21518;&#65292;Python&#26631;&#20934;&#24211;&#20013;&#30340;signal&#21253;&#23601;&#24456;&#23481;&#26131;&#23398;&#20064;&#21644;&#29702;&#35299;&#12290;signal&#21253;&#36127;&#36131;&#22312;Python&#31243;&#24207;&#20869;&#37096;&#22788;&#29702;&#20449;&#21495;&#65292;&#20856;&#22411;&#30340;&#25805;&#20316;&#21253;&#25324;&#39044;&#35774;&#20449;&#21495;&#22788;&#29702;&#20989;&#25968;&#65292;&#26242;&#20572;&#24182;&#31561;&#24453;&#20449;&#21495;&#65292;&#20197;&#21450;&#23450;&#26102;&#21457;&#20986;SIGALRM&#31561;&#12290;&#35201;&#27880;&#24847;&#65292;signal&#21253;&#20027;&#35201;&#26159;&#38024;&#23545;UNIX&#24179;&#21488;(&#27604;&#22914;Linux, MAC OS)&#65292;&#32780;Windows&#20869;&#26680;&#20013;&#30001;&#20110;&#23545;&#20449;&#21495;&#26426;&#21046;&#30340;&#25903;&#25345;&#19981;&#20805;&#20998;&#65292;&#25152;&#20197;&#22312;Windows&#19978;&#30340;Python&#19981;&#33021;&#21457;&#25381;&#20449;&#21495;&#31995;&#32479;&#30340;&#21151;&#33021;&#12290;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&nbsp;</SPAN></P>
<H3><SPAN style="FONT-FAMILY: courier new, courier">&#23450;&#20041;&#20449;&#21495;&#21517;</SPAN></H3>
<P><SPAN style="FONT-FAMILY: courier new, courier">signal&#21253;&#23450;&#20041;&#20102;&#21508;&#20010;&#20449;&#21495;&#21517;&#21450;&#20854;&#23545;&#24212;&#30340;&#25972;&#25968;&#65292;&#27604;&#22914;</SPAN></P>
<DIV class=cnblogs_code><PRE><SPAN style="FONT-FAMILY: courier new, courier"><SPAN style="COLOR: #0000ff">import</SPAN><SPAN style="COLOR: #000000"> signal
</SPAN><SPAN style="COLOR: #0000ff">print</SPAN><SPAN style="COLOR: #000000"> signal.SIGALRM
</SPAN><SPAN style="COLOR: #0000ff">print</SPAN> signal.SIGCONT</SPAN></PRE></DIV>
<P><SPAN style="FONT-FAMILY: courier new, courier">Python&#25152;&#29992;&#30340;&#20449;&#21495;&#21517;&#21644;Linux&#19968;&#33268;&#12290;&#20320;&#21487;&#20197;&#36890;&#36807;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier; COLOR: #993300">$man 7 signal</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#26597;&#35810;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&nbsp;</SPAN></P>
<H3><SPAN style="FONT-FAMILY: courier new, courier">&#39044;&#35774;&#20449;&#21495;&#22788;&#29702;&#20989;&#25968;</SPAN></H3>
<P><SPAN style="FONT-FAMILY: courier new, courier">signal&#21253;&#30340;&#26680;&#24515;&#26159;&#20351;&#29992;<SPAN style="COLOR: #ff0000">signal.signal()</SPAN>&#20989;&#25968;&#26469;<SPAN style="COLOR: #ff0000">&#39044;&#35774;(register)&#20449;&#21495;&#22788;&#29702;&#20989;&#25968;</SPAN>&#65292;&#22914;&#19979;&#25152;&#31034;&#65306;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier; COLOR: #993300">singnal.signal(signalnum, handler)</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">signalnum&#20026;&#26576;&#20010;&#20449;&#21495;&#65292;handler&#20026;&#35813;&#20449;&#21495;&#30340;&#22788;&#29702;&#20989;&#25968;&#12290;&#25105;&#20204;&#22312;&#20449;&#21495;&#22522;&#30784;&#37324;&#25552;&#21040;&#65292;&#36827;&#31243;&#21487;&#20197;&#26080;&#35270;&#20449;&#21495;&#65292;&#21487;&#20197;&#37319;&#21462;&#40664;&#35748;&#25805;&#20316;&#65292;&#36824;&#21487;&#20197;&#33258;&#23450;&#20041;&#25805;&#20316;&#12290;&#24403;handler&#20026;<SPAN style="COLOR: #ff0000">signal.SIG_IGN</SPAN>&#26102;&#65292;&#20449;&#21495;&#34987;&#26080;&#35270;(ignore)&#12290;&#24403;handler&#20026;<SPAN style="COLOR: #ff0000">singal.SIG_DFL</SPAN>&#65292;&#36827;&#31243;&#37319;&#21462;&#40664;&#35748;&#25805;&#20316;(default)&#12290;&#24403;handler&#20026;&#19968;&#20010;&#20989;&#25968;&#21517;&#26102;&#65292;&#36827;&#31243;&#37319;&#21462;&#20989;&#25968;&#20013;&#23450;&#20041;&#30340;&#25805;&#20316;&#12290;</SPAN></P>
<DIV class=cnblogs_code>
<DIV class=cnblogs_code_toolbar><SPAN class=cnblogs_code_copy><A title=&#22797;&#21046;&#20195;&#30721; void(0);"><IMG alt=&#22797;&#21046;&#20195;&#30721; src="http://common.cnblogs.com/images/copycode.gif"></A></SPAN></DIV><PRE><SPAN style="FONT-FAMILY: courier new, courier"><SPAN style="COLOR: #0000ff">import</SPAN><SPAN style="COLOR: #000000"> signal
</SPAN><SPAN style="COLOR: #008000">#</SPAN><SPAN style="COLOR: #008000"> Define signal handler function</SPAN>
<SPAN style="COLOR: #0000ff">def</SPAN><SPAN style="COLOR: #000000"> myHandler(signum, frame):
    </SPAN><SPAN style="COLOR: #0000ff">print</SPAN>(<SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #800000">I received: </SPAN><SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #000000">, signum)

</SPAN><SPAN style="COLOR: #008000">#</SPAN><SPAN style="COLOR: #008000"> register signal.SIGTSTP's handler </SPAN><SPAN style="COLOR: #000000">
signal.signal(signal.SIGTSTP, myHandler)
signal.pause()<BR>print(<SPAN style="COLOR: #993300">'End of Signal Demo'<SPAN style="COLOR: #000000">)</SPAN></SPAN></SPAN></SPAN></PRE>
<DIV class=cnblogs_code_toolbar><SPAN class=cnblogs_code_copy><A title=&#22797;&#21046;&#20195;&#30721; void(0);"><IMG alt=&#22797;&#21046;&#20195;&#30721; src="http://common.cnblogs.com/images/copycode.gif"></A></SPAN></DIV></DIV>
<P><SPAN style="FONT-FAMILY: courier new, courier">&nbsp;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#22312;&#20027;&#31243;&#24207;&#20013;&#65292;&#25105;&#20204;&#39318;&#20808;&#20351;&#29992;<SPAN style="COLOR: #ff0000">signal.signal()</SPAN>&#20989;&#25968;&#26469;<SPAN style="COLOR: #ff0000">&#39044;&#35774;</SPAN>&#20449;&#21495;&#22788;&#29702;&#20989;&#25968;&#12290;&#28982;&#21518;&#25105;&#20204;&#25191;&#34892;<SPAN style="COLOR: #ff0000">signal.pause()</SPAN>&#26469;<SPAN style="COLOR: #ff0000">&#35753;&#35813;&#36827;&#31243;&#26242;&#20572;&#20197;&#31561;&#24453;&#20449;&#21495;</SPAN>&#65292;&#20197;&#31561;&#24453;&#20449;&#21495;&#12290;&#24403;&#20449;&#21495;SIGUSR1&#34987;&#20256;&#36882;&#32473;&#35813;&#36827;&#31243;&#26102;&#65292;&#36827;&#31243;&#20174;&#26242;&#20572;&#20013;&#24674;&#22797;&#65292;&#24182;&#26681;&#25454;&#39044;&#35774;&#65292;&#25191;&#34892;SIGTSTP&#30340;&#20449;&#21495;&#22788;&#29702;&#20989;&#25968;myHandler()&#12290;myHandler&#30340;&#20004;&#20010;&#21442;&#25968;&#19968;&#20010;&#29992;&#26469;&#35782;&#21035;&#20449;&#21495;(signum)&#65292;&#21478;&#19968;&#20010;&#29992;&#26469;&#33719;&#24471;&#20449;&#21495;&#21457;&#29983;&#26102;&#65292;&#36827;&#31243;&#26632;&#30340;&#29366;&#20917;(stack frame)&#12290;&#36825;&#20004;&#20010;&#21442;&#25968;&#37117;&#26159;&#30001;signal.singnal()&#20989;&#25968;&#26469;&#20256;&#36882;&#30340;&#12290;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#19978;&#38754;&#30340;&#31243;&#24207;&#21487;&#20197;&#20445;&#23384;&#22312;&#19968;&#20010;&#25991;&#20214;&#20013;(&#27604;&#22914;test.py)&#12290;&#25105;&#20204;&#20351;&#29992;&#22914;&#19979;&#26041;&#27861;&#36816;&#34892;:</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier; COLOR: #993300">$python test.py</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#20197;&#20415;&#35753;&#36827;&#31243;&#36816;&#34892;&#12290;&#24403;&#31243;&#24207;&#36816;&#34892;&#21040;signal.pause()&#30340;&#26102;&#20505;&#65292;&#36827;&#31243;&#26242;&#20572;&#24182;&#31561;&#24453;&#20449;&#21495;&#12290;&#27492;&#26102;&#65292;&#36890;&#36807;&#25353;&#19979;<SPAN style="COLOR: #993300">CTRL+Z</SPAN>&#21521;&#35813;&#36827;&#31243;&#21457;&#36865;<SPAN style="COLOR: #ff0000">SIGTSTP</SPAN>&#20449;&#21495;&#12290;&#25105;&#20204;&#21487;&#20197;&#30475;&#21040;&#65292;&#36827;&#31243;&#25191;&#34892;&#20102;myHandle()&#20989;&#25968;, &#38543;&#21518;&#36820;&#22238;&#20027;&#31243;&#24207;&#65292;&#32487;&#32493;&#25191;&#34892;&#12290;(&#24403;&#28982;&#65292;&#20063;&#21487;&#20197;&#29992;<SPAN style="COLOR: #993300">$ps</SPAN>&#26597;&#35810;process ID, &#20877;&#20351;&#29992;<SPAN style="COLOR: #993300">$kill</SPAN>&#26469;&#21457;&#20986;&#20449;&#21495;&#12290;)</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">(&#36827;&#31243;&#24182;&#19981;&#19968;&#23450;&#35201;&#20351;&#29992;signal.pause()&#26242;&#20572;&#20197;&#31561;&#24453;&#20449;&#21495;&#65292;&#23427;&#20063;&#21487;&#20197;&#22312;&#36827;&#34892;&#24037;&#20316;&#20013;&#25509;&#21463;&#20449;&#21495;&#65292;&#27604;&#22914;&#23558;&#19978;&#38754;&#30340;signal.pause()&#25913;&#20026;&#19968;&#20010;&#38656;&#35201;&#38271;&#26102;&#38388;&#24037;&#20316;&#30340;&#24490;&#29615;&#12290;)</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&nbsp;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#25105;&#20204;&#21487;&#20197;&#26681;&#25454;&#33258;&#24049;&#30340;&#38656;&#35201;&#26356;&#25913;myHandler()&#20013;&#30340;&#25805;&#20316;&#65292;&#20197;&#38024;&#23545;&#19981;&#21516;&#30340;&#20449;&#21495;&#23454;&#29616;&#20010;&#24615;&#21270;&#30340;&#22788;&#29702;&#12290;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&nbsp;</SPAN></P>
<H3><SPAN style="FONT-FAMILY: courier new, courier">&#23450;&#26102;&#21457;&#20986;SIGALRM&#20449;&#21495;</SPAN></H3>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#19968;&#20010;&#26377;&#29992;&#30340;&#20989;&#25968;&#26159;<SPAN style="COLOR: #ff0000">signal.alarm()<SPAN style="COLOR: #000000">&#65292;</SPAN></SPAN>&#23427;&#34987;&#29992;&#20110;&#22312;<SPAN style="COLOR: #ff0000">&#19968;&#23450;&#26102;&#38388;&#20043;&#21518;</SPAN>&#65292;&#21521;&#36827;&#31243;&#33258;&#36523;&#21457;&#36865;<SPAN style="COLOR: #ff0000">SIGALRM</SPAN>&#20449;&#21495;:</SPAN></P>
<DIV class=cnblogs_code>
<DIV class=cnblogs_code_toolbar><SPAN class=cnblogs_code_copy><A title=&#22797;&#21046;&#20195;&#30721; void(0);"><IMG alt=&#22797;&#21046;&#20195;&#30721; src="http://common.cnblogs.com/images/copycode.gif"></A></SPAN></DIV><PRE><SPAN style="FONT-FAMILY: courier new, courier"><SPAN style="COLOR: #0000ff">import</SPAN><SPAN style="COLOR: #000000"> signal
</SPAN><SPAN style="COLOR: #008000">#</SPAN><SPAN style="COLOR: #008000"> Define signal handler function</SPAN>
<SPAN style="COLOR: #0000ff">def</SPAN><SPAN style="COLOR: #000000"> myHandler(signum, frame):
    </SPAN><SPAN style="COLOR: #0000ff">print</SPAN>(<SPAN style="COLOR: #993300">"</SPAN><SPAN style="COLOR: #800000"><SPAN style="COLOR: #993300">N</SPAN>ow, i<SPAN style="COLOR: #993300">t</SPAN></SPAN><SPAN style="COLOR: #993300">'s the time</SPAN><SPAN style="COLOR: #800000"><SPAN style="COLOR: #993300">"</SPAN><SPAN style="COLOR: #000000">)
</SPAN></SPAN><SPAN style="COLOR: #000000">    exit()

</SPAN><SPAN style="COLOR: #008000">#</SPAN><SPAN style="COLOR: #008000"> register signal.SIGALRM's handler </SPAN>
<SPAN style="COLOR: #000000">signal.signal(signal.SIGALRM, myHandler)
signal.alarm(</SPAN>5<SPAN style="COLOR: #000000">)
</SPAN><SPAN style="COLOR: #0000ff">while</SPAN><SPAN style="COLOR: #000000"> True:
    </SPAN><SPAN style="COLOR: #0000ff">print</SPAN>(<SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #800000">not yet</SPAN><SPAN style="COLOR: #800000">'<SPAN style="COLOR: #000000">)</SPAN></SPAN></SPAN></PRE>
<DIV class=cnblogs_code_toolbar><SPAN class=cnblogs_code_copy><A title=&#22797;&#21046;&#20195;&#30721; void(0);"><IMG alt=&#22797;&#21046;&#20195;&#30721; src="http://common.cnblogs.com/images/copycode.gif"></A></SPAN></DIV></DIV>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#25105;&#20204;&#36825;&#37324;&#29992;&#20102;&#19968;&#20010;&#26080;&#38480;&#24490;&#29615;&#20197;&#20415;&#35753;&#36827;&#31243;&#25345;&#32493;&#36816;&#34892;&#12290;&#22312;signal.alarm()&#25191;&#34892;5&#31186;&#20043;&#21518;&#65292;&#36827;&#31243;&#23558;&#21521;&#33258;&#24049;&#21457;&#20986;SIGALRM&#20449;&#21495;&#65292;&#38543;&#21518;&#65292;&#20449;&#21495;&#22788;&#29702;&#20989;&#25968;myHandler&#24320;&#22987;&#25191;&#34892;&#12290;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&nbsp;</SPAN></P>
<H3><SPAN style="FONT-FAMILY: courier new, courier">&#21457;&#36865;&#20449;&#21495;</SPAN></H3>
<P><SPAN style="FONT-FAMILY: courier new, courier">signal&#21253;&#30340;&#26680;&#24515;&#26159;&#35774;&#32622;&#20449;&#21495;&#22788;&#29702;&#20989;&#25968;&#12290;&#38500;&#20102;signal.alarm()&#21521;&#33258;&#36523;&#21457;&#36865;&#20449;&#21495;&#20043;&#22806;&#65292;&#24182;&#27809;&#26377;&#20854;&#20182;&#21457;&#36865;&#20449;&#21495;&#30340;&#21151;&#33021;&#12290;&#20294;&#22312;os&#21253;&#20013;&#65292;&#26377;&#31867;&#20284;&#20110;linux&#30340;kill&#21629;&#20196;&#30340;&#20989;&#25968;&#65292;&#20998;&#21035;&#20026;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier; COLOR: #993300">os.kill(pid, sid)</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier; COLOR: #993300">os.killpg(pgid, sid)</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#20998;&#21035;&#21521;&#36827;&#31243;&#21644;&#36827;&#31243;&#32452;(&#35265;<A href="http://www.cnblogs.com/vamei/archive/2012/10/07/2713023.html">Linux&#36827;&#31243;&#20851;&#31995;</A>)&#21457;&#36865;&#20449;&#21495;&#12290;sid&#20026;&#20449;&#21495;&#25152;&#23545;&#24212;&#30340;&#25972;&#25968;&#25110;&#32773;singal.SIG*&#12290;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&nbsp;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#23454;&#38469;&#19978;signal, pause&#65292;kill&#21644;alarm&#37117;&#26159;Linux&#24212;&#29992;&#32534;&#31243;&#20013;&#24120;&#35265;&#30340;C&#24211;&#20989;&#25968;&#65292;&#22312;&#36825;&#37324;&#65292;&#25105;&#20204;&#21482;&#19981;&#36807;&#26159;&#29992;Python&#35821;&#35328;&#26469;&#23454;&#29616;&#20102;&#19968;&#19979;&#12290;&#23454;&#38469;&#19978;&#65292;Python &#30340;&#35299;&#37322;&#22120;&#26159;&#20351;&#29992;C&#35821;&#35328;&#26469;&#32534;&#20889;&#30340;&#65292;&#25152;&#20197;&#26377;&#27492;&#30456;&#20284;&#24615;&#20063;&#24182;&#19981;&#24847;&#22806;&#12290;&#27492;&#22806;&#65292;&#22312;Python 3.4&#20013;&#65292;signal&#21253;&#34987;&#22686;&#24378;&#65292;&#20449;&#21495;&#38459;&#22622;&#31561;&#21151;&#33021;&#34987;&#21152;&#20837;&#21040;&#35813;&#21253;&#20013;&#12290;&#25105;&#20204;&#26242;&#26102;&#19981;&#28145;&#20837;&#21040;&#35813;&#21253;&#20013;&#12290;</SPAN></P>
<P>&nbsp;</P>
<H3><SPAN style="FONT-FAMILY: courier new, courier">&#24635;&#32467;</SPAN></H3>
<P><SPAN style="FONT-FAMILY: courier new, courier">signal.SIG*</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">signal.signal()</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">signal.pause()</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">signal.alarm()</SPAN></P></DIV></DIV>