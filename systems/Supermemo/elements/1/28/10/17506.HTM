<H1 class=postTitle><A id=cb_post_title_url class=postTitle2 href="http://www.cnblogs.com/vamei/archive/2012/10/31/2747885.html">Python&#32593;&#32476;02 Python&#26381;&#21153;&#22120;&#36827;&#21270;</A> </H1>
<DIV class=clear></DIV>
<DIV class=postBody>
<DIV id=cnblogs_post_body>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#20316;&#32773;&#65306;Vamei &#20986;&#22788;&#65306;http://www.cnblogs.com/vamei &#27426;&#36814;&#36716;&#36733;&#65292;&#20063;&#35831;&#20445;&#30041;&#36825;&#27573;&#22768;&#26126;&#12290;&#35874;&#35874;&#65281;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier"><SPAN style="FONT-FAMILY: courier new, courier"><SPAN style="COLOR: #ff0000">**&#27880;&#24847;&#65292;&#22312;Python 3.x&#20013;&#65292;BaseHTTPServer, SimpleHTTPServer, CGIHTTPServer&#25972;&#21512;&#21040;http.server&#21253;&#65292;SocketServer&#25913;&#21517;&#20026;socketserver&#65292;&#35831;&#27880;&#24847;&#26597;&#38405;&#23448;&#26041;&#25991;&#26723;&#12290;</SPAN></SPAN></SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#22312;&#19978;&#19968;&#31687;&#25991;&#31456;&#20013;(<A href="http://www.cnblogs.com/vamei/archive/2012/10/30/2744955.html">&#29992;socket&#20889;&#19968;&#20010;Python&#26381;&#21153;&#22120;</A>)&#65292;&#25105;&#20351;&#29992;socket&#25509;&#21475;&#65292;&#21046;&#20316;&#20102;&#19968;&#20010;&#22788;&#29702;HTTP&#35831;&#27714;&#30340;Python&#26381;&#21153;&#22120;&#12290;&#20219;&#20309;&#19968;&#21488;&#35013;&#26377;&#25805;&#20316;&#31995;&#32479;&#21644;Python&#35299;&#37322;&#22120;&#30340;&#35745;&#31639;&#26426;&#65292;&#37117;&#21487;&#20197;&#20316;&#20026;HTTP&#26381;&#21153;&#22120;&#20351;&#29992;&#12290;&#25105;&#23558;&#22312;&#36825;&#37324;&#19981;&#26029;&#25913;&#20889;&#19978;&#19968;&#31687;&#25991;&#31456;&#20013;&#30340;&#31243;&#24207;&#65292;&#24341;&#20837;&#26356;&#39640;&#32423;&#30340;Python&#21253;&#65292;&#20197;&#20889;&#20986;&#26356;&#25104;&#29087;&#30340;Python&#26381;&#21153;&#22120;&#12290;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&nbsp;</SPAN></P>
<H3><SPAN style="FONT-FAMILY: courier new, courier">&#25903;&#25345;POST<BR></SPAN></H3>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#25105;&#39318;&#20808;&#22686;&#21152;&#35813;&#26381;&#21153;&#22120;&#30340;&#21151;&#33021;&#12290;&#36825;&#37324;&#22686;&#28155;&#20102;&#34920;&#26684;&#65292;&#20197;&#21450;&#22788;&#29702;&#34920;&#26684;&#25552;&#20132;&#25968;&#25454;&#30340;"POST"&#26041;&#27861;&#12290;&#22914;&#26524;&#20320;&#24050;&#32463;&#35835;&#36807;<A href="http://www.cnblogs.com/vamei/archive/2012/10/30/2744955.html">&#29992;socket&#20889;&#19968;&#20010;Python&#26381;&#21153;&#22120;</A>&#65292;&#20250;&#21457;&#29616;&#36825;&#37324;&#21482;&#26159;&#22686;&#21152;&#24456;&#23569;&#30340;&#19968;&#28857;&#20869;&#23481;&#12290;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier"><SPAN style="COLOR: #ff0000">&#21407;&#22987;&#31243;&#24207;</SPAN>:</SPAN></P>
<DIV class=cnblogs_code>
<DIV class=cnblogs_code_toolbar><SPAN class=cnblogs_code_copy><A title=&#22797;&#21046;&#20195;&#30721; void(0);"><IMG alt=&#22797;&#21046;&#20195;&#30721; src="http://common.cnblogs.com/images/copycode.gif"></A></SPAN></DIV><PRE><SPAN style="FONT-FAMILY: courier new, courier"><SPAN style="COLOR: #008000">#</SPAN><SPAN style="COLOR: #008000"> Written by Vamei</SPAN><SPAN style="COLOR: #008000">
#</SPAN><SPAN style="COLOR: #008000"> A messy HTTP server based on TCP socket </SPAN>

<SPAN style="COLOR: #0000ff">import</SPAN><SPAN style="COLOR: #000000"> socket
<SPAN style="COLOR: #008000"><BR>#</SPAN> <SPAN style="COLOR: #008000">Address</SPAN>
HOST </SPAN>= <SPAN style="COLOR: #800000">''</SPAN><SPAN style="COLOR: #000000">
PORT </SPAN>= 8000<SPAN style="COLOR: #000000">

text_content </SPAN>= <SPAN style="COLOR: #800000">'''</SPAN><SPAN style="COLOR: #800000">
HTTP/1.x 200 OK  
Content-Type: text/html

&lt;head&gt;
&lt;title&gt;WOW&lt;/title&gt;
&lt;/head&gt;
&lt;html&gt;
&lt;p&gt;Wow, Python Server&lt;/p&gt;
&lt;IMG src="test.jpg"/&gt;
&lt;form name="input" action="/" method="post"&gt;
First name:&lt;input type="text" name="firstname"&gt;&lt;br&gt;
&lt;input type="submit" value="Submit"&gt;
&lt;/form&gt; 
&lt;/html&gt;
</SPAN><SPAN style="COLOR: #800000">'''</SPAN><SPAN style="COLOR: #000000">

f </SPAN>= open(<SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #800000">test.jpg</SPAN><SPAN style="COLOR: #800000">'</SPAN>,<SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #800000">rb</SPAN><SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #000000">)
pic_content </SPAN>= <SPAN style="COLOR: #800000">'''</SPAN><SPAN style="COLOR: #800000">
HTTP/1.x 200 OK  
Content-Type: image/jpg

</SPAN><SPAN style="COLOR: #800000">'''</SPAN><SPAN style="COLOR: #000000">
pic_content </SPAN>= pic_content +<SPAN style="COLOR: #000000"> f.read()

<SPAN style="COLOR: #008000"># Configure socket</SPAN>
s    </SPAN>=<SPAN style="COLOR: #000000"> socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.bind((HOST, PORT))
<BR><SPAN style="COLOR: #008000"># Serve forever</SPAN>
</SPAN><SPAN style="COLOR: #0000ff">while</SPAN><SPAN style="COLOR: #000000"> True:
    s.listen(</SPAN>3<SPAN style="COLOR: #000000">)
    conn, addr </SPAN>=<SPAN style="COLOR: #000000"> s.accept()                    
    request    </SPAN>= conn.recv(1024)         <SPAN style="COLOR: #008000">#</SPAN><SPAN style="COLOR: #008000"> 1024 is the receiving buffer size</SPAN>
    method     = request.split(<SPAN style="COLOR: #800000">'</SPAN> <SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #000000">)[0]
    src        </SPAN>= request.split(<SPAN style="COLOR: #800000">'</SPAN> <SPAN style="COLOR: #800000">'</SPAN>)[1<SPAN style="COLOR: #000000">]

    </SPAN><SPAN style="COLOR: #0000ff">print</SPAN> <SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #800000">Connected by</SPAN><SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #000000">, addr
    </SPAN><SPAN style="COLOR: #0000ff">print</SPAN> <SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #800000">Request is:</SPAN><SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #000000">, request
<BR>    <SPAN style="COLOR: #008000"># if GET method request</SPAN>
    </SPAN><SPAN style="COLOR: #0000ff">if</SPAN> method == <SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #800000">GET</SPAN><SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #000000">:<BR>        <SPAN style="COLOR: #008000"># if ULR is /test.jpg</SPAN>
        </SPAN><SPAN style="COLOR: #0000ff">if</SPAN> src == <SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #800000">/test.jpg</SPAN><SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #000000">:
            content </SPAN>=<SPAN style="COLOR: #000000"> pic_content
        </SPAN><SPAN style="COLOR: #0000ff">else</SPAN>: content =<SPAN style="COLOR: #000000"> text_content<BR>        <SPAN style="COLOR: #008000"># send message</SPAN>
        conn.sendall(content)
    <SPAN style="COLOR: #008000"># if POST method request</SPAN>
    </SPAN><SPAN style="COLOR: #0000ff">if</SPAN> method == <SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #800000">POST</SPAN><SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #000000">:
        form </SPAN>= request.split(<SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #800000">\r\n</SPAN><SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #000000">)
        idx </SPAN>= form.index(<SPAN style="COLOR: #800000">''</SPAN>)             <SPAN style="COLOR: #008000">#</SPAN><SPAN style="COLOR: #008000"> Find the empty line</SPAN>
        entry = form[idx:]               <SPAN style="COLOR: #008000">#</SPAN><SPAN style="COLOR: #008000"> Main content of the request</SPAN>
<SPAN style="COLOR: #000000">
        value </SPAN>= entry[-1].split(<SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #800000">=</SPAN><SPAN style="COLOR: #800000">'</SPAN>)[-1<SPAN style="COLOR: #000000">]
        conn.sendall(text_content </SPAN>+ <SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #800000">\n &lt;p&gt;</SPAN><SPAN style="COLOR: #800000">'</SPAN> + value + <SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #800000">&lt;/p&gt;</SPAN><SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #000000">)
        </SPAN><SPAN style="COLOR: #008000">#</SPAN><SPAN style="COLOR: #008000">#####</SPAN>
        <SPAN style="COLOR: #008000">#</SPAN><SPAN style="COLOR: #008000"> More operations, such as put the form into database</SPAN>
        <SPAN style="COLOR: #008000">#</SPAN><SPAN style="COLOR: #008000"> ...</SPAN>
        <SPAN style="COLOR: #008000">#</SPAN><SPAN style="COLOR: #008000">#####<BR>    # close connection</SPAN>
    conn.close()</SPAN></PRE>
<DIV class=cnblogs_code_toolbar><SPAN class=cnblogs_code_copy><A title=&#22797;&#21046;&#20195;&#30721; void(0);"><IMG alt=&#22797;&#21046;&#20195;&#30721; src="http://common.cnblogs.com/images/copycode.gif"></A></SPAN></DIV></DIV>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#26381;&#21153;&#22120;&#36827;&#34892;&#30340;&#25805;&#20316;&#24456;&#31616;&#21333;&#65292;&#21363;&#20174;POST&#35831;&#27714;&#20013;&#25552;&#21462;&#25968;&#25454;&#65292;&#20877;&#26174;&#31034;&#22312;&#23631;&#24149;&#19978;&#12290;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#36816;&#34892;&#19978;&#38754;Python&#26381;&#21153;&#22120;&#65292;&#20687;&#19978;&#19968;&#31687;&#25991;&#31456;&#37027;&#26679;&#65292;&#20351;&#29992;&#19968;&#20010;&#27983;&#35272;&#22120;&#25171;&#24320;&#12290;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&nbsp;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier"><IMG style="DISPLAY: block; MARGIN-LEFT: auto; MARGIN-RIGHT: auto" alt="" src="http://pic002.cnblogs.com/images/2012/413416/2012103117264627.png" width=628 height=585 jQuery17020710119325884568="1"></SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&nbsp;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#39029;&#38754;&#26032;&#22686;&#20102;&#34920;&#26684;&#21644;&#25552;&#20132;(submit)&#25353;&#38062;&#12290;&#22312;&#34920;&#26684;&#20013;&#36755;&#20837;aa&#24182;&#25552;&#20132;&#65292;&#39029;&#38754;&#26174;&#31034;&#20986;aa&#12290;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&nbsp;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier"><SPAN>&#25105;&#19979;&#19968;&#27493;&#35201;&#29992;&#19968;&#20123;&#39640;&#32423;&#21253;&#65292;&#26469;&#31616;&#21270;&#20043;&#21069;&#30340;&#20195;&#30721;&#12290;</SPAN></SPAN></P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<H3><SPAN style="FONT-FAMILY: courier new, courier">&#20351;&#29992;SocketServer</SPAN></H3>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#39318;&#20808;&#20351;&#29992;SocketServer&#21253;&#26469;&#26041;&#20415;&#30340;&#26550;&#35774;&#26381;&#21153;&#22120;&#12290;&#22312;&#19978;&#38754;&#20351;&#29992;socket&#30340;&#36807;&#31243;&#20013;&#65292;&#25105;&#20204;<SPAN style="COLOR: #ff0000">&#20808;&#35774;&#32622;&#20102;socket&#30340;&#31867;&#22411;&#65292;&#28982;&#21518;&#20381;&#27425;&#35843;&#29992;bind(),listen(),accept()&#65292;&#26368;&#21518;&#20351;&#29992;while&#24490;&#29615;&#26469;&#35753;&#26381;&#21153;&#22120;&#19981;&#26029;&#30340;&#25509;&#21463;&#35831;&#27714;</SPAN>&#12290;&#19978;&#38754;&#30340;&#36825;&#20123;&#27493;&#39588;&#21487;&#20197;&#36890;&#36807;SocketServer&#21253;&#26469;&#31616;&#21270;&#12290;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier"><SPAN style="COLOR: #ff0000">SocketServer</SPAN>:</SPAN></P>
<DIV class=cnblogs_code>
<DIV class=cnblogs_code_toolbar><SPAN class=cnblogs_code_copy><A title=&#22797;&#21046;&#20195;&#30721; void(0);"><IMG alt=&#22797;&#21046;&#20195;&#30721; src="http://common.cnblogs.com/images/copycode.gif"></A></SPAN></DIV><PRE><SPAN style="FONT-FAMILY: courier new, courier"><SPAN style="COLOR: #008000">#</SPAN><SPAN style="COLOR: #008000"> Written by Vamei</SPAN><SPAN style="COLOR: #008000">
#</SPAN><SPAN style="COLOR: #008000"> use TCPServer</SPAN>

<SPAN style="COLOR: #0000ff">import</SPAN><SPAN style="COLOR: #000000"> SocketServer

HOST </SPAN>= <SPAN style="COLOR: #800000">''</SPAN><SPAN style="COLOR: #000000">
PORT </SPAN>= 8000<SPAN style="COLOR: #000000">

text_content </SPAN>= <SPAN style="COLOR: #800000">'''</SPAN><SPAN style="COLOR: #800000">
HTTP/1.x 200 OK  
Content-Type: text/html

&lt;head&gt;
&lt;title&gt;WOW&lt;/title&gt;
&lt;/head&gt;
&lt;html&gt;
&lt;p&gt;Wow, Python Server&lt;/p&gt;
&lt;IMG src="test.jpg"/&gt;
&lt;form name="input" action="/" method="post"&gt;
First name:&lt;input type="text" name="firstname"&gt;&lt;br&gt;
&lt;input type="submit" value="Submit"&gt;
&lt;/form&gt; 
&lt;/html&gt;
</SPAN><SPAN style="COLOR: #800000">'''</SPAN><SPAN style="COLOR: #000000">

f </SPAN>= open(<SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #800000">test.jpg</SPAN><SPAN style="COLOR: #800000">'</SPAN>,<SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #800000">rb</SPAN><SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #000000">)
pic_content </SPAN>= <SPAN style="COLOR: #800000">'''</SPAN><SPAN style="COLOR: #800000">
HTTP/1.x 200 OK  
Content-Type: image/jpg

</SPAN><SPAN style="COLOR: #800000">'''</SPAN><SPAN style="COLOR: #000000">
pic_content </SPAN>= pic_content +<SPAN style="COLOR: #000000"> f.read()

<SPAN style="COLOR: #008000"># This class defines response to each request</SPAN>
</SPAN><SPAN style="COLOR: #0000ff">class</SPAN><SPAN style="COLOR: #000000"> MyTCPHandler(SocketServer.BaseRequestHandler):
    </SPAN><SPAN style="COLOR: #0000ff">def</SPAN><SPAN style="COLOR: #000000"> handle(self):
        </SPAN><SPAN style="COLOR: #008000">#</SPAN><SPAN style="COLOR: #008000"> self.request is the TCP socket connected to the client</SPAN>
        request = self.request.recv(1024<SPAN style="COLOR: #000000">)

        </SPAN><SPAN style="COLOR: #0000ff">print</SPAN> <SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #800000">Connected by</SPAN><SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #000000">,self.client_address[0]
        </SPAN><SPAN style="COLOR: #0000ff">print</SPAN> <SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #800000">Request is</SPAN><SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #000000">, request

        method     </SPAN>= request.split(<SPAN style="COLOR: #800000">'</SPAN> <SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #000000">)[0]
        src        </SPAN>= request.split(<SPAN style="COLOR: #800000">'</SPAN> <SPAN style="COLOR: #800000">'</SPAN>)[1<SPAN style="COLOR: #000000">]

        </SPAN><SPAN style="COLOR: #0000ff">if</SPAN> method == <SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #800000">GET</SPAN><SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #000000">:
            </SPAN><SPAN style="COLOR: #0000ff">if</SPAN> src == <SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #800000">/test.jpg</SPAN><SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #000000">:
                content </SPAN>=<SPAN style="COLOR: #000000"> pic_content
            </SPAN><SPAN style="COLOR: #0000ff">else</SPAN>: content =<SPAN style="COLOR: #000000"> text_content
            self.request.sendall(content)

        </SPAN><SPAN style="COLOR: #0000ff">if</SPAN> method == <SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #800000">POST</SPAN><SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #000000">:
            form </SPAN>= request.split(<SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #800000">\r\n</SPAN><SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #000000">)
            idx </SPAN>= form.index(<SPAN style="COLOR: #800000">''</SPAN>)             <SPAN style="COLOR: #008000">#</SPAN><SPAN style="COLOR: #008000"> Find the empty line</SPAN>
            entry = form[idx:]               <SPAN style="COLOR: #008000">#</SPAN><SPAN style="COLOR: #008000"> Main content of the request</SPAN>
<SPAN style="COLOR: #000000">
            value </SPAN>= entry[-1].split(<SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #800000">=</SPAN><SPAN style="COLOR: #800000">'</SPAN>)[-1<SPAN style="COLOR: #000000">]
            self.request.sendall(text_content </SPAN>+ <SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #800000">\n &lt;p&gt;</SPAN><SPAN style="COLOR: #800000">'</SPAN> + value + <SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #800000">&lt;/p&gt;</SPAN><SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #000000">)
            </SPAN><SPAN style="COLOR: #008000">#</SPAN><SPAN style="COLOR: #008000">#####</SPAN>
            <SPAN style="COLOR: #008000">#</SPAN><SPAN style="COLOR: #008000"> More operations, such as put the form into database</SPAN>
            <SPAN style="COLOR: #008000">#</SPAN><SPAN style="COLOR: #008000"> ...</SPAN>
            <SPAN style="COLOR: #008000">#</SPAN><SPAN style="COLOR: #008000">#####</SPAN>


<SPAN style="COLOR: #008000">#</SPAN><SPAN style="COLOR: #008000"> Create the server</SPAN>
server =<SPAN style="COLOR: #000000"> SocketServer.TCPServer((HOST, PORT), MyTCPHandler)
</SPAN><SPAN style="COLOR: #008000">#</SPAN><SPAN style="COLOR: #008000"> Start the server, and work forever</SPAN>
server.serve_forever()</SPAN></PRE>
<DIV class=cnblogs_code_toolbar><SPAN class=cnblogs_code_copy><A title=&#22797;&#21046;&#20195;&#30721; void(0);"><IMG alt=&#22797;&#21046;&#20195;&#30721; src="http://common.cnblogs.com/images/copycode.gif"></A></SPAN></DIV></DIV>
<P><SPAN style="FONT-FAMILY: courier new, courier">&nbsp;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#25105;&#24314;&#31435;&#20102;&#19968;&#20010;<SPAN style="COLOR: #800000">TCPServer</SPAN>&#23545;&#35937;&#65292;&#21363;&#19968;&#20010;&#20351;&#29992;TCP socket&#30340;&#26381;&#21153;&#22120;&#12290;&#22312;&#24314;&#31435;TCPServe&#30340;&#21516;&#26102;&#65292;&#35774;&#32622;&#35813;&#26381;&#21153;&#22120;&#30340;IP&#22320;&#22336;&#21644;&#31471;&#21475;&#12290;&#20351;&#29992;<SPAN style="COLOR: #800000">server_forever()</SPAN>&#26041;&#27861;&#26469;&#35753;&#26381;&#21153;&#22120;&#19981;&#26029;&#24037;&#20316;(&#23601;&#20687;&#21407;&#22987;&#31243;&#24207;&#20013;&#30340;while&#24490;&#29615;&#19968;&#26679;)&#12290;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#25105;&#20204;&#20256;&#36882;&#32473;TCPServer&#19968;&#20010;MyTCPHandler&#31867;&#12290;&#36825;&#20010;&#31867;&#23450;&#20041;&#20102;&#22914;&#20309;&#25805;&#20316;socket&#12290;MyTCPHandler&#32487;&#25215;&#33258;BaseRequestHandler&#12290;&#25913;&#20889;<SPAN style="COLOR: #800000">handler()</SPAN>&#26041;&#27861;&#65292;&#26469;&#20855;&#20307;&#35268;&#23450;&#19981;&#21516;&#24773;&#20917;&#19979;&#26381;&#21153;&#22120;&#30340;&#25805;&#20316;&#12290;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#22312;handler()&#20013;&#65292;&#36890;&#36807;<SPAN style="COLOR: #800000">self.request</SPAN>&#26469;&#26597;&#35810;&#36890;&#36807;socket&#36827;&#20837;&#26381;&#21153;&#22120;&#30340;&#35831;&#27714; (&#27491;&#22914;&#25105;&#20204;&#22312;handler()&#20013;&#23545;socket&#36827;&#34892;<SPAN style="COLOR: #800000">recv()</SPAN>&#21644;<SPAN style="COLOR: #800000">sendall()</SPAN>&#25805;&#20316;)&#65292;&#36824;&#20351;&#29992;<SPAN style="COLOR: #800000">self.address</SPAN>&#26469;&#24341;&#29992;socket&#30340;&#23458;&#25143;&#31471;&#22320;&#22336;&#12290;</SPAN></P>
<P>&nbsp;</P>
<P><SPAN style="FONT-FAMILY: courier new, courier"><SPAN>&#32463;&#36807;SocketServer&#30340;&#25913;&#36896;&#20043;&#21518;&#65292;&#20195;&#30721;&#36824;&#26159;&#19981;&#22815;&#31616;&#21333;&#12290;</SPAN>&nbsp;&#25105;&#20204;&#19978;&#38754;&#30340;&#36890;&#20449;&#22522;&#20110;TCP&#21327;&#35758;&#65292;&#32780;&#19981;&#26159;HTTP&#21327;&#35758;&#12290;&#22240;&#27492;&#65292;&#25105;&#20204;&#24517;&#39035;&#25163;&#21160;&#30340;&#35299;&#26512;HTTP&#21327;&#35758;&#12290;&#25105;&#20204;&#23558;&#24314;&#31435;&#22522;&#20110;HTTP&#21327;&#35758;&#30340;&#26381;&#21153;&#22120;&#12290;</SPAN></P>
<P>&nbsp;</P>
<H3><SPAN style="FONT-FAMILY: courier new, courier">SimpleHTTPServer: &#20351;&#29992;&#38745;&#24577;&#25991;&#20214;&#26469;&#22238;&#24212;&#35831;&#27714;</SPAN></H3>
<P><SPAN style="FONT-FAMILY: courier new, courier">HTTP&#21327;&#35758;&#22522;&#20110;TCP&#21327;&#35758;&#65292;&#20294;&#22686;&#21152;&#20102;&#26356;&#22810;&#30340;&#35268;&#33539;&#12290;&#36825;&#20123;&#35268;&#33539;&#65292;&#34429;&#28982;&#38480;&#21046;&#20102;TCP&#21327;&#35758;&#30340;&#21151;&#33021;&#65292;&#20294;&#22823;&#22823;&#25552;&#39640;&#20102;&#20449;&#24687;&#23553;&#35013;&#21644;&#25552;&#21462;&#30340;&#26041;&#20415;&#31243;&#24230;&#12290;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#23545;&#20110;&#19968;&#20010;HTTP&#35831;&#27714;(request)&#26469;&#35828;&#65292;&#23427;&#21253;&#21547;&#26377;&#20004;&#20010;&#37325;&#35201;&#20449;&#24687;&#65306;&#35831;&#27714;&#26041;&#27861;&#21644;URL&#12290;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier; COLOR: #0000ff">&#35831;&#27714;&#26041;&#27861;(request method)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; URL&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#25805;&#20316;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">GET&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#21457;&#36865;text_content</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">GET&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /text.jpg&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#21457;&#36865;pic_content</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">POST&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#20998;&#26512;request&#20027;&#20307;&#20013;&#21253;&#21547;&#30340;value(&#23454;&#38469;&#19978;&#26159;&#25105;&#20204;&#22635;&#20837;&#34920;&#26684;&#30340;&#20869;&#23481;); &#21457;&#36865;text_content&#21644;value</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&nbsp;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#26681;&#25454;&#35831;&#27714;&#26041;&#27861;&#21644;URL&#30340;&#19981;&#21516;&#65292;&#19968;&#20010;&#22823;&#22411;&#30340;HTTP&#26381;&#21153;&#22120;&#21487;&#20197;&#24212;&#20184;&#25104;&#21315;&#19978;&#19975;&#31181;&#19981;&#21516;&#30340;&#35831;&#27714;&#12290;&#22312;Python&#20013;&#65292;&#25105;&#20204;&#21487;&#20197;&#20351;&#29992;SimpleHTTPServer&#21253;&#21644;CGIHTTPServer&#21253;&#26469;&#35268;&#23450;&#38024;&#23545;&#19981;&#21516;&#35831;&#27714;&#30340;&#25805;&#20316;&#12290;&#20854;&#20013;&#65292;SimpleHTTPServer&#21487;&#20197;&#29992;&#20110;&#22788;&#29702;<SPAN style="COLOR: #800000">GET</SPAN>&#26041;&#27861;&#21644;<SPAN style="COLOR: #800000">HEAD</SPAN>&#26041;&#27861;&#30340;&#35831;&#27714;&#12290;&#23427;&#35835;&#21462;request&#20013;&#30340;URL&#22320;&#22336;&#65292;&#25214;&#21040;&#23545;&#24212;&#30340;<SPAN style="COLOR: #ff0000">&#38745;&#24577;&#25991;&#20214;</SPAN>&#65292;&#20998;&#26512;&#25991;&#20214;&#31867;&#22411;&#65292;&#29992;HTTP&#21327;&#35758;&#23558;&#25991;&#20214;&#21457;&#36865;&#32473;&#23458;&#25143;&#12290;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&nbsp;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier"><IMG style="DISPLAY: block; MARGIN-LEFT: auto; MARGIN-RIGHT: auto" alt="" src="http://pic002.cnblogs.com/images/2012/413416/2012103116160628.jpg" width=422 height=377 jQuery17020710119325884568="2"></SPAN></P>
<P style="TEXT-ALIGN: center"><SPAN style="FONT-FAMILY: courier new, courier">SimpleHTTPServer</SPAN></P>
<P style="TEXT-ALIGN: center"><SPAN style="FONT-FAMILY: courier new, courier">&nbsp;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#25105;&#20204;&#23558;text_content&#25918;&#32622;&#22312;index.html&#20013;&#65292;&#24182;&#21333;&#29420;&#23384;&#20648;text.jpg&#25991;&#20214;&#12290;&#22914;&#26524;URL&#25351;&#21521;index_html&#30340;&#27597;&#25991;&#20214;&#22841;&#26102;&#65292;SimpleHTTPServer&#20250;&#35835;&#21462;&#35813;&#25991;&#20214;&#22841;&#19979;&#30340;index.html&#25991;&#20214;&#12290;</SPAN></P>
<P>&nbsp;</P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#25105;&#22312;&#24403;&#21069;&#30446;&#24405;&#19979;&#29983;&#25104;index.html&#25991;&#20214;:</SPAN></P>
<DIV class=cnblogs_code>
<DIV class=cnblogs_code_toolbar><SPAN class=cnblogs_code_copy><A title=&#22797;&#21046;&#20195;&#30721; void(0);"><IMG alt=&#22797;&#21046;&#20195;&#30721; src="http://common.cnblogs.com/images/copycode.gif"></A></SPAN></DIV><PRE><SPAN style="FONT-FAMILY: courier new, courier"><SPAN style="COLOR: #0000ff">&lt;</SPAN><SPAN style="COLOR: #800000">head</SPAN><SPAN style="COLOR: #0000ff">&gt;</SPAN>
<SPAN style="COLOR: #0000ff">&lt;</SPAN><SPAN style="COLOR: #800000">title</SPAN><SPAN style="COLOR: #0000ff">&gt;</SPAN>WOW<SPAN style="COLOR: #0000ff">&lt;/</SPAN><SPAN style="COLOR: #800000">title</SPAN><SPAN style="COLOR: #0000ff">&gt;</SPAN>
<SPAN style="COLOR: #0000ff">&lt;/</SPAN><SPAN style="COLOR: #800000">head</SPAN><SPAN style="COLOR: #0000ff">&gt;</SPAN>
<SPAN style="COLOR: #0000ff">&lt;</SPAN><SPAN style="COLOR: #800000">html</SPAN><SPAN style="COLOR: #0000ff">&gt;</SPAN>
<SPAN style="COLOR: #0000ff">&lt;</SPAN><SPAN style="COLOR: #800000">p</SPAN><SPAN style="COLOR: #0000ff">&gt;</SPAN>Wow, Python Server<SPAN style="COLOR: #0000ff">&lt;/</SPAN><SPAN style="COLOR: #800000">p</SPAN><SPAN style="COLOR: #0000ff">&gt;</SPAN>
<SPAN style="COLOR: #0000ff">&lt;</SPAN><SPAN style="COLOR: #800000">IMG </SPAN><SPAN style="COLOR: #ff0000">src</SPAN><SPAN style="COLOR: #0000ff">="test.jpg"</SPAN><SPAN style="COLOR: #0000ff">/&gt;</SPAN>
<SPAN style="COLOR: #0000ff">&lt;</SPAN><SPAN style="COLOR: #800000">form </SPAN><SPAN style="COLOR: #ff0000">name</SPAN><SPAN style="COLOR: #0000ff">="input"</SPAN><SPAN style="COLOR: #ff0000"> action</SPAN><SPAN style="COLOR: #0000ff">="/"</SPAN><SPAN style="COLOR: #ff0000"> method</SPAN><SPAN style="COLOR: #0000ff">="post"</SPAN><SPAN style="COLOR: #0000ff">&gt;</SPAN><SPAN style="COLOR: #000000">
First name:</SPAN><SPAN style="COLOR: #0000ff">&lt;</SPAN><SPAN style="COLOR: #800000">input </SPAN><SPAN style="COLOR: #ff0000">type</SPAN><SPAN style="COLOR: #0000ff">="text"</SPAN><SPAN style="COLOR: #ff0000"> name</SPAN><SPAN style="COLOR: #0000ff">="firstname"</SPAN><SPAN style="COLOR: #0000ff">&gt;&lt;</SPAN><SPAN style="COLOR: #800000">br</SPAN><SPAN style="COLOR: #0000ff">&gt;</SPAN>
<SPAN style="COLOR: #0000ff">&lt;</SPAN><SPAN style="COLOR: #800000">input </SPAN><SPAN style="COLOR: #ff0000">type</SPAN><SPAN style="COLOR: #0000ff">="submit"</SPAN><SPAN style="COLOR: #ff0000"> value</SPAN><SPAN style="COLOR: #0000ff">="Submit"</SPAN><SPAN style="COLOR: #0000ff">&gt;</SPAN>
<SPAN style="COLOR: #0000ff">&lt;/</SPAN><SPAN style="COLOR: #800000">form</SPAN><SPAN style="COLOR: #0000ff">&gt;</SPAN>
<SPAN style="COLOR: #0000ff">&lt;/</SPAN><SPAN style="COLOR: #800000">html</SPAN><SPAN style="COLOR: #0000ff">&gt;</SPAN></SPAN></PRE>
<DIV class=cnblogs_code_toolbar><SPAN class=cnblogs_code_copy><A title=&#22797;&#21046;&#20195;&#30721; void(0);"><IMG alt=&#22797;&#21046;&#20195;&#30721; src="http://common.cnblogs.com/images/copycode.gif"></A></SPAN></DIV></DIV>
<P><SPAN style="FONT-FAMILY: courier new, courier">&nbsp;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#25913;&#20889;Python&#26381;&#21153;&#22120;&#31243;&#24207;&#12290;&#20351;&#29992;<SPAN style="COLOR: #800000">SimpleHTTPServer</SPAN>&#21253;&#20013;&#21807;&#19968;&#30340;&#31867;<SPAN style="COLOR: #ff0000"><SPAN style="COLOR: #800000">SimpleHTTPRequestHandler</SPAN>:</SPAN></SPAN></P>
<DIV class=cnblogs_code>
<DIV class=cnblogs_code_toolbar><SPAN class=cnblogs_code_copy><A title=&#22797;&#21046;&#20195;&#30721; void(0);"><IMG alt=&#22797;&#21046;&#20195;&#30721; src="http://common.cnblogs.com/images/copycode.gif"></A></SPAN></DIV><PRE><SPAN style="FONT-FAMILY: courier new, courier"><SPAN style="COLOR: #008000">#</SPAN><SPAN style="COLOR: #008000"> Written by Vamei</SPAN><SPAN style="COLOR: #008000">
#</SPAN><SPAN style="COLOR: #008000"> Simple HTTPsERVER</SPAN>

<SPAN style="COLOR: #0000ff">import</SPAN><SPAN style="COLOR: #000000"> SocketServer
</SPAN><SPAN style="COLOR: #0000ff">import</SPAN><SPAN style="COLOR: #000000"> SimpleHTTPServer

HOST </SPAN>= <SPAN style="COLOR: #800000">''</SPAN><SPAN style="COLOR: #000000">
PORT </SPAN>= 8000

<SPAN style="COLOR: #008000">#</SPAN><SPAN style="COLOR: #008000"> Create the server, SimpleHTTPRequestHander is pre-defined handler in SimpleHTTPServer package</SPAN>
server =<SPAN style="COLOR: #000000"> SocketServer.TCPServer((HOST, PORT), SimpleHTTPServer.SimpleHTTPRequestHandler)
</SPAN><SPAN style="COLOR: #008000">#</SPAN><SPAN style="COLOR: #008000"> Start the server</SPAN><SPAN style="COLOR: #000000">
server.serve_forever()</SPAN></SPAN></PRE>
<DIV class=cnblogs_code_toolbar><SPAN class=cnblogs_code_copy><A title=&#22797;&#21046;&#20195;&#30721; void(0);"><IMG alt=&#22797;&#21046;&#20195;&#30721; src="http://common.cnblogs.com/images/copycode.gif"></A></SPAN></DIV></DIV>
<P><SPAN style="FONT-FAMILY: courier new, courier">&nbsp;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#36825;&#37324;&#30340;&#31243;&#24207;<SPAN style="COLOR: #ff0000">&#19981;&#33021;&#22788;&#29702;POST&#35831;&#27714;<SPAN style="COLOR: #000000">&#12290;</SPAN></SPAN>&#25105;&#20250;&#22312;&#21518;&#38754;&#20351;&#29992;CGI&#26469;&#24357;&#34917;&#36825;&#20010;&#32570;&#38519;&#12290;&#20540;&#24471;&#27880;&#24847;&#30340;&#26159;&#65292;Python&#26381;&#21153;&#22120;&#31243;&#24207;&#21464;&#24471;&#38750;&#24120;&#31616;&#21333;&#12290;&#23558;&#20869;&#23481;&#23384;&#25918;&#20110;&#38745;&#24577;&#25991;&#20214;&#65292;&#24182;&#26681;&#25454;URL&#20026;&#23458;&#25143;&#31471;&#25552;&#20379;&#20869;&#23481;&#65292;&#36825;&#35753;&#20869;&#23481;&#21644;&#26381;&#21153;&#22120;&#36923;&#36753;&#20998;&#31163;&#12290;&#27599;&#27425;&#26356;&#26032;&#20869;&#23481;&#26102;&#65292;&#25105;&#21487;&#20197;&#21482;&#20462;&#25913;&#38745;&#24577;&#25991;&#20214;&#65292;&#32780;&#19981;&#29992;&#20572;&#27490;&#25972;&#20010;Python&#26381;&#21153;&#22120;&#12290;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#36825;&#20123;&#25913;&#36827;&#20063;<SPAN style="COLOR: #000000">&#20184;&#20986;&#20195;&#20215;</SPAN>&#12290;&#22312;&#21407;&#22987;&#31243;&#24207;&#20013;&#65292;request&#20013;&#30340;URL&#21482;&#20855;&#26377;&#25351;&#23548;&#24847;&#20041;&#65292;&#25105;&#21487;&#20197;&#35268;&#23450;&#20219;&#24847;&#30340;&#25805;&#20316;&#12290;&#22312;SimpleHTTPServer&#20013;&#65292;&#25805;&#20316;&#19982;URL&#30340;&#25351;&#21521;&#23494;&#20999;&#30456;&#20851;&#12290;&#25105;&#29992;&#33258;&#30001;&#24230;&#65292;&#25442;&#26469;&#20102;&#26356;&#21152;&#31616;&#27905;&#30340;&#31243;&#24207;&#12290;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&nbsp;</SPAN></P>
<H3><SPAN style="FONT-FAMILY: courier new, courier">CGIHTTPServer&#65306;&#20351;&#29992;&#38745;&#24577;&#25991;&#20214;&#25110;&#32773;CGI&#26469;&#22238;&#24212;&#35831;&#27714;</SPAN></H3>
<P><SPAN style="FONT-FAMILY: courier new, courier">CGIHTTPServer&#21253;&#20013;&#30340;CGIHTTPRequestHandler&#31867;&#32487;&#25215;&#33258;SimpleHTTPRequestHandler&#31867;&#65292;&#25152;&#20197;&#21487;&#20197;&#29992;&#26469;&#20195;&#26367;&#19978;&#38754;&#30340;&#20363;&#23376;&#65292;&#26469;&#25552;&#20379;<SPAN style="COLOR: #ff0000">&#38745;&#24577;&#25991;&#20214;</SPAN>&#30340;&#26381;&#21153;&#12290;&#27492;&#22806;&#65292;CGIHTTPRequestHandler&#31867;&#36824;&#21487;&#20197;&#29992;&#26469;&#36816;&#34892;<SPAN style="COLOR: #ff0000">CGI&#33050;&#26412;</SPAN>&#12290;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier"><IMG style="DISPLAY: block; MARGIN-LEFT: auto; MARGIN-RIGHT: auto" alt="" src="http://pic002.cnblogs.com/images/2012/413416/2012103116413014.jpg" width=410 height=455 jQuery17020710119325884568="3"></SPAN></P>
<P style="TEXT-ALIGN: center"><SPAN style="FONT-FAMILY: courier new, courier">CGIHTTPServer</SPAN></P>
<P style="TEXT-ALIGN: center"><SPAN style="FONT-FAMILY: courier new, courier">&nbsp;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#20808;&#30475;&#30475;&#20160;&#20040;&#26159;<SPAN style="COLOR: #ff0000">CGI</SPAN> (Common Gateway Interface)&#12290;CGI&#26159;&#26381;&#21153;&#22120;&#21644;&#24212;&#29992;&#33050;&#26412;&#20043;&#38388;&#30340;&#19968;&#22871;&#25509;&#21475;&#26631;&#20934;&#12290;&#23427;&#30340;&#21151;&#33021;&#26159;&#35753;&#26381;&#21153;&#22120;&#31243;&#24207;&#36816;&#34892;<SPAN style="COLOR: #ff0000">&#33050;&#26412;&#31243;&#24207;</SPAN>&#65292;&#23558;<SPAN style="COLOR: #ff0000">&#31243;&#24207;</SPAN><SPAN style="COLOR: #ff0000">&#30340;&#36755;&#20986;</SPAN>&#20316;&#20026;response&#21457;&#36865;&#32473;&#23458;&#25143;&#12290;&#24635;&#20307;&#30340;&#25928;&#26524;&#65292;&#26159;&#20801;&#35768;&#26381;&#21153;&#22120;&#21160;&#24577;&#30340;&#29983;&#25104;&#22238;&#22797;&#20869;&#23481;&#65292;&#32780;&#19981;&#24517;&#23616;&#38480;&#20110;&#38745;&#24577;&#25991;&#20214;&#12290;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#25903;&#25345;CGI&#30340;&#26381;&#21153;&#22120;&#31243;&#25509;&#25910;&#21040;&#23458;&#25143;&#30340;&#35831;&#27714;&#65292;&#26681;&#25454;&#35831;&#27714;&#20013;&#30340;URL&#65292;&#36816;&#34892;&#23545;&#24212;&#30340;&#33050;&#26412;&#25991;&#20214;&#12290;&#26381;&#21153;&#22120;&#20250;&#23558;HTTP&#35831;&#27714;&#30340;&#20449;&#24687;&#21644;socket&#20449;&#24687;&#20256;&#36882;&#32473;&#33050;&#26412;&#25991;&#20214;&#65292;&#24182;&#31561;&#24453;&#33050;&#26412;&#30340;&#36755;&#20986;&#12290;&#33050;&#26412;&#30340;&#36755;&#20986;&#23553;&#35013;&#25104;&#21512;&#27861;&#30340;HTTP&#22238;&#22797;&#65292;&#21457;&#36865;&#32473;&#23458;&#25143;&#12290;CGI&#21487;&#20197;&#20805;&#20998;&#21457;&#25381;&#26381;&#21153;&#22120;&#30340;&#21487;&#32534;&#31243;&#24615;&#65292;&#35753;&#26381;&#21153;&#22120;&#21464;&#24471;&#8220;&#26356;&#32874;&#26126;&#8221;&#12290;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#26381;&#21153;&#22120;&#21644;CGI&#33050;&#26412;&#20043;&#38388;&#30340;&#36890;&#20449;&#35201;&#31526;&#21512;CGI&#26631;&#20934;&#12290;CGI&#30340;&#23454;&#29616;&#26041;&#24335;&#26377;&#24456;&#22810;&#65292;&#27604;&#22914;&#35828;&#20351;&#29992;Apache&#26381;&#21153;&#22120;&#19982;Perl&#20889;&#30340;CGI&#33050;&#26412;&#65292;&#25110;&#32773;Python&#26381;&#21153;&#22120;&#19982;shell&#20889;&#30340;CGI&#33050;&#26412;&#12290;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&nbsp;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#20026;&#20102;&#20351;&#29992;CGI&#65292;&#25105;&#20204;&#38656;&#35201;&#20351;&#29992;BaseHTTPServer&#21253;&#20013;&#30340;<SPAN style="COLOR: #ff0000">HTTPServer</SPAN>&#31867;&#26469;&#26500;&#24314;&#26381;&#21153;&#22120;&#12290;</SPAN><SPAN style="FONT-FAMILY: courier new, courier">Python&#26381;&#21153;&#22120;&#30340;&#25913;&#21160;&#24456;&#31616;&#21333;&#12290;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier"><SPAN style="COLOR: #ff0000">CGIHTTPServer</SPAN>:</SPAN></P>
<DIV class=cnblogs_code>
<DIV class=cnblogs_code_toolbar><SPAN class=cnblogs_code_copy><A title=&#22797;&#21046;&#20195;&#30721; void(0);"><IMG alt=&#22797;&#21046;&#20195;&#30721; src="http://common.cnblogs.com/images/copycode.gif"></A></SPAN></DIV><PRE><SPAN style="FONT-FAMILY: courier new, courier"><SPAN style="COLOR: #008000">#</SPAN><SPAN style="COLOR: #008000"> Written by Vamei</SPAN><SPAN style="COLOR: #008000">
#</SPAN><SPAN style="COLOR: #008000"> A messy HTTP server based on TCP socket </SPAN>

<SPAN style="COLOR: #0000ff">import</SPAN><SPAN style="COLOR: #000000"> BaseHTTPServer
</SPAN><SPAN style="COLOR: #0000ff">import</SPAN><SPAN style="COLOR: #000000"> CGIHTTPServer

HOST </SPAN>= <SPAN style="COLOR: #800000">''</SPAN><SPAN style="COLOR: #000000">
PORT </SPAN>= 8000

<SPAN style="COLOR: #008000">#</SPAN><SPAN style="COLOR: #008000"> Create the server, CGIHTTPRequestHandler is pre-defined handler</SPAN>
server =<SPAN style="COLOR: #000000"> BaseHTTPServer.HTTPServer((HOST, PORT), CGIHTTPServer.CGIHTTPRequestHandler)
</SPAN><SPAN style="COLOR: #008000">#</SPAN><SPAN style="COLOR: #008000"> Start the server</SPAN>
server.serve_forever()</SPAN></PRE>
<DIV class=cnblogs_code_toolbar><SPAN class=cnblogs_code_copy><A title=&#22797;&#21046;&#20195;&#30721; void(0);"><IMG alt=&#22797;&#21046;&#20195;&#30721; src="http://common.cnblogs.com/images/copycode.gif"></A></SPAN></DIV></DIV>
<P><SPAN style="FONT-FAMILY: courier new, courier; COLOR: #ff0000">&nbsp;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier"><SPAN style="COLOR: #800000">CGIHTTPRequestHandler</SPAN>&#40664;&#35748;&#24403;&#21069;&#30446;&#24405;&#19979;&#30340;<SPAN style="COLOR: #800000">cgi-bin</SPAN>&#21644;<SPAN style="COLOR: #800000">ht-bin</SPAN>&#25991;&#20214;&#22841;&#20013;&#30340;&#25991;&#20214;&#20026;CGI&#33050;&#26412;&#65292;&#32780;&#23384;&#25918;&#20110;&#20854;&#20182;&#22320;&#26041;&#30340;&#25991;&#20214;&#34987;&#35748;&#20026;&#26159;&#38745;&#24577;&#25991;&#20214;&#12290;&#22240;&#27492;&#65292;&#25105;&#20204;&#38656;&#35201;&#20462;&#25913;&#19968;&#19979;index.html&#65292;&#23558;&#20854;&#20013;form&#20803;&#32032;&#25351;&#21521;&#30340;action&#25913;&#20026;cgi-bin/post.py&#12290;</SPAN></P>
<DIV class=cnblogs_code>
<DIV class=cnblogs_code_toolbar><SPAN class=cnblogs_code_copy><A title=&#22797;&#21046;&#20195;&#30721; void(0);"><IMG alt=&#22797;&#21046;&#20195;&#30721; src="http://common.cnblogs.com/images/copycode.gif"></A></SPAN></DIV><PRE><SPAN style="FONT-FAMILY: courier new, courier"><SPAN style="COLOR: #0000ff">&lt;</SPAN><SPAN style="COLOR: #800000">head</SPAN><SPAN style="COLOR: #0000ff">&gt;</SPAN>
<SPAN style="COLOR: #0000ff">&lt;</SPAN><SPAN style="COLOR: #800000">title</SPAN><SPAN style="COLOR: #0000ff">&gt;</SPAN>WOW<SPAN style="COLOR: #0000ff">&lt;/</SPAN><SPAN style="COLOR: #800000">title</SPAN><SPAN style="COLOR: #0000ff">&gt;</SPAN>
<SPAN style="COLOR: #0000ff">&lt;/</SPAN><SPAN style="COLOR: #800000">head</SPAN><SPAN style="COLOR: #0000ff">&gt;</SPAN>
<SPAN style="COLOR: #0000ff">&lt;</SPAN><SPAN style="COLOR: #800000">html</SPAN><SPAN style="COLOR: #0000ff">&gt;</SPAN>
<SPAN style="COLOR: #0000ff">&lt;</SPAN><SPAN style="COLOR: #800000">p</SPAN><SPAN style="COLOR: #0000ff">&gt;</SPAN>Wow, Python Server<SPAN style="COLOR: #0000ff">&lt;/</SPAN><SPAN style="COLOR: #800000">p</SPAN><SPAN style="COLOR: #0000ff">&gt;</SPAN>
<SPAN style="COLOR: #0000ff">&lt;</SPAN><SPAN style="COLOR: #800000">IMG </SPAN><SPAN style="COLOR: #ff0000">src</SPAN><SPAN style="COLOR: #0000ff">="test.jpg"</SPAN><SPAN style="COLOR: #0000ff">/&gt;</SPAN>
<SPAN style="COLOR: #0000ff">&lt;</SPAN><SPAN style="COLOR: #800000">form </SPAN><SPAN style="COLOR: #ff0000">name</SPAN><SPAN style="COLOR: #0000ff">="input"</SPAN><SPAN style="COLOR: #ff0000"> action</SPAN><SPAN style="COLOR: #0000ff">="cgi-bin/post.py"</SPAN><SPAN style="COLOR: #ff0000"> method</SPAN><SPAN style="COLOR: #0000ff">="post"</SPAN><SPAN style="COLOR: #0000ff">&gt;</SPAN><SPAN style="COLOR: #000000">
First name:</SPAN><SPAN style="COLOR: #0000ff">&lt;</SPAN><SPAN style="COLOR: #800000">input </SPAN><SPAN style="COLOR: #ff0000">type</SPAN><SPAN style="COLOR: #0000ff">="text"</SPAN><SPAN style="COLOR: #ff0000"> name</SPAN><SPAN style="COLOR: #0000ff">="firstname"</SPAN><SPAN style="COLOR: #0000ff">&gt;&lt;</SPAN><SPAN style="COLOR: #800000">br</SPAN><SPAN style="COLOR: #0000ff">&gt;</SPAN>
<SPAN style="COLOR: #0000ff">&lt;</SPAN><SPAN style="COLOR: #800000">input </SPAN><SPAN style="COLOR: #ff0000">type</SPAN><SPAN style="COLOR: #0000ff">="submit"</SPAN><SPAN style="COLOR: #ff0000"> value</SPAN><SPAN style="COLOR: #0000ff">="Submit"</SPAN><SPAN style="COLOR: #0000ff">&gt;</SPAN>
<SPAN style="COLOR: #0000ff">&lt;/</SPAN><SPAN style="COLOR: #800000">form</SPAN><SPAN style="COLOR: #0000ff">&gt;</SPAN>
<SPAN style="COLOR: #0000ff">&lt;/</SPAN><SPAN style="COLOR: #800000">html</SPAN><SPAN style="COLOR: #0000ff">&gt;</SPAN></SPAN></PRE>
<DIV class=cnblogs_code_toolbar><SPAN class=cnblogs_code_copy><A title=&#22797;&#21046;&#20195;&#30721; void(0);"><IMG alt=&#22797;&#21046;&#20195;&#30721; src="http://common.cnblogs.com/images/copycode.gif"></A></SPAN></DIV></DIV>
<P>&nbsp;</P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#25105;&#21019;&#24314;&#19968;&#20010;cgi-bin&#30340;&#25991;&#20214;&#22841;&#65292;&#24182;&#22312;cgi-bin&#20013;&#25918;&#20837;&#22914;&#19979;post.py&#25991;&#20214;&#65292;&#20063;&#23601;&#26159;&#25105;&#20204;&#30340;<SPAN style="COLOR: #ff0000">CGI&#33050;&#26412;</SPAN>&#65306;</SPAN></P>
<DIV class=cnblogs_code>
<DIV class=cnblogs_code_toolbar><SPAN class=cnblogs_code_copy><A title=&#22797;&#21046;&#20195;&#30721; void(0);"><IMG alt=&#22797;&#21046;&#20195;&#30721; src="http://common.cnblogs.com/images/copycode.gif"></A></SPAN></DIV><PRE><SPAN style="FONT-FAMILY: courier new, courier"><SPAN style="COLOR: #008000">#</SPAN><SPAN style="COLOR: #008000">!/usr/bin/env python</SPAN>
</SPAN></PRE><PRE><SPAN style="FONT-FAMILY: courier new, courier"><SPAN style="COLOR: #008000"># </SPAN><SPAN style="COLOR: #008000">Written by Vamei</SPAN></SPAN></PRE><PRE><SPAN style="FONT-FAMILY: courier new, courier"><SPAN style="COLOR: #0000ff">import</SPAN><SPAN style="COLOR: #000000"> cgi
form </SPAN>=<SPAN style="COLOR: #000000"> cgi.FieldStorage()

</SPAN><SPAN style="COLOR: #008000">#</SPAN><SPAN style="COLOR: #008000"> Output to stdout, CGIHttpServer will take this as response to the client</SPAN>
<SPAN style="COLOR: #0000ff">print</SPAN> <SPAN style="COLOR: #800000">"</SPAN><SPAN style="COLOR: #800000">Content-Type: text/html</SPAN><SPAN style="COLOR: #800000">"</SPAN>     <SPAN style="COLOR: #008000">#</SPAN><SPAN style="COLOR: #008000"> HTML is following</SPAN>
<SPAN style="COLOR: #0000ff">print</SPAN>                               <SPAN style="COLOR: #008000">#</SPAN><SPAN style="COLOR: #008000"> blank line, end of headers</SPAN>
<SPAN style="COLOR: #0000ff">print</SPAN> <SPAN style="COLOR: #800000">"</SPAN><SPAN style="COLOR: #800000">&lt;p&gt;Hello world!&lt;/p&gt;</SPAN><SPAN style="COLOR: #800000">"         <SPAN style="COLOR: #008000"># Start of content</SPAN></SPAN>
<SPAN style="COLOR: #0000ff">print</SPAN> <SPAN style="COLOR: #800000">"</SPAN><SPAN style="COLOR: #800000">&lt;p&gt;</SPAN><SPAN style="COLOR: #800000">"</SPAN> +  <SPAN style="COLOR: #0000ff">repr</SPAN>(form[<SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #800000">firstname</SPAN><SPAN style="COLOR: #800000">'</SPAN>]) + <SPAN style="COLOR: #800000">"</SPAN><SPAN style="COLOR: #800000">&lt;/p&gt;</SPAN><SPAN style="COLOR: #800000">"</SPAN></SPAN></PRE>
<DIV class=cnblogs_code_toolbar><SPAN class=cnblogs_code_copy><A title=&#22797;&#21046;&#20195;&#30721; void(0);"><IMG alt=&#22797;&#21046;&#20195;&#30721; src="http://common.cnblogs.com/images/copycode.gif"></A></SPAN></DIV></DIV>
<P><SPAN style="FONT-FAMILY: courier new, courier">(post.py&#38656;&#35201;&#26377;&#25191;&#34892;&#26435;&#38480;&#65292;&#35265;&#35780;&#35770;&#21306;)</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#31532;&#19968;&#34892;&#35828;&#26126;&#20102;&#33050;&#26412;&#25152;&#20351;&#29992;&#30340;&#35821;&#35328;&#65292;&#21363;Python&#12290; cgi&#21253;&#29992;&#20110;&#25552;&#21462;&#35831;&#27714;&#20013;&#21253;&#21547;&#30340;&#34920;&#26684;&#20449;&#24687;&#12290;&#33050;&#26412;&#21482;&#36127;&#36131;&#23558;&#25152;&#26377;&#30340;&#32467;&#26524;&#36755;&#20986;&#21040;&#26631;&#20934;&#36755;&#20986;(&#20351;&#29992;print)&#12290;CGIHTTPRequestHandler&#20250;&#25910;&#38598;&#36825;&#20123;&#36755;&#20986;&#65292;&#23553;&#35013;&#25104;HTTP&#22238;&#22797;&#65292;&#20256;&#36865;&#32473;&#23458;&#25143;&#31471;&#12290;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier"><SPAN style="COLOR: #ff0000"><SPAN style="COLOR: #000000">&#23545;&#20110;</SPAN>POST</SPAN>&#26041;&#27861;&#30340;&#35831;&#27714;&#65292;&#23427;&#30340;URL&#38656;&#35201;&#25351;&#21521;&#19968;&#20010;CGI&#33050;&#26412;(&#20063;&#23601;&#26159;&#22312;cgi-bin&#25110;&#32773;ht-bin&#20013;&#30340;&#25991;&#20214;)&#12290;CGIHTTPRequestHandler&#32487;&#25215;&#33258;SimpleHTTPRequestHandler&#65292;&#25152;&#20197;&#20063;&#21487;&#20197;&#22788;&#29702;<SPAN style="COLOR: #ff0000">GET</SPAN>&#26041;&#27861;&#21644;<SPAN style="COLOR: #ff0000">HEAD</SPAN>&#26041;&#27861;&#30340;&#35831;&#27714;&#12290;&#27492;&#26102;&#65292;&#22914;&#26524;URL&#25351;&#21521;CGI&#33050;&#26412;&#26102;&#65292;&#26381;&#21153;&#22120;&#23558;&#33050;&#26412;&#30340;&#36816;&#34892;&#32467;&#26524;&#20256;&#36865;&#21040;&#23458;&#25143;&#31471;&#65307;&#24403;&#27492;&#26102;URL&#25351;&#21521;&#38745;&#24577;&#25991;&#20214;&#26102;&#65292;&#26381;&#21153;&#22120;&#23558;&#25991;&#20214;&#30340;&#20869;&#23481;&#20256;&#36865;&#21040;&#23458;&#25143;&#31471;&#12290;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#26356;&#36827;&#19968;&#27493;&#65292;&#25105;&#21487;&#20197;&#35753;CGI&#33050;&#26412;&#25191;&#34892;&#25968;&#25454;&#24211;&#25805;&#20316;&#65292;&#27604;&#22914;&#23558;&#25509;&#25910;&#21040;&#30340;&#25968;&#25454;&#25918;&#20837;&#21040;&#25968;&#25454;&#24211;&#20013;&#65292;&#20197;&#21450;&#26356;&#20016;&#23500;&#30340;&#31243;&#24207;&#25805;&#20316;&#12290;&#30456;&#20851;&#20869;&#23481;&#20174;&#30053;&#12290;<BR></SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&nbsp;</SPAN></P>
<H3><SPAN style="FONT-FAMILY: courier new, courier">&#24635;&#32467;</SPAN></H3>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#25105;&#20351;&#29992;&#20102;Python&#26631;&#20934;&#24211;&#20013;&#30340;&#19968;&#20123;<SPAN style="COLOR: #ff0000">&#39640;&#32423;&#21253;</SPAN>&#31616;&#21270;&#20102;Python&#26381;&#21153;&#22120;&#12290;&#26368;&#32456;&#30340;&#25928;&#26524;&#20998;&#31163;&#38745;&#24577;&#20869;&#23481;&#12289;CGI&#24212;&#29992;&#21644;&#26381;&#21153;&#22120;&#65292;&#38477;&#20302;&#19977;&#32773;&#20043;&#38388;&#30340;&#32806;&#21512;&#65292;&#35753;&#20195;&#30721;&#21464;&#24471;&#31616;&#21333;&#32780;&#23481;&#26131;&#32500;&#25252;&#12290;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#24076;&#26395;&#20320;&#20139;&#21463;&#22312;&#33258;&#24049;&#30340;&#30005;&#33041;&#19978;&#26550;&#35774;&#26381;&#21153;&#22120;&#30340;&#36807;&#31243;&#12290;</SPAN></P></DIV></DIV>