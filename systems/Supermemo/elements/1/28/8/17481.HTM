<H1 class=postTitle><A id=cb_post_title_url class=postTitle2 href="http://www.cnblogs.com/vamei/archive/2013/02/16/2820212.html">Python&#28145;&#20837;05 &#35013;&#39280;&#22120;</A> </H1>
<DIV class=clear></DIV>
<DIV class=postBody>
<DIV id=cnblogs_post_body>
<P><SPAN style="FONT-FAMILY: courier new, courier; COLOR: #000000"><SPAN style="FONT-FAMILY: courier new, courier">&#20316;&#32773;&#65306;Vamei &#20986;&#22788;&#65306;http://www.cnblogs.com/vamei &#27426;&#36814;&#36716;&#36733;&#65292;&#20063;&#35831;&#20445;&#30041;&#36825;&#27573;&#22768;&#26126;&#12290;&#35874;&#35874;&#65281;</SPAN></SPAN></P>
<P>&nbsp;</P>
<P><SPAN style="FONT-FAMILY: courier new, courier"><SPAN style="COLOR: #ff0000">&#35013;&#39280;&#22120;</SPAN>(decorator)&#26159;&#19968;&#31181;&#39640;&#32423;Python&#35821;&#27861;&#12290;&#35013;&#39280;&#22120;&#21487;&#20197;<SPAN style="COLOR: #ff0000">&#23545;&#19968;&#20010;&#20989;&#25968;&#12289;&#26041;&#27861;&#25110;&#32773;&#31867;&#36827;&#34892;&#21152;&#24037;</SPAN>&#12290;&#22312;Python&#20013;&#65292;&#25105;&#20204;&#26377;&#22810;&#31181;&#26041;&#27861;&#23545;&#20989;&#25968;&#21644;&#31867;&#36827;&#34892;&#21152;&#24037;&#65292;&#27604;&#22914;&#22312;<A href="http://www.cnblogs.com/vamei/archive/2012/12/15/2772451.html">Python&#38381;&#21253;</A>&#20013;&#65292;&#25105;&#20204;&#35265;&#21040;&#20989;&#25968;&#23545;&#35937;&#20316;&#20026;&#26576;&#19968;&#20010;&#20989;&#25968;&#30340;&#36820;&#22238;&#32467;&#26524;&#12290;&#30456;&#23545;&#20110;&#20854;&#23427;&#26041;&#24335;&#65292;&#35013;&#39280;&#22120;&#35821;&#27861;&#31616;&#21333;&#65292;&#20195;&#30721;&#21487;&#35835;&#24615;&#39640;&#12290;&#22240;&#27492;&#65292;&#35013;&#39280;&#22120;&#22312;Python&#39033;&#30446;&#20013;&#26377;&#24191;&#27867;&#30340;&#24212;&#29992;&#12290;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#35013;&#39280;&#22120;&#26368;&#26089;&#22312;Python 2.5&#20013;&#20986;&#29616;&#65292;&#23427;&#26368;&#21021;&#34987;&#29992;&#20110;&#21152;&#24037;&#20989;&#25968;&#21644;&#26041;&#27861;&#36825;&#26679;&#30340;<SPAN style="COLOR: #ff0000">&#21487;&#35843;&#29992;&#23545;&#35937;</SPAN>(callable object&#65292;&#36825;&#26679;&#30340;&#23545;&#35937;&#23450;&#20041;&#26377;__call__&#26041;&#27861;)&#12290;&#22312;Python 2.6&#20197;&#21450;&#20043;&#21518;&#30340;Python&#29256;&#26412;&#20013;&#65292;&#35013;&#39280;&#22120;&#34987;&#36827;&#19968;&#27493;&#29992;&#20110;&#21152;&#24037;&#31867;&#12290;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&nbsp;</SPAN></P>
<H3><SPAN style="FONT-FAMILY: courier new, courier">&#35013;&#39280;&#20989;&#25968;&#21644;&#26041;&#27861;</SPAN></H3>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#25105;&#20204;&#20808;&#23450;&#20041;&#20004;&#20010;&#31616;&#21333;&#30340;&#25968;&#23398;&#20989;&#25968;&#65292;&#19968;&#20010;&#29992;&#26469;&#35745;&#31639;&#24179;&#26041;&#21644;&#65292;&#19968;&#20010;&#29992;&#26469;&#35745;&#31639;&#24179;&#26041;&#24046;&#65306;</SPAN></P>
<DIV class=cnblogs_code>
<DIV class=cnblogs_code_toolbar><SPAN class=cnblogs_code_copy><A title=&#22797;&#21046;&#20195;&#30721; void(0);"><IMG alt=&#22797;&#21046;&#20195;&#30721; src="http://common.cnblogs.com/images/copycode.gif"></A></SPAN></DIV><PRE><SPAN style="FONT-FAMILY: courier new, courier"><SPAN style="COLOR: #008000">#</SPAN><SPAN style="COLOR: #008000"> get square sum</SPAN>
<SPAN style="COLOR: #0000ff">def</SPAN><SPAN style="COLOR: #000000"> square_sum(a, b):
    </SPAN><SPAN style="COLOR: #0000ff">return</SPAN> a**2 + b**2

<SPAN style="COLOR: #008000">#</SPAN><SPAN style="COLOR: #008000"> get square diff</SPAN>
<SPAN style="COLOR: #0000ff">def</SPAN><SPAN style="COLOR: #000000"> square_diff(a, b):
    </SPAN><SPAN style="COLOR: #0000ff">return</SPAN> a**2 - b**2</SPAN><BR><BR></PRE><PRE><SPAN style="FONT-FAMILY: courier new, courier"><SPAN style="COLOR: #0000ff">print</SPAN>(square_sum(3, 4<SPAN style="COLOR: #000000">))
</SPAN><SPAN style="COLOR: #0000ff">print</SPAN>(square_diff(3, 4))</SPAN></PRE>
<DIV class=cnblogs_code_toolbar><SPAN class=cnblogs_code_copy><A title=&#22797;&#21046;&#20195;&#30721; void(0);"><IMG alt=&#22797;&#21046;&#20195;&#30721; src="http://common.cnblogs.com/images/copycode.gif"></A></SPAN></DIV></DIV>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#22312;&#25317;&#26377;&#20102;&#22522;&#26412;&#30340;&#25968;&#23398;&#21151;&#33021;&#20043;&#21518;&#65292;&#25105;&#20204;&#21487;&#33021;&#24819;&#20026;&#20989;&#25968;&#22686;&#21152;&#20854;&#23427;&#30340;&#21151;&#33021;&#65292;&#27604;&#22914;&#25171;&#21360;&#36755;&#20837;&#12290;&#25105;&#20204;&#21487;&#20197;&#25913;&#20889;&#20989;&#25968;&#26469;&#23454;&#29616;&#36825;&#19968;&#28857;&#65306;</SPAN></P>
<DIV class=cnblogs_code>
<DIV class=cnblogs_code_toolbar><SPAN class=cnblogs_code_copy><A title=&#22797;&#21046;&#20195;&#30721; void(0);"><IMG alt=&#22797;&#21046;&#20195;&#30721; src="http://common.cnblogs.com/images/copycode.gif"></A></SPAN></DIV><PRE><SPAN style="FONT-FAMILY: courier new, courier"><SPAN style="COLOR: #008000">#</SPAN><SPAN style="COLOR: #008000"> modify: print input</SPAN>

<SPAN style="COLOR: #008000">#</SPAN><SPAN style="COLOR: #008000"> get square sum</SPAN>
<SPAN style="COLOR: #0000ff">def</SPAN><SPAN style="COLOR: #000000"> square_sum(a, b):
    </SPAN><SPAN style="COLOR: #0000ff">print</SPAN>(<SPAN style="COLOR: #800000">"</SPAN><SPAN style="COLOR: #800000">intput:</SPAN><SPAN style="COLOR: #800000">"</SPAN><SPAN style="COLOR: #000000">, a, b)
    </SPAN><SPAN style="COLOR: #0000ff">return</SPAN> a**2 + b**2

<SPAN style="COLOR: #008000">#</SPAN><SPAN style="COLOR: #008000"> get square diff</SPAN>
<SPAN style="COLOR: #0000ff">def</SPAN><SPAN style="COLOR: #000000"> square_diff(a, b):
    </SPAN><SPAN style="COLOR: #0000ff">print</SPAN>(<SPAN style="COLOR: #800000">"</SPAN><SPAN style="COLOR: #800000">input</SPAN><SPAN style="COLOR: #800000">"</SPAN><SPAN style="COLOR: #000000">, a, b)
    </SPAN><SPAN style="COLOR: #0000ff">return</SPAN> a**2 - b**2</SPAN><BR><BR></PRE><PRE><SPAN style="FONT-FAMILY: courier new, courier"><SPAN style="COLOR: #0000ff">print</SPAN>(square_sum(3, 4<SPAN style="COLOR: #000000">))
</SPAN><SPAN style="COLOR: #0000ff">print</SPAN>(square_diff(3, 4))</SPAN></PRE>
<DIV class=cnblogs_code_toolbar><SPAN class=cnblogs_code_copy><A title=&#22797;&#21046;&#20195;&#30721; void(0);"><IMG alt=&#22797;&#21046;&#20195;&#30721; src="http://common.cnblogs.com/images/copycode.gif"></A></SPAN></DIV></DIV>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#25105;&#20204;&#20462;&#25913;&#20102;&#20989;&#25968;&#30340;&#23450;&#20041;&#65292;&#20026;&#20989;&#25968;&#22686;&#21152;&#20102;&#21151;&#33021;&#12290;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&nbsp;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#29616;&#22312;&#65292;&#25105;&#20204;&#20351;&#29992;&#35013;&#39280;&#22120;&#26469;&#23454;&#29616;&#19978;&#36848;&#20462;&#25913;&#65306;</SPAN></P>
<DIV class=cnblogs_code>
<DIV class=cnblogs_code_toolbar><SPAN class=cnblogs_code_copy><A title=&#22797;&#21046;&#20195;&#30721; void(0);"><IMG alt=&#22797;&#21046;&#20195;&#30721; src="http://common.cnblogs.com/images/copycode.gif"></A></SPAN></DIV><PRE><SPAN style="FONT-FAMILY: courier new, courier"><SPAN style="COLOR: #0000ff">def</SPAN><SPAN style="COLOR: #000000"> decorator(F):
    </SPAN><SPAN style="COLOR: #0000ff">def</SPAN><SPAN style="COLOR: #000000"> new_F(a, b):
        </SPAN><SPAN style="COLOR: #0000ff">print</SPAN>(<SPAN style="COLOR: #800000">"</SPAN><SPAN style="COLOR: #800000">input</SPAN><SPAN style="COLOR: #800000">"</SPAN><SPAN style="COLOR: #000000">, a, b)
        </SPAN><SPAN style="COLOR: #0000ff">return</SPAN><SPAN style="COLOR: #000000"> F(a, b)
    </SPAN><SPAN style="COLOR: #0000ff">return</SPAN><SPAN style="COLOR: #000000"> new_F

</SPAN><SPAN style="COLOR: #008000">#</SPAN><SPAN style="COLOR: #008000"> get square sum</SPAN>
<SPAN style="COLOR: #000000">@decorator
</SPAN><SPAN style="COLOR: #0000ff">def</SPAN><SPAN style="COLOR: #000000"> square_sum(a, b):
    </SPAN><SPAN style="COLOR: #0000ff">return</SPAN> a**2 + b**2

<SPAN style="COLOR: #008000">#</SPAN><SPAN style="COLOR: #008000"> get square diff</SPAN>
<SPAN style="COLOR: #000000">@decorator
</SPAN><SPAN style="COLOR: #0000ff">def</SPAN><SPAN style="COLOR: #000000"> square_diff(a, b):
    </SPAN><SPAN style="COLOR: #0000ff">return</SPAN> a**2 - b**2

<SPAN style="COLOR: #0000ff">print</SPAN>(square_sum(3, 4<SPAN style="COLOR: #000000">))
</SPAN><SPAN style="COLOR: #0000ff">print</SPAN>(square_diff(3, 4))</SPAN></PRE>
<DIV class=cnblogs_code_toolbar><SPAN class=cnblogs_code_copy><A title=&#22797;&#21046;&#20195;&#30721; void(0);"><IMG alt=&#22797;&#21046;&#20195;&#30721; src="http://common.cnblogs.com/images/copycode.gif"></A></SPAN></DIV></DIV>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#35013;&#39280;&#22120;&#21487;&#20197;&#29992;def&#30340;&#24418;&#24335;&#23450;&#20041;&#65292;&#22914;&#19978;&#38754;&#20195;&#30721;&#20013;&#30340;decorator&#12290;&#35013;&#39280;&#22120;&#25509;&#25910;&#19968;&#20010;&#21487;&#35843;&#29992;&#23545;&#35937;&#20316;&#20026;&#36755;&#20837;&#21442;&#25968;&#65292;&#24182;&#36820;&#22238;&#19968;&#20010;&#26032;&#30340;&#21487;&#35843;&#29992;&#23545;&#35937;&#12290;&#35013;&#39280;&#22120;&#26032;&#24314;&#20102;&#19968;&#20010;&#21487;&#35843;&#29992;&#23545;&#35937;&#65292;&#20063;&#23601;&#26159;&#19978;&#38754;&#30340;new_F&#12290;new_F&#20013;&#65292;&#25105;&#20204;<SPAN style="COLOR: #ff0000">&#22686;&#21152;&#20102;&#25171;&#21360;&#30340;&#21151;&#33021;</SPAN>&#65292;&#24182;&#36890;&#36807;&#35843;&#29992;F(a, b)&#26469;<SPAN style="COLOR: #ff0000">&#23454;&#29616;&#21407;&#26377;&#20989;&#25968;</SPAN>&#30340;&#21151;&#33021;&#12290;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#23450;&#20041;&#22909;&#35013;&#39280;&#22120;&#21518;&#65292;&#25105;&#20204;&#23601;&#21487;&#20197;&#36890;&#36807;@&#35821;&#27861;&#20351;&#29992;&#20102;&#12290;&#22312;&#20989;&#25968;square_sum&#21644;square_diff&#23450;&#20041;&#20043;&#21069;&#35843;&#29992;@decorator&#65292;&#25105;&#20204;&#23454;&#38469;&#19978;&#23558;square_sum&#25110;square_diff&#20256;&#36882;&#32473;decorator&#65292;&#24182;&#23558;decorator&#36820;&#22238;&#30340;&#26032;&#30340;&#21487;&#35843;&#29992;&#23545;&#35937;&#36171;&#32473;&#21407;&#26469;&#30340;&#20989;&#25968;&#21517;(square_sum&#25110;square_diff)&#12290; &#25152;&#20197;&#65292;&#24403;&#25105;&#20204;&#35843;&#29992;square_sum(3, 4)&#30340;&#26102;&#20505;&#65292;&#23601;&#30456;&#24403;&#20110;&#65306;</SPAN></P>
<DIV class=cnblogs_code><PRE><SPAN style="FONT-FAMILY: courier new, courier">square_sum =<SPAN style="COLOR: #000000"> decorator(square_sum)
square_sum(</SPAN>3, 4)</SPAN></PRE></DIV>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#25105;&#20204;&#30693;&#36947;&#65292;Python&#20013;&#30340;&#21464;&#37327;&#21517;&#21644;&#23545;&#35937;&#26159;&#20998;&#31163;&#30340;&#12290;&#21464;&#37327;&#21517;&#21487;&#20197;&#25351;&#21521;&#20219;&#24847;&#19968;&#20010;&#23545;&#35937;&#12290;&#20174;&#26412;&#36136;&#19978;&#65292;&#35013;&#39280;&#22120;&#36215;&#21040;&#30340;&#23601;&#26159;&#36825;&#26679;&#19968;&#20010;&#37325;&#26032;&#25351;&#21521;&#21464;&#37327;&#21517;&#30340;&#20316;&#29992;(name binding)&#65292;&#35753;&#21516;&#19968;&#20010;&#21464;&#37327;&#21517;&#25351;&#21521;&#19968;&#20010;&#26032;&#36820;&#22238;&#30340;&#21487;&#35843;&#29992;&#23545;&#35937;&#65292;&#20174;&#32780;&#36798;&#21040;&#20462;&#25913;&#21487;&#35843;&#29992;&#23545;&#35937;&#30340;&#30446;&#30340;&#12290;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#19982;&#21152;&#24037;&#20989;&#25968;&#31867;&#20284;&#65292;&#25105;&#20204;&#21487;&#20197;&#20351;&#29992;&#35013;&#39280;&#22120;&#21152;&#24037;&#31867;&#30340;&#26041;&#27861;&#12290;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&nbsp;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#22914;&#26524;&#25105;&#20204;&#26377;&#20854;&#20182;&#30340;&#31867;&#20284;&#20989;&#25968;&#65292;&#25105;&#20204;&#21487;&#20197;&#32487;&#32493;&#35843;&#29992;decorator&#26469;&#20462;&#39280;&#20989;&#25968;&#65292;&#32780;&#19981;&#29992;&#37325;&#22797;&#20462;&#25913;&#20989;&#25968;&#25110;&#32773;&#22686;&#21152;&#26032;&#30340;&#23553;&#35013;&#12290;&#36825;&#26679;&#65292;&#25105;&#20204;&#23601;&#25552;&#39640;&#20102;&#31243;&#24207;&#30340;&#21487;&#37325;&#22797;&#21033;&#29992;&#24615;&#65292;&#24182;&#22686;&#21152;&#20102;&#31243;&#24207;&#30340;&#21487;&#35835;&#24615;&#12290;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&nbsp;</SPAN></P>
<H3><SPAN style="FONT-FAMILY: courier new, courier">&#21547;&#21442;&#30340;&#35013;&#39280;&#22120;</SPAN></H3>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#22312;&#19978;&#38754;&#30340;&#35013;&#39280;&#22120;&#35843;&#29992;&#20013;&#65292;&#27604;&#22914;@decorator&#65292;&#35813;&#35013;&#39280;&#22120;&#40664;&#35748;&#23427;&#21518;&#38754;&#30340;&#20989;&#25968;&#26159;&#21807;&#19968;&#30340;&#21442;&#25968;&#12290;&#35013;&#39280;&#22120;&#30340;&#35821;&#27861;&#20801;&#35768;&#25105;&#20204;&#35843;&#29992;decorator&#26102;&#65292;&#25552;&#20379;&#20854;&#23427;&#21442;&#25968;&#65292;&#27604;&#22914;@decorator(a)&#12290;&#36825;&#26679;&#65292;&#23601;&#20026;&#35013;&#39280;&#22120;&#30340;&#32534;&#20889;&#21644;&#20351;&#29992;&#25552;&#20379;&#20102;&#26356;&#22823;&#30340;&#28789;&#27963;&#24615;&#12290;</SPAN></P>
<DIV class=cnblogs_code>
<DIV class=cnblogs_code_toolbar><SPAN class=cnblogs_code_copy><A title=&#22797;&#21046;&#20195;&#30721; void(0);"><IMG alt=&#22797;&#21046;&#20195;&#30721; src="http://common.cnblogs.com/images/copycode.gif"></A></SPAN></DIV><PRE><SPAN style="FONT-FAMILY: courier new, courier"><SPAN style="COLOR: #008000">#</SPAN><SPAN style="COLOR: #008000"> a new wrapper layer</SPAN>
<SPAN style="COLOR: #0000ff">def</SPAN> pre_str(pre=<SPAN style="COLOR: #800000">''</SPAN><SPAN style="COLOR: #000000">):
    </SPAN><SPAN style="COLOR: #008000">#</SPAN><SPAN style="COLOR: #008000"> old decorator</SPAN>
    <SPAN style="COLOR: #0000ff">def</SPAN><SPAN style="COLOR: #000000"> decorator(F):
        </SPAN><SPAN style="COLOR: #0000ff">def</SPAN><SPAN style="COLOR: #000000"> new_F(a, b):
            </SPAN><SPAN style="COLOR: #0000ff">print</SPAN>(pre + <SPAN style="COLOR: #800000">"</SPAN><SPAN style="COLOR: #800000">input</SPAN><SPAN style="COLOR: #800000">"</SPAN><SPAN style="COLOR: #000000">, a, b)
            </SPAN><SPAN style="COLOR: #0000ff">return</SPAN><SPAN style="COLOR: #000000"> F(a, b)
        </SPAN><SPAN style="COLOR: #0000ff">return</SPAN><SPAN style="COLOR: #000000"> new_F
    </SPAN><SPAN style="COLOR: #0000ff">return</SPAN><SPAN style="COLOR: #000000"> decorator

</SPAN><SPAN style="COLOR: #008000">#</SPAN><SPAN style="COLOR: #008000"> get square sum</SPAN>
@pre_str(<SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #800000">^_^</SPAN><SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #000000">)
</SPAN><SPAN style="COLOR: #0000ff">def</SPAN><SPAN style="COLOR: #000000"> square_sum(a, b):
    </SPAN><SPAN style="COLOR: #0000ff">return</SPAN> a**2 + b**2

<SPAN style="COLOR: #008000">#</SPAN><SPAN style="COLOR: #008000"> get square diff</SPAN>
@pre_str(<SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #800000">T_T</SPAN><SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #000000">)
</SPAN><SPAN style="COLOR: #0000ff">def</SPAN><SPAN style="COLOR: #000000"> square_diff(a, b):
    </SPAN><SPAN style="COLOR: #0000ff">return</SPAN> a**2 - b**2

<SPAN style="COLOR: #0000ff">print</SPAN>(square_sum(3, 4<SPAN style="COLOR: #000000">))
</SPAN><SPAN style="COLOR: #0000ff">print</SPAN>(square_diff(3, 4))</SPAN></PRE>
<DIV class=cnblogs_code_toolbar><SPAN class=cnblogs_code_copy><A title=&#22797;&#21046;&#20195;&#30721; void(0);"><IMG alt=&#22797;&#21046;&#20195;&#30721; src="http://common.cnblogs.com/images/copycode.gif"></A></SPAN></DIV></DIV>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#19978;&#38754;&#30340;pre_str&#26159;&#20801;&#35768;&#21442;&#25968;&#30340;&#35013;&#39280;&#22120;&#12290;&#23427;&#23454;&#38469;&#19978;&#26159;&#23545;&#21407;&#26377;&#35013;&#39280;&#22120;&#30340;&#19968;&#20010;&#20989;&#25968;&#23553;&#35013;&#65292;&#24182;&#36820;&#22238;&#19968;&#20010;&#35013;&#39280;&#22120;&#12290;&#25105;&#20204;&#21487;&#20197;&#23558;&#23427;&#29702;&#35299;&#20026;&#19968;&#20010;&#21547;&#26377;&#29615;&#22659;&#21442;&#37327;&#30340;<A href="http://www.cnblogs.com/vamei/archive/2012/12/15/2772451.html">&#38381;&#21253;</A>&#12290;&#24403;&#25105;&#20204;&#20351;&#29992;@pre_str('^_^')&#35843;&#29992;&#30340;&#26102;&#20505;&#65292;Python&#33021;&#22815;&#21457;&#29616;&#36825;&#19968;&#23618;&#30340;&#23553;&#35013;&#65292;&#24182;&#25226;&#21442;&#25968;&#20256;&#36882;&#21040;&#35013;&#39280;&#22120;&#30340;&#29615;&#22659;&#20013;&#12290;&#35813;&#35843;&#29992;&#30456;&#24403;&#20110;:</SPAN></P>
<DIV class=cnblogs_code><PRE><SPAN style="FONT-FAMILY: courier new, courier">square_sum = pre_str(<SPAN style="COLOR: #800000">'</SPAN><SPAN style="COLOR: #800000">^_^</SPAN><SPAN style="COLOR: #800000">'</SPAN>) (square_sum)</SPAN></PRE></DIV>
<P>&nbsp;</P>
<H3><SPAN style="FONT-FAMILY: courier new, courier">&#35013;&#39280;&#31867;</SPAN></H3>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#22312;&#19978;&#38754;&#30340;&#20363;&#23376;&#20013;&#65292;&#35013;&#39280;&#22120;&#25509;&#25910;&#19968;&#20010;&#20989;&#25968;&#65292;&#24182;&#36820;&#22238;&#19968;&#20010;&#20989;&#25968;&#65292;&#20174;&#32780;&#36215;&#21040;&#21152;&#24037;&#20989;&#25968;&#30340;&#25928;&#26524;&#12290;&#22312;Python 2.6&#20197;&#21518;&#65292;&#35013;&#39280;&#22120;&#34987;&#25299;&#23637;&#21040;&#31867;&#12290;&#19968;&#20010;&#35013;&#39280;&#22120;&#21487;&#20197;&#25509;&#25910;&#19968;&#20010;&#31867;&#65292;&#24182;&#36820;&#22238;&#19968;&#20010;&#31867;&#65292;&#20174;&#32780;&#36215;&#21040;&#21152;&#24037;&#31867;&#30340;&#25928;&#26524;&#12290;</SPAN></P>
<DIV class=cnblogs_code>
<DIV class=cnblogs_code_toolbar><SPAN class=cnblogs_code_copy><A title=&#22797;&#21046;&#20195;&#30721; void(0);"><IMG alt=&#22797;&#21046;&#20195;&#30721; src="http://common.cnblogs.com/images/copycode.gif"></A></SPAN></DIV><PRE><SPAN style="FONT-FAMILY: courier new, courier"><SPAN style="COLOR: #0000ff">def</SPAN><SPAN style="COLOR: #000000"> decorator(aClass):
    </SPAN><SPAN style="COLOR: #0000ff">class</SPAN><SPAN style="COLOR: #000000"> newClass:
        </SPAN><SPAN style="COLOR: #0000ff">def</SPAN> <SPAN style="COLOR: #800080">__init__</SPAN><SPAN style="COLOR: #000000">(self, age):
            self.total_display   </SPAN>=<SPAN style="COLOR: #000000"> 0
            self.wrapped         </SPAN>=<SPAN style="COLOR: #000000"> aClass(age)
        </SPAN><SPAN style="COLOR: #0000ff">def</SPAN><SPAN style="COLOR: #000000"> display(self):
            self.total_display </SPAN>+= 1
            <SPAN style="COLOR: #0000ff">print</SPAN>(<SPAN style="COLOR: #800000">"</SPAN><SPAN style="COLOR: #800000">total display</SPAN><SPAN style="COLOR: #800000">"</SPAN><SPAN style="COLOR: #000000">, self.total_display)
            self.wrapped.display()
    </SPAN><SPAN style="COLOR: #0000ff">return</SPAN><SPAN style="COLOR: #000000"> newClass

@decorator
</SPAN><SPAN style="COLOR: #0000ff">class</SPAN><SPAN style="COLOR: #000000"> Bird:
    </SPAN><SPAN style="COLOR: #0000ff">def</SPAN> <SPAN style="COLOR: #800080">__init__</SPAN><SPAN style="COLOR: #000000">(self, age):
        self.age </SPAN>=<SPAN style="COLOR: #000000"> age
    </SPAN><SPAN style="COLOR: #0000ff">def</SPAN><SPAN style="COLOR: #000000"> display(self):
        </SPAN><SPAN style="COLOR: #0000ff">print</SPAN>(<SPAN style="COLOR: #800000">"</SPAN><SPAN style="COLOR: #800000">My age is</SPAN><SPAN style="COLOR: #800000">"</SPAN><SPAN style="COLOR: #000000">,self.age)

eagleLord </SPAN>= Bird(5<SPAN style="COLOR: #000000">)
</SPAN><SPAN style="COLOR: #0000ff">for</SPAN> i <SPAN style="COLOR: #0000ff">in</SPAN> range(3<SPAN style="COLOR: #000000">):
    eagleLord.display()</SPAN></SPAN></PRE>
<DIV class=cnblogs_code_toolbar><SPAN class=cnblogs_code_copy><A title=&#22797;&#21046;&#20195;&#30721; void(0);"><IMG alt=&#22797;&#21046;&#20195;&#30721; src="http://common.cnblogs.com/images/copycode.gif"></A></SPAN></DIV></DIV>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#22312;decorator&#20013;&#65292;&#25105;&#20204;&#36820;&#22238;&#20102;&#19968;&#20010;&#26032;&#31867;newClass&#12290;&#22312;&#26032;&#31867;&#20013;&#65292;&#25105;&#20204;&#35760;&#24405;&#20102;&#21407;&#26469;&#31867;&#29983;&#25104;&#30340;&#23545;&#35937;&#65288;self.wrapped&#65289;&#65292;&#24182;&#38468;&#21152;&#20102;&#26032;&#30340;&#23646;&#24615;total_display&#65292;&#29992;&#20110;&#35760;&#24405;&#35843;&#29992;display&#30340;&#27425;&#25968;&#12290;&#25105;&#20204;&#20063;&#21516;&#26102;&#26356;&#25913;&#20102;display&#26041;&#27861;&#12290;</SPAN></P>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#36890;&#36807;&#20462;&#25913;&#65292;&#25105;&#20204;&#30340;Bird&#31867;&#21487;&#20197;&#26174;&#31034;&#35843;&#29992;display&#30340;&#27425;&#25968;&#20102;&#12290;</SPAN></P>
<P>&nbsp;</P>
<H3><SPAN style="FONT-FAMILY: courier new, courier">&#24635;&#32467;</SPAN></H3>
<P><SPAN style="FONT-FAMILY: courier new, courier">&#35013;&#39280;&#22120;&#30340;&#26680;&#24515;&#20316;&#29992;&#26159;name binding&#12290;&#36825;&#31181;&#35821;&#27861;&#26159;Python&#22810;&#32534;&#31243;&#33539;&#24335;&#30340;&#21448;&#19968;&#20010;&#20307;&#29616;&#12290;&#22823;&#37096;&#20998;Python&#29992;&#25143;&#37117;&#19981;&#24590;&#20040;&#38656;&#35201;&#23450;&#20041;&#35013;&#39280;&#22120;&#65292;&#20294;&#26377;&#21487;&#33021;&#20250;&#20351;&#29992;&#35013;&#39280;&#22120;&#12290;&#37492;&#20110;&#35013;&#39280;&#22120;&#22312;Python&#39033;&#30446;&#20013;&#30340;&#24191;&#27867;&#20351;&#29992;&#65292;&#20102;&#35299;&#36825;&#19968;&#35821;&#27861;&#26159;&#38750;&#24120;&#26377;&#30410;&#30340;&#12290;</SPAN></P></DIV></DIV>