<P style="MARGIN: 0cm 0cm 0pt" class=MsoNormal><B><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US><FONT face=Calibri>2. HOW TO USE SVGALIB</FONT></SPAN></B></P>
<P style="MARGIN: 0cm 0cm 0pt" class=MsoNormal><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US><FONT face=Calibri>For basic svgalib usage (no mouse, no raw keyboard) add&nbsp;<B>#include &lt;<A href="file://usr/include/vga.h"><FONT color=#0000ff>vga.h</FONT></A>&gt;</B>&nbsp;at the beginning your program. Use&nbsp;<B><A href="http://www.fifi.org/cgi-bin/man2html?vga_init+3"><FONT color=#0000ff>vga_init</FONT></A></B>(3) as your first<B>svgalib</B>&nbsp;call. This will give up root privileges right after initialization, making setuid-root binaries relatively safe.</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt" class=MsoNormal><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US><FONT face=Calibri>The function&nbsp;<B><A href="http://www.fifi.org/cgi-bin/man2html?vga_getdefaultmode+3"><FONT color=#0000ff>vga_getdefaultmode</FONT></A></B>(3) checks the environment variable&nbsp;<B>SVGALIB_DEFAULT_MODE</B>&nbsp;for a default mode, and returns the corresponding mode number. The environment string can either be a mode number or a mode name as in (<B>G640x480x2</B>,&nbsp;<B>G640x480x16</B>,<B>G640x480x256 ,</B>&nbsp;<B>G640x480x32K</B>,&nbsp;<B>G640x480x64K</B>,&nbsp;<B>G640x480x16M</B>). As an example, to set the default graphics mode to 640x480, 256 colors, use:</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt" class=MsoNormal><FONT face=Calibri><B><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US>export SVGALIB_DEFAULT_MODE=G640x480x256</SPAN></B><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US></SPAN></FONT></P>
<P style="MARGIN: 0cm 0cm 0pt" class=MsoNormal><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US><FONT face=Calibri>on the&nbsp;<B><A href="http://www.fifi.org/cgi-bin/man2html?bash+1"><FONT color=#0000ff>bash</FONT></A>(1)</B>&nbsp;command line. If a program needs just a linear VGA/SVGA resolution (as required by&nbsp;<B><A href="http://www.fifi.org/cgi-bin/man2html?vgagl+7"><FONT color=#0000ff>vgagl</FONT></A></B>(7)), only modes where<B>bytesperpixel</B>&nbsp;in the&nbsp;<B>vga_modeinfo</B>&nbsp;structure returned by&nbsp;<B><A href="http://www.fifi.org/cgi-bin/man2html?vga_getmodeinfo+3"><FONT color=#0000ff>vga_getmodeinfo</FONT></A></B>(3) is greater or equal to 1 should be accepted (this is 0 for tweaked planar 256-color VGA modes).</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt" class=MsoNormal><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US><FONT face=Calibri>Use&nbsp;<B>vga_setmode(</B><I>graphicsmode</I><B>)</B>&nbsp;to set a graphics mode. Use&nbsp;<B>vga_setmode(TEXT)</B>&nbsp;to restore textmode before program exit.</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt" class=MsoNormal><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US><FONT face=Calibri>Programs that use svgalib must&nbsp;<B>#include&lt;<A href="file://usr/include/vga.h"><FONT color=#0000ff>vga.h</FONT></A>&gt;</B>; if they also use the external graphics library&nbsp;<B><A href="http://www.fifi.org/cgi-bin/man2html?vgagl+7"><FONT color=#0000ff>vgagl</FONT></A></B>(7), you must also<B>#include&lt;<A href="file://usr/include/vgagl.h"><FONT color=#0000ff>vgagl.h</FONT></A>&gt;</B>. Linking must be done with&nbsp;<B>-lvga</B>&nbsp;(and&nbsp;<B>-lvgagl</B>&nbsp;before&nbsp;<B>-lvga</B>, if&nbsp;<B><A href="http://www.fifi.org/cgi-bin/man2html?vgagl+7"><FONT color=#0000ff>vgagl</FONT></A></B>(7) is used). You can save binary space by removing the unused chipset drivers in&nbsp;<I>Makefile.cfg</I>&nbsp;if you only use specific chipsets. However this reduces the flexibility of svgalib and has a significant effect only when you use the static libraries. You should better use the shared libraries and these will load only the really used parts anyway.</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt" class=MsoNormal><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US><FONT face=Calibri>Functions in the&nbsp;<B><A href="http://www.fifi.org/cgi-bin/man2html?vgagl+7"><FONT color=#0000ff>vgagl</FONT></A></B>(7) library have the prefix&nbsp;<B>gl_</B>. Please see&nbsp;<B><A href="http://www.fifi.org/cgi-bin/man2html?vgagl+7"><FONT color=#0000ff>vgagl</FONT></A></B>(7) for details.</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt" class=MsoNormal><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US><FONT face=Calibri>There are demos with sources available which will also help to get you started, in recomended order of interest:&nbsp;<B><A href="http://www.fifi.org/cgi-bin/man2html?vgatest+6"><FONT color=#0000ff>vgatest</FONT></A></B>(6),<B><A href="http://www.fifi.org/cgi-bin/man2html?keytest+6"><FONT color=#0000ff>keytest</FONT></A></B>(6),&nbsp;<B><A href="http://www.fifi.org/cgi-bin/man2html?mousetest+6"><FONT color=#0000ff>mousetest</FONT></A></B>(6),&nbsp;<B><A href="http://www.fifi.org/cgi-bin/man2html?eventtest+6"><FONT color=#0000ff>eventtest</FONT></A></B>(6),&nbsp;<B><A href="http://www.fifi.org/cgi-bin/man2html?forktest+6"><FONT color=#0000ff>forktest</FONT></A></B>(6),&nbsp;<B><A href="http://www.fifi.org/cgi-bin/man2html?bg_test+6"><FONT color=#0000ff>bg_test</FONT></A></B>(6),&nbsp;<B><A href="http://www.fifi.org/cgi-bin/man2html?scrolltest+6"><FONT color=#0000ff>scrolltest</FONT></A></B>(6),&nbsp;<B><A href="http://www.fifi.org/cgi-bin/man2html?speedtest+6"><FONT color=#0000ff>speedtest</FONT></A></B>(6),&nbsp;<B><A href="http://www.fifi.org/cgi-bin/man2html?fun+6"><FONT color=#0000ff>fun</FONT></A></B>(6),&nbsp;<B><A href="http://www.fifi.org/cgi-bin/man2html?spin+6"><FONT color=#0000ff>spin</FONT></A></B>(6),&nbsp;<B><A href="http://www.fifi.org/cgi-bin/man2html?testlinear+6"><FONT color=#0000ff>testlinear</FONT></A></B>(6),<B><A href="http://www.fifi.org/cgi-bin/man2html?lineart+6"><FONT color=#0000ff>lineart</FONT></A></B>(6),&nbsp;<B><A href="http://www.fifi.org/cgi-bin/man2html?testgl+6"><FONT color=#0000ff>testgl</FONT></A></B>(6),&nbsp;<B><A href="http://www.fifi.org/cgi-bin/man2html?accel+6"><FONT color=#0000ff>accel</FONT></A></B>(6),&nbsp;<B><A href="http://www.fifi.org/cgi-bin/man2html?testaccel+6"><FONT color=#0000ff>testaccel</FONT></A></B>(6),&nbsp;<B><A href="http://www.fifi.org/cgi-bin/man2html?plane+6"><FONT color=#0000ff>plane</FONT></A></B>(6), and&nbsp;<B><A href="http://www.fifi.org/cgi-bin/man2html?wrapdemo+6"><FONT color=#0000ff>wrapdemo</FONT></A></B>(6).</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt" class=MsoNormal><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US><FONT face=Calibri>Debugging your programs will turn out to be rather difficult, because the svgalib application can not restore textmode when it returns to the debugger.</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt" class=MsoNormal><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US><FONT face=Calibri>Happy are the users with a serial terminal, X-station, or another way to log into the machine from network. These can use</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt" class=MsoNormal><FONT face=Calibri><B><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US>textmode &lt;/dev/tty</SPAN></B><I><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US>N</SPAN></I><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US></SPAN></FONT></P>
<P style="MARGIN: 0cm 0cm 0pt" class=MsoNormal><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US><FONT face=Calibri>on the console where the program runs and continue.</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt" class=MsoNormal><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US><FONT face=Calibri>However, the&nbsp;<B><A href="http://www.fifi.org/cgi-bin/man2html?vga_flip+3"><FONT color=#0000ff>vga_flip</FONT></A></B>(3) function allows you to switch to textmode by entering a call to it blindly into your debugger when your program stops in graphics mode.&nbsp;<B><A href="http://www.fifi.org/cgi-bin/man2html?vga_flip+3"><FONT color=#0000ff>vga_flip</FONT></A></B>(3) is not very robust though. You shall not call it when svgalib is not yet initialized or in textmode.</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt" class=MsoNormal><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US><FONT face=Calibri>Before continuing your program, you must then call&nbsp;<B><A href="http://www.fifi.org/cgi-bin/man2html?vga_flip+3"><FONT color=#0000ff>vga_flip</FONT></A></B>(3) again to return to graphics mode. If the program will not make any screen accesses or svgalib calls before it returns to the debugger, you can omit that, of course.</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt" class=MsoNormal><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US><FONT face=Calibri>This will only work if your program and the debugger run in the same virtual linux console.</FONT></SPAN>