<P style="MARGIN: 0cm 0cm 0pt" class=MsoNormal><B><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US><FONT face=Calibri>joystick_init</FONT></SPAN></B></P>
<P style="MARGIN: 0cm 0cm 0pt" class=MsoNormal><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US><FONT face=Calibri>Section: Svgalib User Manual (3)<BR>Updated: 14 April 1998<BR></FONT><A href="http://www.fifi.org/cgi-bin/man2html/usr/share/man/man3/joystick_init.3vga.gz#index"><FONT color=#0000ff face=Calibri>Index</FONT></A><FONT face=Calibri>&nbsp;<BR></FONT><A href="http://www.fifi.org/cgi-bin/man2html"><FONT color=#0000ff face=Calibri>Return to Main Contents</FONT></A></SPAN></P>
<DIV style="TEXT-ALIGN: center; MARGIN: 0cm 0cm 0pt" class=MsoNormal align=center><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US><FONT color=#0000ff face=Calibri>
<HR style="COLOR: black" align=center SIZE=2 width="100%" noShade>
</FONT></SPAN></DIV>
<P style="MARGIN: 0cm 0cm 0pt" class=MsoNormal><A name=lbAB><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US><FONT face=Calibri>&nbsp;</FONT></SPAN></A><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt" class=MsoNormal><B><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US><FONT face=Calibri>NAME</FONT></SPAN></B></P>
<P style="MARGIN: 0cm 0cm 0pt" class=MsoNormal><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US><FONT face=Calibri>joystick_init - open a joystick&nbsp;</FONT><A name=lbAC><FONT face=Calibri>&nbsp;</FONT></A></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt" class=MsoNormal><B><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US><FONT face=Calibri>SYNOPSIS</FONT></SPAN></B></P>
<P style="MARGIN: 0cm 0cm 0pt" class=MsoNormal><B><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US><FONT face=Calibri>#include &lt;</FONT><A href="file://usr/include/vgajoystick.h"><FONT color=#0000ff face=Calibri>vgajoystick.h</FONT></A><FONT face=Calibri>&gt;</FONT></SPAN></B><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US><FONT face=Calibri>&nbsp;<BR><B>typedef void (*</B><I>__joystick_output</I><B>) (const char *</B><I>msg</I><B>);</B></FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt" class=MsoNormal><FONT face=Calibri><B><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US>int joystick_init(int&nbsp;</SPAN></B><I><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US>joydev</SPAN></I><B><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US>, __joystick_output&nbsp;</SPAN></B><I><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US>jo</SPAN></I><B><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US>);</SPAN></B><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US></SPAN></FONT></P>
<P style="MARGIN: 0cm 0cm 0pt" class=MsoNormal><A name=lbAD><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US><FONT face=Calibri>&nbsp;</FONT></SPAN></A><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt" class=MsoNormal><B><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US><FONT face=Calibri>DESCRIPTION</FONT></SPAN></B></P>
<P style="MARGIN: 0cm 0cm 0pt" class=MsoNormal><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US><FONT face=Calibri>This function opens a joystick device. A negative value is returned on failure, otherwise the joystick was initialized.&nbsp;<B><A href="http://www.fifi.org/cgi-bin/man2html?svgalib+7"><FONT color=#0000ff>svgalib</FONT></A></B>(7) supports several joysticks. The corresponding device node names can be configured in&nbsp;<B><A href="http://www.fifi.org/cgi-bin/man2html?libvga.config+5"><FONT color=#0000ff>libvga.config</FONT></A></B>(5).</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt" class=MsoNormal><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US><FONT face=Calibri>The&nbsp;<I>joydev</I>&nbsp;parameter indicates which joystick is to be initialized. As of this writing svgalib support up to four joysticks&nbsp;<I>joydev</I><B>&nbsp;= 0</B>to&nbsp;<I>joydev</I>&nbsp;<B>= 3</B>, although I'm not aware of hardware and kernel drivers which handle more than joysticks&nbsp;<B>0</B>&nbsp;and&nbsp;<B>1</B>.</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt" class=MsoNormal><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US><FONT face=Calibri>It is strongly encouraged that your program allows the user to calibrate the joystick. This is controlled by the&nbsp;<I>jo</I>&nbsp;parameter. If it is<B>NULL</B>, no calibration is performed. Otherwise, calibration is performed and instructions are printed to the user by calling the user supplied&nbsp;<I>jo</I>&nbsp;function. It is the responsibility of this function to print the&nbsp;<B>NUL</B>&nbsp;and&nbsp;<B>NL</B>&nbsp;terminated message pointed to by&nbsp;<I>msg</I>&nbsp;to the user. The message might contain embedded&nbsp;<B>NL</B>&nbsp;characters and will not extend 256 characters including the terminating&nbsp;<B>NUL</B>.</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt" class=MsoNormal><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US><FONT face=Calibri>Usually an&nbsp;<B>fputs(</B><I>msg</I><B>, stdout);</B>&nbsp;followed by&nbsp;<B>fflush(stdout);</B>&nbsp;will do, but for your convenience you can perform the same by passing<B>JOY_CALIB_STDOUT</B>&nbsp;for&nbsp;<I>jo</I>.&nbsp;<B><A href="http://www.fifi.org/cgi-bin/man2html?gl_printf+3"><FONT color=#0000ff>gl_printf</FONT></A></B>(3) is well suited for this job as well. However, it needs some font setup first, so we do not provide a special preprocessor constant.</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt" class=MsoNormal><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US><FONT face=Calibri>It is valid to initialize an already initialized joystick. This allows you to recalibrate the joystick at any time. The module supports older version 0.* as well as newer version 1.* joystick device protocols.</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt" class=MsoNormal><A name=lbAE><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US><FONT face=Calibri>&nbsp;</FONT></SPAN></A><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt" class=MsoNormal><B><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US><FONT face=Calibri>GENERAL CONCEPT</FONT></SPAN></B></P>
<P style="MARGIN: 0cm 0cm 0pt" class=MsoNormal><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US><FONT face=Calibri>The joystick module is basically independent from the rest of svgalib. You can easily use it in text mode only (but why would you do that?). If used in a graphics mode, however, it will release the joystick devices upon a VC switch s.t. several applications can share joysticks. Unfortunately this does not work during joystick calibration. Therefore, you should lock the VC with&nbsp;<B><A href="http://www.fifi.org/cgi-bin/man2html?vga_lockvc+3"><FONT color=#0000ff>vga_lockvc</FONT></A></B>(3) while calibrating in graphics mode.</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt" class=MsoNormal><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US><FONT face=Calibri>Also, when using joysticks in textmode only, svgalib won't detect VC switches and joysticks cannot be shared among applications.</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt" class=MsoNormal><B><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US><A href="http://www.fifi.org/cgi-bin/man2html?joystick_close+3"><FONT color=#0000ff face=Calibri>joystick_close</FONT></A></SPAN></B><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US><FONT face=Calibri>(3) releases opened joysticks.</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt" class=MsoNormal><B><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US><A href="http://www.fifi.org/cgi-bin/man2html?joystick_update+3"><FONT color=#0000ff face=Calibri>joystick_update</FONT></A></SPAN></B><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US><FONT face=Calibri>(3) queries the joysticks for position changes. Note that you must busy wait for joystick events. At least the older version 0.* joystick devices do not allow to sleep and get informed about new joystick events. Basically, this is a PC hardware issue in the first place. Therefore,&nbsp;<B><A href="http://www.fifi.org/cgi-bin/man2html?vga_waitevent+3"><FONT color=#0000ff>vga_waitevent</FONT></A></B>(3) does not know about joysticks. To use it, you must make it timeout after a few ms and actively query the joystick for updates.</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt" class=MsoNormal><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US><FONT face=Calibri>By default a handler deals with the joystick events.&nbsp;<B><A href="http://www.fifi.org/cgi-bin/man2html?joystick_getaxis+3"><FONT color=#0000ff>joystick_getaxis</FONT></A></B>(3) and&nbsp;<B><A href="http://www.fifi.org/cgi-bin/man2html?joystick_getbutton+3"><FONT color=#0000ff>joystick_getbutton</FONT></A></B>(3) plus several convenience macros<B>joystick_button1|2|3|4</B>,&nbsp;<B>joystick_getb1|2|3|4</B>,&nbsp;<B>joystick_x|y|z</B>, and&nbsp;<B>joystick_getx|y|z</B>&nbsp;allow to query the current status of the joystick (as it was determined during the last&nbsp;<B>joystick_update()</B>&nbsp;call).</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt" class=MsoNormal><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US><FONT face=Calibri>The functions&nbsp;<B><A href="http://www.fifi.org/cgi-bin/man2html?joystick_getnumaxes+3"><FONT color=#0000ff>joystick_getnumaxes</FONT></A></B>(3) and&nbsp;<B><A href="http://www.fifi.org/cgi-bin/man2html?joystick_getnumbuttons+3"><FONT color=#0000ff>joystick_getnumbuttons</FONT></A></B>(3) query the number of axes and buttons of a joystick.</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt" class=MsoNormal><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US><FONT face=Calibri>Finally, you can (un)register an own handler for the joystick events with&nbsp;<B><A href="http://www.fifi.org/cgi-bin/man2html?joystick_sethandler+3"><FONT color=#0000ff>joystick_sethandler</FONT></A></B>(3) and&nbsp;<B><A href="http://www.fifi.org/cgi-bin/man2html?joystick_setdefaulthandler+3"><FONT color=#0000ff>joystick_setdefaulthandler</FONT></A></B>(3)</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt" class=MsoNormal><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US><FONT face=Calibri>The simple text demo&nbsp;<B><A href="http://www.fifi.org/cgi-bin/man2html?joytest+6"><FONT color=#0000ff>joytest</FONT></A></B>(6) and the more complex graphical&nbsp;<B><A href="http://www.fifi.org/cgi-bin/man2html?mjoytest+6"><FONT color=#0000ff>mjoytest</FONT></A></B>(6) demo show the use of the joystick package in some more detail.</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt" class=MsoNormal><A name=lbAF><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US><FONT face=Calibri>&nbsp;</FONT></SPAN></A><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt" class=MsoNormal><B><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US><FONT face=Calibri>CAVEATS</FONT></SPAN></B></P>
<P style="MARGIN: 0cm 0cm 0pt" class=MsoNormal><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US><FONT face=Calibri>This function is only available in ELF versions of svgalib. Due to backwards compatibility issues it cannot be used with shared a.out libs.</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt" class=MsoNormal><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US><FONT face=Calibri>Certain game ports seem to be unable to detect missing joysticks properly. (This might also be a linux device driver issue). Anyway, is using the joystick interface, allow a user of your application to specify the number of joysticks to be used as well as to bail out the joystick calibration (when he is not able to press a button on a missing joystick).</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt" class=MsoNormal><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US><FONT face=Calibri>Usually &lt;Ctrl&gt;-C works, but you should not rely too much on it, as it can be disabled. As a general guideline, maybe try to open and calibrate joysticks while still in textmode. &lt;Ctrl&gt;-C will usually still work then. If this succeeds, you may assume a joystick is there for any following recalibrations in graphics mode.</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt" class=MsoNormal><A name=lbAG><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US><FONT face=Calibri>&nbsp;</FONT></SPAN></A><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt" class=MsoNormal><B><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US><FONT face=Calibri>SEE ALSO</FONT></SPAN></B></P>
<P style="MARGIN: 0cm 0cm 0pt" class=MsoNormal><B><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US><A href="http://www.fifi.org/cgi-bin/man2html?svgalib+7"><FONT color=#0000ff face=Calibri>svgalib</FONT></A></SPAN></B><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US><FONT face=Calibri>(7),&nbsp;<B><A href="http://www.fifi.org/cgi-bin/man2html?vgagl+7"><FONT color=#0000ff>vgagl</FONT></A></B>(7),&nbsp;<B><A href="http://www.fifi.org/cgi-bin/man2html?libvga.config+5"><FONT color=#0000ff>libvga.config</FONT></A></B>(5),&nbsp;<B><A href="http://www.fifi.org/cgi-bin/man2html?joytest+6"><FONT color=#0000ff>joytest</FONT></A></B>(6),&nbsp;<B><A href="http://www.fifi.org/cgi-bin/man2html?mjoytest+6"><FONT color=#0000ff>mjoytest</FONT></A></B>(6),&nbsp;<B><A href="http://www.fifi.org/cgi-bin/man2html?joystick_close+3"><FONT color=#0000ff>joystick_close</FONT></A></B>(3),&nbsp;<B><A href="http://www.fifi.org/cgi-bin/man2html?joystick_update+3"><FONT color=#0000ff>joystick_update</FONT></A></B>(3),<B><A href="http://www.fifi.org/cgi-bin/man2html?joystick_sethandler+3"><FONT color=#0000ff>joystick_sethandler</FONT></A></B>(3),&nbsp;<B><A href="http://www.fifi.org/cgi-bin/man2html?joystick_setdefaulthandler+3"><FONT color=#0000ff>joystick_setdefaulthandler</FONT></A></B>(3),&nbsp;<B><A href="http://www.fifi.org/cgi-bin/man2html?joystick_getnumaxes+3"><FONT color=#0000ff>joystick_getnumaxes</FONT></A></B>(3),&nbsp;<B><A href="http://www.fifi.org/cgi-bin/man2html?joystick_getnumbuttons+3"><FONT color=#0000ff>joystick_getnumbuttons</FONT></A></B>(3),<B><A href="http://www.fifi.org/cgi-bin/man2html?joystick_getaxis+3"><FONT color=#0000ff>joystick_getaxis</FONT></A></B>(3),&nbsp;<B><A href="http://www.fifi.org/cgi-bin/man2html?joystick_getbutton+3"><FONT color=#0000ff>joystick_getbutton</FONT></A></B>(3),&nbsp;<B><A href="http://www.fifi.org/cgi-bin/man2html?joystick_button1+3"><FONT color=#0000ff>joystick_button1</FONT></A></B>(3),&nbsp;<B><A href="http://www.fifi.org/cgi-bin/man2html?joystick_getb1+3"><FONT color=#0000ff>joystick_getb1</FONT></A></B>(3),&nbsp;<B><A href="http://www.fifi.org/cgi-bin/man2html?joystick_x+3"><FONT color=#0000ff>joystick_x</FONT></A></B>(3),&nbsp;<B><A href="http://www.fifi.org/cgi-bin/man2html?joystick_getx+3"><FONT color=#0000ff>joystick_getx</FONT></A></B>(3).</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt" class=MsoNormal><SPAN style="FONT-SIZE: 17.5pt; mso-bidi-font-size: 11.0pt" lang=EN-US><FONT face=Calibri>&nbsp;</FONT></SPAN>