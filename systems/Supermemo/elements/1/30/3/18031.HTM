<H4 style="LINE-HEIGHT: normal; TEXT-TRANSFORM: none; FONT-VARIANT: normal; FONT-STYLE: normal; TEXT-INDENT: 0px; FONT-FAMILY: Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); FONT-SIZE: medium; WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" class=appendixsubsubsec>B.3.1.2 Compiling<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>gawk</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>for PC Operating Systems</H4>
<P style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px"><CODE>gawk</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>can be compiled for MS-DOS, Windows32, and OS/2 using the GNU development tools from DJ Delorie (DJGPP: MS-DOS only) or Eberhard Mattes (EMX: MS-DOS, Windows32 and OS/2). The file<SPAN class=Apple-converted-space>&nbsp;</SPAN><SAMP>README_d/README.pc</SAMP><SPAN class=Apple-converted-space>&nbsp;</SPAN>in the<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>gawk</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>distribution contains additional notes, and<SPAN class=Apple-converted-space>&nbsp;</SPAN><SAMP>pc/Makefile</SAMP><SPAN class=Apple-converted-space>&nbsp;</SPAN>contains important information on compilation options.</P><A style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" name=index-compiling-gawk-for-MS_002dDOS-and-MS_002dWindows></A><SPAN style="TEXT-TRANSFORM: none; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; DISPLAY: inline !important; FONT: medium Simsun; WHITE-SPACE: normal; FLOAT: none; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px"></SPAN>
<P style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">To build<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>gawk</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>for MS-DOS and Windows32, copy the files in the<SPAN class=Apple-converted-space>&nbsp;</SPAN><SAMP>pc</SAMP><SPAN class=Apple-converted-space>&nbsp;</SPAN>directory (<EM>except</EM><SPAN class=Apple-converted-space>&nbsp;</SPAN>for<SPAN class=Apple-converted-space>&nbsp;</SPAN><SAMP>ChangeLog</SAMP>) to the directory with the rest of the<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>gawk</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>sources, then invoke<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>make</CODE>with the appropriate target name as an argument to build<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>gawk</CODE>. The<SPAN class=Apple-converted-space>&nbsp;</SPAN><SAMP>Makefile</SAMP><SPAN class=Apple-converted-space>&nbsp;</SPAN>copied from the<SPAN class=Apple-converted-space>&nbsp;</SPAN><SAMP>pc</SAMP><SPAN class=Apple-converted-space>&nbsp;</SPAN>directory contains a configuration section with comments and may need to be edited in order to work with your<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>make</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>utility.</P>
<P style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">The<SPAN class=Apple-converted-space>&nbsp;</SPAN><SAMP>Makefile</SAMP><SPAN class=Apple-converted-space>&nbsp;</SPAN>supports a number of targets for building various MS-DOS and Windows32 versions. A list of targets is printed if the<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>make</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>command is given without a target. As an example, to build<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>gawk</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>using the DJGPP tools, enter &#8216;<SAMP>make djgpp</SAMP>&#8217;. (The DJGPP tools needed for the build may be found at<A href="ftp://ftp.delorie.com/pub/djgpp/current/v2gnu/">ftp://ftp.delorie.com/pub/djgpp/current/v2gnu/</A>.) To build a native MS-Windows binary of<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>gawk</CODE>, type &#8216;<SAMP>make mingw32</SAMP>&#8217;.</P><A style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" name=index-compiling-gawk-with-EMX-for-OS_002f2></A><SPAN style="TEXT-TRANSFORM: none; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; DISPLAY: inline !important; FONT: medium Simsun; WHITE-SPACE: normal; FLOAT: none; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px"></SPAN>
<P style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">The 32 bit EMX version of<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>gawk</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>works &#8220;out of the box&#8221; under OS/2. However, it is highly recommended to use GCC 2.95.3 for the compilation. In principle, it is possible to compile<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>gawk</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>the following way:</P>
<DIV style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); MARGIN-LEFT: 3.2em; WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" class=example><PRE class=example>$ <KBD style="FONT-STYLE: oblique">./configure</KBD>
$ <KBD style="FONT-STYLE: oblique">make</KBD>
</PRE></DIV>
<P style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">This is not recommended, though. To get an OMF executable you should use the following commands at your<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>sh</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>prompt:</P>
<DIV style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); MARGIN-LEFT: 3.2em; WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" class=example><PRE class=example>$ <KBD style="FONT-STYLE: oblique">CFLAGS="-O2 -Zomf -Zmt"</KBD>
$ <KBD style="FONT-STYLE: oblique">export CFLAGS</KBD>
$ <KBD style="FONT-STYLE: oblique">LDFLAGS="-s -Zcrtdll -Zlinker /exepack:2 -Zlinker /pm:vio -Zstack 0x6000"</KBD>
$ <KBD style="FONT-STYLE: oblique">export LDFLAGS</KBD>
$ <KBD style="FONT-STYLE: oblique">RANLIB="echo"</KBD>
$ <KBD style="FONT-STYLE: oblique">export RANLIB</KBD>
$ <KBD style="FONT-STYLE: oblique">./configure --prefix=c:/usr</KBD>
$ <KBD style="FONT-STYLE: oblique">make AR=emxomfar</KBD>
</PRE></DIV>
<P style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">These are just suggestions for use with GCC 2.x. You may use any other set of (self-consistent) environment variables and compiler flags.</P>
<P style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">If you use GCC 2.95 it is recommended to use also:</P>
<DIV style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); MARGIN-LEFT: 3.2em; WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" class=example><PRE class=example>$ <KBD style="FONT-STYLE: oblique">LIBS="-lgcc"</KBD>
$ <KBD style="FONT-STYLE: oblique">export LIBS</KBD>
</PRE></DIV>
<P style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">You can also get an<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>a.out</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>executable if you prefer:</P>
<DIV style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); MARGIN-LEFT: 3.2em; WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" class=example><PRE class=example>$ <KBD style="FONT-STYLE: oblique">CFLAGS="-O2 -Zmt"</KBD>
$ <KBD style="FONT-STYLE: oblique">export CFLAGS</KBD>
$ <KBD style="FONT-STYLE: oblique">LDFLAGS="-s -Zstack 0x6000"</KBD>
$ <KBD style="FONT-STYLE: oblique">LIBS="-lgcc"</KBD>
$ <KBD style="FONT-STYLE: oblique">unset RANLIB</KBD>
$ <KBD style="FONT-STYLE: oblique">./configure --prefix=c:/usr</KBD>
$ <KBD style="FONT-STYLE: oblique">make</KBD>
</PRE></DIV>
<BLOCKQUOTE style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">
<P><B>NOTE:</B><SPAN class=Apple-converted-space>&nbsp;</SPAN>Compilation of<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>a.out</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>executables also works with GCC 3.2. Versions later than GCC 3.2 have not been tested successfully.</P></BLOCKQUOTE>
<P style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">&#8216;<SAMP>make install</SAMP>&#8217; works as expected with the EMX build.</P>
<BLOCKQUOTE style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">
<P><B>NOTE:</B><SPAN class=Apple-converted-space>&nbsp;</SPAN>Ancient OS/2 ports of GNU<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>make</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>are not able to handle the Makefiles of this package. If you encounter any problems with<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>make</CODE>, try GNU Make 3.79.1 or later versions. You should find the latest version on<SPAN class=Apple-converted-space>&nbsp;</SPAN><A href="ftp://hobbes.nmsu.edu/pub/os2/">ftp://hobbes.nmsu.edu/pub/os2/</A>.</P></BLOCKQUOTE>