<H4 style="LINE-HEIGHT: normal; TEXT-TRANSFORM: none; FONT-VARIANT: normal; FONT-STYLE: normal; TEXT-INDENT: 0px; FONT-FAMILY: Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); FONT-SIZE: medium; WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" class=appendixsubsubsec>B.3.1.4 Using<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>gawk</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>on PC Operating Systems</H4><A style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" name=index-operating-systems_002c-PC_002c-gawk-on></A><SPAN style="TEXT-TRANSFORM: none; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; DISPLAY: inline !important; FONT: medium Simsun; WHITE-SPACE: normal; FLOAT: none; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px"></SPAN><A style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" name=index-PC-operating-systems_002c-gawk-on></A><SPAN style="TEXT-TRANSFORM: none; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; DISPLAY: inline !important; FONT: medium Simsun; WHITE-SPACE: normal; FLOAT: none; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px"></SPAN>
<P style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">Under MS-DOS and MS-Windows, the Cygwin and MinGW environments support both the &#8216;<SAMP>|&amp;</SAMP>&#8217; operator and TCP/IP networking (see<SPAN class=Apple-converted-space>&nbsp;</SPAN><A href="http://www.gnu.org/software/gawk/manual/gawk.html#TCP_002fIP-Networking">TCP/IP Networking</A>). EMX (OS/2 only) supports at least the &#8216;<SAMP>|&amp;</SAMP>&#8217; operator.</P><A style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" name=index-search-paths-1></A><SPAN style="TEXT-TRANSFORM: none; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; DISPLAY: inline !important; FONT: medium Simsun; WHITE-SPACE: normal; FLOAT: none; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px"></SPAN><A style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" name=index-search-paths_002c-for-source-files-2></A><SPAN style="TEXT-TRANSFORM: none; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; DISPLAY: inline !important; FONT: medium Simsun; WHITE-SPACE: normal; FLOAT: none; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px"></SPAN><A style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" name=index-gawk_002c-OS_002f2-version-of></A><SPAN style="TEXT-TRANSFORM: none; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; DISPLAY: inline !important; FONT: medium Simsun; WHITE-SPACE: normal; FLOAT: none; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px"></SPAN><A style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" name=index-gawk_002c-MS_002dDOS-version-of></A><SPAN style="TEXT-TRANSFORM: none; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; DISPLAY: inline !important; FONT: medium Simsun; WHITE-SPACE: normal; FLOAT: none; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px"></SPAN><A style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" name=index-gawk_002c-MS_002dWindows-version-of></A><SPAN style="TEXT-TRANSFORM: none; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; DISPLAY: inline !important; FONT: medium Simsun; WHITE-SPACE: normal; FLOAT: none; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px"></SPAN><A style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" name=index-_003b-_0028semicolon_0029_002c-AWKPATH-variable-and></A><SPAN style="TEXT-TRANSFORM: none; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; DISPLAY: inline !important; FONT: medium Simsun; WHITE-SPACE: normal; FLOAT: none; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px"></SPAN><A style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" name=index-semicolon-_0028_003b_0029_002c-AWKPATH-variable-and></A><SPAN style="TEXT-TRANSFORM: none; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; DISPLAY: inline !important; FONT: medium Simsun; WHITE-SPACE: normal; FLOAT: none; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px"></SPAN><A style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" name=index-AWKPATH-environment-variable-1></A><SPAN style="TEXT-TRANSFORM: none; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; DISPLAY: inline !important; FONT: medium Simsun; WHITE-SPACE: normal; FLOAT: none; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px"></SPAN>
<P style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">The MS-DOS and MS-Windows versions of<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>gawk</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>search for program files as described in<SPAN class=Apple-converted-space>&nbsp;</SPAN><A href="http://www.gnu.org/software/gawk/manual/gawk.html#AWKPATH-Variable">AWKPATH Variable</A>. However, semicolons (rather than colons) separate elements in the<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>AWKPATH</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>variable. If<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>AWKPATH</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>is not set or is empty, then the default search path for MS-Windows and MS-DOS versions is<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>".;c:/lib/awk;c:/gnu/lib/awk"</CODE>.</P><A style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" name=index-UNIXROOT-variable_002c-on-OS_002f2-systems></A><SPAN style="TEXT-TRANSFORM: none; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; DISPLAY: inline !important; FONT: medium Simsun; WHITE-SPACE: normal; FLOAT: none; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px"></SPAN>
<P style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">The search path for OS/2 (32 bit, EMX) is determined by the prefix directory (most likely<SPAN class=Apple-converted-space>&nbsp;</SPAN><SAMP>/usr</SAMP><SPAN class=Apple-converted-space>&nbsp;</SPAN>or<SPAN class=Apple-converted-space>&nbsp;</SPAN><SAMP>c:/usr</SAMP>) that has been specified as an option of the<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>configure</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>script like it is the case for the Unix versions. If<SPAN class=Apple-converted-space>&nbsp;</SPAN><SAMP>c:/usr</SAMP><SPAN class=Apple-converted-space>&nbsp;</SPAN>is the prefix directory then the default search path contains<SPAN class=Apple-converted-space>&nbsp;</SPAN><SAMP>.</SAMP><SPAN class=Apple-converted-space>&nbsp;</SPAN>and<SPAN class=Apple-converted-space>&nbsp;</SPAN><SAMP>c:/usr/share/awk</SAMP>. Additionally, to support binary distributions of<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>gawk</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>for OS/2 systems whose drive &#8216;<SAMP>c:</SAMP>&#8217; might not support long file names or might not exist at all, there is a special environment variable. If<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>UNIXROOT</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>specifies a drive then this specific drive is also searched for program files. E.g., if<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>UNIXROOT</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>is set to<SPAN class=Apple-converted-space>&nbsp;</SPAN><SAMP>e:</SAMP><SPAN class=Apple-converted-space>&nbsp;</SPAN>the complete default search path is<CODE>".;c:/usr/share/awk;e:/usr/share/awk"</CODE>.</P>
<P style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">An<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>sh</CODE>-like shell (as opposed to<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>command.com</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>under MS-DOS or<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>cmd.exe</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>under MS-Windows or OS/2) may be useful for<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>awk</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>programming. The DJGPP collection of tools includes an MS-DOS port of Bash, and several shells are available for OS/2, including<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>ksh</CODE>.</P><A style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" name=index-common-extensions_002c-BINMODE-variable></A><SPAN style="TEXT-TRANSFORM: none; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; DISPLAY: inline !important; FONT: medium Simsun; WHITE-SPACE: normal; FLOAT: none; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px"></SPAN><A style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" name=index-extensions_002c-common_002c-BINMODE-variable></A><SPAN style="TEXT-TRANSFORM: none; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; DISPLAY: inline !important; FONT: medium Simsun; WHITE-SPACE: normal; FLOAT: none; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px"></SPAN><A style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" name=index-differences-in-awk-and-gawk_002c-BINMODE-variable-1></A><SPAN style="TEXT-TRANSFORM: none; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; DISPLAY: inline !important; FONT: medium Simsun; WHITE-SPACE: normal; FLOAT: none; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px"></SPAN><A style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" name=index-BINMODE-variable-1></A><SPAN style="TEXT-TRANSFORM: none; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; DISPLAY: inline !important; FONT: medium Simsun; WHITE-SPACE: normal; FLOAT: none; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px"></SPAN>
<P style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">Under MS-Windows, OS/2 and MS-DOS,<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>gawk</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>(and many other text programs) silently translate end-of-line<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>"\r\n"</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>to<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>"\n"</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>on input and<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>"\n"</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>to<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>"\r\n"</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>on output. A special<CODE>BINMODE</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>variable (c.e.) allows control over these translations and is interpreted as follows:</P>
<UL style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">
<LI>If<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>BINMODE</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>is<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>"r"</CODE>, or one, then binary mode is set on read (i.e., no translations on reads).</LI>
<LI>If<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>BINMODE</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>is<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>"w"</CODE>, or two, then binary mode is set on write (i.e., no translations on writes).</LI>
<LI>If<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>BINMODE</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>is<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>"rw"</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>or<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>"wr"</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>or three, binary mode is set for both read and write.</LI>
<LI><CODE>BINMODE=<VAR>non-null-string</VAR></CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>is the same as &#8216;<SAMP>BINMODE=3</SAMP>&#8217; (i.e., no translations on reads or writes). However,<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>gawk</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>issues a warning message if the string is not one of<CODE>"rw"</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>or<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>"wr"</CODE>.</LI></UL>
<P style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">The modes for standard input and standard output are set one time only (after the command line is read, but before processing any of the<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>awk</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>program). Setting<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>BINMODE</CODE>for standard input or standard output is accomplished by using an appropriate &#8216;<SAMP>-v BINMODE=<VAR>N</VAR></SAMP>&#8217; option on the command line.<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>BINMODE</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>is set at the time a file or pipe is opened and cannot be changed mid-stream.</P>
<P style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">The name<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>BINMODE</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>was chosen to match<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>mawk</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>(see<SPAN class=Apple-converted-space>&nbsp;</SPAN><A href="http://www.gnu.org/software/gawk/manual/gawk.html#Other-Versions">Other Versions</A>).<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>mawk</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>and<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>gawk</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>handle<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>BINMODE</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>similarly; however,<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>mawk</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>adds a &#8216;<SAMP>-W BINMODE=<VAR>N</VAR></SAMP>&#8217; option and an environment variable that can set<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>BINMODE</CODE>,<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>RS</CODE>, and<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>ORS</CODE>. The files<SPAN class=Apple-converted-space>&nbsp;</SPAN><SAMP>binmode[1-3].awk</SAMP><SPAN class=Apple-converted-space>&nbsp;</SPAN>(under<SPAN class=Apple-converted-space>&nbsp;</SPAN><SAMP>gnu/lib/awk</SAMP><SPAN class=Apple-converted-space>&nbsp;</SPAN>in some of the prepared distributions) have been chosen to match<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>mawk</CODE>&#8217;s &#8216;<SAMP>-W BINMODE=<VAR>N</VAR></SAMP>&#8217; option. These can be changed or discarded; in particular, the setting of<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>RS</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>giving the fewest &#8220;surprises&#8221; is open to debate.<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>mawk</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>uses &#8216;<SAMP>RS = "\r\n"</SAMP>&#8217; if binary mode is set on read, which is appropriate for files with the MS-DOS-style end-of-line.</P>
<P style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">To illustrate, the following examples set binary mode on writes for standard output and other files, and set<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>ORS</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>as the &#8220;usual&#8221; MS-DOS-style end-of-line:</P>
<DIV style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); MARGIN-LEFT: 3.2em; WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" class=example><PRE class=example>gawk -v BINMODE=2 -v ORS="\r\n" &#8230;
</PRE></DIV>
<P style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">or:</P>
<DIV style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); MARGIN-LEFT: 3.2em; WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" class=example><PRE class=example>gawk -v BINMODE=w -f binmode2.awk &#8230;
</PRE></DIV>
<P style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">These give the same result as the &#8216;<SAMP>-W BINMODE=2</SAMP>&#8217; option in<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>mawk</CODE>. The following changes the record separator to<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>"\r\n"</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>and sets binary mode on reads, but does not affect the mode on standard input:</P>
<DIV style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); MARGIN-LEFT: 3.2em; WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" class=example><PRE class=example>gawk -v RS="\r\n" --source "BEGIN { BINMODE = 1 }" &#8230;
</PRE></DIV>
<P style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">or:</P>
<DIV style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); MARGIN-LEFT: 3.2em; WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" class=example><PRE class=example>gawk -f binmode1.awk &#8230;
</PRE></DIV>
<P style="TEXT-TRANSFORM: none; TEXT-INDENT: 0px; FONT: medium Simsun; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px">With proper quoting, in the first example the setting of<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>RS</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>can be moved into the<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>BEGIN</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>rule.