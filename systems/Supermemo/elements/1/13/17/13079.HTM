<DIV class=navheader style="WORD-SPACING: 0px; FONT: medium Simsun; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); TEXT-INDENT: 0px; WHITE-SPACE: normal; LETTER-SPACING: normal; orphans: auto; widows: auto; -webkit-text-stroke-width: 0px">
<TABLE width="100%" summary="Navigation header">
<TBODY>
<TR>
<TH align=middle colSpan=3>Chapter&nbsp;9.&nbsp;Assembly Macros</TH></TR>
<TR>
<TD align=left width="20%"><A accessKey=p href="http://www.cs.uwm.edu/classes/cs315/Bacon/Lecture/HTML/ch08s08.html">Prev</A>&nbsp;</TD>
<TH align=middle width="60%">&nbsp;</TH>
<TD align=right width="20%">&nbsp;<A accessKey=n href="http://www.cs.uwm.edu/classes/cs315/Bacon/Lecture/HTML/ch09s02.html">Next</A></TD></TR></TBODY></TABLE>
<HR>
</DIV>
<DIV class=chapter title="Chapter&nbsp;9.&nbsp;Assembly Macros" style="WORD-SPACING: 0px; FONT: medium Simsun; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); TEXT-INDENT: 0px; WHITE-SPACE: normal; LETTER-SPACING: normal; orphans: auto; widows: auto; -webkit-text-stroke-width: 0px">
<DIV class=titlepage>
<DIV>
<DIV>
<H2 class=title><A name=assembly_macros></A>Chapter&nbsp;9.&nbsp;Assembly Macros</H2></DIV></DIV></DIV>
<DIV class=toc>
<P><B>Table of Contents</B></P>
<DL>
<DT><SPAN class=section><A href="http://www.cs.uwm.edu/classes/cs315/Bacon/Lecture/HTML/ch09.html#id286961936">9.1. I/O Macros</A></SPAN></DT>
<DT><SPAN class=section><A href="http://www.cs.uwm.edu/classes/cs315/Bacon/Lecture/HTML/ch09s02.html">9.2. Push and Pop</A></SPAN></DT>
<DT><SPAN class=section><A href="http://www.cs.uwm.edu/classes/cs315/Bacon/Lecture/HTML/ch09s03.html">9.3. A Complete Example Program</A></SPAN></DT>
<DT><SPAN class=section><A href="http://www.cs.uwm.edu/classes/cs315/Bacon/Lecture/HTML/ch09s04.html">9.4. Homework</A></SPAN></DT></DL></DIV>
<P>Assembly language instructions are primitive, so programs tend to be long. There are often short and cryptic sequences of instructions that appear repeatedly in many programs, such as we've seen when using syscalls.</P><PRE class=programlisting>    li      $v0, SYS_PRINT_INT
    lw      $a0, age
    syscall
    </PRE>
<P>For lengthier sequences, we might use a subprogram to factor out such code. However, the interface to a subprogram in assembly language is not as convenient as it is in high-level languages. In fact, the syscall sequences<SPAN class=Apple-converted-space>&nbsp;</SPAN><SPAN class=emphasis><EM>are</EM></SPAN><SPAN class=Apple-converted-space>&nbsp;</SPAN>subprogram calls.</P>
<P>What's needed is a facility that allows us to represent a few lines of common code in one line of assembly language. This is where macros come in.</P>
<DIV class=section title="9.1.&nbsp;I/O Macros">
<DIV class=titlepage>
<DIV>
<DIV>
<H2 class=title style="CLEAR: both"><A name=id286961936></A>9.1.&nbsp;I/O Macros</H2></DIV></DIV></DIV>
<P>The assembly preprocessor, APP, makes it possible to define macros to alleviate the tedium of writing several lines of code for common operations like push, pop, input, and output.</P>
<P>Using a assembly macro such as print_string_var(), which is included in the APE "New main" editor macro, we can write:</P><PRE class=programlisting>	print_string_var(radius_prompt)
	</PRE>
<P>instead of</P><PRE class=programlisting>	li      $v0, SYS_PRINT_STRING
	la      $a0, radius_prompt
	syscall
	</PRE>
<P>Use of assembly macros can make a program much shorter and more readable.</P></DIV></DIV>
<DIV class=navfooter style="WORD-SPACING: 0px; FONT: medium Simsun; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); TEXT-INDENT: 0px; WHITE-SPACE: normal; LETTER-SPACING: normal; orphans: auto; widows: auto; -webkit-text-stroke-width: 0px">
<HR>

<TABLE width="100%" summary="Navigation footer">
<TBODY>
<TR>
<TD align=left width="40%"><A accessKey=p href="http://www.cs.uwm.edu/classes/cs315/Bacon/Lecture/HTML/ch08s08.html">Prev</A>&nbsp;</TD>
<TD align=middle width="20%">&nbsp;</TD>
<TD align=right width="40%">&nbsp;<A accessKey=n href="http://www.cs.uwm.edu/classes/cs315/Bacon/Lecture/HTML/ch09s02.html">Next</A></TD></TR>
<TR>
<TD vAlign=top align=left width="40%">8.8.&nbsp;Homework&nbsp;</TD>
<TD align=middle width="20%"><A accessKey=h href="http://www.cs.uwm.edu/classes/cs315/Bacon/Lecture/HTML/index.html">Home</A></TD>
<TD vAlign=top align=right width="40%">&nbsp;9.2.&nbsp;Push and Pop</TD></TR></TBODY></TABLE></DIV>