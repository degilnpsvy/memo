<A name=History-Interaction></A>
<H3 class=section>9.3 History Expansion</H3><A name=index-history-expansion></A>
<P>The History library provides a history expansion feature that is similar to the history expansion provided by <CODE>csh</CODE>. This section describes the syntax used to manipulate the history information. </P>
<P>History expansions introduce words from the history list into the input stream, making it easy to repeat commands, insert the arguments to a previous command into the current input line, or fix errors in previous commands quickly. </P>
<P>History expansion takes place in two parts. The first is to determine which line from the history list should be used during substitution. The second is to select portions of that line for inclusion into the current one. The line selected from the history is called the <EM>event</EM>, and the portions of that line that are acted upon are called <EM>words</EM>. Various <EM>modifiers</EM> are available to manipulate the selected words. The line is broken into words in the same fashion that Bash does, so that several words surrounded by quotes are considered one word. History expansions are introduced by the appearance of the history expansion character, which is &#8216;<SAMP>!</SAMP>&#8217; by default. Only &#8216;<SAMP>\</SAMP>&#8217; and &#8216;<SAMP>'</SAMP>&#8217; may be used to escape the history expansion character. </P>
<P>Several shell options settable with the <CODE>shopt</CODE> builtin (see <A href="http://www.gnu.org/software/bash/manual/html_node/Bash-Builtins.html#Bash-Builtins">Bash Builtins</A>) may be used to tailor the behavior of history expansion. If the <CODE>histverify</CODE> shell option is enabled, and Readline is being used, history substitutions are not immediately passed to the shell parser. Instead, the expanded line is reloaded into the Readline editing buffer for further modification. If Readline is being used, and the <CODE>histreedit</CODE> shell option is enabled, a failed history expansion will be reloaded into the Readline editing buffer for correction. The <SAMP>-p</SAMP> option to the <CODE>history</CODE> builtin command may be used to see what a history expansion will do before using it. The <SAMP>-s</SAMP> option to the <CODE>history</CODE> builtin may be used to add commands to the end of the history list without actually executing them, so that they are available for subsequent recall. This is most useful in conjunction with Readline. </P>
<P>The shell allows control of the various characters used by the history expansion mechanism with the <CODE>histchars</CODE> variable, as explained above (see <A href="http://www.gnu.org/software/bash/manual/html_node/Bash-Variables.html#Bash-Variables">Bash Variables</A>). The shell uses the history comment character to mark history timestamps when writing the history file. </P>
<TABLE class=menu border=0 cellSpacing=0>
<TBODY>
<TR>
<TD vAlign=top align=left>&#8226; <A accessKey=1 href="http://www.gnu.org/software/bash/manual/html_node/Event-Designators.html#Event-Designators">Event Designators</A>:</TD>
<TD>&nbsp;&nbsp;</TD>
<TD vAlign=top align=left>How to specify which history line to use. </TD></TR>
<TR>
<TD vAlign=top align=left>&#8226; <A accessKey=2 href="http://www.gnu.org/software/bash/manual/html_node/Word-Designators.html#Word-Designators">Word Designators</A>:</TD>
<TD>&nbsp;&nbsp;</TD>
<TD vAlign=top align=left>Specifying which words are of interest. </TD></TR>
<TR>
<TD vAlign=top align=left>&#8226; <A accessKey=3 href="http://www.gnu.org/software/bash/manual/html_node/Modifiers.html#Modifiers">Modifiers</A>:</TD>
<TD>&nbsp;&nbsp;</TD>
<TD vAlign=top align=left>Modifying the results of substitution. </TD></TR></TBODY></TABLE>
<HR>

<DIV class=header>
<P>Previous: <A accessKey=p href="http://www.gnu.org/software/bash/manual/html_node/Bash-History-Builtins.html#Bash-History-Builtins" rel=previous>Bash History Builtins</A>, Up: <A accessKey=u href="http://www.gnu.org/software/bash/manual/html_node/Using-History-Interactively.html#Using-History-Interactively" rel=up>Using History Interactively</A> &nbsp; [<A title="Table of contents" href="http://www.gnu.org/software/bash/manual/html_node/index.html#SEC_Contents" rel=contents>Contents</A>][<A title=Index href="http://www.gnu.org/software/bash/manual/html_node/Indexes.html#Indexes" rel=index>Index</A>]</P></DIV>