<A name=Pipelines></A>
<H4 class=subsection>3.2.2 Pipelines</H4><A name=index-pipeline></A><A name=index-commands_002c-pipelines></A>
<P><FONT class=extract>A <CODE>pipeline</CODE> is a sequence of simple commands separated by one of the control operators &#8216;<SAMP>|</SAMP>&#8217; or &#8216;<SAMP>|&amp;</SAMP>&#8217;</FONT>. </P><A name=index-time></A><A name=index-_0021></A><A name=index-command-timing></A>
<P><FONT class=extract>The format for a pipeline is </FONT></P>
<DIV class=example><PRE class=example><FONT class=extract>[<CODE>time</CODE> [<CODE>-p</CODE>]] [<CODE>!</CODE>] <VAR>command1</VAR> [ [<CODE>|</CODE> or <CODE>|&amp;</CODE>] <VAR>command2</VAR> &#8230;]
</FONT></PRE></DIV>
<P><FONT class=extract><FONT class=extract>The output of each command in the pipeline is connected via a pipe to the input of the next command. That is, each command reads the previous command&#8217;s output. This connection is performed before any redirections specified by the command.</FONT> </FONT></P>
<P><FONT class=extract><FONT class=extract>If &#8216;<SAMP>|&amp;</SAMP>&#8217; is used, the standard error of <VAR>command1</VAR> is connected to <VAR>command2</VAR>&#8217;s standard input through the</FONT> pipe; it is shorthand for <CODE>2&gt;&amp;1 |</CODE>. This implicit redirection of the standard error is performed after any redirections specified by the command. </FONT></P>
<P><FONT class=extract>The reserved word <CODE>time</CODE> causes timing statistics to be printed for the pipeline once it finishes. The statistics currently consist of elapsed (wall-clock) time and user and system time consumed by the command&#8217;s execution. The <SAMP>-p</SAMP> option changes the output format to that specified by <SMALL><FONT size=2>POSIX</FONT></SMALL>. When the shell is in <SMALL><FONT size=2>POSIX</FONT></SMALL> mode (see </FONT><A href="http://www.gnu.org/software/bash/manual/html_node/Bash-POSIX-Mode.html#Bash-POSIX-Mode"><FONT class=extract>Bash POSIX Mode</FONT></A><FONT class=extract>), it does not recognize <CODE>time</CODE> as a reserved word if the next token begins with a &#8216;<SAMP>-</SAMP>&#8217;. The <CODE>TIMEFORMAT</CODE> variable may be set to a format string that specifies how the timing information should be displayed. See </FONT><A href="http://www.gnu.org/software/bash/manual/html_node/Bash-Variables.html#Bash-Variables"><FONT class=extract>Bash Variables</FONT></A><FONT class=extract>, for a description of the available formats. The use of <CODE>time</CODE> as a reserved word permits the timing of shell builtins, shell functions, and pipelines. An external <CODE>time</CODE> command cannot time these easily. </FONT></P>
<P>When the shell is in <SMALL><FONT size=2>POSIX</FONT></SMALL> mode (see <A href="http://www.gnu.org/software/bash/manual/html_node/Bash-POSIX-Mode.html#Bash-POSIX-Mode">Bash POSIX Mode</A>), <CODE>time</CODE> may be followed by a newline. In this case, the shell displays the total user and system time consumed by the shell and its children. The <CODE>TIMEFORMAT</CODE> variable may be used to specify the format of the time information. </P>
<P>If the pipeline is not executed asynchronously (see <A href="http://www.gnu.org/software/bash/manual/html_node/Lists.html#Lists">Lists</A>), the shell waits for all commands in the pipeline to complete. </P>
<P><FONT class=extract>Each command in a pipeline is executed in its own subshell (see </FONT><A href="http://www.gnu.org/software/bash/manual/html_node/Command-Execution-Environment.html#Command-Execution-Environment"><FONT class=extract>Command Execution Environment</FONT></A><FONT class=extract>).</FONT> <FONT class=extract>The exit status of a pipeline is the exit status of the last command in the pipeline, unless the <CODE>pipefail</CODE> option is enabled (see </FONT><A href="http://www.gnu.org/software/bash/manual/html_node/The-Set-Builtin.html#The-Set-Builtin"><FONT class=extract>The Set Builtin</FONT></A><FONT class=extract>). If <CODE>pipefail</CODE> is enabled, the pipeline&#8217;s return status is the value of the last (rightmost) command to exit with a non-zero status, or zero if all commands exit successfully. If the reserved word &#8216;<SAMP>!</SAMP>&#8217; precedes the pipeline, the exit status is the logical negation of the exit status as described above. The shell waits for all commands in the pipeline to terminate before returning a value.</FONT> </P>
<HR>

<DIV class=header>
<P>Next: <A accessKey=n href="http://www.gnu.org/software/bash/manual/html_node/Lists.html#Lists" rel=next>Lists</A>, Previous: <A accessKey=p href="http://www.gnu.org/software/bash/manual/html_node/Simple-Commands.html#Simple-Commands" rel=previous>Simple Commands</A>, Up: <A accessKey=u href="http://www.gnu.org/software/bash/manual/html_node/Shell-Commands.html#Shell-Commands" rel=up>Shell Commands</A> &nbsp; [<A title="Table of contents" href="http://www.gnu.org/software/bash/manual/html_node/index.html#SEC_Contents" rel=contents>Contents</A>][<A title=Index href="http://www.gnu.org/software/bash/manual/html_node/Indexes.html#Indexes" rel=index>Index</A>]</P></DIV>