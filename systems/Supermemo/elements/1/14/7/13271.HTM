<A name=Coprocesses></A>
<H4 class=subsection>3.2.5 Coprocesses</H4><A name=index-coprocess></A>
<P>A <CODE>coprocess</CODE> is a shell command preceded by the <CODE>coproc</CODE> reserved word. <FONT class=extract>A coprocess is executed asynchronously in a subshell, as if the command had been terminated with the &#8216;<SAMP>&amp;</SAMP>&#8217; control operator, with a two-way pipe established between the executing shell and the coprocess. </FONT></P>
<P><FONT class=extract>The format for a coprocess is: </FONT></P>
<DIV class=example><PRE class=example><FONT class=extract><CODE>coproc</CODE> [<VAR>NAME</VAR>] <VAR>command</VAR> [<VAR>redirections</VAR>]
</FONT></PRE></DIV>
<P><FONT class=extract>This creates a coprocess named <VAR>NAME</VAR>. If <VAR>NAME</VAR> is not supplied, the default name is <VAR>COPROC</VAR>. <VAR>NAME</VAR> must not be supplied if <VAR>command</VAR> is a simple command (see </FONT><A href="http://www.gnu.org/software/bash/manual/html_node/Simple-Commands.html#Simple-Commands"><FONT class=extract>Simple Commands</FONT></A><FONT class=extract>); otherwise, it is interpreted as the first word of the simple command. </FONT></P>
<P>When the coproc is executed, the shell creates an array variable (see <A href="http://www.gnu.org/software/bash/manual/html_node/Arrays.html#Arrays">Arrays</A>) named <VAR>NAME</VAR> in the context of the executing shell. The standard output of <VAR>command</VAR> is connected via a pipe to a file descriptor in the executing shell, and that file descriptor is assigned to <VAR>NAME</VAR>[0]. The standard input of <VAR>command</VAR> is connected via a pipe to a file descriptor in the executing shell, and that file descriptor is assigned to <VAR>NAME</VAR>[1]. This pipe is established before any redirections specified by the command (see <A href="http://www.gnu.org/software/bash/manual/html_node/Redirections.html#Redirections">Redirections</A>). The file descriptors can be utilized as arguments to shell commands and redirections using standard word expansions. </P>
<P>The process ID of the shell spawned to execute the coprocess is available as the value of the variable <VAR>NAME</VAR>_PID. The <CODE>wait</CODE> builtin command may be used to wait for the coprocess to terminate. </P>
<P>The return status of a coprocess is the exit status of <VAR>command</VAR>. </P>
<HR>

<DIV class=header>
<P>Next: <A accessKey=n href="http://www.gnu.org/software/bash/manual/html_node/GNU-Parallel.html#GNU-Parallel" rel=next>GNU Parallel</A>, Previous: <A accessKey=p href="http://www.gnu.org/software/bash/manual/html_node/Compound-Commands.html#Compound-Commands" rel=previous>Compound Commands</A>, Up: <A accessKey=u href="http://www.gnu.org/software/bash/manual/html_node/Shell-Commands.html#Shell-Commands" rel=up>Shell Commands</A> &nbsp; [<A title="Table of contents" href="http://www.gnu.org/software/bash/manual/html_node/index.html#SEC_Contents" rel=contents>Contents</A>][<A title=Index href="http://www.gnu.org/software/bash/manual/html_node/Indexes.html#Indexes" rel=index>Index</A>]</P></DIV>