The homogeneous transformation matrix The transformation <SPAN class=MATH><IMG height=34 alt="$ T_i$" src="http://planning.cs.uiuc.edu/img861.gif" width=21 align=middle border=0></SPAN>, for each <SPAN class=MATH><IMG height=16 alt="$ i$" src="http://planning.cs.uiuc.edu/img70.gif" width=11 align=bottom border=0></SPAN> such that <!-- MATH
 $1 < i \leq m$
 --><SPAN class=MATH><IMG height=33 alt="$ 1 < i \leq m$" src="http://planning.cs.uiuc.edu/img862.gif" width=87 align=middle border=0></SPAN>, is 
<P></P>
<DIV class=mathdisplay align=center><A name=eqn:chain-3D></A><!-- MATH
 \begin{equation}
T_i = Q_{i-1} R_i =
\begin{pmatrix}
\cos\theta_i & -\sin\theta_i & 0 & a_{i-1} \\
\sin\theta_i \cos\alpha_{i-1} & \cos\theta_i \cos\alpha_{i-1} &
-\sin\alpha_{i-1} & -\sin\alpha_{i-1}d_i \\
\sin\theta_i \sin\alpha_{i-1} & \cos\theta_i \sin\alpha_{i-1} &
\cos\alpha_{i-1} & \cos\alpha_{i-1}d_i \\
0 & 0 & 0 & 1
\end{pmatrix} .
\end{equation}
 -->
<TABLE class=equation cellPadding=0 width="100%" align=center>
<TBODY>
<TR vAlign=center>
<TD noWrap align=middle><SPAN class=MATH><IMG height=111 alt="$\displaystyle T_i = Q_{i-1} R_i = \begin{pmatrix}\cos\theta_i &amp; -\sin\theta_i &amp;...&#10;...{i-1} &amp; \cos\alpha_{i-1} &amp; \cos\alpha_{i-1}d_i  0 &amp; 0 &amp; 0 &amp; 1 \end{pmatrix} .$" src="http://planning.cs.uiuc.edu/img888.gif" width=602 align=middle border=0></SPAN></TD>
<TD class=eqno noWrap align=right width=10>(<SPAN class=arabic>3</SPAN>.<SPAN class=arabic>56</SPAN>)</TD></TR></TBODY></TABLE></DIV><BR clear=all>
<P></P>This can be considered as the 3D counterpart to the 2D transformation matrix, (<A href="http://planning.cs.uiuc.edu/node108.html#eqn:chain-2D">3.52</A>). The following four operations are performed in succession: 
<OL>
<LI>Translate by <SPAN class=MATH><IMG height=34 alt="$ d_i$" src="http://planning.cs.uiuc.edu/img24.gif" width=20 align=middle border=0></SPAN> along the <SPAN class=MATH><IMG height=33 alt="$ z_i$" src="http://planning.cs.uiuc.edu/img28.gif" width=19 align=middle border=0></SPAN>-axis. 
<LI>Rotate counterclockwise by <SPAN class=MATH><IMG height=34 alt="$ \theta _i$" src="http://planning.cs.uiuc.edu/img25.gif" width=19 align=middle border=0></SPAN> about the <SPAN class=MATH><IMG height=33 alt="$ z_i$" src="http://planning.cs.uiuc.edu/img28.gif" width=19 align=middle border=0></SPAN>-axis. 
<LI>Translate by <SPAN class=MATH><IMG height=33 alt="$ a_{i-1}$" src="http://planning.cs.uiuc.edu/img26.gif" width=37 align=middle border=0></SPAN> along the <SPAN class=MATH><IMG height=33 alt="$ x_{i-1}$" src="http://planning.cs.uiuc.edu/img29.gif" width=38 align=middle border=0></SPAN>-axis. 
<LI>Rotate counterclockwise by <!-- MATH
 $\alpha_{i-1}$
 --><SPAN class=MATH><IMG height=33 alt="$ \alpha _{i-1}$" src="http://planning.cs.uiuc.edu/img27.gif" width=39 align=middle border=0></SPAN> about the <SPAN class=MATH><IMG height=33 alt="$ x_{i-1}$" src="http://planning.cs.uiuc.edu/img29.gif" width=38 align=middle border=0></SPAN>-axis. </LI></OL>
<P>As in the 2D case, the first matrix, <SPAN class=MATH><IMG height=34 alt="$ T_1$" src="http://planning.cs.uiuc.edu/img21.gif" width=23 align=middle border=0></SPAN>, is special. To represent any position and orientation of <!-- MATH
 ${\cal A}_1$
 --><SPAN class=MATH><IMG height=34 alt="$ {\cal A}_1$" src="http://planning.cs.uiuc.edu/img846.gif" width=28 align=middle border=0></SPAN>, it could be defined as a general rigid-body homogeneous transformation matrix<A name=9018></A>, (<A href="http://planning.cs.uiuc.edu/node104.html#eqn:3dhomog">3.50</A>). If the first body is only capable of rotation via a revolute joint<A name=9020></A>, then a simple convention is usually followed. Let the <!-- MATH
 $a_0,\alpha_0$
 --><SPAN class=MATH><IMG height=33 alt="$ a_0,\alpha_0$" src="http://planning.cs.uiuc.edu/img889.gif" width=50 align=middle border=0></SPAN> parameters of <SPAN class=MATH><IMG height=34 alt="$ T_1$" src="http://planning.cs.uiuc.edu/img21.gif" width=23 align=middle border=0></SPAN> be assigned as <!-- MATH
 $a_0 = \alpha_0 = 0$
 --><SPAN class=MATH><IMG height=33 alt="$ a_0 = \alpha_0 = 0$" src="http://planning.cs.uiuc.edu/img890.gif" width=101 align=middle border=0></SPAN> (there is no <SPAN class=MATH><IMG height=33 alt="$ z_0$" src="http://planning.cs.uiuc.edu/img891.gif" width=21 align=middle border=0></SPAN>-axis). This implies that <SPAN class=MATH><IMG height=34 alt="$ Q_0$" src="http://planning.cs.uiuc.edu/img892.gif" width=27 align=middle border=0></SPAN> from (<A href="http://planning.cs.uiuc.edu/node110.html#eqn:qim1">3.55</A>) is the identity matrix, which makes <SPAN class=MATH><IMG height=34 alt="$ T_1 =&#10;R_1$" src="http://planning.cs.uiuc.edu/img893.gif" width=70 align=middle border=0></SPAN>. 
<P>The transformation <SPAN class=MATH><IMG height=34 alt="$ T_i$" src="http://planning.cs.uiuc.edu/img861.gif" width=21 align=middle border=0></SPAN> for <SPAN class=MATH><IMG  src="" height=33 alt="$ i&#10;> 1$" src="http://planning.cs.uiuc.edu/img854.gif" width=46 align=middle border=0></SPAN> gives the relationship between the body frame of <!-- MATH
 ${\cal A}_i$
 --><SPAN class=MATH><IMG height=34 alt="$ {\cal A}_i$" src="http://planning.cs.uiuc.edu/img15.gif" width=25 align=middle border=0></SPAN> and the body frame of <!-- MATH
 ${\cal A}_{i-1}$
 --><SPAN class=MATH><IMG height=34 alt="$ {\cal A}_{i-1}$" src="http://planning.cs.uiuc.edu/img17.gif" width=43 align=middle border=0></SPAN>. The position of a point <SPAN class=MATH><IMG height=37 alt="$ (x,y,z)$" src="http://planning.cs.uiuc.edu/img720.gif" width=66 align=middle border=0></SPAN> on <!-- MATH
 ${\cal A}_m$
 --><SPAN class=MATH><IMG height=34 alt="$ {\cal A}_m$" src="http://planning.cs.uiuc.edu/img847.gif" width=33 align=middle border=0></SPAN> is given by 
<P></P>
<DIV class=mathdisplay align=center><A name=eqn:chainmats3d></A><!-- MATH
 \begin{equation}
T_1 T_2 \cdots T_m \begin{pmatrix}
x \\y \\z \\1 \\
\end{pmatrix} .
\end{equation}
 -->
<TABLE class=equation cellPadding=0 width="100%" align=center>
<TBODY>
<TR vAlign=center>
<TD noWrap align=middle><SPAN class=MATH><IMG height=110 alt="$\displaystyle T_1 T_2 \cdots T_m \begin{pmatrix}x  y  z  1  \end{pmatrix} .$" src="http://planning.cs.uiuc.edu/img894.gif" width=150 align=middle border=0></SPAN></TD>
<TD class=eqno noWrap align=right width=10>(<SPAN class=arabic>3</SPAN>.<SPAN class=arabic>57</SPAN>)</TD></TR></TBODY></TABLE></DIV><BR clear=all>
<P></P>
<P>For each revolute joint<A name=9025></A>, <SPAN class=MATH><IMG height=34 alt="$ \theta _i$" src="http://planning.cs.uiuc.edu/img25.gif" width=19 align=middle border=0></SPAN> is treated as the only variable in <SPAN class=MATH><IMG height=34 alt="$ T_i$" src="http://planning.cs.uiuc.edu/img861.gif" width=21 align=middle border=0></SPAN>. Prismatic joints<A name=7988></A> can be modeled by allowing <SPAN class=MATH><IMG height=33 alt="$ a_i$" src="http://planning.cs.uiuc.edu/img874.gif" width=20 align=middle border=0></SPAN> to vary. More complicated joints can be modeled as a sequence of degenerate joints. For example, a spherical joint<A name=9027></A> can be considered as a sequence of three zero-length revolute joints<A name=7990></A>; the joints perform a roll, a pitch, and a yaw. Another option for more complicated joints is to abandon the DH representation and directly develop the homogeneous transformation matrix<A name=9029></A>. This might be needed to preserve topological properties that become important in Chapter <A href="http://planning.cs.uiuc.edu/node123.html#cha:cspace">4</A>. 
<P>
<DIV align=center><A name=fig:puma></A><A name=8525></A>
<TABLE>
<CAPTION align=bottom><STRONG>Figure 3.16:</STRONG> The Puma 560 is shown along with the DH parameters and body frames for each link in the chain. This figure is borrowed from [<A href="http://planning.cs.uiuc.edu/node858.html#KozDutWro03">555</A>] by courtesy of the authors.</CAPTION>
<TBODY>
<TR>
<TD><IMG height=383 alt="\begin{figure}\centerline{\psfig{figure=figs/puma560.ps,width=3.2in} }\end{figure}" src="http://planning.cs.uiuc.edu/img895.gif" width=368 border=0></TD></TR></TBODY></TABLE></DIV>
<P>
<DIV align=center><A name=fig:pumadh></A><A name=8526></A>
<TABLE>
<CAPTION align=bottom><STRONG>Figure 3.17:</STRONG> The DH parameters<A name=8007></A> are shown for substitution into each homogeneous transformation matrix<A name=9031></A> (<A href="http://planning.cs.uiuc.edu/node111.html#eqn:chain-3D">3.56</A>). Note that <SPAN class=MATH><IMG height=33 alt="$ a_3$" src="http://planning.cs.uiuc.edu/img30.gif" width=22 align=middle border=0></SPAN> and <SPAN class=MATH><IMG height=34 alt="$ d_3$" src="http://planning.cs.uiuc.edu/img31.gif" width=22 align=middle border=0></SPAN> are negative in this example (they are signed displacements, not distances).</CAPTION>
<TBODY>
<TR>
<TD><IMG height=170 alt="\begin{figure}\begin{center}&#10;\begin{tabular}{\vert c\vert c\vert c\vert c\vert c...&#10;...2$ &amp; $0$ &amp; $\theta_6$ &amp; $0$  \hline&#10;\end{tabular}\end{center}&#10;\end{figure}" src="http://planning.cs.uiuc.edu/img896.gif" width=264 border=0></TD></TR></TBODY></TABLE></DIV>
<P>
<P>
<DIV><A name=exa:puma><B>Example <SPAN class=arabic>3</SPAN>..<SPAN class=arabic>4</SPAN></B></A> (Puma 560) &nbsp; <A name=8013></A>This example demonstrates the 3D chain kinematics on a classic robot manipulator<A name=9033></A>, the PUMA 560, shown in Figure <A href="http://planning.cs.uiuc.edu/node111.html#fig:puma">3.16</A>. The current parameterization here is based on [<A href="http://planning.cs.uiuc.edu/node858.html#ArmKhaBur86">37</A>,<A href="http://planning.cs.uiuc.edu/node858.html#KozDutWro03">555</A>]. The procedure is to determine appropriate body frames to represent each of the links. The first three links allow the hand (called an end-effector) to make large movements in <SPAN class=MATH><IMG height=18 alt="$ {\cal W}$" src="http://planning.cs.uiuc.edu/img22.gif" width=25 align=bottom border=0></SPAN>, and the last three enable the hand to achieve a desired orientation. There are six degrees of freedom, each of which arises from a revolute joint<A name=9036></A>. The body frames are shown in Figure <A href="http://planning.cs.uiuc.edu/node111.html#fig:puma">3.16</A>, and the corresponding DH parameters are given in Figure <A href="http://planning.cs.uiuc.edu/node111.html#fig:pumadh">3.17</A>. Each transformation matrix <SPAN class=MATH><IMG height=34 alt="$ T_i$" src="http://planning.cs.uiuc.edu/img861.gif" width=21 align=middle border=0></SPAN> is a function of <SPAN class=MATH><IMG height=34 alt="$ \theta _i$" src="http://planning.cs.uiuc.edu/img25.gif" width=19 align=middle border=0></SPAN>; hence, it is written <!-- MATH
 $T_i(\theta_i)$
 --><SPAN class=MATH><IMG height=37 alt="$ T_i(\theta_i)$" src="http://planning.cs.uiuc.edu/img897.gif" width=50 align=middle border=0></SPAN>. The other parameters are fixed for this example. Only <SPAN class=MATH><IMG height=34 alt="$ \theta_1$" src="http://planning.cs.uiuc.edu/img848.gif" width=21 align=middle border=0></SPAN>, <SPAN class=MATH><IMG height=34 alt="$ \theta_2$" src="http://planning.cs.uiuc.edu/img849.gif" width=21 align=middle border=0></SPAN>, <SPAN class=MATH><IMG height=17 alt="$ \ldots $" src="http://planning.cs.uiuc.edu/img94.gif" width=27 align=bottom border=0></SPAN>, <SPAN class=MATH><IMG height=34 alt="$ \theta_6$" src="http://planning.cs.uiuc.edu/img898.gif" width=21 align=middle border=0></SPAN> are allowed to vary. 
<P>The parameters from Figure <A href="http://planning.cs.uiuc.edu/node111.html#fig:pumadh">3.17</A> may be substituted into the homogeneous transformation matrices<A name=8021></A> to obtain 
<P></P>
<DIV class=mathdisplay align=center><A name=eqn:puma1></A><!-- MATH
 \begin{equation}
T_1(\theta_1) = 
\begin{pmatrix}
\cos\theta_1 & -\sin\theta_1 & 0 & 0 \\
\sin\theta_1 & \cos\theta_1 & 0 & 0 \\
0 & 0 & 1 & 0 \\
0 & 0 & 0 & 1
\end{pmatrix} ,
\end{equation}
 -->
<TABLE class=equation cellPadding=0 width="100%" align=center>
<TBODY>
<TR vAlign=center>
<TD noWrap align=middle><SPAN class=MATH><IMG height=110 alt="$\displaystyle T_1(\theta_1) = \begin{pmatrix}\cos\theta_1 &amp; -\sin\theta_1 &amp; 0 &amp;...&#10;...heta_1 &amp; \cos\theta_1 &amp; 0 &amp; 0  0 &amp; 0 &amp; 1 &amp; 0  0 &amp; 0 &amp; 0 &amp; 1 \end{pmatrix} ,$" src="http://planning.cs.uiuc.edu/img899.gif" width=292 align=middle border=0></SPAN></TD>
<TD class=eqno noWrap align=right width=10>(<SPAN class=arabic>3</SPAN>.<SPAN class=arabic>58</SPAN>)</TD></TR></TBODY></TABLE></DIV><BR clear=all>
<P></P>
<P>
<P></P>
<DIV class=mathdisplay align=center><A name=eqn:puma2></A><!-- MATH
 \begin{equation}
T_2(\theta_2) = 
\begin{pmatrix}
\cos\theta_2 & -\sin\theta_2 & 0 & 0 \\
0 & 0 & 1 & d_2 \\
-\sin\theta_2 & -\cos\theta_2 & 0 & 0 \\
0 & 0 & 0 & 1
\end{pmatrix} ,
\end{equation}
 -->
<TABLE class=equation cellPadding=0 width="100%" align=center>
<TBODY>
<TR vAlign=center>
<TD noWrap align=middle><SPAN class=MATH><IMG height=110 alt="$\displaystyle T_2(\theta_2) = \begin{pmatrix}\cos\theta_2 &amp; -\sin\theta_2 &amp; 0 &amp;...&#10;...&amp; d_2  -\sin\theta_2 &amp; -\cos\theta_2 &amp; 0 &amp; 0  0 &amp; 0 &amp; 0 &amp; 1 \end{pmatrix} ,$" src="http://planning.cs.uiuc.edu/img900.gif" width=318 align=middle border=0></SPAN></TD>
<TD class=eqno noWrap align=right width=10>(<SPAN class=arabic>3</SPAN>.<SPAN class=arabic>59</SPAN>)</TD></TR></TBODY></TABLE></DIV><BR clear=all>
<P></P>
<P>
<P></P>
<DIV class=mathdisplay align=center><A name=eqn:puma3></A><!-- MATH
 \begin{equation}
T_3(\theta_3) = 
\begin{pmatrix}
\cos\theta_3 & -\sin\theta_3 & 0 & a_2 \\
\sin\theta_3 & \cos\theta_3 & 0 & 0 \\
0 & 0 & 1 & d_3 \\
0 & 0 & 0 & 1
\end{pmatrix} ,
\end{equation}
 -->
<TABLE class=equation cellPadding=0 width="100%" align=center>
<TBODY>
<TR vAlign=center>
<TD noWrap align=middle><SPAN class=MATH><IMG height=110 alt="$\displaystyle T_3(\theta_3) = \begin{pmatrix}\cos\theta_3 &amp; -\sin\theta_3 &amp; 0 &amp;...&#10;...ta_3 &amp; \cos\theta_3 &amp; 0 &amp; 0  0 &amp; 0 &amp; 1 &amp; d_3  0 &amp; 0 &amp; 0 &amp; 1 \end{pmatrix} ,$" src="http://planning.cs.uiuc.edu/img901.gif" width=300 align=middle border=0></SPAN></TD>
<TD class=eqno noWrap align=right width=10>(<SPAN class=arabic>3</SPAN>.<SPAN class=arabic>60</SPAN>)</TD></TR></TBODY></TABLE></DIV><BR clear=all>
<P></P>
<P>
<P></P>
<DIV class=mathdisplay align=center><A name=eqn:puma4></A><!-- MATH
 \begin{equation}
T_4(\theta_4) = 
\begin{pmatrix}
\cos\theta_4 & -\sin\theta_4 & 0 & a_3 \\
0 & 0 & -1 & -d_4 \\
\sin\theta_4 & \cos\theta_4 & 0 & 0 \\
0 & 0 & 0 & 1
\end{pmatrix} ,
\end{equation}
 -->
<TABLE class=equation cellPadding=0 width="100%" align=center>
<TBODY>
<TR vAlign=center>
<TD noWrap align=middle><SPAN class=MATH><IMG height=110 alt="$\displaystyle T_4(\theta_4) = \begin{pmatrix}\cos\theta_4 &amp; -\sin\theta_4 &amp; 0 &amp;...&#10;... &amp; -d_4  \sin\theta_4 &amp; \cos\theta_4 &amp; 0 &amp; 0  0 &amp; 0 &amp; 0 &amp; 1 \end{pmatrix} ,$" src="http://planning.cs.uiuc.edu/img902.gif" width=330 align=middle border=0></SPAN></TD>
<TD class=eqno noWrap align=right width=10>(<SPAN class=arabic>3</SPAN>.<SPAN class=arabic>61</SPAN>)</TD></TR></TBODY></TABLE></DIV><BR clear=all>
<P></P>
<P>
<P></P>
<DIV class=mathdisplay align=center><A name=eqn:puma5></A><!-- MATH
 \begin{equation}
T_5(\theta_5) = 
\begin{pmatrix}
\cos\theta_5 & -\sin\theta_5 & 0 & 0 \\
0 & 0 & 1 & 0 \\
-\sin\theta_5 & -\cos\theta_5 & 0 & 0 \\
0 & 0 & 0 & 1
\end{pmatrix} ,
\end{equation}
 -->
<TABLE class=equation cellPadding=0 width="100%" align=center>
<TBODY>
<TR vAlign=center>
<TD noWrap align=middle><SPAN class=MATH><IMG height=110 alt="$\displaystyle T_5(\theta_5) = \begin{pmatrix}\cos\theta_5 &amp; -\sin\theta_5 &amp; 0 &amp;...&#10;...1 &amp; 0  -\sin\theta_5 &amp; -\cos\theta_5 &amp; 0 &amp; 0  0 &amp; 0 &amp; 0 &amp; 1 \end{pmatrix} ,$" src="http://planning.cs.uiuc.edu/img903.gif" width=310 align=middle border=0></SPAN></TD>
<TD class=eqno noWrap align=right width=10>(<SPAN class=arabic>3</SPAN>.<SPAN class=arabic>62</SPAN>)</TD></TR></TBODY></TABLE></DIV><BR clear=all>
<P></P>and 
<P></P>
<DIV class=mathdisplay align=center><A name=eqn:puma6></A><!-- MATH
 \begin{equation}
T_6(\theta_6) = 
\begin{pmatrix}
\cos\theta_6 & -\sin\theta_6 & 0 & 0 \\
0 & 0 & -1 & 0 \\
\sin\theta_6 & \cos\theta_6 & 0 & 0 \\
0 & 0 & 0 & 1
\end{pmatrix} .
\end{equation}
 -->
<TABLE class=equation cellPadding=0 width="100%" align=center>
<TBODY>
<TR vAlign=center>
<TD noWrap align=middle><SPAN class=MATH><IMG height=110 alt="$\displaystyle T_6(\theta_6) = \begin{pmatrix}\cos\theta_6 &amp; -\sin\theta_6 &amp; 0 &amp;...&#10;... -1 &amp; 0  \sin\theta_6 &amp; \cos\theta_6 &amp; 0 &amp; 0  0 &amp; 0 &amp; 0 &amp; 1 \end{pmatrix} .$" src="http://planning.cs.uiuc.edu/img904.gif" width=307 align=middle border=0></SPAN></TD>
<TD class=eqno noWrap align=right width=10>(<SPAN class=arabic>3</SPAN>.<SPAN class=arabic>63</SPAN>)</TD></TR></TBODY></TABLE></DIV><BR clear=all>
<P></P>A point <SPAN class=MATH><IMG height=37 alt="$ (x,y,z)$" src="http://planning.cs.uiuc.edu/img720.gif" width=66 align=middle border=0></SPAN> in the body frame of the last link <!-- MATH
 ${\cal A}_6$
 --><SPAN class=MATH><IMG height=34 alt="$ {\cal A}_6$" src="http://planning.cs.uiuc.edu/img905.gif" width=28 align=middle border=0></SPAN> appears in <SPAN class=MATH><IMG height=18 alt="$ {\cal W}$" src="http://planning.cs.uiuc.edu/img22.gif" width=25 align=bottom border=0></SPAN> as 
<P></P>
<DIV class=mathdisplay align=center><!-- MATH
 \begin{equation}
T_1(\theta_1) T_2(\theta_2) T_3(\theta_3) T_4(\theta_4) 
T_5(\theta_5) T_6(\theta_6) 
\begin{pmatrix}
x \\y \\z \\1 \\
\end{pmatrix} .
\end{equation}
 -->
<TABLE class=equation cellPadding=0 width="100%" align=center>
<TBODY>
<TR vAlign=center>
<TD noWrap align=middle><SPAN class=MATH><IMG height=110 alt="$\displaystyle T_1(\theta_1) T_2(\theta_2) T_3(\theta_3) T_4(\theta_4) T_5(\theta_5) T_6(\theta_6) \begin{pmatrix}x  y  z  1  \end{pmatrix} .$" src="http://planning.cs.uiuc.edu/img906.gif" width=356 align=middle border=0></SPAN></TD>
<TD class=eqno noWrap align=right width=10>(<SPAN class=arabic>3</SPAN>.<SPAN class=arabic>64</SPAN>)</TD></TR></TBODY></TABLE></DIV><BR clear=all>
<P></P><!-- MATH
 $\blacksquare$
 --><SPAN class=MATH><IMG height=16 alt="$ \blacksquare$" src="http://planning.cs.uiuc.edu/img282.gif" width=20 align=bottom border=0></SPAN> <BR></DIV>
<P></P>
<P>
<DIV align=center><A name=fig:octane></A><A name=8528></A>
<TABLE>
<CAPTION align=bottom><STRONG>Figure 3.18:</STRONG> A hydrocarbon (octane) molecule with 8 carbon atoms and 18 hydrogen atoms (courtesy of the New York University MathMol Library).</CAPTION>
<TBODY>
<TR>
<TD><IMG height=216 alt="\begin{figure}\begin{center}&#10;\centerline{\psfig{file=figs/octane2.ps,width=2.5in}}\end{center}\end{figure}" src="http://planning.cs.uiuc.edu/img907.gif" width=288 border=0></TD></TR></TBODY></TABLE></DIV>
<P>
<DIV align=center><A name=fig:octanespine></A><A name=8530></A>
<TABLE>
<CAPTION align=bottom><STRONG>Figure 3.19:</STRONG> Consider transforming the spine of octane by ignoring the hydrogen atoms and allowing the bonds between carbons to rotate. This can be easily constructed with balls and sticks (e.g., Tinkertoys). If the first link is held fixed, then there are six degrees of freedom. The rotation of the last link is ignored.</CAPTION>
<TBODY>
<TR>
<TD><IMG height=110 alt="\begin{figure}\begin{center}&#10;\centerline{\psfig{file=figs/octanespine.eps,width=5.5in}}\end{center}\end{figure}" src="http://planning.cs.uiuc.edu/img908.gif" width=631 border=0></TD></TR></TBODY></TABLE></DIV>
<P>
<DIV align=center><A name=fig:octanespine2></A><A name=8532></A>
<TABLE>
<CAPTION align=bottom><STRONG>Figure 3.20:</STRONG> Each bond may be interpreted as a ``link'' of length <SPAN class=MATH><IMG height=34 alt="$ d_i$" src="http://planning.cs.uiuc.edu/img24.gif" width=20 align=middle border=0></SPAN> that is aligned with the <SPAN class=MATH><IMG height=33 alt="$ z_i$" src="http://planning.cs.uiuc.edu/img28.gif" width=19 align=middle border=0></SPAN>-axis. Note that most of <!-- MATH
 ${\cal A}_i$
 --><SPAN class=MATH><IMG height=34 alt="$ {\cal A}_i$" src="http://planning.cs.uiuc.edu/img15.gif" width=25 align=middle border=0></SPAN> appears in the <SPAN class=MATH><IMG height=33 alt="$ -z_i$" src="http://planning.cs.uiuc.edu/img32.gif" width=34 align=middle border=0></SPAN> direction.</CAPTION>
<TBODY>
<TR>
<TD><IMG height=380 alt="\begin{figure}\begin{center}&#10;\centerline{\psfig{file=figs/octanespine2.eps,width=2.5in}}\end{center}\end{figure}" src="http://planning.cs.uiuc.edu/img909.gif" width=289 border=0></TD></TR></TBODY></TABLE></DIV>
<P>
<P>
<DIV><A name=exa:octane><B>Example <SPAN class=arabic>3</SPAN>..<SPAN class=arabic>5</SPAN></B></A> (Transforming Octane) &nbsp; <A name=8077></A>Figure <A href="http://planning.cs.uiuc.edu/node111.html#fig:octane">3.18</A> shows a ball-and-stick model of an octane molecule. Each ``ball'' is an atom, and each ``stick'' represents a bond between a pair of atoms. There is a linear chain of eight carbon atoms, and a bond exists between each consecutive pair of carbons in the chain. There are also numerous hydrogen atoms, but we will ignore them. Each bond between a pair of carbons is capable of twisting, as shown in Figure <A href="http://planning.cs.uiuc.edu/node111.html#fig:octanespine">3.19</A>. Studying the configurations (called <EM>conformations</EM><A name=9041></A>) of molecules is an important part of computational biology. It is assumed that there are seven degrees of freedom, each of which arises from twisting a bond. The techniques from this section can be applied to represent these transformations. 
<P>Note that the bonds correspond exactly to the axes of rotation. This suggests that the <SPAN class=MATH><IMG height=33 alt="$ z_i$" src="http://planning.cs.uiuc.edu/img28.gif" width=19 align=middle border=0></SPAN> axes should be chosen to coincide with the bonds. Since consecutive bonds meet at atoms, there is no distance between them. From Figure <A href="http://planning.cs.uiuc.edu/node109.html#fig:dh">3.15</A>c, observe that this makes <SPAN class=MATH><IMG height=33 alt="$ a_i&#10;= 0$" src="http://planning.cs.uiuc.edu/img910.gif" width=54 align=middle border=0></SPAN> for all <SPAN class=MATH><IMG height=16 alt="$ i$" src="http://planning.cs.uiuc.edu/img70.gif" width=11 align=bottom border=0></SPAN>. From Figure <A href="http://planning.cs.uiuc.edu/node109.html#fig:dh">3.15</A>a, it can be seen that each <SPAN class=MATH><IMG height=34 alt="$ d_i$" src="http://planning.cs.uiuc.edu/img24.gif" width=20 align=middle border=0></SPAN> corresponds to a <EM>bond length</EM><A name=9043></A>, the distance between consecutive carbon atoms. See Figure <A href="http://planning.cs.uiuc.edu/node111.html#fig:octanespine2">3.20</A>. This leaves two angular parameters, <SPAN class=MATH><IMG height=34 alt="$ \theta _i$" src="http://planning.cs.uiuc.edu/img25.gif" width=19 align=middle border=0></SPAN> and <SPAN class=MATH><IMG height=33 alt="$ \alpha_i$" src="http://planning.cs.uiuc.edu/img911.gif" width=22 align=middle border=0></SPAN>. Since the only possible motion of the links is via rotation of the <SPAN class=MATH><IMG height=33 alt="$ z_i$" src="http://planning.cs.uiuc.edu/img28.gif" width=19 align=middle border=0></SPAN>-axes, the angle between two consecutive axes, as shown in Figure <A href="http://planning.cs.uiuc.edu/node109.html#fig:dh">3.15</A>d, must remain constant. In chemistry, this is referred to as the <EM>bond angle</EM><A name=9045></A> and is represented in the DH parameterization as <SPAN class=MATH><IMG height=33 alt="$ \alpha_i$" src="http://planning.cs.uiuc.edu/img911.gif" width=22 align=middle border=0></SPAN>. The remaining <SPAN class=MATH><IMG height=34 alt="$ \theta _i$" src="http://planning.cs.uiuc.edu/img25.gif" width=19 align=middle border=0></SPAN> parameters are the variables that represent the degrees of freedom. However, looking at Figure <A href="http://planning.cs.uiuc.edu/node109.html#fig:dh">3.15</A>b, observe that the example is degenerate because each <SPAN class=MATH><IMG height=33 alt="$ x_i$" src="http://planning.cs.uiuc.edu/img855.gif" width=21 align=middle border=0></SPAN>-axis has no frame of reference because each <SPAN class=MATH><IMG height=33 alt="$ a_i&#10;= 0$" src="http://planning.cs.uiuc.edu/img910.gif" width=54 align=middle border=0></SPAN>. This does not, however, cause any problems. For visualization purposes, it may be helpful to replace <SPAN class=MATH><IMG height=33 alt="$ x_{i-1}$" src="http://planning.cs.uiuc.edu/img29.gif" width=38 align=middle border=0></SPAN> and <SPAN class=MATH><IMG height=33 alt="$ x_i$" src="http://planning.cs.uiuc.edu/img855.gif" width=21 align=middle border=0></SPAN> by <SPAN class=MATH><IMG height=33 alt="$ z_{i-1}$" src="http://planning.cs.uiuc.edu/img884.gif" width=36 align=middle border=0></SPAN> and <SPAN class=MATH><IMG height=33 alt="$ z_{i+1}$" src="http://planning.cs.uiuc.edu/img881.gif" width=36 align=middle border=0></SPAN>, respectively. This way it is easy to see that as the bond for the <SPAN class=MATH><IMG height=33 alt="$ z_i$" src="http://planning.cs.uiuc.edu/img28.gif" width=19 align=middle border=0></SPAN>-axis is twisted, the observed angle changes accordingly. Each bond is interpreted as a link, <!-- MATH
 ${\cal A}_i$
 --><SPAN class=MATH><IMG height=34 alt="$ {\cal A}_i$" src="http://planning.cs.uiuc.edu/img15.gif" width=25 align=middle border=0></SPAN>. The origin of each <!-- MATH
 ${\cal A}_i$
 --><SPAN class=MATH><IMG height=34 alt="$ {\cal A}_i$" src="http://planning.cs.uiuc.edu/img15.gif" width=25 align=middle border=0></SPAN> must be chosen to coincide with the intersection point of the <SPAN class=MATH><IMG height=33 alt="$ z_i$" src="http://planning.cs.uiuc.edu/img28.gif" width=19 align=middle border=0></SPAN>- and <SPAN class=MATH><IMG height=33 alt="$ z_{i+1}$" src="http://planning.cs.uiuc.edu/img881.gif" width=36 align=middle border=0></SPAN>-axes. Thus, most of the points in <!-- MATH
 ${\cal A}_i$
 --><SPAN class=MATH><IMG height=34 alt="$ {\cal A}_i$" src="http://planning.cs.uiuc.edu/img15.gif" width=25 align=middle border=0></SPAN> will lie in the <SPAN class=MATH><IMG height=33 alt="$ -z_i$" src="http://planning.cs.uiuc.edu/img32.gif" width=34 align=middle border=0></SPAN> direction; see Figure <A href="http://planning.cs.uiuc.edu/node111.html#fig:octanespine2">3.20</A>. 
<P>The next task is to write down the matrices. Attach a world frame to the first bond, with the second atom at the origin and the bond aligned with the <SPAN class=MATH><IMG height=17 alt="$ z$" src="http://planning.cs.uiuc.edu/img704.gif" width=14 align=bottom border=0></SPAN>-axis, in the negative direction; see Figure <A href="http://planning.cs.uiuc.edu/node111.html#fig:octanespine2">3.20</A>. To define <SPAN class=MATH><IMG height=34 alt="$ T_1$" src="http://planning.cs.uiuc.edu/img21.gif" width=23 align=middle border=0></SPAN>, recall that <SPAN class=MATH><IMG height=34 alt="$ T_1 =&#10;R_1$" src="http://planning.cs.uiuc.edu/img893.gif" width=70 align=middle border=0></SPAN> from (<A href="http://planning.cs.uiuc.edu/node110.html#eqn:ri">3.54</A>) because <SPAN class=MATH><IMG height=34 alt="$ Q_0$" src="http://planning.cs.uiuc.edu/img892.gif" width=27 align=middle border=0></SPAN> is dropped. The parameter <SPAN class=MATH><IMG height=34 alt="$ d_1$" src="http://planning.cs.uiuc.edu/img912.gif" width=22 align=middle border=0></SPAN> represents the distance between the intersection points of the <SPAN class=MATH><IMG height=33 alt="$ x_0$" src="http://planning.cs.uiuc.edu/img913.gif" width=23 align=middle border=0></SPAN>- and <SPAN class=MATH><IMG height=33 alt="$ x_1$" src="http://planning.cs.uiuc.edu/img39.gif" width=23 align=middle border=0></SPAN>-axes along the <SPAN class=MATH><IMG height=33 alt="$ z_1$" src="http://planning.cs.uiuc.edu/img914.gif" width=21 align=middle border=0></SPAN> axis. Since there is no <SPAN class=MATH><IMG height=33 alt="$ x_0$" src="http://planning.cs.uiuc.edu/img913.gif" width=23 align=middle border=0></SPAN>-axis, there is freedom to choose <SPAN class=MATH><IMG height=34 alt="$ d_1$" src="http://planning.cs.uiuc.edu/img912.gif" width=22 align=middle border=0></SPAN>; hence, let <SPAN class=MATH><IMG height=34 alt="$ d_1 = 0$" src="http://planning.cs.uiuc.edu/img915.gif" width=57 align=middle border=0></SPAN> to obtain 
<P></P>
<DIV class=mathdisplay align=center><!-- MATH
 \begin{equation}
T_1(\theta_1) = R_1(\theta_1) =
\begin{pmatrix}
\cos\theta_1 & -\sin\theta_1 & 0 & 0 \\
\sin\theta_1 & \cos\theta_1 & 0 & 0 \\
0 & 0 & 1 & 0 \\
0 & 0 & 0 & 1 
\end{pmatrix} .
\end{equation}
 -->
<TABLE class=equation cellPadding=0 width="100%" align=center>
<TBODY>
<TR vAlign=center>
<TD noWrap align=middle><SPAN class=MATH><IMG height=110 alt="$\displaystyle T_1(\theta_1) = R_1(\theta_1) = \begin{pmatrix}\cos\theta_1 &amp; -\s...&#10;...heta_1 &amp; \cos\theta_1 &amp; 0 &amp; 0  0 &amp; 0 &amp; 1 &amp; 0  0 &amp; 0 &amp; 0 &amp; 1 \end{pmatrix} .$" src="http://planning.cs.uiuc.edu/img916.gif" width=370 align=middle border=0></SPAN></TD>
<TD class=eqno noWrap align=right width=10>(<SPAN class=arabic>3</SPAN>.<SPAN class=arabic>65</SPAN>)</TD></TR></TBODY></TABLE></DIV><BR clear=all>
<P></P>The application of <SPAN class=MATH><IMG height=34 alt="$ T_1$" src="http://planning.cs.uiuc.edu/img21.gif" width=23 align=middle border=0></SPAN> to points in <!-- MATH
 ${\cal A}_1$
 --><SPAN class=MATH><IMG height=34 alt="$ {\cal A}_1$" src="http://planning.cs.uiuc.edu/img846.gif" width=28 align=middle border=0></SPAN> causes them to rotate around the <SPAN class=MATH><IMG height=33 alt="$ z_1$" src="http://planning.cs.uiuc.edu/img914.gif" width=21 align=middle border=0></SPAN>-axis, which appears correct. 
<P>The matrices for the remaining six bonds are 
<P></P>
<DIV class=mathdisplay align=center><A name=eqn:bondmat></A><!-- MATH
 \begin{equation}
T_i(\theta_i) =
\begin{pmatrix}
\cos\theta_i & -\sin\theta_i & 0 & 0 \\
\sin\theta_i \cos\alpha_{i-1} & \cos\theta_i \cos\alpha_{i-1} &
-\sin\alpha_{i-1} & -\sin\alpha_{i-1}d_i \\
\sin\theta_i \sin\alpha_{i-1} & \cos\theta_i \sin\alpha_{i-1} &
\cos\alpha_{i-1} & \cos\alpha_{i-1}d_i \\
0 & 0 & 0 & 1
\end{pmatrix} ,
\end{equation}
 -->
<TABLE class=equation cellPadding=0 width="100%" align=center>
<TBODY>
<TR vAlign=center>
<TD noWrap align=middle><SPAN class=MATH><IMG height=110 alt="$\displaystyle T_i(\theta_i) = \begin{pmatrix}\cos\theta_i &amp; -\sin\theta_i &amp; 0 &amp;...&#10;...{i-1} &amp; \cos\alpha_{i-1} &amp; \cos\alpha_{i-1}d_i  0 &amp; 0 &amp; 0 &amp; 1 \end{pmatrix} ,$" src="http://planning.cs.uiuc.edu/img917.gif" width=552 align=middle border=0></SPAN></TD>
<TD class=eqno noWrap align=right width=10>(<SPAN class=arabic>3</SPAN>.<SPAN class=arabic>66</SPAN>)</TD></TR></TBODY></TABLE></DIV><BR clear=all>
<P></P>for <!-- MATH
 $i \in \{2, \ldots, 7\}$
 --><SPAN class=MATH><IMG height=37 alt="$ i \in \{2, \ldots, 7\}$" src="http://planning.cs.uiuc.edu/img918.gif" width=114 align=middle border=0></SPAN>. The position of any point, <!-- MATH
 $(x,y,z) \in
{\cal A}_7$
 --><SPAN class=MATH><IMG height=37 alt="$ (x,y,z) \in&#10;{\cal A}_7$" src="http://planning.cs.uiuc.edu/img919.gif" width=112 align=middle border=0></SPAN>, is given by 
<P></P>
<DIV class=mathdisplay align=center><!-- MATH
 \begin{equation}
T_1(\theta_1) T_2(\theta_2) T_3(\theta_3) 
T_4(\theta_4) T_5(\theta_5) T_6(\theta_6) T_7(\theta_7) 
\begin{pmatrix}
x \\y \\z \\1 \\
\end{pmatrix}.
\end{equation}
 -->
<TABLE class=equation cellPadding=0 width="100%" align=center>
<TBODY>
<TR vAlign=center>
<TD noWrap align=middle><SPAN class=MATH><IMG height=110 alt="$\displaystyle T_1(\theta_1) T_2(\theta_2) T_3(\theta_3) T_4(\theta_4) T_5(\theta_5) T_6(\theta_6) T_7(\theta_7) \begin{pmatrix}x  y  z  1  \end{pmatrix}.$" src="http://planning.cs.uiuc.edu/img920.gif" width=406 align=middle border=0></SPAN></TD>
<TD class=eqno noWrap align=right width=10>(<SPAN class=arabic>3</SPAN>.<SPAN class=arabic>67</SPAN>)</TD></TR></TBODY></TABLE></DIV><BR clear=all>
<P></P><!-- MATH
 $\blacksquare$
 --><SPAN class=MATH><IMG height=16 alt="$ \blacksquare$" src="http://planning.cs.uiuc.edu/img282.gif" width=20 align=bottom border=0></SPAN> <BR><A name=8116></A></DIV>