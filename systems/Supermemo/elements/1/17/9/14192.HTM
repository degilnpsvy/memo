<H4><A name=SECTION03123030000000000000>Determining yaw, pitch, and roll from a rotation matrix</A> </H4>
<P>It is often convenient to determine the <SPAN class=MATH><IMG height=17 alt="$ \alpha$" src="http://planning.cs.uiuc.edu/img815.gif" width=17 align=bottom border=0></SPAN>, <SPAN class=MATH><IMG height=34 alt="$ \beta$" src="http://planning.cs.uiuc.edu/img818.gif" width=16 align=middle border=0></SPAN>, and <SPAN class=MATH><IMG height=33 alt="$ \gamma$" src="http://planning.cs.uiuc.edu/img820.gif" width=16 align=middle border=0></SPAN> parameters directly from a given rotation matrix. Suppose an arbitrary rotation matrix 
<P></P>
<DIV class=mathdisplay align=center><A name=eqn:genmat></A><!-- MATH
 \begin{equation}
\begin{pmatrix}
r_{11} & r_{12} & r_{13} \\
r_{21} & r_{22} & r_{23} \\
r_{31} & r_{32} & r_{33} \\
\end{pmatrix}
\end{equation}
 -->
<TABLE class=equation cellPadding=0 width="100%" align=center>
<TBODY>
<TR vAlign=center>
<TD noWrap align=middle><SPAN class=MATH><IMG height=87 alt="$\displaystyle \begin{pmatrix}r_{11} &amp; r_{12} &amp; r_{13}  r_{21} &amp; r_{22} &amp; r_{23}  r_{31} &amp; r_{32} &amp; r_{33}  \end{pmatrix}$" src="http://planning.cs.uiuc.edu/img826.gif" width=138 align=middle border=0></SPAN></TD>
<TD class=eqno noWrap align=right width=10>(<SPAN class=arabic>3</SPAN>.<SPAN class=arabic>43</SPAN>)</TD></TR></TBODY></TABLE></DIV><BR clear=all>
<P></P>is given. By setting each entry equal to its corresponding entry in (<A href="http://planning.cs.uiuc.edu/node102.html#eqn:yprmat">3.42</A>), equations are obtained that must be solved for <SPAN class=MATH><IMG height=17 alt="$ \alpha$" src="http://planning.cs.uiuc.edu/img815.gif" width=17 align=bottom border=0></SPAN>, <SPAN class=MATH><IMG height=34 alt="$ \beta$" src="http://planning.cs.uiuc.edu/img818.gif" width=16 align=middle border=0></SPAN>, and <SPAN class=MATH><IMG height=33 alt="$ \gamma$" src="http://planning.cs.uiuc.edu/img820.gif" width=16 align=middle border=0></SPAN>. Note that <!-- MATH
 $r_{21}/r_{11} = \tan
\alpha$
 --><SPAN class=MATH><IMG height=37 alt="$ r_{21}/r_{11} = \tan&#10;\alpha$" src="http://planning.cs.uiuc.edu/img827.gif" width=127 align=middle border=0></SPAN> and <!-- MATH
 $r_{32}/r_{33} = \tan \gamma$
 --><SPAN class=MATH><IMG height=37 alt="$ r_{32}/r_{33} = \tan \gamma$" src="http://planning.cs.uiuc.edu/img828.gif" width=126 align=middle border=0></SPAN>. Also, <!-- MATH
 $r_{31} = - \sin
\beta$
 --><SPAN class=MATH><IMG height=34 alt="$ r_{31} = - \sin&#10;\beta$" src="http://planning.cs.uiuc.edu/img829.gif" width=109 align=middle border=0></SPAN> and <!-- MATH
 $\sqrt{r^2_{32}+r^2_{33}} = \cos\beta$
 --><SPAN class=MATH><IMG height=44 alt="$ \sqrt{r^2_{32}+r^2_{33}} = \cos\beta$" src="http://planning.cs.uiuc.edu/img830.gif" width=157 align=middle border=0></SPAN>. Solving for each angle yields 
<P></P>
<DIV class=mathdisplay align=center><A name=eqn:angfrommat></A><!-- MATH
 \begin{equation}
\alpha = \tan^{-1} (r_{21}/r_{11}) ,
\end{equation}
 -->
<TABLE class=equation cellPadding=0 width="100%" align=center>
<TBODY>
<TR vAlign=center>
<TD noWrap align=middle><SPAN class=MATH><IMG height=40 alt="$\displaystyle \alpha = \tan^{-1} (r_{21}/r_{11}) ,$" src="http://planning.cs.uiuc.edu/img831.gif" width=162 align=middle border=0></SPAN></TD>
<TD class=eqno noWrap align=right width=10>(<SPAN class=arabic>3</SPAN>.<SPAN class=arabic>44</SPAN>)</TD></TR></TBODY></TABLE></DIV><BR clear=all>
<P></P>
<P></P>
<DIV class=mathdisplay align=center><A name=eqn:angfrommat2></A><!-- MATH
 \begin{equation}
\beta = \tan^{-1} \Big(-r_{31} \big/ \sqrt{r^2_{32}+r^2_{33}}\Big) ,
\end{equation}
 -->
<TABLE class=equation cellPadding=0 width="100%" align=center>
<TBODY>
<TR vAlign=center>
<TD noWrap align=middle><SPAN class=MATH><IMG height=57 alt="$\displaystyle \beta = \tan^{-1} \Big(-r_{31} \big/ \sqrt{r^2_{32}+r^2_{33}}\Big) ,$" src="http://planning.cs.uiuc.edu/img832.gif" width=262 align=middle border=0></SPAN></TD>
<TD class=eqno noWrap align=right width=10>(<SPAN class=arabic>3</SPAN>.<SPAN class=arabic>45</SPAN>)</TD></TR></TBODY></TABLE></DIV><BR clear=all>
<P></P>and 
<P></P>
<DIV class=mathdisplay align=center><A name=eqn:angfrommat3></A><!-- MATH
 \begin{equation}
\gamma = \tan^{-1} (r_{32}/r_{33}).
\end{equation}
 -->
<TABLE class=equation cellPadding=0 width="100%" align=center>
<TBODY>
<TR vAlign=center>
<TD noWrap align=middle><SPAN class=MATH><IMG height=40 alt="$\displaystyle \gamma = \tan^{-1} (r_{32}/r_{33}).$" src="http://planning.cs.uiuc.edu/img833.gif" width=160 align=middle border=0></SPAN></TD>
<TD class=eqno noWrap align=right width=10>(<SPAN class=arabic>3</SPAN>.<SPAN class=arabic>46</SPAN>)</TD></TR></TBODY></TABLE></DIV><BR clear=all>
<P></P>
<P>There is a choice of four quadrants for the inverse tangent functions. How can the correct quadrant be determined? Each quadrant should be chosen by using the signs of the numerator and denominator of the argument. The numerator sign selects whether the direction will be above or below the <SPAN class=MATH><IMG height=17 alt="$ x$" src="http://planning.cs.uiuc.edu/img86.gif" width=15 align=bottom border=0></SPAN>-axis, and the denominator selects whether the direction will be to the left or right of the <SPAN class=MATH><IMG height=33 alt="$ y$" src="http://planning.cs.uiuc.edu/img166.gif" width=15 align=middle border=0></SPAN>-axis. This is the same as the <SPAN class=MATH><IMG height=17 alt="$ \atan2$" src="http://planning.cs.uiuc.edu/img834.gif" width=14 align=bottom border=0></SPAN><A name=7710></A> function in the C programming language, which nicely expands the range of the arctangent to <SPAN class=MATH><IMG height=37 alt="$ [0,2&#10;\pi)$" src="http://planning.cs.uiuc.edu/img835.gif" width=56 align=middle border=0></SPAN>. This can be applied to express (<A href="http://planning.cs.uiuc.edu/node103.html#eqn:angfrommat">3.44</A>), (<A href="http://planning.cs.uiuc.edu/node103.html#eqn:angfrommat2">3.45</A>), and (<A href="http://planning.cs.uiuc.edu/node103.html#eqn:angfrommat3">3.46</A>) as 
<P></P>
<DIV class=mathdisplay align=center><A name=eqn:angfrommat4></A><!-- MATH
 \begin{equation}
\alpha = \atan2(r_{21},r_{11}) ,
\end{equation}
 -->
<TABLE class=equation cellPadding=0 width="100%" align=center>
<TBODY>
<TR vAlign=center>
<TD noWrap align=middle><SPAN class=MATH><IMG height=37 alt="$\displaystyle \alpha = \atan2(r_{21},r_{11}) ,$" src="http://planning.cs.uiuc.edu/img836.gif" width=125 align=middle border=0></SPAN></TD>
<TD class=eqno noWrap align=right width=10>(<SPAN class=arabic>3</SPAN>.<SPAN class=arabic>47</SPAN>)</TD></TR></TBODY></TABLE></DIV><BR clear=all>
<P></P>
<P></P>
<DIV class=mathdisplay align=center><A name=eqn:angfrommat5></A><!-- MATH
 \begin{equation}
\beta = \atan2\Big(-r_{31},\sqrt{r^2_{32}+r^2_{33}}\Big) ,
\end{equation}
 -->
<TABLE class=equation cellPadding=0 width="100%" align=center>
<TBODY>
<TR vAlign=center>
<TD noWrap align=middle><SPAN class=MATH><IMG height=57 alt="$\displaystyle \beta = \atan2\Big(-r_{31},\sqrt{r^2_{32}+r^2_{33}}\Big) ,$" src="http://planning.cs.uiuc.edu/img837.gif" width=221 align=middle border=0></SPAN></TD>
<TD class=eqno noWrap align=right width=10>(<SPAN class=arabic>3</SPAN>.<SPAN class=arabic>48</SPAN>)</TD></TR></TBODY></TABLE></DIV><BR clear=all>
<P></P>and 
<P></P>
<DIV class=mathdisplay align=center><A name=eqn:angfrommat6></A><!-- MATH
 \begin{equation}
\gamma = \atan2(r_{32},r_{33}).
\end{equation}
 -->
<TABLE class=equation cellPadding=0 width="100%" align=center>
<TBODY>
<TR vAlign=center>
<TD noWrap align=middle><SPAN class=MATH><IMG height=37 alt="$\displaystyle \gamma = \atan2(r_{32},r_{33}).$" src="http://planning.cs.uiuc.edu/img838.gif" width=124 align=middle border=0></SPAN></TD>
<TD class=eqno noWrap align=right width=10>(<SPAN class=arabic>3</SPAN>.<SPAN class=arabic>49</SPAN>)</TD></TR></TBODY></TABLE></DIV><BR clear=all>
<P></P>Note that this method assumes <!-- MATH
 $r_{11} \not = 0$
 --><SPAN class=MATH><IMG height=34 alt="$ r_{11} \not = 0$" src="http://planning.cs.uiuc.edu/img839.gif" width=62 align=middle border=0></SPAN> and <!-- MATH
 $r_{33} \not = 0$
 --><SPAN class=MATH><IMG height=34 alt="$ r_{33} \not = 0$" src="http://planning.cs.uiuc.edu/img840.gif" width=62 align=middle border=0></SPAN>.