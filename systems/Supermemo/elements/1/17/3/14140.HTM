<H4><A name=SECTION02252020000000000000>Layer-by-layer construction</A> </H4>
<P>The planning graph is constructed layer by layer, starting from <SPAN class=MATH><IMG height=34 alt="$ L_1$" src="http://planning.cs.uiuc.edu/img123.gif" width=25 align=middle border=0></SPAN>. In the first stage, <SPAN class=MATH><IMG height=34 alt="$ L_1$" src="http://planning.cs.uiuc.edu/img123.gif" width=25 align=middle border=0></SPAN> represents the initial state. Every positive literal in <SPAN class=MATH><IMG height=17 alt="$ S$" src="http://planning.cs.uiuc.edu/img78.gif" width=17 align=bottom border=0></SPAN> is placed into <SPAN class=MATH><IMG height=34 alt="$ L_1$" src="http://planning.cs.uiuc.edu/img123.gif" width=25 align=middle border=0></SPAN>, along with the negation of every positive literal not in <SPAN class=MATH><IMG height=17 alt="$ S$" src="http://planning.cs.uiuc.edu/img78.gif" width=17 align=bottom border=0></SPAN>. Now consider stage <SPAN class=MATH><IMG height=16 alt="$ i$" src="http://planning.cs.uiuc.edu/img70.gif" width=11 align=bottom border=0></SPAN>. The set <SPAN class=MATH><IMG height=34 alt="$ O_i$" src="http://planning.cs.uiuc.edu/img564.gif" width=24 align=middle border=0></SPAN> is the set of all operators for which their preconditions are a subset of <SPAN class=MATH><IMG height=34 alt="$ L_i$" src="http://planning.cs.uiuc.edu/img565.gif" width=23 align=middle border=0></SPAN>. The set <SPAN class=MATH><IMG height=34 alt="$ L_{i+1}$" src="http://planning.cs.uiuc.edu/img566.gif" width=40 align=middle border=0></SPAN> is the union of the effects of all operators in <SPAN class=MATH><IMG height=34 alt="$ O_i$" src="http://planning.cs.uiuc.edu/img564.gif" width=24 align=middle border=0></SPAN>. The iterations continue until the planning graph stabilizes, which means that <!-- MATH
 $O_{i+1} = O_i$
 --><SPAN class=MATH><IMG height=34 alt="$ O_{i+1} = O_i$" src="http://planning.cs.uiuc.edu/img567.gif" width=87 align=middle border=0></SPAN> and <!-- MATH
 $L_{i+1} =
L_i$
 --><SPAN class=MATH><IMG height=34 alt="$ L_{i+1} =&#10;L_i$" src="http://planning.cs.uiuc.edu/img568.gif" width=83 align=middle border=0></SPAN>. This situation is very similar to the stabilization of value iterations in Section <A href="http://planning.cs.uiuc.edu/node56.html#sec:dopgc">2.3.2</A>. A trick similar to the termination action, <SPAN class=MATH><IMG height=33 alt="$ u_T$" src="http://planning.cs.uiuc.edu/img459.gif" width=26 align=middle border=0></SPAN>, is needed even here so that plans of various lengths are properly handled. In Section <A href="http://planning.cs.uiuc.edu/node56.html#sec:dopgc">2.3.2</A>, one job of the termination action was to prevent state transitions from occurring. The same idea is needed here. For each possible literal, <SPAN class=MATH><IMG height=17 alt="$ l$" src="http://planning.cs.uiuc.edu/img549.gif" width=11 align=bottom border=0></SPAN>, a <EM>trivial operator</EM><A name=4129></A> is constructed for which <SPAN class=MATH><IMG height=17 alt="$ l$" src="http://planning.cs.uiuc.edu/img549.gif" width=11 align=bottom border=0></SPAN> is the only precondition and effect. The introduction of trivial operators ensures that once a literal is reached, it is maintained in the planning graph for every subsequent layer of literals. Thus, each <SPAN class=MATH><IMG height=34 alt="$ O_i$" src="http://planning.cs.uiuc.edu/img564.gif" width=24 align=middle border=0></SPAN> may contain some trivial operators, in addition to operators from the initially given set <SPAN class=MATH><IMG height=17 alt="$ O$" src="http://planning.cs.uiuc.edu/img130.gif" width=20 align=bottom border=0></SPAN>. These are required to ensure that the planning graph expansion reaches a steady state, in which the planning graph is identical for all future expansions.