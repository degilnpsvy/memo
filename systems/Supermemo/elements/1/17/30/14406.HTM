<H3 class=section>5.3 Recipe Execution</H3>
<P><A name=index-recipe_002c-execution-320></A><A name=index-execution_002c-of-recipes-321></A><A name=index-g_t_0040code_007bSHELL_007d-_0040r_007b_0028recipe-execution_0029_007d-322></A><FONT class=extract>When it is time to execute recipes to update a target, they are executed by invoking a new sub-shell for each line of the recipe, unless the <CODE>.ONESHELL</CODE> special target is in effect (see </FONT><A href="https://www.gnu.org/software/make/manual/make.html#One-Shell"><FONT class=extract>Using One Shell</FONT></A><FONT class=extract>) (In practice, <CODE>make</CODE> may take shortcuts that do not affect the results.)</FONT> 
<P><A name=index-g_t_0040code_007bcd_007d-_0028shell-command_0029-323></A><A name=index-shell-variables_002c-setting-in-recipes-324></A><A name=index-recipes-setting-shell-variables-325></A><FONT class=extract><STRONG>Please note:</STRONG> this implies that setting shell variables and invoking shell commands such as <CODE>cd</CODE> that set a context local to each process will not affect the following lines in the recipe.</FONT><A href="https://www.gnu.org/software/make/manual/make.html#fn-2" rel=footnote name=fnd-2><SUP><FONT class=extract>2</FONT></SUP></A><FONT class=extract> If you want to use <CODE>cd</CODE> to affect the next statement, put both statements in a single recipe line. Then <CODE>make</CODE> will invoke one shell to run the entire line, and the shell will execute the statements in sequence. For example: </FONT><PRE class=example><FONT class=extract>     foo : bar/lose
             cd $(@D) &amp;&amp; gobble $(@F) &gt; ../$@
</FONT></PRE>
<P class=noindent><FONT class=extract>Here we use the shell AND operator (<CODE>&amp;&amp;</CODE>) so that if the <CODE>cd</CODE> command fails, the script will fail without trying to invoke the <CODE>gobble</CODE> command in the wrong directory, which could cause problems (in this case it would certainly cause <SAMP><SPAN class=file>../foo</SPAN></SAMP> to be truncated, at least).</FONT> 
<UL class=menu>
<LI><A accessKey=1 href="https://www.gnu.org/software/make/manual/make.html#One-Shell">One Shell</A>: One shell for all lines in a recipe. 
<LI><A accessKey=2 href="https://www.gnu.org/software/make/manual/make.html#Choosing-the-Shell">Choosing the Shell</A>: How <CODE>make</CODE> chooses the shell used to run recipes. </LI></UL>