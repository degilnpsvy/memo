<H4><A name=SECTION03222030000000000000>Using quaternion multiplication</A> </H4>
<P>The representation of rotations boiled down to picking points on <!-- MATH
 ${\mathbb{S}}^3$
 --><SPAN class=MATH><IMG height=19 alt="$ {\mathbb{S}}^3$" src="http://planning.cs.uiuc.edu/img1296.gif" width=23 align=bottom border=0></SPAN> and respecting the fact that antipodal points give the same element of <SPAN class=MATH><IMG height=37 alt="$ SO(3)$" src="http://planning.cs.uiuc.edu/img71.gif" width=56 align=middle border=0></SPAN>. In a sense, this has nothing to do with the algebraic properties of quaternions. It merely means that <SPAN class=MATH><IMG height=37 alt="$ SO(3)$" src="http://planning.cs.uiuc.edu/img71.gif" width=56 align=middle border=0></SPAN> can be parameterized by picking points in <!-- MATH
 ${\mathbb{S}}^3$
 --><SPAN class=MATH><IMG height=19 alt="$ {\mathbb{S}}^3$" src="http://planning.cs.uiuc.edu/img1296.gif" width=23 align=bottom border=0></SPAN>, just like <SPAN class=MATH><IMG height=37 alt="$ SO(2)$" src="http://planning.cs.uiuc.edu/img1234.gif" width=56 align=middle border=0></SPAN> was parameterized by picking points in <!-- MATH
 ${\mathbb{S}}^1$
 --><SPAN class=MATH><IMG height=19 alt="$ {\mathbb{S}}^1$" src="http://planning.cs.uiuc.edu/img56.gif" width=23 align=bottom border=0></SPAN> (ignoring the antipodal identification problem for <SPAN class=MATH><IMG height=37 alt="$ SO(3)$" src="http://planning.cs.uiuc.edu/img71.gif" width=56 align=middle border=0></SPAN>). 
<P>However, one important reason why the quaternion arithmetic was introduced is that the group of unit quaternions with <SPAN class=MATH><IMG height=17 alt="$ h$" src="http://planning.cs.uiuc.edu/img764.gif" width=16 align=bottom border=0></SPAN> and <SPAN class=MATH><IMG height=34 alt="$ -h$" src="http://planning.cs.uiuc.edu/img1291.gif" width=30 align=middle border=0></SPAN> identified is also isomorphic to <SPAN class=MATH><IMG height=37 alt="$ SO(3)$" src="http://planning.cs.uiuc.edu/img71.gif" width=56 align=middle border=0></SPAN>. This means that a sequence of rotations can be multiplied together using quaternion multiplication instead of matrix multiplication. This is important because fewer operations are required for quaternion multiplication in comparison to matrix multiplication. At any point, (<A href="http://planning.cs.uiuc.edu/node151.html#eqn:quatmat">4.20</A>) can be used to convert the result back into a matrix; however, this is not even necessary. It turns out that a point in the world, <!-- MATH
 $(x,y,z) \in
{\mathbb{R}}^3$
 --><SPAN class=MATH><IMG height=38 alt="$ (x,y,z) \in&#10;{\mathbb{R}}^3$" src="http://planning.cs.uiuc.edu/img1313.gif" width=111 align=middle border=0></SPAN>, can be transformed by directly using quaternion arithmetic. An analog to the complex conjugate from complex numbers is needed. For any <!-- MATH
 $h = a + bi + cj + dk \in {\mathbb{H}}$
 --><SPAN class=MATH><IMG height=34 alt="$ h = a + bi + cj + dk \in {\mathbb{H}}$" src="http://planning.cs.uiuc.edu/img1314.gif" width=209 align=middle border=0></SPAN>, let <!-- MATH
 $h^* = a - bi - cj - dk$
 --><SPAN class=MATH><IMG height=34 alt="$ h^* = a - bi - cj - dk$" src="http://planning.cs.uiuc.edu/img1315.gif" width=179 align=middle border=0></SPAN> be its <EM>conjugate</EM>. For any point <!-- MATH
 $(x,y,z) \in {\mathbb{R}}^3$
 --><SPAN class=MATH><IMG height=38 alt="$ (x,y,z) \in&#10;{\mathbb{R}}^3$" src="http://planning.cs.uiuc.edu/img1313.gif" width=111 align=middle border=0></SPAN>, let <!-- MATH
 $p \in
{\mathbb{H}}$
 --><SPAN class=MATH><IMG height=34 alt="$ p \in&#10;{\mathbb{H}}$" src="http://planning.cs.uiuc.edu/img1316.gif" width=52 align=middle border=0></SPAN> be the quaternion <!-- MATH
 $0+xi+yj+zk$
 --><SPAN class=MATH><IMG height=34 alt="$ 0+xi+yj+zk$" src="http://planning.cs.uiuc.edu/img1317.gif" width=139 align=middle border=0></SPAN>. It can be shown (with a lot of algebra) that the rotated point <SPAN class=MATH><IMG height=37 alt="$ (x,y,z)$" src="http://planning.cs.uiuc.edu/img720.gif" width=66 align=middle border=0></SPAN> is given by <!-- MATH
 $h \cdot p \cdot
h^*$
 --><SPAN class=MATH><IMG height=34 alt="$ h \cdot p \cdot&#10;h^*$" src="http://planning.cs.uiuc.edu/img1318.gif" width=71 align=middle border=0></SPAN>. The <SPAN class=MATH><IMG height=16 alt="$ i$" src="http://planning.cs.uiuc.edu/img70.gif" width=11 align=bottom border=0></SPAN>, <SPAN class=MATH><IMG height=33 alt="$ j$" src="http://planning.cs.uiuc.edu/img148.gif" width=14 align=middle border=0></SPAN>, <SPAN class=MATH><IMG height=17 alt="$ k$" src="http://planning.cs.uiuc.edu/img91.gif" width=15 align=bottom border=0></SPAN> components of the resulting quaternion are new coordinates for the transformed point. It is equivalent to having transformed <SPAN class=MATH><IMG height=37 alt="$ (x,y,z)$" src="http://planning.cs.uiuc.edu/img720.gif" width=66 align=middle border=0></SPAN> with the matrix <SPAN class=MATH><IMG height=37 alt="$ R(h)$" src="http://planning.cs.uiuc.edu/img1319.gif" width=45 align=middle border=0></SPAN>.