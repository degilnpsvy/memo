<H2><A name=SECTION03223000000000000000><SPAN class=arabic>4</SPAN>.<SPAN class=arabic>2</SPAN>.<SPAN class=arabic>3</SPAN> Chains and Trees of Bodies</A> </H2>
<P><A name=12478></A>
<P>If there are multiple bodies that are allowed to move independently, then their C-spaces can be combined using Cartesian products. Let <!-- MATH
 ${\cal C}_i$
 --><SPAN class=MATH><IMG height=34 alt="$ {\cal C}_i$" src="http://planning.cs.uiuc.edu/img1333.gif" width=20 align=middle border=0></SPAN> denote the C-space of <!-- MATH
 ${\cal A}_i$
 --><SPAN class=MATH><IMG height=34 alt="$ {\cal A}_i$" src="http://planning.cs.uiuc.edu/img15.gif" width=25 align=middle border=0></SPAN>. If there are <SPAN class=MATH><IMG height=17 alt="$ n$" src="http://planning.cs.uiuc.edu/img57.gif" width=16 align=bottom border=0></SPAN> free-floating bodies in <!-- MATH
 ${\cal W}= {\mathbb{R}}^2$
 --><SPAN class=MATH><IMG height=20 alt="$ {\cal W}= {\mathbb{R}}^2$" src="http://planning.cs.uiuc.edu/img217.gif" width=72 align=bottom border=0></SPAN> or <!-- MATH
 ${\cal W}= {\mathbb{R}}^3$
 --><SPAN class=MATH><IMG height=20 alt="$ {\cal W}= {\mathbb{R}}^3$" src="http://planning.cs.uiuc.edu/img640.gif" width=72 align=bottom border=0></SPAN>, then 
<P></P>
<DIV class=mathdisplay align=center><!-- MATH
 \begin{equation}
{\cal C}= {\cal C}_1 \times {\cal C}_2 \times \cdots \times {\cal C}_n .
\end{equation}
 -->
<TABLE class=equation cellPadding=0 width="100%" align=center>
<TBODY>
<TR vAlign=center>
<TD noWrap align=middle><SPAN class=MATH><IMG height=34 alt="$\displaystyle {\cal C}= {\cal C}_1 \times {\cal C}_2 \times \cdots \times {\cal C}_n .$" src="http://planning.cs.uiuc.edu/img1334.gif" width=193 align=middle border=0></SPAN></TD>
<TD class=eqno noWrap align=right width=10>(<SPAN class=arabic>4</SPAN>.<SPAN class=arabic>32</SPAN>)</TD></TR></TBODY></TABLE></DIV><BR clear=all>
<P></P>
<P>If the bodies are attached to form a kinematic chain or kinematic tree, then each C-space must be considered on a case-by-case basis. There is no general rule that simplifies the process. One thing to generally be careful about is that the full range of motion might not be possible for typical joints. For example, a revolute joint might not be able to swing all of the way around to enable any <!-- MATH
 $\theta \in
[0,2 \pi)$
 --><SPAN class=MATH><IMG height=37 alt="$ \theta \in [0,2 \pi)$" src="http://planning.cs.uiuc.edu/img794.gif" width=88 align=middle border=0></SPAN>. If <SPAN class=MATH><IMG height=17 alt="$ \theta $" src="http://planning.cs.uiuc.edu/img47.gif" width=14 align=bottom border=0></SPAN> cannot wind around <!-- MATH
 ${\mathbb{S}}^1$
 --><SPAN class=MATH><IMG height=19 alt="$ {\mathbb{S}}^1$" src="http://planning.cs.uiuc.edu/img56.gif" width=23 align=bottom border=0></SPAN>, then the C-space for this joint is homeomorphic to <!-- MATH
 ${\mathbb{R}}$
 --><SPAN class=MATH><IMG height=17 alt="$ {\mathbb{R}}$" src="http://planning.cs.uiuc.edu/img101.gif" width=19 align=bottom border=0></SPAN> instead of <!-- MATH
 ${\mathbb{S}}^1$
 --><SPAN class=MATH><IMG height=19 alt="$ {\mathbb{S}}^1$" src="http://planning.cs.uiuc.edu/img56.gif" width=23 align=bottom border=0></SPAN>. A similar situation occurs for a spherical joint. A typical ball joint cannot achieve any orientation in <SPAN class=MATH><IMG height=37 alt="$ SO(3)$" src="http://planning.cs.uiuc.edu/img71.gif" width=56 align=middle border=0></SPAN> due to mechanical obstructions. In this case, the C-space is not <!-- MATH
 ${\mathbb{RP}}^3$
 --><SPAN class=MATH><IMG height=21 alt="$ {\mathbb{RP}}^3$" src="http://planning.cs.uiuc.edu/img1111.gif" width=38 align=bottom border=0></SPAN> because part of <SPAN class=MATH><IMG height=37 alt="$ SO(3)$" src="http://planning.cs.uiuc.edu/img71.gif" width=56 align=middle border=0></SPAN> is missing. 
<P>Another complication is that the DH parameterization<A name=12481></A> of Section <A href="http://planning.cs.uiuc.edu/node109.html#sec:3dchain">3.3.2</A> is designed to facilitate the assignment of coordinate frames and computation of transformations, but it neglects considerations of topology. For example, a common approach to representing a spherical robot wrist is to make three zero-length links that each behave as a revolute joint. If the range of motion is limited, this might not cause problems, but in general the problems would be similar to using yaw, pitch, and roll to represent <SPAN class=MATH><IMG height=37 alt="$ SO(3)$" src="http://planning.cs.uiuc.edu/img71.gif" width=56 align=middle border=0></SPAN>. There may be multiple ways to express the same arm configuration. 
<P>Several examples are given below to help in determining C-spaces for chains and trees of bodies. Suppose <!-- MATH
 ${\cal W}= {\mathbb{R}}^2$
 --><SPAN class=MATH><IMG height=20 alt="$ {\cal W}= {\mathbb{R}}^2$" src="http://planning.cs.uiuc.edu/img217.gif" width=72 align=bottom border=0></SPAN>, and there is a chain of <SPAN class=MATH><IMG height=17 alt="$ n$" src="http://planning.cs.uiuc.edu/img57.gif" width=16 align=bottom border=0></SPAN> bodies that are attached by revolute joints. Suppose that the first joint is capable of rotation only about a fixed point (e.g., it spins around a nail). If each joint has the full range of motion <!-- MATH
 $\theta_i \in [0,2 \pi)$
 --><SPAN class=MATH><IMG height=37 alt="$ \theta_i \in [0,2 \pi)$" src="http://planning.cs.uiuc.edu/img1335.gif" width=93 align=middle border=0></SPAN>, the C-space is 
<P></P>
<DIV class=mathdisplay align=center><!-- MATH
 \begin{equation}
{\cal C}= {\mathbb{S}}^1 \times {\mathbb{S}}^1 \times \cdots \times {\mathbb{S}}^1 = {\mathbb{T}}^n.
\end{equation}
 -->
<TABLE class=equation cellPadding=0 width="100%" align=center>
<TBODY>
<TR vAlign=center>
<TD noWrap align=middle><SPAN class=MATH><IMG height=40 alt="$\displaystyle {\cal C}= {\mathbb{S}}^1 \times {\mathbb{S}}^1 \times \cdots \times {\mathbb{S}}^1 = {\mathbb{T}}^n.$" src="http://planning.cs.uiuc.edu/img1336.gif" width=240 align=middle border=0></SPAN></TD>
<TD class=eqno noWrap align=right width=10>(<SPAN class=arabic>4</SPAN>.<SPAN class=arabic>33</SPAN>)</TD></TR></TBODY></TABLE></DIV><BR clear=all>
<P></P>However, if each joint is restricted to <!-- MATH
 $\theta_i \in (-\pi/2,\pi/2)$
 --><SPAN class=MATH><IMG height=37 alt="$ \theta_i \in (-\pi/2,\pi/2)$" src="http://planning.cs.uiuc.edu/img1337.gif" width=140 align=middle border=0></SPAN>, then <!-- MATH
 ${\cal C}= {\mathbb{R}}^n$
 --><SPAN class=MATH><IMG height=17 alt="$ {\cal C}= {\mathbb{R}}^n$" src="http://planning.cs.uiuc.edu/img1338.gif" width=64 align=bottom border=0></SPAN>. If any transformation in <SPAN class=MATH><IMG height=37 alt="$ SE(2)$" src="http://planning.cs.uiuc.edu/img45.gif" width=56 align=middle border=0></SPAN> can be applied to <!-- MATH
 ${\cal A}_1$
 --><SPAN class=MATH><IMG height=34 alt="$ {\cal A}_1$" src="http://planning.cs.uiuc.edu/img846.gif" width=28 align=middle border=0></SPAN>, then an additional <!-- MATH
 ${\mathbb{R}}^2$
 --><SPAN class=MATH><IMG height=19 alt="$ {\mathbb{R}}^2$" src="http://planning.cs.uiuc.edu/img10.gif" width=26 align=bottom border=0></SPAN> is needed. In the case of restricted joint motions, this yields <!-- MATH
 ${\mathbb{R}}^{n+2}$
 --><SPAN class=MATH><IMG height=19 alt="$ {\mathbb{R}}^{n+2}$" src="http://planning.cs.uiuc.edu/img1339.gif" width=45 align=bottom border=0></SPAN>. If the joints can achieve any orientation, then <!-- MATH
 ${\cal C}= {\mathbb{R}}^2 \times {\mathbb{T}}^n$
 --><SPAN class=MATH><IMG height=38 alt="$ {\cal C}= {\mathbb{R}}^2 \times {\mathbb{T}}^n$" src="http://planning.cs.uiuc.edu/img1340.gif" width=108 align=middle border=0></SPAN>. If there are prismatic joints, then each joint contributes <!-- MATH
 ${\mathbb{R}}$
 --><SPAN class=MATH><IMG height=17 alt="$ {\mathbb{R}}$" src="http://planning.cs.uiuc.edu/img101.gif" width=19 align=bottom border=0></SPAN> to the C-space. 
<P>Recall from Figure <A href="http://planning.cs.uiuc.edu/node109.html#fig:joints">3.12</A> that for <!-- MATH
 ${\cal W}= {\mathbb{R}}^3$
 --><SPAN class=MATH><IMG height=20 alt="$ {\cal W}= {\mathbb{R}}^3$" src="http://planning.cs.uiuc.edu/img640.gif" width=72 align=bottom border=0></SPAN> there are six different kinds of joints. The cases of revolute and prismatic joints behave the same as for <!-- MATH
 ${\cal W}= {\mathbb{R}}^2$
 --><SPAN class=MATH><IMG height=20 alt="$ {\cal W}= {\mathbb{R}}^2$" src="http://planning.cs.uiuc.edu/img217.gif" width=72 align=bottom border=0></SPAN>. Each screw joint contributes <!-- MATH
 ${\mathbb{R}}$
 --><SPAN class=MATH><IMG height=17 alt="$ {\mathbb{R}}$" src="http://planning.cs.uiuc.edu/img101.gif" width=19 align=bottom border=0></SPAN>. A cylindrical joint contributes <!-- MATH
 ${\mathbb{R}}\times {\mathbb{S}}^1$
 --><SPAN class=MATH><IMG height=38 alt="$ {\mathbb{R}}\times {\mathbb{S}}^1$" src="http://planning.cs.uiuc.edu/img1101.gif" width=60 align=middle border=0></SPAN>, unless its rotational motion is restricted. A planar joint contributes <!-- MATH
 ${\mathbb{R}}^2 \times {\mathbb{S}}^1$
 --><SPAN class=MATH><IMG height=38 alt="$ {\mathbb{R}}^2 \times {\mathbb{S}}^1$" src="http://planning.cs.uiuc.edu/img1239.gif" width=68 align=middle border=0></SPAN> because any transformation in <SPAN class=MATH><IMG height=37 alt="$ SE(2)$" src="http://planning.cs.uiuc.edu/img45.gif" width=56 align=middle border=0></SPAN> is possible. If its rotational motions are restricted, then it contributes <!-- MATH
 ${\mathbb{R}}^3$
 --><SPAN class=MATH><IMG height=19 alt="$ {\mathbb{R}}^3$" src="http://planning.cs.uiuc.edu/img23.gif" width=26 align=bottom border=0></SPAN>. Finally, a spherical joint can theoretically contribute <!-- MATH
 ${\mathbb{RP}}^3$
 --><SPAN class=MATH><IMG height=21 alt="$ {\mathbb{RP}}^3$" src="http://planning.cs.uiuc.edu/img1111.gif" width=38 align=bottom border=0></SPAN>. In practice, however, this rarely occurs. It is more likely to contribute <!-- MATH
 ${\mathbb{R}}^2 \times {\mathbb{S}}^1$
 --><SPAN class=MATH><IMG height=38 alt="$ {\mathbb{R}}^2 \times {\mathbb{S}}^1$" src="http://planning.cs.uiuc.edu/img1239.gif" width=68 align=middle border=0></SPAN> or <!-- MATH
 ${\mathbb{R}}^3$
 --><SPAN class=MATH><IMG height=19 alt="$ {\mathbb{R}}^3$" src="http://planning.cs.uiuc.edu/img23.gif" width=26 align=bottom border=0></SPAN> after restrictions are imposed. Note that if the first joint is a free-floating body, then it contributes <!-- MATH
 ${\mathbb{R}}^3 \times {\mathbb{RP}}^3$
 --><SPAN class=MATH><IMG height=41 alt="$ {\mathbb{R}}^3 \times {\mathbb{RP}}^3$" src="http://planning.cs.uiuc.edu/img1341.gif" width=82 align=middle border=0></SPAN>. 
<P><A name=12487></A>
<P><A name=12488></A>
<P>Kinematic trees can be handled in the same way as kinematic chains. One issue that has not been mentioned is that there might be collisions between the links. This has been ignored up to this point, but obviously this imposes very complicated restrictions. The concepts from Section <A href="http://planning.cs.uiuc.edu/node156.html#sec:col-reg">4.3</A> can be applied to handle this case and the placement of additional obstacles in <SPAN class=MATH><IMG height=18 alt="$ {\cal W}$" src="http://planning.cs.uiuc.edu/img22.gif" width=25 align=bottom border=0></SPAN>. Reasoning about these kinds of restrictions and the path connectivity of the resulting space is indeed the main point of motion planning.