<P style="MARGIN: 0cm 0cm 18pt"><SPAN lang=EN-US style="FONT-SIZE: 14pt; mso-bidi-font-size: 10.0pt"><FONT face=&#23435;&#20307;>If shorthand was the extent of what CMake offered, it wouldn&#8217;t offer much advantage over straight Makefiles. But CMake also gives you full control over any options your program may need. As an example, consider a project that optionally includes a component that communiates via USB and allows the user, at compile time, to specify whether to include that component or not. The CMakeLists.txt file to do that looks like this:</FONT></SPAN></P><PRE style="mso-line-height-alt: 12.0pt"><SPAN lang=EN-US style="FONT-SIZE: 14pt; mso-bidi-font-size: 10.0pt"><FONT class=clozed face=&#23435;&#20307;>PROJECT(myproject)</FONT></SPAN></PRE><PRE style="mso-line-height-alt: 12.0pt"><SPAN lang=EN-US style="FONT-SIZE: 14pt; mso-bidi-font-size: 10.0pt"><FONT class=clozed face=&#23435;&#20307;>OPTION(WITH_USB "Include our USB component" OFF)</FONT></SPAN></PRE><PRE style="mso-line-height-alt: 12.0pt"><SPAN lang=EN-US style="FONT-SIZE: 14pt; mso-bidi-font-size: 10.0pt"><FONT class=clozed face=&#23435;&#20307;>SET(SRCS file1.c file2.c file3.c)</FONT></SPAN></PRE><PRE style="mso-line-height-alt: 12.0pt"><SPAN lang=EN-US style="FONT-SIZE: 14pt; mso-bidi-font-size: 10.0pt"><FONT class=clozed face=&#23435;&#20307;>IF(WITH_USB)</FONT></SPAN></PRE><PRE style="mso-line-height-alt: 12.0pt"><SPAN lang=EN-US style="FONT-SIZE: 14pt; mso-bidi-font-size: 10.0pt"><FONT face=&#23435;&#20307;><FONT class=clozed><SPAN style="mso-spacerun: yes">&nbsp; </SPAN>SET(SRCS ${SRCS} usbfile1.c usbfile2.c)</FONT></FONT></SPAN></PRE><PRE style="mso-line-height-alt: 12.0pt"><SPAN lang=EN-US style="FONT-SIZE: 14pt; mso-bidi-font-size: 10.0pt"><FONT class=clozed face=&#23435;&#20307;>ENDIF(WITH_USB)</FONT></SPAN></PRE><PRE style="mso-line-height-alt: 12.0pt"><SPAN lang=EN-US style="FONT-SIZE: 14pt; mso-bidi-font-size: 10.0pt"><FONT class=clozed face=&#23435;&#20307;>ADD_EXECUTABLE(myproject ${SRCS})</FONT></SPAN></PRE>
<P style="MARGIN: 0cm 0cm 18pt"><SPAN lang=EN-US style="FONT-SIZE: 14pt; mso-bidi-font-size: 10.0pt"><FONT face=&#23435;&#20307;>The OPTION(...) line creates a parameter WITH_USB and set its default value to OFF. CMake also includes a help string to describe what the option does. Based on the value of WITH_USB, the variable SRCS either includes or excludes the two USB-related files usbfile1.c and usbfile2.c. SRCS is then passed to the ADD_EXECUTABLE call to define the program&#8217;s source files. To include USB support, simply enable WITH_USB like this:</FONT></SPAN></P><PRE style="mso-line-height-alt: 12.0pt"><SPAN lang=EN-US style="FONT-SIZE: 14pt; mso-bidi-font-size: 10.0pt"><FONT face=&#23435;&#20307;><SPAN class=cloze>[...]</SPAN></FONT></SPAN></PRE>