<SPAN lang=EN-US style="FONT-SIZE: 15.5pt; mso-bidi-font-size: 12.0pt">Building an Installer (Step 6)</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 15.5pt; mso-bidi-font-size: 12.0pt">Next suppose that we want to distribute our project to other people so that they can use it. We want to provide both binary and source distributions on a variety of platforms. This is a little different from the instal we did previously in section Installing and Testing (Step 3), where we were installing the binaries that we had built from the source code. In this example we will be building installation packages that support binary installations and package management features as found in cygwin, debian, RPMs etc. To accomplish this we will use CPack to create platform specific installers as described in Chapter Packaging with CPack. Specifically we need to add a few lines to the bottom of our toplevel CMakeLists.txt file.</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 15.5pt; mso-bidi-font-size: 12.0pt"># build a CPack driven installer package</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 15.5pt; mso-bidi-font-size: 12.0pt">include (InstallRequiredSystemLibraries)</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 15.5pt; mso-bidi-font-size: 12.0pt">set (CPACK_RESOURCE_FILE_LICENSE<SPAN style="mso-spacerun: yes">&nbsp; </SPAN></SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 15.5pt; mso-bidi-font-size: 12.0pt"><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>"${CMAKE_CURRENT_SOURCE_DIR}/License.txt")</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 15.5pt; mso-bidi-font-size: 12.0pt">set (CPACK_PACKAGE_VERSION_MAJOR "${Tutorial_VERSION_MAJOR}")</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 15.5pt; mso-bidi-font-size: 12.0pt">set (CPACK_PACKAGE_VERSION_MINOR "${Tutorial_VERSION_MINOR}")</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 15.5pt; mso-bidi-font-size: 12.0pt">include (CPack)</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 15.5pt; mso-bidi-font-size: 12.0pt">That is all there is to it. We start by including InstallRequiredSystemLibraries. This module will include any runtime libraries that are needed by the project for the current platform. Next we set some CPack variables to where we have stored the license and version information for this project. The version information makes use of the variables we set earlier in this tutorial. Finally we include the CPack module which will use these variables and some other properties of the system you are on to setup an installer.</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 15.5pt; mso-bidi-font-size: 12.0pt">The next step is to build the project in the usual manner and then run CPack on it. To build a binary distribution you would run:</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 15.5pt; mso-bidi-font-size: 12.0pt">cpack -C CPackConfig.cmake</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 15.5pt; mso-bidi-font-size: 12.0pt">To create a source distribution you would type</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 15.5pt; mso-bidi-font-size: 12.0pt">cpack -C CPackSourceConfig.cmake</SPAN></P>
<p><SPAN lang=EN-US style="FONT-SIZE: 15.5pt; mso-bidi-font-size: 12.0pt"><BR style="mso-special-character: line-break"><BR style="mso-special-character: line-break"><A name=s7></A></SPAN>