<H3 class=section>15.4 <CODE>DESTDIR</CODE>: Support for Staged Installs</H3>
<P><A name=index-DESTDIR-1088></A><A name=index-staged-installs-1089></A><A name=index-installations_002c-staged-1090></A><CODE>DESTDIR</CODE> is a variable prepended to each installed target file, like this: <PRE class=example>     $(INSTALL_PROGRAM) foo $(DESTDIR)$(bindir)/foo
     $(INSTALL_DATA) libfoo.a $(DESTDIR)$(libdir)/libfoo.a
</PRE>
<P>The <CODE>DESTDIR</CODE> variable is specified by the user on the <CODE>make</CODE> command line as an absolute file name. For example: <PRE class=example>     make DESTDIR=/tmp/stage install
</PRE>
<P class=noindent><CODE>DESTDIR</CODE> should be supported only in the <CODE>install*</CODE> and <CODE>uninstall*</CODE> targets, as those are the only targets where it is useful. 
<P>If your installation step would normally install <SAMP><SPAN class=file>/usr/local/bin/foo</SPAN></SAMP> and <SAMP><SPAN class=file>/usr/local/lib/libfoo.a</SPAN></SAMP>, then an installation invoked as in the example above would install <SAMP><SPAN class=file>/tmp/stage/usr/local/bin/foo</SPAN></SAMP> and <SAMP><SPAN class=file>/tmp/stage/usr/local/lib/libfoo.a</SPAN></SAMP> instead. 
<P>Prepending the variable <CODE>DESTDIR</CODE> to each target in this way provides for <DFN>staged installs</DFN>, where the installed files are not placed directly into their expected location but are instead copied into a temporary location (<CODE>DESTDIR</CODE>). However, installed files maintain their relative directory structure and any embedded file names will not be modified. 
<P>You should not set the value of <CODE>DESTDIR</CODE> in your <SAMP><SPAN class=file>Makefile</SPAN></SAMP> at all; then the files are installed into their expected locations by default. Also, specifying <CODE>DESTDIR</CODE> should not change the operation of the software in any way, so its value should not be included in any file contents. 
<P><CODE>DESTDIR</CODE> support is commonly used in package creation. It is also helpful to users who want to understand what a given package will install where, and to allow users who don't normally have permissions to install into protected areas to build and install before gaining those permissions. Finally, it can be useful with tools such as <CODE>stow</CODE>, where code is installed in one place but made to appear to be installed somewhere else using symbolic links or special mount operations. So, we strongly recommend GNU packages support <CODE>DESTDIR</CODE>, though it is not an absolute requirement.