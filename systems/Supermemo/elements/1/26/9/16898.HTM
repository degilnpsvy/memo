Accessing the Sequencer, Graphics, and CRT Controller Registers</B><SPAN class=Apple-converted-space>&nbsp;</SPAN><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; These registers are accessed in an indexed fashion. Each of the three have two unique read/write ports assigned to them. The first port is the Address Register for the group. The other is the Data Register for the group. By writing a byte to the Address Register equal to the index of the particular sub-register you wish to access, one can address the data pointed to by that index by reading and writing the Data Register. The current value of the index can be read by reading the Address Register. It is best to save this value and restore it after writing data, particularly so in an interrupt routine because the interrupted process may be in the middle of writing to the same register when the interrupt occurred. To read and write a data register in one of these register groups perform the following procedure: 
<P></P>
<P>1. Input the value of the Address Register and save it for step 6 </P>
<P>2. Output the index of the desired Data Register to the Address Register. </P>
<P>3. Read the value of the Data Register and save it for later restoration upon termination, if needed. </P>
<P>4. If writing, modify the value read in step 3, making sure to mask off bits not being modified. </P>
<P>5. If writing, write the new value from step 4 to the Data register. </P>
<P>6. Write the value of Address register saved in step 1 to the Address Register. </P>
<P>If you are paranoid, then you might want to read back and compare the bytes written in step 2, 5, and 6 as in the Paranoia section above. Note that certain CRTC registers can be protected from read or write access for compatibility with programs written prior to the VGA's existence. This protection is controlled via the Enable Vertical Retrace Access and CRTC Registers Protect Enable fields. Ensuring that access is not prevented even if your card does not normally protect these registers makes your