<H3 class=docSection1Title>6.7. Naming, Saving, and Executing Your Macros</H3>
<P class=docText>In this section, we'll describe <A name=gnu3-CHP-6-ITERM-2275></A><A name=gnu3-CHP-6-ITERM-2276></A><A name=gnu3-CHP-6-ITERM-2277></A><A name=gnu3-CHP-6-ITERM-2278></A><A name=gnu3-CHP-6-ITERM-2279></A><A name=gnu3-CHP-6-ITERM-2280></A>how to save macros so that you can use them in different editing sessions. To save a macro, bind it permanently to a key, and load it in subsequent Emacs sessions, follow these steps:</P>
<DIV style="FONT-WEIGHT: bold">
<OL class=docList type=1>
<LI>
<DIV style="FONT-WEIGHT: normal">
<P class=docList>Define the macro, if you haven't already.</P></DIV>
<LI>
<DIV style="FONT-WEIGHT: normal">
<P class=docList><FONT class=extract>Type <SPAN class=docEmphBold>C-x C-k n</SPAN> (for <SPAN class=docEmphBold>name-last-kbd-macro</SPAN>). Now type a name for your macro and press <SPAN class=docEmphBold>Enter</SPAN>. A non-Emacs sounding name is best so that Emacs doesn't confuse it with one of its own commands. Once you've executed this command, Emacs remembers the macro for the rest of the editing session. To use it again, type the command <SPAN class=docEmphBold>M-x</SPAN> <SPAN class=docEmphasis>name</SPAN> (where <SPAN class=docEmphasis>name</SPAN> is the name you've chosen). Emacs treats your named macro like one of its own commands; it shows up in completion lists if you press <SPAN class=docEmphBold>Tab</SPAN> after typing a few letters of the name.</FONT></P></DIV>
<LI>
<DIV style="FONT-WEIGHT: normal">
<P class=docList><FONT class=extract>If you want to save the macro definition permanently, you must insert the macro definition into a file. This could be your <SPAN class=docEmphasis>.emacs</SPAN> file or a macro file that you load through your <SPAN class=docEmphasis>.emacs</SPAN> file. Type <SPAN class=docEmphBold>C-x C-f</SPAN> <SPAN class=docEmphasis>filename</SPAN> <SPAN class=docEmphBold>Enter</SPAN> to find the file into which to insert the definition and move to the end of it by typing <SPAN class=docEmphBold>M-&gt;</SPAN>.</FONT></P></DIV>
<LI>
<DIV style="FONT-WEIGHT: normal">
<P class=docList><FONT class=extract>Type <SPAN class=docEmphBold>M-x insert-kbd-macro Enter</SPAN> <SPAN class=docEmphasis>macroname</SPAN> <SPAN class=docEmphBold>Enter</SPAN>. Emacs inserts Lisp code that represents your macro</FONT>.</P></DIV>
<LI>
<DIV style="FONT-WEIGHT: normal">
<P class=docList><FONT class=extract>Add a line to <SPAN class=docEmphasis>.emacs</SPAN> make the key binding permanent. For example, if we called our macro <SPAN class=docEmphBold>transpose-names</SPAN> and bound it to <SPAN class=docEmphBold>C-x C-k T</SPAN>, we would add this line to our <SPAN class=docEmphasis>.emacs</SPAN> file (or other macro definition file):</FONT></P><PRE><FONT class=extract>(global-set-key "\C-x\C-kT" 'transpose-names)
</FONT></PRE><BR></DIV>
<LI>
<DIV style="FONT-WEIGHT: normal">
<P class=docList><FONT class=extract>If you save the macro in some other file, it won't be loaded automatically. For example, let's say that you have defined a macro called <SPAN class=docEmphBold>transpose-names</SPAN> and placed it in the file <SPAN class=docEmphasis>html.macs</SPAN>, in the directory <SPAN class=docEmphasis>~/macros</SPAN>. Add this line to your <SPAN class=docEmphasis>.emacs</SPAN> file to load your macros automatically:</FONT></P><PRE><FONT class=extract> (load-file "~/macros/html.macs")</FONT>
</PRE><BR></DIV>
<LI>
<DIV style="FONT-WEIGHT: normal">
<P class=docList>Save the <SPAN class=docEmphasis>.emacs</SPAN> file and, if different, the file in which you inserted your macro. Exit and restart Emacs. You can now execute this macro either by typing <SPAN class=docEmphBold>M-x transpose-names Enter</SPAN> or by pressing <SPAN class=docEmphBold>C-x C-k T</SPAN>.</P></DIV></LI></OL></DIV>