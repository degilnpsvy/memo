<H3 class=docSection1Title>7.5. Rectangle Editing</H3>
<P class=docText>When you mark regions to <A name=gnu3-CHP-7-ITERM-2361></A><A name=gnu3-CHP-7-ITERM-2362></A><A name=gnu3-CHP-7-ITERM-2363></A>move or delete, they always cover the full width of the window. Editing by region is fine for most of the work that you do in Emacs. But what if you wanted to edit a table? Regions cover the full width of the window, so they can't handle columns. Emacs offers another way to define areas to delete, copy, and move around: using <SPAN class=docEmphasis>rectangles</SPAN>. Rectangles are just what they sound like: rectangular areas that you define and manipulate using special rectangle editing commands. Editing with rectangles is useful whenever you want to move or delete vertical columns of information; for instance, moving a column of a table or rearranging fields in a dataset.</P>
<P class=docText>For example, let's say you want to edit the following table, moving the "Hours" column to the right side. There's no way to do this using regions, but it's easy to do if you learn some rectangle editing commands.</P><A name=ch07-34-fm2xml></A>
<TABLE border=1 rules=all cellSpacing=0 cellPadding=4 width="100%">
<COLGROUP>
<COL></COLGROUP>
<TBODY>
<TR>
<TD class=docTableCell>
<P class=docText>Initial state:</P></TD></TR>
<TR>
<TD class=docTableCell>
<P class=docText><IMG border=0 alt="" src="file:///D:/&#25105;&#30340;&#37239;&#30424;/&#24037;&#20316;&#30446;&#24405;/Now/learning-gnu-emacs-3rd/0596006489/images/0596006489/figs/ge3_ch07scrn24.gif" width=425 height=174> </P></TD></TR>
<TR>
<TD class=docTableCell>
<P class=docText>A flextime schedule.</P></TD></TR></TBODY></TABLE><BR>
<P class=docText><FONT class=extract>You define a rectangle the same way you define a region; the commands you use after marking the area tell Emacs whether you want to work with a region or a rectangle.</FONT> (This is a good time to let go of your mouse and use keyboard commands for marking the text. Highlighting remains horizontal when you're working with rectangles and will only confuse you as you begin to think rectangularly. Of course, there's nothing wrong with using the mouse to move the cursor quickly; just don't use it to highlight text.)</P>
<P class=docText><FONT class=extract>Before we start working with these columns, select the buffer with <SPAN class=docEmphBold>C-x h</SPAN> and untabify it by typing <SPAN class=docEmphBold>M-x untabify</SPAN>. Rectangle editing works best with files that do not contain tab characters.</FONT></P>
<P class=docText><FONT class=extract>To define a rectangle, move the cursor to the upper-left corner and set the mark by pressing <SPAN class=docEmphBold>C-Space</SPAN>, then move the cursor to the lower-right corner of the rectangle. Once you're at the lower-right corner of the rectangle, move one character farther. Why move one character farther? Remember that when you define a region, the character that the cursor is on <SPAN class=docEmphasis>isn't</SPAN> part of the region. (The character that the mark is on <SPAN class=docEmphasis>is</SPAN> part of the region.)</FONT></P>
<P class=docText>Let's define a rectangle that covers the second column of our table.</P><A name=ch07-35-fm2xml></A>
<TABLE border=1 rules=all cellSpacing=0 cellPadding=4 width="100%">
<COLGROUP>
<COL></COLGROUP>
<TBODY>
<TR>
<TD class=docTableCell>
<P class=docText>Move to the <TT>H</TT> in <TT>Hours</TT> and type <SPAN class=docEmphBold>C-Space</SPAN></P></TD></TR>
<TR>
<TD class=docTableCell>
<P class=docText><IMG border=0 alt="" src="file:///D:/&#25105;&#30340;&#37239;&#30424;/&#24037;&#20316;&#30446;&#24405;/Now/learning-gnu-emacs-3rd/0596006489/images/0596006489/figs/ge3_ch07scrn25.gif" width=425 height=174> </P></TD></TR>
<TR>
<TD class=docTableCell>
<P class=docText>The mark is set at the upper-left corner of the rectangle to be moved.</P></TD></TR></TBODY></TABLE><BR><A name=ch07-36-fm2xml></A>
<TABLE border=1 rules=all cellSpacing=0 cellPadding=4 width="100%">
<COLGROUP>
<COL></COLGROUP>
<TBODY>
<TR>
<TD class=docTableCell>
<P class=docText>Move the cursor to the space following the bottom-right corner of the rectangle, the <TT>c</TT> in <TT>chipmunk</TT>.</P></TD></TR>
<TR>
<TD class=docTableCell>
<P class=docText><IMG border=0 alt="" src="file:///D:/&#25105;&#30340;&#37239;&#30424;/&#24037;&#20316;&#30446;&#24405;/Now/learning-gnu-emacs-3rd/0596006489/images/0596006489/figs/ge3_ch07scrn26.gif" width=425 height=174> </P></TD></TR>
<TR>
<TD class=docTableCell>
<P class=docText>The cursor follows the bottom-right corner of the rectangle.</P></TD></TR></TBODY></TABLE><BR>
<P class=docText><FONT class=extract>Now that the rectangle is marked, we want to delete it and then move it. The command to delete a rectangle so you can retrieve it elsewhere is <SPAN class=docEmphBold>C-x</SPAN> <SPAN class=docEmphBold>r</SPAN> <SPAN class=docEmphBold>k</SPAN> (for <SPAN class=docEmphBold>kill-rectangle</SPAN>).</FONT></P><A name=ch07-37-fm2xml></A>
<TABLE border=1 rules=all cellSpacing=0 cellPadding=4 width="100%">
<COLGROUP>
<COL></COLGROUP>
<TBODY>
<TR>
<TD class=docTableCell>
<P class=docText>Type: <SPAN class=docEmphBold>C-x r k</SPAN></P></TD></TR>
<TR>
<TD class=docTableCell>
<P class=docText><IMG border=0 alt="" src="file:///D:/&#25105;&#30340;&#37239;&#30424;/&#24037;&#20316;&#30446;&#24405;/Now/learning-gnu-emacs-3rd/0596006489/images/0596006489/figs/ge3_ch07scrn27.gif" width=425 height=174> </P></TD></TR>
<TR>
<TD class=docTableCell>
<P class=docText>The rectangle is deleted; it's in a special rectangle kill buffer.</P></TD></TR></TBODY></TABLE><BR>
<P class=docText>Once again, when you mark a rectangle, you put the cursor on the upper-left corner, set the mark, then move to the lower-right corner of the rectangle and over one more space. Emacs expects rectangles to be rectangles. If necessary, it pads an area with spaces to make up the straight line on the right side.</P>
<P class=docText><FONT class=extract>You can move anywhere on the screen and reinsert the rectangle last killed with the <SPAN class=docEmphBold>yank-rectangle</SPAN> command, <SPAN class=docEmphBold>C-x</SPAN> <SPAN class=docEmphBold>r</SPAN> <SPAN class=docEmphBold>y</SPAN>.</FONT> To put the "Hours" column on the right side of the table, we move the cursor following the cell phone column.</P><A name=ch07-38-fm2xml></A>
<TABLE border=1 rules=all cellSpacing=0 cellPadding=4 width="100%">
<COLGROUP>
<COL></COLGROUP>
<TBODY>
<TR>
<TD class=docTableCell>
<P class=docText>Place the cursor following <TT>Cell</TT> and press <SPAN class=docEmphBold>M-10</SPAN> <SPAN class=docEmphBold>Space</SPAN> to move to a good location to paste the "Hours" column:</P></TD></TR>
<TR>
<TD class=docTableCell>
<P class=docText><IMG border=0 alt="" src="file:///D:/&#25105;&#30340;&#37239;&#30424;/&#24037;&#20316;&#30446;&#24405;/Now/learning-gnu-emacs-3rd/0596006489/images/0596006489/figs/ge3_ch07scrn28.gif" width=425 height=174> </P></TD></TR>
<TR>
<TD class=docTableCell>
<P class=docText>Move the cursor to where we want to reinsert the rectangle.</P></TD></TR></TBODY></TABLE><BR><A name=ch07-39-fm2xml></A>
<TABLE border=1 rules=all cellSpacing=0 cellPadding=4 width="100%">
<COLGROUP>
<COL></COLGROUP>
<TBODY>
<TR>
<TD class=docTableCell>
<P class=docText>Type: <SPAN class=docEmphBold>C-x r y</SPAN></P></TD></TR>
<TR>
<TD class=docTableCell>
<P class=docText><IMG border=0 alt="" src="file:///D:/&#25105;&#30340;&#37239;&#30424;/&#24037;&#20316;&#30446;&#24405;/Now/learning-gnu-emacs-3rd/0596006489/images/0596006489/figs/ge3_ch07scrn29.gif" width=425 height=174> </P></TD></TR>
<TR>
<TD class=docTableCell>
<P class=docText>Emacs inserts the rectangle we killed earlier.</P></TD></TR></TBODY></TABLE><BR>
<P class=docText>Emacs inserts the rectangle exactly where you tell it to. We moved past the cell phone column and then added some space between the cell phone and hours columns. Otherwise, Emacs would have blithely inserted the hours column into the middle of the cell phone column. <FONT class=extract>Note that there's no equivalent of the kill ring for rectangles. You can yank only the most recent rectangle</FONT>.<SUP class=docFootnote><A class=docLink href="file:///D:/&#25105;&#30340;&#37239;&#30424;/&#24037;&#20316;&#30446;&#24405;/Now/learning-gnu-emacs-3rd/0596006489/gnu3-chp-7-sect-5.html#gnu3-chp-7-fnote-4">[4]</A></SUP></P>
<BLOCKQUOTE>
<P class=docFootnote><SUP><A name=gnu3-CHP-7-FNOTE-4>[4]</A></SUP> <FONT class=extract>You can, however, store rectangles in registers, providing the effective equivalent of the kill ring</FONT>. More on this shortly.</P></BLOCKQUOTE>
<P class=docText>Killing and yanking rectangles requires practice. Once you get the hang of the procedure, it is an easy way to edit tables and other column-dependent material.</P>
<P class=docText><FONT class=extract>A few other commands create blank rectangles. For example, let's say we want to put four more spaces between the cell phone and hours columns. To do this, we set the mark, move to the bottom of the column, move forward four spaces, then type <SPAN class=docEmphBold>C-x</SPAN> <SPAN class=docEmphBold>r</SPAN> <SPAN class=docEmphBold>o</SPAN> (for <SPAN class=docEmphBold>open-rectangle</SPAN>). This command inserts a blank rectangle and pushes the remaining text to the right.</FONT></P><A name=ch07-40-fm2xml></A>
<TABLE border=1 rules=all cellSpacing=0 cellPadding=4 width="100%">
<COLGROUP>
<COL></COLGROUP>
<TBODY>
<TR>
<TD class=docTableCell>
<P class=docText>Move the cursor to the <TT>H</TT> in <TT>Hours</TT> and type <SPAN class=docEmphBold>C-Space</SPAN></P></TD></TR>
<TR>
<TD class=docTableCell>
<P class=docText><IMG border=0 alt="" src="file:///D:/&#25105;&#30340;&#37239;&#30424;/&#24037;&#20316;&#30446;&#24405;/Now/learning-gnu-emacs-3rd/0596006489/images/0596006489/figs/ge3_ch07scrn30.gif" width=425 height=174> </P></TD></TR>
<TR>
<TD class=docTableCell>
<P class=docText>Emacs sets the mark at the upper-left corner of the rectangle.</P></TD></TR></TBODY></TABLE><BR>
<P class=docText>Now we need to define the amount of space we want to insert. Move down to the bottom of the rectangle (the "Alvin" line) and then move to the hyphen between <TT>6:00</TT> and <TT>3:00</TT>.</P><A name=ch07-41-fm2xml></A>
<TABLE border=1 rules=all cellSpacing=0 cellPadding=4 width="100%">
<COLGROUP>
<COL></COLGROUP>
<TBODY>
<TR>
<TD class=docTableCell>
<P class=docText>Move the cursor following <TT>6:00</TT>.</P></TD></TR>
<TR>
<TD class=docTableCell>
<P class=docText><IMG border=0 alt="" src="file:///D:/&#25105;&#30340;&#37239;&#30424;/&#24037;&#20316;&#30446;&#24405;/Now/learning-gnu-emacs-3rd/0596006489/images/0596006489/figs/ge3_ch07scrn31.gif" width=425 height=168> </P></TD></TR>
<TR>
<TD class=docTableCell>
<P class=docText>The lower right corner of the rectangle is defined.</P></TD></TR></TBODY></TABLE><BR>
<P class=docText>Finally, type <SPAN class=docEmphBold>C-x</SPAN> <SPAN class=docEmphBold>r</SPAN> <SPAN class=docEmphBold>o</SPAN> to add the new space to the table.</P><A name=ch07-42-fm2xml></A>
<TABLE border=1 rules=all cellSpacing=0 cellPadding=4 width="100%">
<COLGROUP>
<COL></COLGROUP>
<TBODY>
<TR>
<TD class=docTableCell>
<P class=docText>Type <SPAN class=docEmphBold>C-x r o</SPAN></P></TD></TR>
<TR>
<TD class=docTableCell>
<P class=docText><IMG border=0 alt="" src="file:///D:/&#25105;&#30340;&#37239;&#30424;/&#24037;&#20316;&#30446;&#24405;/Now/learning-gnu-emacs-3rd/0596006489/images/0596006489/figs/ge3_ch07scrn32.gif" width=425 height=174> </P></TD></TR>
<TR>
<TD class=docTableCell>
<P class=docText>Emacs inserts a blank rectangle that is four spaces wide. It moves the rest of the table to the right.</P></TD></TR></TBODY></TABLE><BR>
<P class=docText><FONT class=extract>The <SPAN class=docEmphBold>clear-rectangle</SPAN> command wipes out text, leaving a blank rectangle in its place. It's just as though you had erased a column on a blackboard. Like the blackboard column, the text column that is wiped out is gone, not stored in the rectangle kill buffer.</FONT> To continue with our example, let's say that after reviewing the schedule, all those involved agreed that they'd rather not have their cell phones listed.</P><A name=ch07-43-fm2xml></A>
<TABLE border=1 rules=all cellSpacing=0 cellPadding=4 width="100%">
<COLGROUP>
<COL></COLGROUP>
<TBODY>
<TR>
<TD class=docTableCell>
<P class=docText>Move the cursor to the <TT>C</TT> in <TT>Cell</TT> and type <SPAN class=docEmphBold>C-space</SPAN>.</P></TD></TR>
<TR>
<TD class=docTableCell>
<P class=docText><IMG border=0 alt="" src="file:///D:/&#25105;&#30340;&#37239;&#30424;/&#24037;&#20316;&#30446;&#24405;/Now/learning-gnu-emacs-3rd/0596006489/images/0596006489/figs/ge3_ch07scrn33.gif" width=425 height=174> </P></TD></TR>
<TR>
<TD class=docTableCell>
<P class=docText>The upper-left corner of the rectangle to be cleared is marked.</P></TD></TR></TBODY></TABLE><BR><A name=ch07-44-fm2xml></A>
<TABLE border=1 rules=all cellSpacing=0 cellPadding=4 width="100%">
<COLGROUP>
<COL></COLGROUP>
<TBODY>
<TR>
<TD class=docTableCell>
<P class=docText>Move to the space following the last phone number and type: <SPAN class=docEmphBold>C-x r c</SPAN></P></TD></TR>
<TR>
<TD class=docTableCell>
<P class=docText><IMG border=0 alt="" src="file:///D:/&#25105;&#30340;&#37239;&#30424;/&#24037;&#20316;&#30446;&#24405;/Now/learning-gnu-emacs-3rd/0596006489/images/0596006489/figs/ge3_ch07scrn34.gif" width=425 height=174> </P></TD></TR>
<TR>
<TD class=docTableCell>
<P class=docText>The <SPAN class=docEmphBold>clear-rectangle</SPAN> command removes the "Cell Phone" column and leaves a blank space in its place.</P></TD></TR></TBODY></TABLE><BR>
<P class=docText>As you can see, the spacing of our table still isn't perfect; you'd probably want to use the <SPAN class=docEmphBold>delete-rectangle</SPAN> command<SUP class=docFootnote><A class=docLink href="file:///D:/&#25105;&#30340;&#37239;&#30424;/&#24037;&#20316;&#30446;&#24405;/Now/learning-gnu-emacs-3rd/0596006489/gnu3-chp-7-sect-5.html#gnu3-chp-7-fnote-5">[5]</A></SUP> to delete the extra space between the second and the third columns. <FONT class=extract>To delete the blank space without storing it, start by moving the cursor to the space following the longest email address and press <SPAN class=docEmphBold>C-Space</SPAN> to set the mark, then move to the opposite corner of the box you want to delete and type <SPAN class=docEmphBold>C-x</SPAN> <SPAN class=docEmphBold>r</SPAN> <SPAN class=docEmphBold>d</SPAN>.</FONT></P>
<BLOCKQUOTE>
<P class=docFootnote><SUP><A name=gnu3-CHP-7-FNOTE-5>[5]</A></SUP> Like all Emacs delete commands, <SPAN class=docEmphBold>delete-rectangle</SPAN> doesn't store what you delete in the kill ring.</P></BLOCKQUOTE><A name=ch07-45-fm2xml></A>
<TABLE border=1 rules=all cellSpacing=0 cellPadding=4 width="100%">
<COLGROUP>
<COL></COLGROUP>
<TBODY>
<TR>
<TD class=docTableCell>
<P class=docText>On the header line, move to the column after the longest email address and press <SPAN class=docEmphBold>C-Space</SPAN></P></TD></TR>
<TR>
<TD class=docTableCell>
<P class=docText><IMG border=0 alt="" src="file:///D:/&#25105;&#30340;&#37239;&#30424;/&#24037;&#20316;&#30446;&#24405;/Now/learning-gnu-emacs-3rd/0596006489/images/0596006489/figs/ge3_ch07scrn35.gif" width=425 height=174> </P></TD></TR>
<TR>
<TD class=docTableCell>
<P class=docText>The upper-left corner of the rectangle to be deleted is marked.</P></TD></TR></TBODY></TABLE><BR><A name=ch07-46-fm2xml></A>
<TABLE border=1 rules=all cellSpacing=0 cellPadding=4 width="100%">
<COLGROUP>
<COL></COLGROUP>
<TBODY>
<TR>
<TD class=docTableCell>
<P class=docText>Move a few spaces before 6:00 on the last line and type <SPAN class=docEmphBold>C-x r d</SPAN></P></TD></TR>
<TR>
<TD class=docTableCell>
<P class=docText><IMG border=0 alt="" src="file:///D:/&#25105;&#30340;&#37239;&#30424;/&#24037;&#20316;&#30446;&#24405;/Now/learning-gnu-emacs-3rd/0596006489/images/0596006489/figs/ge3_ch07scrn36.gif" width=425 height=174> </P></TD></TR>
<TR>
<TD class=docTableCell>
<P class=docText>The <SPAN class=docEmphBold>delete-rectangle</SPAN> command deletes the blank space.</P></TD></TR></TBODY></TABLE><BR>
<P class=docText><FONT class=extract>If you're doing some really fancy table editing, being able to store several rectangles is helpful. That way, you can have every column as a rectangle, as well as having a rectangle for the exact amount of blank space to put between each column. You can store rectangles in registers by typing <SPAN class=docEmphBold>C-x r r</SPAN> <TT><I>r</I></TT> where <TT><I>r</I></TT> is any alphanumeric character, including punctuation. To insert a rectangle you've stored, type <SPAN class=docEmphBold>C-x r i</SPAN> <TT><I>r</I></TT>. Registers don't persist between sessions.</FONT></P>
<P class=docText><A class=docLink href="file:///D:/&#25105;&#30340;&#37239;&#30424;/&#24037;&#20316;&#30446;&#24405;/Now/learning-gnu-emacs-3rd/0596006489/gnu3-chp-7-sect-5.html#gnu3-chp-7-table-5">Table 7-5</A> lists rectangle <A name=gnu3-CHP-7-ITERM-2364></A><A name=gnu3-CHP-7-ITERM-2365></A>commands.</P><A name=gnu3-CHP-7-TABLE-5></A>
<H5 class=docTableTitle><FONT class=extract>Table 7-5. Rectangle commands</FONT></H5>
<TABLE border=1 rules=all cellSpacing=0 cellPadding=4 width="100%">
<COLGROUP><FONT class=extract>
<COL>
<COL>
<COL></FONT></COLGROUP>
<THEAD>
<TR>
<TH class=thead scope=col>
<P class=docText><FONT class=extract>Keystrokes</FONT></P></TH>
<TH class=thead scope=col>
<P class=docText><FONT class=extract>Command name</FONT></P></TH>
<TH class=thead scope=col>
<P class=docText><FONT class=extract>Action</FONT></P></TH></TR></THEAD>
<TBODY>
<TR>
<TD class=docTableCell>
<P class=docText><FONT class=extract><SPAN class=docEmphBold>C-x r k</SPAN> </FONT></P></TD>
<TD class=docTableCell>
<P class=docText><FONT class=extract><SPAN class=docEmphBold>kill-rectangle</SPAN> </FONT></P></TD>
<TD class=docTableCell>
<P class=docText><FONT class=extract>Delete a rectangle and store it.</FONT></P></TD></TR>
<TR>
<TD class=docTableCell>
<P class=docText><FONT class=extract><SPAN class=docEmphBold>C-x r d</SPAN> </FONT></P></TD>
<TD class=docTableCell>
<P class=docText><FONT class=extract><SPAN class=docEmphBold>delete-rectangle</SPAN> </FONT></P></TD>
<TD class=docTableCell>
<P class=docText><FONT class=extract>Delete a rectangle and do not store it.</FONT></P></TD></TR>
<TR>
<TD class=docTableCell>
<P class=docText><FONT class=extract><SPAN class=docEmphBold>C-x r y</SPAN> </FONT></P></TD>
<TD class=docTableCell>
<P class=docText><FONT class=extract><SPAN class=docEmphBold>yank-rectangle</SPAN> </FONT></P></TD>
<TD class=docTableCell>
<P class=docText><FONT class=extract>Insert the last rectangle killed.</FONT></P></TD></TR>
<TR>
<TD class=docTableCell>
<P class=docText><FONT class=extract><SPAN class=docEmphBold>C-x r c</SPAN> </FONT></P></TD>
<TD class=docTableCell>
<P class=docText><FONT class=extract><SPAN class=docEmphBold>clear-rectangle</SPAN> </FONT></P></TD>
<TD class=docTableCell>
<P class=docText><FONT class=extract>Using spaces, blank out the area marked as a rectangle and do not store it.</FONT></P></TD></TR>
<TR>
<TD class=docTableCell>
<P class=docText><FONT class=extract><SPAN class=docEmphBold>C-x r o</SPAN> </FONT></P></TD>
<TD class=docTableCell>
<P class=docText><FONT class=extract><SPAN class=docEmphBold>open-rectangle</SPAN> </FONT></P></TD>
<TD class=docTableCell>
<P class=docText><FONT class=extract>Insert a blank rectangle in the area marked.</FONT></P></TD></TR>
<TR>
<TD class=docTableCell>
<P class=docText><FONT class=extract><SPAN class=docEmphBold>C-x r r r</SPAN> </FONT></P></TD>
<TD class=docTableCell>
<P class=docText><FONT class=extract><SPAN class=docEmphBold>copy-rectangle-to-register</SPAN> </FONT></P></TD>
<TD class=docTableCell>
<P class=docText><FONT class=extract>Copy rectangle to register <TT><I>r</I></TT> (where <TT><I>r</I></TT> is any character) .</FONT></P></TD></TR>
<TR>
<TD class=docTableCell>
<P class=docText><FONT class=extract><SPAN class=docEmphBold>C-x r i r</SPAN> </FONT></P></TD>
<TD class=docTableCell>
<P class=docText><FONT class=extract><SPAN class=docEmphBold>insert-register</SPAN> </FONT></P></TD>
<TD class=docTableCell>
<P class=docText><FONT class=extract>Insert rectangle from register <TT><I>r</I></TT> (where <TT><I>r</I></TT> is any character).</FONT></P></TD></TR>
<TR>
<TD class=docTableCell>
<P class=docText><FONT class=extract>(none)</FONT></P></TD>
<TD class=docTableCell>
<P class=docText><FONT class=extract><SPAN class=docEmphBold>delete-whitespace-rectangle</SPAN> </FONT></P></TD>
<TD class=docTableCell>
<P class=docText><FONT class=extract>If a rectangle includes initial whitespace, deletes it, narrowing rectangle.</FONT></P></TD></TR>
<TR>
<TD class=docTableCell>
<P class=docText><FONT class=extract><FONT class=extract><SPAN class=docEmphBold>C-x r t string Enter</SPAN> </FONT></FONT></P></TD>
<TD class=docTableCell>
<P class=docText><FONT class=extract><FONT class=extract><SPAN class=docEmphBold>string-rectangle</SPAN> </FONT></FONT></P></TD>
<TD class=docTableCell>
<P class=docText><FONT class=extract>Change contents of marked rectangle to <TT><I>string</I></TT> (if <TT><I>string</I></TT> is narrower or wider than rectangle, dimensions change accordingly).</FONT></P></TD></TR>
<TR>
<TD class=docTableCell>
<P class=docText><FONT class=extract>(none)</FONT></P></TD>
<TD class=docTableCell>
<P class=docText><FONT class=extract><SPAN class=docEmphBold>string-insert-rectangle</SPAN> </FONT></P></TD>
<TD class=docTableCell>
<P class=docText><FONT class=extract>Prompts for string and inserts rectangle.</FONT></P></TD></TR></TBODY></TABLE><BR><A name=gnu3-CHP-7-SECT-5.1></A>
<H4 class=docSection2Title>7.5.1 CUA Rectangle Editing</H4>
<P class=docText>If you are familiar with CUA <A name=gnu3-CHP-7-ITERM-2366></A><A name=gnu3-CHP-7-ITERM-2367></A><A name=gnu3-CHP-7-ITERM-2368></A>mode, which is part of Emacs starting with 21.3.5, you may know that it provides cut and paste key sequences familiar to Windows users, as in <SPAN class=docEmphBold>C-x</SPAN> to cut and <SPAN class=docEmphBold>C-v</SPAN> to paste (see <A class=docLink href="file:///D:/&#25105;&#30340;&#37239;&#30424;/&#24037;&#20316;&#30446;&#24405;/Now/learning-gnu-emacs-3rd/0596006489/gnu3-chp-13.html#gnu3-chp-13">Chapter 13</A>). The second most commonly touted feature of CUA mode is its superior rectangle support.</P>
<P class=docText>We've just looked at a myriad of rectangle commands. CUA's rectangle support is far simpler. By learning essentially one command, you can cut and paste rectangles in CUA mode.</P>
<P class=docText>Unfortunately at present, CUA mode support is standard but not nuanced on Emacs 21.3.5. You either take the whole enchilada or you don't. To turn it on, select C-x/C-c/C-v cut and paste (CUA) from the Options menu. If you don't generally like to use the CUA keybindings for cut and paste, you might turn this option on only when you are doing rectangle editing.</P>
<P class=docText>To select a rectangle, type <SPAN class=docEmphBold>Shift-Enter</SPAN>. Emacs starts to highlight in a dark pink color by default. You extend the highlighting with normal cursor movement keys (the mouse does not work at present).</P><A name=ch07-48-fm2xml></A>
<TABLE border=1 rules=all cellSpacing=0 cellPadding=4 width="100%">
<COLGROUP>
<COL></COLGROUP>
<TBODY>
<TR>
<TD class=docTableCell>
<P class=docText>Move to the <TT>C</TT> in <TT>Cell</TT> and type: <SPAN class=docEmphBold>Shift-Enter</SPAN></P></TD></TR>
<TR>
<TD class=docTableCell>
<P class=docText><IMG border=0 alt="" src="file:///D:/&#25105;&#30340;&#37239;&#30424;/&#24037;&#20316;&#30446;&#24405;/Now/learning-gnu-emacs-3rd/0596006489/images/0596006489/figs/ge3_ch07scrn37.gif" width=425 height=217> </P></TD></TR>
<TR>
<TD class=docTableCell>
<P class=docText>The upper-left corner of our rectangle is marked (Windows).</P></TD></TR></TBODY></TABLE><BR>
<P class=docText>The minibuffer displays an array of CUA mode rectangle commands. For now, we'll just mark the rectangle and experiment with one of these commands momentarily.</P><A name=ch07-49-fm2xml></A>
<TABLE border=1 rules=all cellSpacing=0 cellPadding=4 width="100%">
<COLGROUP>
<COL></COLGROUP>
<TBODY>
<TR>
<TD class=docTableCell>
<P class=docText>Move the cursor to the last number in Alvin's phone number.</P></TD></TR>
<TR>
<TD class=docTableCell>
<P class=docText><IMG border=0 alt="" src="file:///D:/&#25105;&#30340;&#37239;&#30424;/&#24037;&#20316;&#30446;&#24405;/Now/learning-gnu-emacs-3rd/0596006489/images/0596006489/figs/ge3_ch07scrn38.gif" width=425 height=217> </P></TD></TR>
<TR>
<TD class=docTableCell>
<P class=docText>The rectangle is marked (Windows).</P></TD></TR></TBODY></TABLE><BR>
<P class=docText>Note that the marked rectangle isn't strictly rectangular in shape. The phone numbers form a true rectangle, but in order to create a rectangle that includes the column header, we need to ask CUA mode to "pad" the rectangle using <SPAN class=docEmphBold>M-p</SPAN>, one of the commands listed in the minibuffer earlier.</P><A name=ch07-50-fm2xml></A>
<TABLE border=1 rules=all cellSpacing=0 cellPadding=4 width="100%">
<COLGROUP>
<COL></COLGROUP>
<TBODY>
<TR>
<TD class=docTableCell>
<P class=docText>Type: <SPAN class=docEmphBold>M-p</SPAN></P></TD></TR>
<TR>
<TD class=docTableCell>
<P class=docText><IMG border=0 alt="" src="file:///D:/&#25105;&#30340;&#37239;&#30424;/&#24037;&#20316;&#30446;&#24405;/Now/learning-gnu-emacs-3rd/0596006489/images/0596006489/figs/ge3_ch07scrn39.gif" width=425 height=217> </P></TD></TR>
<TR>
<TD class=docTableCell>
<P class=docText>The pad command makes this a true rectangle (Windows).</P></TD></TR></TBODY></TABLE><BR>
<P class=docText>We can now cut or paste the rectangle using <SPAN class=docEmphBold>C-x</SPAN> or <SPAN class=docEmphBold>C-v</SPAN> respectively. This is just a taste of the CUA mode rectangle commands. You can explore more of them on your own. We thought you should be aware of this method as an alternative to the more keyboard-intensive rectangle commands that have been part of Emacs for many years.