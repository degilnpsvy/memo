<H5 class=subsubsection style="FONT-FAMILY: 'Droid Serif', 'Lucida Grande', 'Lucida Sans Unicode', 'DejaVu Sans', Verdana, sans-serif; FONT-VARIANT: normal; WHITE-SPACE: normal; TEXT-TRANSFORM: none; WORD-SPACING: 0px; COLOR: rgb(0,0,0); FONT-STYLE: normal; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">14.8.2.5<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>:dir</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>and remote execution</H5>
<P style="WHITE-SPACE: normal; TEXT-TRANSFORM: none; WORD-SPACING: 0px; COLOR: rgb(0,0,0); TEXT-ALIGN: justify; FONT: 15px/19px 'Droid Serif', 'Lucida Grande', 'Lucida Sans Unicode', 'DejaVu Sans', Verdana, sans-serif; MARGIN-TOP: 0px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">While the<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>:file</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>header argument can be used to specify the path to the output file,<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>:dir</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>specifies the default directory during code block execution. If it is absent, then the directory associated with the current buffer is used. In other words, supplying<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>:dir path</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>temporarily has the same effect as changing the current directory with<SPAN class=Apple-converted-space>&nbsp;</SPAN><KBD>M-x cd path RET</KBD>, and then not supplying<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>:dir</CODE>. Under the surface,<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>:dir</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>simply sets the value of the Emacs variable<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>default-directory</CODE>.</P>
<P style="WHITE-SPACE: normal; TEXT-TRANSFORM: none; WORD-SPACING: 0px; COLOR: rgb(0,0,0); TEXT-ALIGN: justify; FONT: 15px/19px 'Droid Serif', 'Lucida Grande', 'Lucida Sans Unicode', 'DejaVu Sans', Verdana, sans-serif; MARGIN-TOP: 0px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">When using<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>:dir</CODE>, you should supply a relative path for file output (e.g.,<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>:file myfile.jpg</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>or<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>:file results/myfile.jpg</CODE>) in which case that path will be interpreted relative to the default directory.</P>
<P style="WHITE-SPACE: normal; TEXT-TRANSFORM: none; WORD-SPACING: 0px; COLOR: rgb(0,0,0); TEXT-ALIGN: justify; FONT: 15px/19px 'Droid Serif', 'Lucida Grande', 'Lucida Sans Unicode', 'DejaVu Sans', Verdana, sans-serif; MARGIN-TOP: 0px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">In other words, if you want your plot to go into a folder called<SPAN class=Apple-converted-space>&nbsp;</SPAN><SAMP><SPAN class=file>Work</SPAN></SAMP><SPAN class=Apple-converted-space>&nbsp;</SPAN>in your home directory, you could use</P><PRE class=example style="OVERFLOW: auto; MARGIN-BOTTOM: 14pt; FONT-SIZE: 14px; BORDER-TOP: medium none; FONT-FAMILY: 'Courier New'; BORDER-RIGHT: medium none; FONT-VARIANT: normal; BORDER-BOTTOM: medium none; TEXT-TRANSFORM: none; WORD-SPACING: 0px; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 12pt; FONT-STYLE: normal; PADDING-TOP: 12pt; PADDING-LEFT: 12pt; BORDER-LEFT: medium none; LETTER-SPACING: normal; PADDING-RIGHT: 12pt; BACKGROUND-COLOR: rgb(238,238,238); TEXT-INDENT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; box-shadow: rgb(136, 136, 136) 5px 5px 5px">     #+BEGIN_SRC R :file myplot.png :dir ~/Work
     matplot(matrix(rnorm(100), 10), type="l")
     #+END_SRC
</PRE>
<H5 class=subsubheading style="FONT-FAMILY: 'Droid Serif', 'Lucida Grande', 'Lucida Sans Unicode', 'DejaVu Sans', Verdana, sans-serif; FONT-VARIANT: normal; WHITE-SPACE: normal; TEXT-TRANSFORM: none; WORD-SPACING: 0px; COLOR: rgb(0,0,0); FONT-STYLE: normal; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">Remote execution</H5>
<P style="WHITE-SPACE: normal; TEXT-TRANSFORM: none; WORD-SPACING: 0px; COLOR: rgb(0,0,0); TEXT-ALIGN: justify; FONT: 15px/19px 'Droid Serif', 'Lucida Grande', 'Lucida Sans Unicode', 'DejaVu Sans', Verdana, sans-serif; MARGIN-TOP: 0px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">A directory on a remote machine can be specified using tramp file syntax, in which case the code will be evaluated on the remote machine. An example is</P><PRE class=example style="OVERFLOW: auto; MARGIN-BOTTOM: 14pt; FONT-SIZE: 14px; BORDER-TOP: medium none; FONT-FAMILY: 'Courier New'; BORDER-RIGHT: medium none; FONT-VARIANT: normal; BORDER-BOTTOM: medium none; TEXT-TRANSFORM: none; WORD-SPACING: 0px; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 12pt; FONT-STYLE: normal; PADDING-TOP: 12pt; PADDING-LEFT: 12pt; BORDER-LEFT: medium none; LETTER-SPACING: normal; PADDING-RIGHT: 12pt; BACKGROUND-COLOR: rgb(238,238,238); TEXT-INDENT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; box-shadow: rgb(136, 136, 136) 5px 5px 5px">     #+BEGIN_SRC R :file plot.png :dir /dand@yakuba.princeton.edu:
     plot(1:10, main=system("hostname", intern=TRUE))
     #+END_SRC
</PRE>
<P style="WHITE-SPACE: normal; TEXT-TRANSFORM: none; WORD-SPACING: 0px; COLOR: rgb(0,0,0); TEXT-ALIGN: justify; FONT: 15px/19px 'Droid Serif', 'Lucida Grande', 'Lucida Sans Unicode', 'DejaVu Sans', Verdana, sans-serif; MARGIN-TOP: 0px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">Text results will be returned to the local Org mode buffer as usual, and file output will be created on the remote machine with relative paths interpreted relative to the remote directory. An Org mode link to the remote file will be created.</P>
<P style="WHITE-SPACE: normal; TEXT-TRANSFORM: none; WORD-SPACING: 0px; COLOR: rgb(0,0,0); TEXT-ALIGN: justify; FONT: 15px/19px 'Droid Serif', 'Lucida Grande', 'Lucida Sans Unicode', 'DejaVu Sans', Verdana, sans-serif; MARGIN-TOP: 0px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">So, in the above example a plot will be created on the remote machine, and a link of the following form will be inserted in the org buffer:</P><PRE class=example style="OVERFLOW: auto; MARGIN-BOTTOM: 14pt; FONT-SIZE: 14px; BORDER-TOP: medium none; FONT-FAMILY: 'Courier New'; BORDER-RIGHT: medium none; FONT-VARIANT: normal; BORDER-BOTTOM: medium none; TEXT-TRANSFORM: none; WORD-SPACING: 0px; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 12pt; FONT-STYLE: normal; PADDING-TOP: 12pt; PADDING-LEFT: 12pt; BORDER-LEFT: medium none; LETTER-SPACING: normal; PADDING-RIGHT: 12pt; BACKGROUND-COLOR: rgb(238,238,238); TEXT-INDENT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; box-shadow: rgb(136, 136, 136) 5px 5px 5px">     [[file:/scp:dand@yakuba.princeton.edu:/home/dand/plot.png][plot.png]]
</PRE>
<P style="WHITE-SPACE: normal; TEXT-TRANSFORM: none; WORD-SPACING: 0px; COLOR: rgb(0,0,0); TEXT-ALIGN: justify; FONT: 15px/19px 'Droid Serif', 'Lucida Grande', 'Lucida Sans Unicode', 'DejaVu Sans', Verdana, sans-serif; MARGIN-TOP: 0px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">Most of this functionality follows immediately from the fact that<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>:dir</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>sets the value of the Emacs variable<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>default-directory</CODE>, thanks to tramp. Those using XEmacs, or GNU Emacs prior to version 23 may need to install tramp separately in order for these features to work correctly.</P>
<H5 class=subsubheading style="FONT-FAMILY: 'Droid Serif', 'Lucida Grande', 'Lucida Sans Unicode', 'DejaVu Sans', Verdana, sans-serif; FONT-VARIANT: normal; WHITE-SPACE: normal; TEXT-TRANSFORM: none; WORD-SPACING: 0px; COLOR: rgb(0,0,0); FONT-STYLE: normal; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">Further points</H5>
<UL style="WHITE-SPACE: normal; TEXT-TRANSFORM: none; WORD-SPACING: 0px; COLOR: rgb(0,0,0); FONT: 15px/19px 'Droid Serif', 'Lucida Grande', 'Lucida Sans Unicode', 'DejaVu Sans', Verdana, sans-serif; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">
<LI style="LIST-STYLE-IMAGE: url(http://orgmode.org/triangle.png); TEXT-ALIGN: justify; MARGIN: 10px">If<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>:dir</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>is used in conjunction with<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>:session</CODE>, although it will determine the starting directory for a new session as expected, no attempt is currently made to alter the directory associated with an existing session.</LI>
<LI style="LIST-STYLE-IMAGE: url(http://orgmode.org/triangle.png); TEXT-ALIGN: justify; MARGIN: 10px"><CODE>:dir</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>should typically not be used to create files during export with<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>:exports results</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>or<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>:exports both</CODE>. The reason is that, in order to retain portability of exported material between machines, during export links inserted into the buffer will<SPAN class=Apple-converted-space>&nbsp;</SPAN><EM>not</EM><SPAN class=Apple-converted-space>&nbsp;</SPAN>be expanded against<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>default directory</CODE>. Therefore, if<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>default-directory</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>is altered using<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>:dir</CODE>, it is probable that the file will be created in a location to which the link does not point.</LI></UL>