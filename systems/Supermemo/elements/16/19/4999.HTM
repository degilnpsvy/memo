<H3 class=section style="FONT-FAMILY: 'Droid Serif', 'Lucida Grande', 'Lucida Sans Unicode', 'DejaVu Sans', Verdana, sans-serif; FONT-VARIANT: normal; WHITE-SPACE: normal; TEXT-TRANSFORM: none; WORD-SPACING: 0px; COLOR: rgb(0,0,0); FONT-STYLE: normal; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">A.5 Context-sensitive commands</H3>
<P style="WHITE-SPACE: normal; TEXT-TRANSFORM: none; WORD-SPACING: 0px; COLOR: rgb(0,0,0); TEXT-ALIGN: justify; FONT: 15px/19px 'Droid Serif', 'Lucida Grande', 'Lucida Sans Unicode', 'DejaVu Sans', Verdana, sans-serif; MARGIN-TOP: 0px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px"><A name=index-context_002dsensitive-commands_002c-hooks-2144></A><A name=index-add_002dons_002c-context_002dsensitive-commands-2145></A><A name=index-org_002dctrl_002dc_002dctrl_002dc_002dhook-2146></A>Org has several commands that act differently depending on context. The most important example is the<SPAN class=Apple-converted-space>&nbsp;</SPAN><KBD>C-c C-c</KBD><SPAN class=Apple-converted-space>&nbsp;</SPAN>(see<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="FONT-WEIGHT: normal; TEXT-DECORATION: none" href="http://orgmode.org/org.html#The-very-busy-C_002dc-C_002dc-key">The very busy C-c C-c key</A>). Also the<SPAN class=Apple-converted-space>&nbsp;</SPAN><KBD>M-cursor</KBD><SPAN class=Apple-converted-space>&nbsp;</SPAN>and<SPAN class=Apple-converted-space>&nbsp;</SPAN><KBD>M-S-cursor</KBD><SPAN class=Apple-converted-space>&nbsp;</SPAN>keys have this property.</P>
<P style="WHITE-SPACE: normal; TEXT-TRANSFORM: none; WORD-SPACING: 0px; COLOR: rgb(0,0,0); TEXT-ALIGN: justify; FONT: 15px/19px 'Droid Serif', 'Lucida Grande', 'Lucida Sans Unicode', 'DejaVu Sans', Verdana, sans-serif; MARGIN-TOP: 0px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">Add-ons can tap into this functionality by providing a function that detects special context for that add-on and executes functionality appropriate for the context. Here is an example from Dan Davison's<SPAN class=Apple-converted-space>&nbsp;</SPAN><SAMP><SPAN class=file>org-R.el</SPAN></SAMP><SPAN class=Apple-converted-space>&nbsp;</SPAN>which allows you to evaluate commands based on the<SPAN class=Apple-converted-space>&nbsp;</SPAN><SAMP><SPAN class=file>R</SPAN></SAMP><SPAN class=Apple-converted-space>&nbsp;</SPAN>programming language<SPAN class=Apple-converted-space>&nbsp;</SPAN><A style="FONT-WEIGHT: normal; TEXT-DECORATION: none" href="http://orgmode.org/org.html#fn-174" name=fnd-174 rel=footnote><SUP>174</SUP></A>. For this package, special contexts are lines that start with<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>#+R:</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>or<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>#+RR:</CODE>.</P><PRE class=lisp style="OVERFLOW: auto; MARGIN-BOTTOM: 14pt; FONT-SIZE: 14px; BORDER-TOP: medium none; FONT-FAMILY: 'Courier New'; BORDER-RIGHT: medium none; FONT-VARIANT: normal; BORDER-BOTTOM: medium none; TEXT-TRANSFORM: none; WORD-SPACING: 0px; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 12pt; FONT-STYLE: normal; PADDING-TOP: 12pt; PADDING-LEFT: 12pt; BORDER-LEFT: medium none; LETTER-SPACING: normal; PADDING-RIGHT: 12pt; BACKGROUND-COLOR: rgb(238,238,238); TEXT-INDENT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; box-shadow: rgb(136, 136, 136) 5px 5px 5px">     (defun org-R-apply-maybe ()
       "Detect if this is context for org-R and execute R commands."
       (if (save-excursion
             (beginning-of-line 1)
             (looking-at "#\\+RR?:"))
           (progn (call-interactively 'org-R-apply)
                  t) ;; to signal that we took action
         nil)) ;; to signal that we did not
     
     (add-hook 'org-ctrl-c-ctrl-c-hook 'org-R-apply-maybe)
</PRE>
<P style="WHITE-SPACE: normal; TEXT-TRANSFORM: none; WORD-SPACING: 0px; COLOR: rgb(0,0,0); TEXT-ALIGN: justify; FONT: 15px/19px 'Droid Serif', 'Lucida Grande', 'Lucida Sans Unicode', 'DejaVu Sans', Verdana, sans-serif; MARGIN-TOP: 0px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">The function first checks if the cursor is in such a line. If that is the case,<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>org-R-apply</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>is called and the function returns<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>t</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>to signal that action was taken, and<SPAN class=Apple-converted-space>&nbsp;</SPAN><KBD>C-c C-c</KBD><SPAN class=Apple-converted-space>&nbsp;</SPAN>will stop looking for other contexts. If the function finds it should do nothing locally, it returns<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>nil</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>so that other, similar functions can have a try.