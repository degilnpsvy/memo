<H4 class=subsection style="FONT-SIZE: 15px; FONT-FAMILY: 'Droid Serif', 'Lucida Grande', 'Lucida Sans Unicode', 'DejaVu Sans', Verdana, sans-serif; FONT-VARIANT: normal; WHITE-SPACE: normal; TEXT-TRANSFORM: none; WORD-SPACING: 0px; COLOR: rgb(0,0,0); FONT-STYLE: normal; LETTER-SPACING: normal; LINE-HEIGHT: 19px; TEXT-INDENT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">10.6.1 Storing searches</H4>
<P style="WHITE-SPACE: normal; TEXT-TRANSFORM: none; WORD-SPACING: 0px; COLOR: rgb(0,0,0); TEXT-ALIGN: justify; FONT: 15px/19px 'Droid Serif', 'Lucida Grande', 'Lucida Sans Unicode', 'DejaVu Sans', Verdana, sans-serif; MARGIN-TOP: 0px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">The first application of custom searches is the definition of keyboard shortcuts for frequently used searches, either creating an agenda buffer, or a sparse tree (the latter covering of course only the current buffer).<SPAN class=Apple-converted-space>&nbsp;</SPAN><A name=index-C_002dc-a-C-1443></A><A name=index-org_002dagenda_002dcustom_002dcommands-1444></A><A name=index-agenda-views_002c-main-example-1445></A><A name=index-agenda_002c-as-an-agenda-views-1446></A><A name=index-agenda_002a_002c-as-an-agenda-views-1447></A><A name=index-tags_002c-as-an-agenda-view-1448></A><A name=index-todo_002c-as-an-agenda-view-1449></A><A name=index-tags_002dtodo-1450></A><A name=index-todo_002dtree-1451></A><A name=index-occur_002dtree-1452></A><A name=index-tags_002dtree-1453></A>Custom commands are configured in the variable<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>org-agenda-custom-commands</CODE>. You can customize this variable, for example by pressing<SPAN class=Apple-converted-space>&nbsp;</SPAN><KBD>C-c a C</KBD>. You can also directly set it with Emacs Lisp in<SPAN class=Apple-converted-space>&nbsp;</SPAN><SAMP><SPAN class=file>.emacs</SPAN></SAMP>. The following example contains all valid agenda views:</P><PRE class=lisp style="OVERFLOW: auto; MARGIN-BOTTOM: 14pt; FONT-SIZE: 14px; BORDER-TOP: medium none; FONT-FAMILY: 'Courier New'; BORDER-RIGHT: medium none; FONT-VARIANT: normal; BORDER-BOTTOM: medium none; TEXT-TRANSFORM: none; WORD-SPACING: 0px; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 12pt; FONT-STYLE: normal; PADDING-TOP: 12pt; PADDING-LEFT: 12pt; BORDER-LEFT: medium none; LETTER-SPACING: normal; PADDING-RIGHT: 12pt; BACKGROUND-COLOR: rgb(238,238,238); TEXT-INDENT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; box-shadow: rgb(136, 136, 136) 5px 5px 5px">     (setq org-agenda-custom-commands
           '(("x" agenda)
             ("y" agenda*)
             ("w" todo "WAITING")
             ("W" todo-tree "WAITING")
             ("u" tags "+boss-urgent")
             ("v" tags-todo "+boss-urgent")
             ("U" tags-tree "+boss-urgent")
             ("f" occur-tree "\\&lt;FIXME\\&gt;")
             ("h" . "HOME+Name tags searches") ; description for "h" prefix
             ("hl" tags "+home+Lisa")
             ("hp" tags "+home+Peter")
             ("hk" tags "+home+Kim")))
</PRE>
<P class=noindent style="WHITE-SPACE: normal; TEXT-TRANSFORM: none; WORD-SPACING: 0px; COLOR: rgb(0,0,0); TEXT-ALIGN: justify; FONT: 15px/19px 'Droid Serif', 'Lucida Grande', 'Lucida Sans Unicode', 'DejaVu Sans', Verdana, sans-serif; MARGIN-TOP: 0px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">The initial string in each entry defines the keys you have to press after the dispatcher command<SPAN class=Apple-converted-space>&nbsp;</SPAN><KBD>C-c a</KBD><SPAN class=Apple-converted-space>&nbsp;</SPAN>in order to access the command. Usually this will be just a single character, but if you have many similar commands, you can also define two-letter combinations where the first character is the same in several combinations and serves as a prefix key<A style="FONT-WEIGHT: normal; TEXT-DECORATION: none" href="http://orgmode.org/org.html#fn-113" name=fnd-113 rel=footnote><SUP>113</SUP></A>. The second parameter is the search type, followed by the string or regular expression to be used for the matching. The example above will therefore define:</P>
<DL style="WHITE-SPACE: normal; TEXT-TRANSFORM: none; WORD-SPACING: 0px; COLOR: rgb(0,0,0); FONT: 15px/19px 'Droid Serif', 'Lucida Grande', 'Lucida Sans Unicode', 'DejaVu Sans', Verdana, sans-serif; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">
<DT style="MARGIN-BOTTOM: 3px; FONT-SIZE: 16px; FONT-FAMILY: 'Courier New'; COLOR: rgb(28,48,48); PADDING-BOTTOM: 3px; PADDING-TOP: 3px; PADDING-LEFT: 3px; PADDING-RIGHT: 3px"><KBD>C-c a x</KBD></DT>
<DD style="MARGIN-BOTTOM: 14pt; TEXT-ALIGN: justify">as a global search for agenda entries planned<A style="FONT-WEIGHT: normal; TEXT-DECORATION: none" href="http://orgmode.org/org.html#fn-114" name=fnd-114 rel=footnote><SUP>114</SUP></A><SPAN class=Apple-converted-space>&nbsp;</SPAN>this week/day.<SPAN class=Apple-converted-space>&nbsp;</SPAN><BR></DD>
<DT style="MARGIN-BOTTOM: 3px; FONT-SIZE: 16px; FONT-FAMILY: 'Courier New'; COLOR: rgb(28,48,48); PADDING-BOTTOM: 3px; PADDING-TOP: 3px; PADDING-LEFT: 3px; PADDING-RIGHT: 3px"><KBD>C-c a y</KBD></DT>
<DD style="MARGIN-BOTTOM: 14pt; TEXT-ALIGN: justify">as a global search for agenda entries planned this week/day, but only those with an hour specification like<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>[h]h:mm</CODE>&#8212;think of them as appointments.<SPAN class=Apple-converted-space>&nbsp;</SPAN><BR></DD>
<DT style="MARGIN-BOTTOM: 3px; FONT-SIZE: 16px; FONT-FAMILY: 'Courier New'; COLOR: rgb(28,48,48); PADDING-BOTTOM: 3px; PADDING-TOP: 3px; PADDING-LEFT: 3px; PADDING-RIGHT: 3px"><KBD>C-c a w</KBD></DT>
<DD style="MARGIN-BOTTOM: 14pt; TEXT-ALIGN: justify">as a global search for TODO entries with &#8216;<SAMP><SPAN class=samp>WAITING</SPAN></SAMP>&#8217; as the TODO keyword<SPAN class=Apple-converted-space>&nbsp;</SPAN><BR></DD>
<DT style="MARGIN-BOTTOM: 3px; FONT-SIZE: 16px; FONT-FAMILY: 'Courier New'; COLOR: rgb(28,48,48); PADDING-BOTTOM: 3px; PADDING-TOP: 3px; PADDING-LEFT: 3px; PADDING-RIGHT: 3px"><KBD>C-c a W</KBD></DT>
<DD style="MARGIN-BOTTOM: 14pt; TEXT-ALIGN: justify">as the same search, but only in the current buffer and displaying the results as a sparse tree<SPAN class=Apple-converted-space>&nbsp;</SPAN><BR></DD>
<DT style="MARGIN-BOTTOM: 3px; FONT-SIZE: 16px; FONT-FAMILY: 'Courier New'; COLOR: rgb(28,48,48); PADDING-BOTTOM: 3px; PADDING-TOP: 3px; PADDING-LEFT: 3px; PADDING-RIGHT: 3px"><KBD>C-c a u</KBD></DT>
<DD style="MARGIN-BOTTOM: 14pt; TEXT-ALIGN: justify">as a global tags search for headlines marked &#8216;<SAMP><SPAN class=samp>:boss:</SPAN></SAMP>&#8217; but not &#8216;<SAMP><SPAN class=samp>:urgent:</SPAN></SAMP>&#8217;<SPAN class=Apple-converted-space>&nbsp;</SPAN><BR></DD>
<DT style="MARGIN-BOTTOM: 3px; FONT-SIZE: 16px; FONT-FAMILY: 'Courier New'; COLOR: rgb(28,48,48); PADDING-BOTTOM: 3px; PADDING-TOP: 3px; PADDING-LEFT: 3px; PADDING-RIGHT: 3px"><KBD>C-c a v</KBD></DT>
<DD style="MARGIN-BOTTOM: 14pt; TEXT-ALIGN: justify">as the same search as<SPAN class=Apple-converted-space>&nbsp;</SPAN><KBD>C-c a u</KBD>, but limiting the search to headlines that are also TODO items<SPAN class=Apple-converted-space>&nbsp;</SPAN><BR></DD>
<DT style="MARGIN-BOTTOM: 3px; FONT-SIZE: 16px; FONT-FAMILY: 'Courier New'; COLOR: rgb(28,48,48); PADDING-BOTTOM: 3px; PADDING-TOP: 3px; PADDING-LEFT: 3px; PADDING-RIGHT: 3px"><KBD>C-c a U</KBD></DT>
<DD style="MARGIN-BOTTOM: 14pt; TEXT-ALIGN: justify">as the same search as<SPAN class=Apple-converted-space>&nbsp;</SPAN><KBD>C-c a u</KBD>, but only in the current buffer and displaying the result as a sparse tree<SPAN class=Apple-converted-space>&nbsp;</SPAN><BR></DD>
<DT style="MARGIN-BOTTOM: 3px; FONT-SIZE: 16px; FONT-FAMILY: 'Courier New'; COLOR: rgb(28,48,48); PADDING-BOTTOM: 3px; PADDING-TOP: 3px; PADDING-LEFT: 3px; PADDING-RIGHT: 3px"><KBD>C-c a f</KBD></DT>
<DD style="MARGIN-BOTTOM: 14pt; TEXT-ALIGN: justify">to create a sparse tree (again: current buffer only) with all entries containing the word &#8216;<SAMP><SPAN class=samp>FIXME</SPAN></SAMP>&#8217;<SPAN class=Apple-converted-space>&nbsp;</SPAN><BR></DD>
<DT style="MARGIN-BOTTOM: 3px; FONT-SIZE: 16px; FONT-FAMILY: 'Courier New'; COLOR: rgb(28,48,48); PADDING-BOTTOM: 3px; PADDING-TOP: 3px; PADDING-LEFT: 3px; PADDING-RIGHT: 3px"><KBD>C-c a h</KBD></DT>
<DD style="MARGIN-BOTTOM: 14pt; TEXT-ALIGN: justify">as a prefix command for a HOME tags search where you have to press an additional key (<KBD>l</KBD>,<SPAN class=Apple-converted-space>&nbsp;</SPAN><KBD>p</KBD><SPAN class=Apple-converted-space>&nbsp;</SPAN>or<SPAN class=Apple-converted-space>&nbsp;</SPAN><KBD>k</KBD>) to select a name (Lisa, Peter, or Kim) as additional tag to match.</DD></DL>
<P style="WHITE-SPACE: normal; TEXT-TRANSFORM: none; WORD-SPACING: 0px; COLOR: rgb(0,0,0); TEXT-ALIGN: justify; FONT: 15px/19px 'Droid Serif', 'Lucida Grande', 'Lucida Sans Unicode', 'DejaVu Sans', Verdana, sans-serif; MARGIN-TOP: 0px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">Note that the<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE>*-tree</CODE><SPAN class=Apple-converted-space>&nbsp;</SPAN>agenda views need to be called from an Org buffer as they operate on the current buffer only.